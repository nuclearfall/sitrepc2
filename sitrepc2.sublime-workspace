{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"region",
				"region_names"
			],
			[
				"defa",
				"default_aliases_field"
			],
			[
				"TRA",
				"TRAINING_HASHTAGS"
			],
			[
				"norn",
				"normalize_location_key"
			],
			[
				"Pr",
				"ProximityAnchor"
			],
			[
				"candidat",
				"locale_candidates"
			],
			[
				"Resol",
				"ResolvedLocation"
			],
			[
				"Ev",
				"EventMention"
			],
			[
				"serai",
				"serialize_resolved"
			],
			[
				"rnd",
				"rndr_ctx_changed"
			],
			[
				"phy",
				"phys_ctx_changed"
			],
			[
				"edpi_",
				"edpi_ctx_changed"
			],
			[
				"prope",
				"property\tNew Property"
			],
			[
				"Cano",
				"CANONICAL"
			],
			[
				"__",
				"__setattr__"
			],
			[
				"imp",
				"imprecise_str"
			],
			[
				"g",
				"geometryChanged"
			],
			[
				"geom",
				"geometryAboutToChange"
			],
			[
				"para",
				"params_kwargs"
			],
			[
				"_fiel",
				"_fields_by_key"
			],
			[
				"proe",
				"property_line_edit"
			],
			[
				"pre",
				"property_line_edit"
			],
			[
				"Proper",
				"property\tNew Property"
			],
			[
				"Ty",
				"TYPE_CHECKING"
			],
			[
				"prop",
				"propertyCommitted"
			],
			[
				"pro",
				"property\tNew Property"
			],
			[
				"U",
				"UnitStrGeometryField"
			],
			[
				"propert",
				"property\tNew Property"
			],
			[
				"Unit",
				"UnitStrGeometry"
			],
			[
				"TYP",
				"TYPE_CHECKING"
			],
			[
				"new_rec",
				"new_rect_y"
			],
			[
				"ele",
				"elem_modview"
			],
			[
				"geome",
				"geometryChanged"
			],
			[
				"proepr",
				"property\tNew Property"
			],
			[
				"opu",
				"populate_pages_with_csv"
			],
			[
				"appl",
				"_apply_base_hints"
			],
			[
				"proper",
				"property\tNew Property"
			],
			[
				"bor",
				"border_width"
			],
			[
				"_ds",
				"_display_dpi"
			],
			[
				"proep",
				"property\tNew Property"
			],
			[
				"setMax",
				"setMaximumWidth"
			],
			[
				"DEF",
				"DEFAULT_INCREMENTS"
			],
			[
				"geomet",
				"geometry_with_px_pos"
			],
			[
				"uni",
				"unit_str_geometry_field"
			],
			[
				"Uni",
				"UnitStrGeometryField"
			],
			[
				"_geom",
				"unit_str_geometry_field"
			],
			[
				"QGraph",
				"QGraphicsObject"
			],
			[
				"bll",
				"bleed_field"
			],
			[
				"corn",
				"corners_field"
			],
			[
				"_bor",
				"_border_color"
			],
			[
				"_obr",
				"_border_color"
			],
			[
				"bord",
				"border_color"
			],
			[
				"QPAIN",
				"QPainterPathStroker"
			],
			[
				"_has_",
				"_has_csv_content"
			],
			[
				"c",
				"component_template"
			],
			[
				"compon",
				"component_template"
			],
			[
				"ov",
				"_overset_hit_rect"
			],
			[
				"ove",
				"overset_hit_rect"
			],
			[
				"lai",
				"laid_out_h"
			],
			[
				"lad",
				"laid_out_w"
			],
			[
				"is_",
				"is_overset_expanded"
			],
			[
				"_is",
				"_is_overset_expanded"
			],
			[
				"_over",
				"_overset_hit_rect"
			],
			[
				"with",
				"geometry_with_px_pos"
			],
			[
				"Al",
				"AlignLeft"
			],
			[
				"Align",
				"AlignHCenter"
			],
			[
				"font",
				"last_font_new_default"
			],
			[
				"remove_t",
				"remove_template_by_pid"
			],
			[
				"bleed",
				"bleed_label"
			],
			[
				"UnitS",
				"UnitStrGeometry"
			],
			[
				"Compon",
				"ComponentTemplate"
			],
			[
				"req",
				"required_next"
			],
			[
				"ComponentTem",
				"ComponentTemplateView"
			],
			[
				"remove_temp",
				"remove_template_from_all_tabs"
			],
			[
				"upd",
				"updateGrid"
			],
			[
				"_pa",
				"_pagination_policy"
			],
			[
				"paginat",
				"pagination_policy"
			],
			[
				"pag",
				"pagination_policy"
			],
			[
				"Clon",
				"CloneComponentToSlotsCommand"
			],
			[
				"pagina",
				"pagination_policy"
			],
			[
				"white",
				"whitespace_in_units"
			],
			[
				"set",
				"setParentItem"
			],
			[
				"Com",
				"ComponentElement"
			],
			[
				"parse",
				"parse_dimension"
			],
			[
				"unre",
				"unreg_target"
			],
			[
				"prot",
				"proto_registry"
			],
			[
				"temp",
				"template_updated"
			],
			[
				"resize_s",
				"resize_start_item_pos"
			],
			[
				"UnitSt",
				"UnitStrGeometry"
			],
			[
				"_dragging_star",
				"_dragging_start_geom"
			],
			[
				"resize_st",
				"resize_start_item_geometry"
			],
			[
				"_dra",
				"_dragging_start_geom"
			],
			[
				"starting",
				"starting_drag_item"
			],
			[
				"elem",
				"elment_changed"
			],
			[
				"unit_st",
				"unit_str_geometry"
			],
			[
				"obje",
				"object_registered"
			],
			[
				"globa",
				"global_get_by_prefix"
			],
			[
				"ori",
				"orientation_changed"
			],
			[
				"_a",
				"_applyOrientation"
			],
			[
				"PAGE",
				"PAGE_SIZES"
			],
			[
				"_regis",
				"_ensure_registered"
			],
			[
				"sele",
				"selected_element"
			],
			[
				"get_all_",
				"get_global_by_type"
			],
			[
				"_handl",
				"_handle_property_change"
			],
			[
				"selec",
				"selected_element"
			],
			[
				"conf",
				"conform_geometry_pos"
			],
			[
				"conform",
				"conform_geometry_rect"
			],
			[
				"conform_geom",
				"conform_geometry_rect"
			],
			[
				"_mar",
				"_margin_top"
			],
			[
				"pagination",
				"pagination_policy"
			],
			[
				"compone",
				"component_template"
			],
			[
				"cand",
				"candidate_item"
			],
			[
				"flag",
				"display_flag_changed"
			],
			[
				"curre",
				"currentItem"
			],
			[
				"get_page",
				"get_page_rect_px"
			],
			[
				"_marg",
				"_margin_right"
			],
			[
				"Resiz",
				"ResizeAndMoveElementCommand"
			],
			[
				"Resize",
				"ResizeTemplateCommand"
			],
			[
				"Change",
				"ChangeGeometryCommand"
			],
			[
				"QGraphcisS",
				"QGraphicsSceneDragDropEvent"
			],
			[
				"_current",
				"_current_template"
			],
			[
				"on",
				"object_name_changed"
			],
			[
				"setM",
				"setMinimumWidth"
			],
			[
				"setMini",
				"setMinimumWidth"
			],
			[
				"C",
				"ComponentTemplate"
			],
			[
				"_al",
				"_alt_drag_first_pass"
			],
			[
				"resize_star",
				"resize_start_scene_pos"
			],
			[
				"eleme",
				"element_changed"
			]
		]
	},
	"buffers":
	[
		{
			"contents": "# src/sitrepc2/ingest/telegram.py\nfrom __future__ import annotations\n\nimport argparse\nimport asyncio\nimport json\nimport logging\nimport os\nimport re\nfrom collections.abc import AsyncIterator\nfrom dataclasses import dataclass\nfrom pathlib import Path\nfrom typing import Final, Any\n\nfrom dotenv import load_dotenv\nfrom telethon import TelegramClient\nfrom telethon.errors import FloodWaitError, RPCError\nfrom telethon.tl import functions, types\n\nfrom datetime import timezone, date, datetime, time, timedelta\nUTC = timezone.utc\n\nlogger = logging.getLogger(__name__)\nload_dotenv()\n\n# How aggressively we translate\nMIN_TRANSLATION_LENGTH = 40  # characters; tune as desired\nTRANSLATE_SLEEP_SECONDS = 5.0  # polite delay between TranslateTextRequest calls\nMAX_TRANSLATION_RETRIES = 5\n\nBASE_RETRY_SLEEP_SECONDS = 5.0  # adjust if needed\n\n# ---------------------------------------------------------------------------\n# Channel config\n# ---------------------------------------------------------------------------\n\n\n@dataclass\nclass ChannelConfig:\n    channel_name: str\n    alias: str\n    channel_lang: str\n    active: bool\n\n    @classmethod\n    def from_json(cls, data: dict[str, Any]) -> ChannelConfig:\n        return cls(\n            channel_name=str(data[\"channel_name\"]),\n            alias=str(data.get(\"alias\", data[\"channel_name\"])),\n            channel_lang=str(data.get(\"channel_lang\", \"en\")),\n            active=bool(data.get(\"active\", False)),\n        )\n\n\n# No more hardcoded channels; this remains as a fallback if you ever want it.\nHARDCODED_CHANNELS: list[ChannelConfig] = []\n\n# Phrases to keep posts for. Edit/extend as needed.\nPHRASE_FILTERS: list[str] = [\n    \"Operational information as of\",\n    \"on progress of special military operation as of\",\n    \"Оперативна інформація станом на\",\n    \"Coordinates:\",\n]\n\nFRONTLINE_KEYWORDS: Final = ()\n\n# Keywords/hashtags to *skip* (training / PR / recruitment) — currently unused\nTRAINING_HASHTAGS: Final = (\n    \"#підготовказсу\",\n    \"#підготовказсу2025\",\n)\n\nTRAINING_PHRASES: Final = (\n    \"щодня вдосконалюють свої навички\",\n    \"навички та вміння\",\n    \"підготовка\",\n    \"тренування\",\n    \"як діяти в «урбані»\",\n    'як діяти в \"урбані\"',\n    \"як врятувати побратима\",\n    \"відділення комунікацій\",\n    \"пресслужба\",\n    \"прес-служба\",\n)\n\nRECRUITMENT_PHRASES: Final = (\n    \"приєднуйтесь до сил оборони\",\n    \"разом переможемо\",\n    \"слава україні\",\n)\n\nTOPONYM_LIKE_RE = re.compile(r\"\\b[А-ЯІЇЄҐ][а-яіїєґ']+(?:,|\\b)\")\n\n\nclass TranslationFailed(RuntimeError):\n    pass\n\n\n# ---------------------------------------------------------------------------\n# Helpers / filters\n# ---------------------------------------------------------------------------\n\n\ndef should_translate_uk_post(text: str) -> bool:\n    blacklist = RECRUITMENT_PHRASES + TRAINING_PHRASES + TRAINING_HASHTAGS\n    lowered = text.lower()\n    return not any(word.lower() in lowered for word in blacklist)\n\n\ndef _matches_phrase_filter(text: str) -> bool:\n    \"\"\"\n    Return True if `text` contains any of the configured phrases (case-insensitive).\n    \"\"\"\n    if not text:\n        return False\n    lowered = text.lower()\n    return any(phrase.lower() in lowered for phrase in PHRASE_FILTERS)\n\n\ndef _passes_word_filters(\n    text: str,\n    blacklist: list[str] | tuple[str, ...] | None,\n    whitelist: list[str] | tuple[str, ...] | None,\n) -> bool:\n    \"\"\"\n    Return True iff text is allowed under blacklist/whitelist rules.\n\n    - blacklist: if any word is present (case-insensitive), reject.\n    - whitelist: if provided, require at least one word be present.\n    \"\"\"\n    lowered = text.lower()\n\n    if blacklist:\n        for word in blacklist:\n            if word.lower() in lowered:\n                return False\n\n    if whitelist:\n        for word in whitelist:\n            if word.lower() in lowered:\n                return True\n        return False\n\n    return True\n\n\ndef _load_telegram_credentials() -> tuple[int, str, str]:\n    \"\"\"\n    Load Telegram API credentials from environment variables.\n\n    Required:\n      - API_ID      (int)\n      - API_HASH    (str)\n\n    Optional:\n      - TELEGRAM_SESSION_NAME (str, defaults to \"sitrepc2\")\n    \"\"\"\n    api_id_raw = os.getenv(\"API_ID\")\n    api_hash = os.getenv(\"API_HASH\")\n\n    if api_id_raw is None or api_hash is None:\n        raise RuntimeError(\"API_ID and API_HASH must be set in the environment\")\n\n    api_id = int(api_id_raw)\n    session_name = os.getenv(\"TELEGRAM_SESSION_NAME\", \"sitrepc2\")\n    return api_id, api_hash, session_name\n\n\ndef _parse_date_range(\n    start_date: str | date,\n    end_date: str | date | None,\n) -> tuple[datetime, datetime]:\n    \"\"\"\n    Accepts either ISO strings or datetime.date objects.\n    Returns an inclusive UTC datetime range.\n    \"\"\"\n    if isinstance(start_date, date):\n        start_d = start_date\n    else:\n        start_d = date.fromisoformat(start_date)\n\n    if end_date is None:\n        end_d = start_d\n    else:\n        if isinstance(end_date, date):\n            end_d = end_date\n        else:\n            end_d = date.fromisoformat(end_date)\n\n    if end_d < start_d:\n        raise ValueError(\"end_date must be >= start_date\")\n\n    start_dt = datetime.combine(start_d, time.min, tzinfo=UTC)\n    end_dt = datetime.combine(end_d, time.max, tzinfo=UTC)\n    return start_dt, end_dt\n\n\ndef _utc_iso(dt: datetime) -> str:\n    \"\"\"\n    Normalize datetime to UTC and format as ISO 8601 with 'Z' suffix.\n    \"\"\"\n    if dt.tzinfo is None:\n        dt = dt.replace(tzinfo=UTC)\n    else:\n        dt = dt.astimezone(UTC)\n    return dt.isoformat().replace(\"+00:00\", \"Z\")\n\n\ndef _output_path_for_today(base_dir: Path | None = None) -> Path:\n    \"\"\"\n    Build today's interim posts path:\n      data/interim/YYYY/YYYY-MM/YYYY-MM-DD/posts.jsonl\n    \"\"\"\n    today = date.today()\n    if base_dir is None:\n        base_dir = Path(\"data\") / \"interim\"\n\n    year_dir = base_dir / f\"{today.year}\"\n    month_dir = year_dir / f\"{today.year}-{today.month:02d}\"\n    day_dir = month_dir / today.isoformat()\n    day_dir.mkdir(parents=True, exist_ok=True)\n    return day_dir / \"posts.jsonl\"\n\n\ndef _ensure_output_path(out_path: Path | None) -> Path:\n    \"\"\"\n    Use the provided out_path, or default to the standard interim path.\n    Ensures parent directories exist.\n    \"\"\"\n    if out_path is None:\n        out_path = _output_path_for_today()\n    out_path.parent.mkdir(parents=True, exist_ok=True)\n    return out_path\n\n\ndef _load_channels_from_file(path: Path) -> list[ChannelConfig]:\n    \"\"\"\n    Load all channels from a JSONL file; do not filter on 'active' here.\n    \"\"\"\n    channels: list[ChannelConfig] = []\n    if not path.exists():\n        return channels\n\n    with path.open(\"r\", encoding=\"utf-8\") as f:\n        for line in f:\n            line = line.strip()\n            if not line:\n                continue\n            data = json.loads(line)\n            cfg = ChannelConfig.from_json(data)\n            channels.append(cfg)\n    return channels\n\n\ndef _normalize_handle(s: str) -> str:\n    \"\"\"\n    Normalize a handle/alias for comparison: strip '@', trim, lowercase.\n    \"\"\"\n    return s.lstrip(\"@\").strip().lower()\n\n\nasync def _iter_messages_in_range(\n    client: TelegramClient,\n    entity: types.TypeInputPeer | str,\n    start_dt: datetime,\n    end_dt: datetime,\n) -> AsyncIterator[types.Message]:\n    \"\"\"\n    Yield messages for `entity` with date in [start_dt, end_dt] (UTC).\n\n    We iterate backwards from (end_dt + 1 second) until we drop below start_dt.\n    \"\"\"\n    offset_dt = end_dt + timedelta(seconds=1)\n    messages = client.iter_messages(entity, offset_date=offset_dt)\n    if not messages:\n        print(\"No messages found. Please check your source entry.\")\n    async for msg in messages:\n        if msg.date is None:\n            continue\n\n        msg_dt = msg.date\n        if msg_dt.tzinfo is None:\n            msg_dt = msg_dt.replace(tzinfo=UTC)\n        else:\n            msg_dt = msg_dt.astimezone(UTC)\n\n        if msg_dt < start_dt:\n            break\n        if msg_dt > end_dt:\n            continue\n\n        yield msg\n\n\nasync def _translate_message_text(\n    client: TelegramClient,\n    entity: types.TypeInputPeer | str,\n    message: types.Message,\n    to_lang: str = \"en\",\n) -> str | None:\n    original_text = (message.message or \"\").strip()\n    if not original_text:\n        return None\n\n    if len(original_text) < MIN_TRANSLATION_LENGTH:\n        logger.debug(\n            \"Skipping translation for short message %s (len=%d < %d)\",\n            message.id,\n            len(original_text),\n            MIN_TRANSLATION_LENGTH,\n        )\n        return None\n\n    last_error: Exception | None = None\n\n    for attempt in range(1, MAX_TRANSLATION_RETRIES + 1):\n        try:\n            logger.debug(\n                \"Translating message %s (attempt %d/%d)\",\n                message.id,\n                attempt,\n                MAX_TRANSLATION_RETRIES,\n            )\n\n            result = await client(\n                functions.messages.TranslateTextRequest(\n                    peer=entity,\n                    id=[message.id],\n                    to_lang=to_lang,\n                )\n            )\n\n            if getattr(result, \"result\", None):\n                translated = result.result[0].text or original_text\n            else:\n                translated = original_text\n\n            return translated\n\n        except FloodWaitError as e:\n            last_error = e\n            required = e.seconds\n\n            logger.warning(\n                \"FloodWaitError for message %s (attempt %d/%d): \"\n                \"%s seconds required by Telegram.\",\n                message.id,\n                attempt,\n                MAX_TRANSLATION_RETRIES,\n                required,\n            )\n\n            if attempt == MAX_TRANSLATION_RETRIES:\n                break\n\n            await asyncio.sleep(required + 1)\n\n        except RPCError as e:\n            last_error = e\n            logger.warning(\n                \"RPCError for message %s on attempt %d/%d: %s\",\n                message.id,\n                attempt,\n                MAX_TRANSLATION_RETRIES,\n                e,\n            )\n\n            if attempt == MAX_TRANSLATION_RETRIES:\n                break\n\n            await asyncio.sleep(BASE_RETRY_SLEEP_SECONDS * attempt)\n\n        except Exception as e:\n            last_error = e\n            logger.warning(\n                \"Unexpected translation error for message %s on attempt %d/%d: %s\",\n                message.id,\n                attempt,\n                MAX_TRANSLATION_RETRIES,\n                e,\n            )\n\n            if attempt == MAX_TRANSLATION_RETRIES:\n                break\n\n            await asyncio.sleep(BASE_RETRY_SLEEP_SECONDS * attempt)\n\n    raise TranslationFailed(\n        f\"Failed to translate message {message.id} after \"\n        f\"{MAX_TRANSLATION_RETRIES} attempts. last_error={last_error!r}\"\n    )\n\n\ndef _extract_message_text(msg: types.Message) -> str:\n    \"\"\"\n    Get the text content of a message (skipping service/empty messages).\n    \"\"\"\n    text = msg.message or getattr(msg, \"raw_text\", \"\") or \"\"\n    return text.strip()\n\n\nclass ProgressBar:\n    def __init__(self, total: int, width: int = 30):\n        self.total = max(total, 1)\n        self.width = width\n        self.count = 0\n\n    def advance(self) -> None:\n        self.count += 1\n        filled = int(self.width * (self.count / self.total))\n        bar = \"█\" * filled + \"░\" * (self.width - filled)\n        print(f\"\\r[ {bar} ] {self.count}/{self.total}\", end=\"\", flush=True)\n\n    def finish(self) -> None:\n        print()  # move to next line\n\n\n# ---------------------------------------------------------------------------\n# Core async implementation\n# ---------------------------------------------------------------------------\n\n\nasync def _ingest_telegram_window_async(\n    start_date: str,\n    end_date: str | None,\n    out_path: Path | None = None,\n    channels_path: Path | None = None,\n    aliases: list[str] | None = None,\n    blacklist: list[str] | None = None,\n    whitelist: list[str] | None = None,\n) -> tuple[Path, list[dict]]:\n    \"\"\"\n    Core async implementation.\n\n    Parameters:\n      - start_date, end_date: YYYY-MM-DD strings (end inclusive).\n      - out_path: optional posts.jsonl path; defaults to data/interim/...\n      - channels_path: path to tg_channels.jsonl; if None, falls back to HARDCODED_CHANNELS.\n      - aliases: if provided, restrict to channels whose alias or channel_name matches\n                 any of these (case-insensitive, '@' ignored); otherwise all active channels.\n      - blacklist: reject posts containing any of these words (case-insensitive).\n      - whitelist: if provided, keep only posts containing at least one of these words.\n    \"\"\"\n    api_id, api_hash, session_name = _load_telegram_credentials()\n    start_dt, end_dt = _parse_date_range(start_date, end_date)\n\n    # Determine channels: file overrides hard-coded list if given\n    if channels_path is not None:\n        all_channels = _load_channels_from_file(channels_path)\n        if not all_channels:\n            logger.warning(\n                \"No channels found in %s; falling back to HARDCODED_CHANNELS\",\n                channels_path,\n            )\n            all_channels = HARDCODED_CHANNELS[:]\n    else:\n        all_channels = HARDCODED_CHANNELS[:]\n\n    alias_set = (\n        {_normalize_handle(a) for a in aliases}\n        if aliases is not None\n        else None\n    )\n\n    def _select(cfg: ChannelConfig) -> bool:\n        # Always honor 'active' flag\n        if not cfg.active:\n            return False\n        if alias_set is None:\n            return True\n        c_alias = _normalize_handle(cfg.alias)\n        c_name = _normalize_handle(cfg.channel_name)\n        return c_alias in alias_set or c_name in alias_set\n\n    channels = [cfg for cfg in all_channels if _select(cfg)]\n\n    if not channels:\n        logger.info(\"No matching active channels in configuration.\")\n        output_path = _ensure_output_path(out_path)\n        return output_path, []\n\n    output_path = _ensure_output_path(out_path)\n\n    logger.info(\n        \"Ingesting Telegram window %s → %s into %s\",\n        start_dt.isoformat(),\n        end_dt.isoformat(),\n        output_path,\n    )\n\n    records: list[dict] = []\n\n    async with TelegramClient(session_name, api_id, api_hash) as client:\n        with output_path.open(\"a\", encoding=\"utf-8\") as out_f:\n            for cfg in channels:\n                logger.info(\n                    \"Fetching from channel %s (alias=%s, lang=%s, active=%s)\",\n                    cfg.channel_name,\n                    cfg.alias,\n                    cfg.channel_lang,\n                    cfg.active,\n                )\n\n                try:\n                    entity = await client.get_entity(cfg.channel_name)\n                except RPCError as exc:\n                    logger.error(\n                        \"Failed to resolve channel %s: %s\",\n                        cfg.channel_name,\n                        exc,\n                    )\n                    continue\n\n                lang = cfg.channel_lang.lower()\n\n                # --------------------------------------------------\n                # ENGLISH CHANNELS — single pass, phrase + word filters\n                # --------------------------------------------------\n                if lang == \"en\":\n                    async for msg in _iter_messages_in_range(\n                        client=client,\n                        entity=entity,\n                        start_dt=start_dt,\n                        end_dt=end_dt,\n                    ):\n                        text_orig = _extract_message_text(msg)\n                        if not text_orig:\n                            continue\n\n                        # Pre-filter on raw text / header phrases\n                        # if not _matches_phrase_filter(text_orig):\n                        #     continue\n\n                        text_en = text_orig\n                        raw_text = None\n\n                        # Apply word filters on final text\n                        # if not _passes_word_filters(text_en, blacklist, whitelist):\n                        #     continue\n\n                        record = {\n                            \"source\": \"telegram\",\n                            \"channel\": cfg.channel_name,\n                            \"alias\": cfg.alias,\n                            \"channel_lang\": cfg.channel_lang,\n                            \"post_id\": msg.id,\n                            \"published_at\": _utc_iso(msg.date),\n                            \"fetched_at\": _utc_iso(datetime.now(UTC)),\n                            \"raw_text\": raw_text,\n                            \"text\": text_en,\n                        }\n\n                        out_f.write(json.dumps(record, ensure_ascii=False) + \"\\n\")\n                        records.append(record)\n\n                    # Done with this channel\n                    continue\n\n                # --------------------------------------------------\n                # NON-ENGLISH CHANNELS (e.g. lang='uk')\n                # First pass: find which messages match phrase filter\n                # and are worth translating.\n                # --------------------------------------------------\n                translate_candidates: set[int] = set()\n\n                async for msg in _iter_messages_in_range(\n                    client=client,\n                    entity=entity,\n                    start_dt=start_dt,\n                    end_dt=end_dt,\n                ):\n                    text_orig = _extract_message_text(msg)\n                    if not text_orig:\n                        continue\n\n                    # if not _matches_phrase_filter(text_orig):\n                    #     continue\n\n                    if lang == \"uk\":\n                        if not should_translate_uk_post(text_orig):\n                            continue\n                        translate_candidates.add(msg.id)\n                    else:\n                        translate_candidates.add(msg.id)\n\n                total_to_translate = len(translate_candidates)\n                progress = ProgressBar(total_to_translate if total_to_translate > 0 else 1)\n\n                logger.info(\n                    \"Channel %s: %d messages match sitrep phrases and require translation.\",\n                    cfg.channel_name,\n                    total_to_translate,\n                )\n\n                # --------------------------------------------------\n                # SECOND PASS — real ingestion, only for candidates\n                # --------------------------------------------------\n                async for msg in _iter_messages_in_range(\n                    client=client,\n                    entity=entity,\n                    start_dt=start_dt,\n                    end_dt=end_dt,\n                ):\n                    if msg.id not in translate_candidates:\n                        continue\n\n                    text_orig = _extract_message_text(msg)\n                    if not text_orig:\n                        continue\n\n                    try:\n                        text_en = await _translate_message_text(\n                            client=client,\n                            entity=entity,\n                            message=msg,\n                            to_lang=\"en\",\n                        )\n                        if text_en is None:\n                            progress.advance()\n                            continue\n\n                        raw_text = text_orig\n                        progress.advance()\n\n                    except TranslationFailed:\n                        progress.finish()\n                        raise\n\n                    # Apply word filters on translated text\n                    # if not _passes_word_filters(text_en, blacklist, whitelist):\n                    #     continue\n\n                    record = {\n                        \"source\": \"telegram\",\n                        \"channel\": cfg.channel_name,\n                        \"alias\": cfg.alias,\n                        \"channel_lang\": cfg.channel_lang,\n                        \"post_id\": msg.id,\n                        \"published_at\": _utc_iso(msg.date),\n                        \"fetched_at\": _utc_iso(datetime.now(UTC)),\n                        \"text\": text_en,\n                    }\n\n                    out_f.write(json.dumps(record, ensure_ascii=False) + \"\\n\")\n                    records.append(record)\n\n                progress.finish()\n\n    logger.info(\"Ingestion complete, output written to %s\", output_path)\n    return output_path, records\n\n\n# ---------------------------------------------------------------------------\n# Public sync wrapper\n# ---------------------------------------------------------------------------\n\n\ndef fetch_posts(\n    start_date: str,\n    end_date: str | None = None,\n    channels_path: Path | None = None,\n    out_path: Path | None = None,\n    aliases: list[str] | None = None,\n    blacklist: list[str] | None = None,\n    whitelist: list[str] | None = None,\n) -> tuple[Path, list[dict]]:\n    \"\"\"\n    Synchronous wrapper around the async ingest function.\n\n    This is the main entry point used by the Typer CLI:\n\n        sitrepc2 fetch <source> --start ... [--end ...] [--blacklist ...] [--whitelist ...]\n\n    - aliases: list of alias/channel identifiers, or None for \"all active\".\n    \"\"\"\n    return asyncio.run(\n        _ingest_telegram_window_async(\n            start_date=start_date,\n            end_date=end_date,\n            out_path=out_path,\n            channels_path=channels_path,\n            aliases=aliases,\n            blacklist=blacklist,\n            whitelist=whitelist,\n        )\n    )\n\n\n# ---------------------------------------------------------------------------\n# Legacy CLI entrypoint (optional)\n# ---------------------------------------------------------------------------\n\n\ndef main(argv: list[str] | None = None) -> int:\n    \"\"\"\n    Legacy argparse entrypoint. You can still run:\n\n        python -m sitrepc2.ingest.telegram -s 2025-12-01 -e 2025-12-05 -i path/to/tg_channels.jsonl\n\n    This does not expose aliases/filters; for that, use the Typer CLI (`sitrepc2 fetch`).\n    \"\"\"\n    parser = argparse.ArgumentParser(\n        description=\"Fetch and translate Telegram posts in a date window.\"\n    )\n    parser.add_argument(\n        \"-s\",\n        \"--start\",\n        required=True,\n        help=\"Start date (YYYY-MM-DD, inclusive).\",\n    )\n    parser.add_argument(\n        \"-e\",\n        \"--end\",\n        help=\"End date (YYYY-MM-DD, inclusive). Defaults to start date if omitted.\",\n    )\n    parser.add_argument(\n        \"-i\",\n        \"--import\",\n        dest=\"import_path\",\n        help=(\n            \"Optional path to channels JSONL file. \"\n            \"If provided, overrides the hard-coded channel list.\"\n        ),\n    )\n    parser.add_argument(\n        \"-o\",\n        \"--out\",\n        dest=\"out_path\",\n        help=(\n            \"Optional JSONL output path. \"\n            \"If omitted, uses data/interim/YYYY/YYYY-MM/YYYY-MM-DD/posts.jsonl.\"\n        ),\n    )\n\n    args = parser.parse_args(argv)\n\n    start_date = args.start\n    end_date = args.end\n\n    channels_path: Path | None = Path(args.import_path) if args.import_path else None\n    out_path: Path | None = Path(args.out_path) if args.out_path else None\n\n    output_path, records = fetch_posts(\n        start_date=start_date,\n        end_date=end_date,\n        channels_path=channels_path,\n        out_path=out_path,\n        aliases=None,\n        blacklist=None,\n        whitelist=None,\n    )\n\n    print(f\"Wrote {len(records)} records to {output_path}\")\n    return 0\n\n\n# ---------------------------------------------------------------------------\n# Legacy / Standalone CLI Entry Point (FULL VERSION)\n# ---------------------------------------------------------------------------\n\ndef main(argv: list[str] | None = None) -> int:\n    \"\"\"\n    Fully functional standalone CLI for debugging Telegram ingestion.\n\n    Example:\n\n        python -m sitrepc2.ingest.telegram \\\n            --start 2025-12-03 \\\n            --end 2025-12-05 \\\n            --channels data/tg_channels.jsonl \\\n            --alias rybar \\\n            --blacklist foo bar \\\n            --whitelist attack \\\n            --out posts.jsonl\n    \"\"\"\n    parser = argparse.ArgumentParser(\n        description=\"Fetch and translate Telegram posts in a date window.\",\n        formatter_class=argparse.ArgumentDefaultsHelpFormatter,\n    )\n\n    parser.add_argument(\n        \"-s\", \"--start\", required=True,\n        help=\"Start date (YYYY-MM-DD, inclusive).\"\n    )\n    parser.add_argument(\n        \"-e\", \"--end\",\n        help=\"End date (YYYY-MM-DD, inclusive). Defaults to --start.\"\n    )\n\n    parser.add_argument(\n        \"-c\", \"--channels\",\n        dest=\"channels_path\",\n        help=\"Path to tg_channels.jsonl (otherwise HARDCODED_CHANNELS is used).\"\n    )\n\n    parser.add_argument(\n        \"-a\", \"--alias\",\n        dest=\"aliases\",\n        action=\"append\",\n        help=\"Alias or channel_name to fetch (can specify multiple). Use no --alias to fetch all active.\"\n    )\n\n    parser.add_argument(\n        \"--blacklist\",\n        nargs=\"*\",\n        default=None,\n        help=\"Reject posts containing ANY of these words (case-insensitive).\"\n    )\n\n    parser.add_argument(\n        \"--whitelist\",\n        nargs=\"*\",\n        default=None,\n        help=\"Keep ONLY posts containing at least one of these words.\"\n    )\n\n    parser.add_argument(\n        \"-o\", \"--out\",\n        dest=\"out_path\",\n        help=\"Explicit output file path (posts.jsonl). Defaults to data/interim/YYYY/... path.\"\n    )\n\n    args = parser.parse_args(argv)\n\n    # Normalize paths\n    channels_path = Path(args.channels_path) if args.channels_path else None\n    out_path = Path(args.out_path) if args.out_path else None\n\n    output_path, records = fetch_posts(\n        start_date=args.start,\n        end_date=args.end,\n        channels_path=channels_path,\n        out_path=out_path,\n        aliases=args.aliases,\n        blacklist=args.blacklist,\n        whitelist=args.whitelist,\n    )\n\n    print(f\"Wrote {len(records)} records to {output_path}\")\n    return 0\n\n\nif __name__ == \"__main__\":\n    raise SystemExit(main())\n\n",
			"file": "src/sitrepc2/ingest/telegram.py",
			"file_size": 26420,
			"file_write_time": 134099761180271847,
			"settings":
			{
				"buffer_size": 26136,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					119,
					1,
					"paste",
					null,
					"AQAAAK06AAAAAAAA6T0AAAAAAAB/AgAAICAgICAgICAgICAgICAgICAgICAgICAgdGV4dF9lbiA9IHRleHRfb3JpZwogICAgICAgICAgICAgICAgICAgICAgICByYXdfdGV4dCA9IE5vbmUKCiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzb3VyY2UiOiAidGVsZWdyYW0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImNoYW5uZWwiOiBjZmcuY2hhbm5lbF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImFsaWFzIjogY2ZnLmFsaWFzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgImNoYW5uZWxfbGFuZyI6IGNmZy5jaGFubmVsX2xhbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAicG9zdF9pZCI6IG1zZy5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwdWJsaXNoZWRfYXQiOiBfdXRjX2lzbyhtc2cuZGF0ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZmV0Y2hlZF9hdCI6IF91dGNfaXNvKGRhdGV0aW1lLm5vdyhVVEMpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyYXdfdGV4dCI6IHJhd190ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInRleHQiOiB0ZXh0X2VuLAogICAgICAgICAgICAgICAgICAgICAgICB9",
					"AQAAAAAAAAABAAAALD0AAAAAAACtOgAAAAAAAAAAAAAAAPC/"
				],
				[
					120,
					1,
					"left_delete",
					null,
					"AQAAAOg9AAAAAAAA6D0AAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAA6T0AAAAAAADpPQAAAAAAAAAAAAAAAPC/"
				],
				[
					121,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACYWAAAIyBzcmMvbW9kbXltYXAvaW5nZXN0L3RlbGVncmFtX3dpbmRvdy5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgppbXBvcnQgYXJncGFyc2UKaW1wb3J0IGFzeW5jaW8KaW1wb3J0IGpzb24KaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IG9zCmltcG9ydCByZQpmcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgQXN5bmNJdGVyYXRvcgpmcm9tIGRhdGFjbGFzc2VzIGltcG9ydCBkYXRhY2xhc3MKZnJvbSBkYXRldGltZSBpbXBvcnQgVVRDLCBkYXRlLCBkYXRldGltZSwgdGltZSwgdGltZWRlbHRhCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBvcnQgRmluYWwKCmZyb20gZG90ZW52IGltcG9ydCBsb2FkX2RvdGVudgpmcm9tIHRlbGV0aG9uIGltcG9ydCBUZWxlZ3JhbUNsaWVudApmcm9tIHRlbGV0aG9uLmVycm9ycyBpbXBvcnQgRmxvb2RXYWl0RXJyb3IsIFJQQ0Vycm9yCmZyb20gdGVsZXRob24udGwgaW1wb3J0IGZ1bmN0aW9ucywgdHlwZXMKCmZyb20gc2l0cmVwYzIuZG9tLnR5cGVkZWZzIGltcG9ydCBQb3N0Cgpsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKbG9hZF9kb3RlbnYoKQoKYXBpX2lkID0gb3MuZ2V0ZW52KCJBUElfSUQiKQphcGlfaGFzaCA9IG9zLmdldGVudigiQVBJX0hBU0giKQoKIyBIb3cgYWdncmVzc2l2ZWx5IHdlIHRyYW5zbGF0ZQpNSU5fVFJBTlNMQVRJT05fTEVOR1RIID0gNDAgICMgY2hhcmFjdGVyczsgdHVuZSBhcyBkZXNpcmVkClRSQU5TTEFURV9TTEVFUF9TRUNPTkRTID0gNS4wICAjIHBvbGl0ZSBkZWxheSBiZXR3ZWVuIFRyYW5zbGF0ZVRleHRSZXF1ZXN0IGNhbGxzCk1BWF9UUkFOU0xBVElPTl9SRVRSSUVTID0gNQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBDaGFubmVsIGNvbmZpZwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKQGRhdGFjbGFzcwpjbGFzcyBDaGFubmVsQ29uZmlnOgogICAgY2hhbm5lbF9uYW1lOiBzdHIKICAgIGFsaWFzOiBzdHIKICAgIGNoYW5uZWxfbGFuZzogc3RyCiAgICBhY3RpdmU6IGJvb2wKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tX2pzb24oY2xzLCBkYXRhOiBkaWN0KSAtPiBDaGFubmVsQ29uZmlnOgogICAgICAgIHJldHVybiBjbHMoCiAgICAgICAgICAgIGNoYW5uZWxfbmFtZT1kYXRhWyJjaGFubmVsX25hbWUiXSwKICAgICAgICAgICAgYWxpYXM9ZGF0YS5nZXQoImFsaWFzIiwgZGF0YVsiY2hhbm5lbF9uYW1lIl0pLAogICAgICAgICAgICBjaGFubmVsX2xhbmc9ZGF0YS5nZXQoImNoYW5uZWxfbGFuZyIsICJlbiIpLAogICAgICAgICAgICBhY3RpdmU9Ym9vbChkYXRhLmdldCgiYWN0aXZlIiwgRmFsc2UpKSwKICAgICAgICApCgoKSEFSRENPREVEX0NIQU5ORUxTOiBsaXN0W0NoYW5uZWxDb25maWddID0gW10gIyBubyBtb3JlIGhhcmRjb2RlZCBjaGFubmVscwoKIyBQaHJhc2VzIHRvIGtlZXAgcG9zdHMgZm9yLiBFZGl0L2V4dGVuZCBhcyBuZWVkZWQuIFdpbGwgYmUgb3ZlcnJpZGVuIGlmIC0td2hpdGVsaXN0IGlzIHVzZWQKUEhSQVNFX0ZJTFRFUlM6IGxpc3Rbc3RyXSA9IFsKICAgICJPcGVyYXRpb25hbCBpbmZvcm1hdGlvbiBhcyBvZiIsCiAgICAib24gcHJvZ3Jlc3Mgb2Ygc3BlY2lhbCBtaWxpdGFyeSBvcGVyYXRpb24gYXMgb2YiLAogICAgItCe0L/QtdGA0LDRgtC40LLQvdCwINGW0L3RhNC+0YDQvNCw0YbRltGPINGB0YLQsNC90L7QvCDQvdCwIiwKICAgICJDb29yZGluYXRlczoiLApdCgpCQVNFX1JFVFJZX1NMRUVQX1NFQ09ORFMgPSA1LjAgICMgYWRqdXN0IGlmIG5lZWRlZAoKRlJPTlRMSU5FX0tFWVdPUkRTOiBGaW5hbCA9ICgpCgojIEtleXdvcmRzL2hhc2h0YWdzIHRvICpza2lwKiAodHJhaW5pbmcgLyBQUiAvIHJlY3J1aXRtZW50KSDigJQgY3VycmVudGx5IHVudXNlZApUUkFJTklOR19IQVNIVEFHUzogRmluYWwgPSAoCiAgICAiI9C/0ZbQtNCz0L7RgtC+0LLQutCw0LfRgdGDIiwKICAgICIj0L/RltC00LPQvtGC0L7QstC60LDQt9GB0YMyMDI1IiwKKQoKVFJBSU5JTkdfUEhSQVNFUzogRmluYWwgPSAoCiAgICAi0YnQvtC00L3RjyDQstC00L7RgdC60L7QvdCw0LvRjtGO0YLRjCDRgdCy0L7RlyDQvdCw0LLQuNGH0LrQuCIsCiAgICAi0L3QsNCy0LjRh9C60Lgg0YLQsCDQstC80ZbQvdC90Y8iLAogICAgItC/0ZbQtNCz0L7RgtC+0LLQutCwIiwKICAgICLRgtGA0LXQvdGD0LLQsNC90L3RjyIsCiAgICAi0Y/QuiDQtNGW0Y/RgtC4INCyIMKr0YPRgNCx0LDQvdGWwrsiLAogICAgJ9GP0Log0LTRltGP0YLQuCDQsiAi0YPRgNCx0LDQvdGWIicsCiAgICAi0Y/QuiDQstGA0Y/RgtGD0LLQsNGC0Lgg0L/QvtCx0YDQsNGC0LjQvNCwIiwKICAgICLQstGW0LTQtNGW0LvQtdC90L3RjyDQutC+0LzRg9C90ZbQutCw0YbRltC5IiwKICAgICLQv9GA0LXRgdGB0LvRg9C20LHQsCIsCiAgICAi0L/RgNC10YEt0YHQu9GD0LbQsdCwIiwKKQoKUkVDUlVJVE1FTlRfUEhSQVNFUzogRmluYWwgPSAoCiAgICAi0L/RgNC40ZTQtNC90YPQudGC0LXRgdGMINC00L4g0YHQuNC7INC+0LHQvtGA0L7QvdC4IiwKICAgICLRgNCw0LfQvtC8INC/0LXRgNC10LzQvtC20LXQvNC+IiwKICAgICLRgdC70LDQstCwINGD0LrRgNCw0ZfQvdGWIiwKKQoKVE9QT05ZTV9MSUtFX1JFID0gcmUuY29tcGlsZShyIlxiW9CQLdCv0IbQh9CE0pBdW9CwLdGP0ZbRl9GU0pEnXSsoPzosfFxiKSIpCgoKY2xhc3MgUHJvZ3Jlc3NCYXI6CiAgICBkZWYgX19pbml0X18oc2VsZiwgdG90YWw6IGludCwgd2lkdGg6IGludCA9IDMwKToKICAgICAgICBzZWxmLnRvdGFsID0gbWF4KHRvdGFsLCAxKQogICAgICAgIHNlbGYud2lkdGggPSB3aWR0aAogICAgICAgIHNlbGYuY291bnQgPSAwCgogICAgZGVmIGFkdmFuY2Uoc2VsZikgLT4gTm9uZToKICAgICAgICBzZWxmLmNvdW50ICs9IDEKICAgICAgICBmaWxsZWQgPSBpbnQoc2VsZi53aWR0aCAqIChzZWxmLmNvdW50IC8gc2VsZi50b3RhbCkpCiAgICAgICAgYmFyID0gIuKWiCIgKiBmaWxsZWQgKyAi4paRIiAqIChzZWxmLndpZHRoIC0gZmlsbGVkKQogICAgICAgIHByaW50KGYiXHJbIHtiYXJ9IF0ge3NlbGYuY291bnR9L3tzZWxmLnRvdGFsfSIsIGVuZD0iIiwgZmx1c2g9VHJ1ZSkKCiAgICBkZWYgZmluaXNoKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgcHJpbnQoKSAgIyBtb3ZlIHRvIG5leHQgbGluZQoKCmRlZiBzaG91bGRfdHJhbnNsYXRlX3VrX3Bvc3QodGV4dDogc3RyKSAtPiBib29sOgogICAgYmxhY2tsaXN0ID0gUkVDUlVJVE1FTlRfUEhSQVNFUyArIFRSQUlOSU5HX1BIUkFTRVMgKyBUUkFJTklOR19IQVNIVEFHUwogICAgbG93ZXJlZCA9IHRleHQubG93ZXIoKQogICAgcmV0dXJuIG5vdCBhbnkod29yZC5sb3dlcigpIGluIGxvd2VyZWQgZm9yIHdvcmQgaW4gYmxhY2tsaXN0KQoKCmNsYXNzIFRyYW5zbGF0aW9uRmFpbGVkKFJ1bnRpbWVFcnJvcik6CiAgICBwYXNzCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBGaWx0ZXJzICYgaGVscGVycwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCmRlZiBfbWF0Y2hlc19waHJhc2VfZmlsdGVyKHRleHQ6IHN0cikgLT4gYm9vbDoKICAgICIiIgogICAgUmV0dXJuIFRydWUgaWYgYHRleHRgIGNvbnRhaW5zIGFueSBvZiB0aGUgY29uZmlndXJlZCBwaHJhc2VzIChjYXNlLWluc2Vuc2l0aXZlKS4KICAgICIiIgogICAgaWYgbm90IHRleHQ6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBsb3dlcmVkID0gdGV4dC5sb3dlcigpCiAgICByZXR1cm4gYW55KHBocmFzZS5sb3dlcigpIGluIGxvd2VyZWQgZm9yIHBocmFzZSBpbiBQSFJBU0VfRklMVEVSUykKCgpkZWYgX2xvYWRfdGVsZWdyYW1fY3JlZGVudGlhbHMoKSAtPiB0dXBsZVtpbnQsIHN0ciwgc3RyXToKICAgICIiIgogICAgTG9hZCBUZWxlZ3JhbSBBUEkgY3JlZGVudGlhbHMgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuCgogICAgUmVxdWlyZWQ6CiAgICAgIC0gQVBJX0lEICAgICAgKGludCkKICAgICAgLSBBUElfSEFTSCAgICAoc3RyKQoKICAgIE9wdGlvbmFsOgogICAgICAtIFRFTEVHUkFNX1NFU1NJT05fTkFNRSAoc3RyLCBkZWZhdWx0cyB0byAibW9kbXltYXAiKQogICAgIiIiCiAgICBhcGlfaWRfcmF3ID0gb3MuZ2V0ZW52KCJBUElfSUQiKQogICAgYXBpX2hhc2ggPSBvcy5nZXRlbnYoIkFQSV9IQVNIIikKCiAgICBpZiBhcGlfaWRfcmF3IGlzIE5vbmUgb3IgYXBpX2hhc2ggaXMgTm9uZToKICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkFQSV9JRCBhbmQgQVBJX0hBU0ggbXVzdCBiZSBzZXQgaW4gdGhlIGVudmlyb25tZW50IikKCiAgICBhcGlfaWQgPSBpbnQoYXBpX2lkX3JhdykKICAgIHNlc3Npb25fbmFtZSA9IG9zLmdldGVudigiVEVMRUdSQU1fU0VTU0lPTl9OQU1FIiwgIm1vZG15bWFwIikKICAgIHJldHVybiBhcGlfaWQsIGFwaV9oYXNoLCBzZXNzaW9uX25hbWUKCgpkZWYgX3BhcnNlX2RhdGVfcmFuZ2UoCiAgICBzdGFydF9kYXRlOiBzdHIgfCBkYXRlLAogICAgZW5kX2RhdGU6IHN0ciB8IGRhdGUgfCBOb25lLAopIC0+IHR1cGxlW2RhdGV0aW1lLCBkYXRldGltZV06CiAgICAiIiIKICAgIEFjY2VwdHMgZWl0aGVyIElTTyBzdHJpbmdzIG9yIGRhdGV0aW1lLmRhdGUgb2JqZWN0cy4KICAgIFJldHVybnMgYW4gaW5jbHVzaXZlIFVUQyBkYXRldGltZSByYW5nZS4KICAgICIiIgogICAgaWYgaXNpbnN0YW5jZShzdGFydF9kYXRlLCBkYXRlKToKICAgICAgICBzdGFydF9kID0gc3RhcnRfZGF0ZQogICAgZWxzZToKICAgICAgICBzdGFydF9kID0gZGF0ZS5mcm9taXNvZm9ybWF0KHN0YXJ0X2RhdGUpCgogICAgaWYgZW5kX2RhdGUgaXMgTm9uZToKICAgICAgICBlbmRfZCA9IHN0YXJ0X2QKICAgIGVsc2U6CiAgICAgICAgaWYgaXNpbnN0YW5jZShlbmRfZGF0ZSwgZGF0ZSk6CiAgICAgICAgICAgIGVuZF9kID0gZW5kX2RhdGUKICAgICAgICBlbHNlOgogICAgICAgICAgICBlbmRfZCA9IGRhdGUuZnJvbWlzb2Zvcm1hdChlbmRfZGF0ZSkKCiAgICBpZiBlbmRfZCA8IHN0YXJ0X2Q6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZW5kX2RhdGUgbXVzdCBiZSA+PSBzdGFydF9kYXRlIikKCiAgICBzdGFydF9kdCA9IGRhdGV0aW1lLmNvbWJpbmUoc3RhcnRfZCwgdGltZS5taW4sIHR6aW5mbz1VVEMpCiAgICBlbmRfZHQgPSBkYXRldGltZS5jb21iaW5lKGVuZF9kLCB0aW1lLm1heCwgdHppbmZvPVVUQykKICAgIHJldHVybiBzdGFydF9kdCwgZW5kX2R0CgoKZGVmIF91dGNfaXNvKGR0OiBkYXRldGltZSkgLT4gc3RyOgogICAgIiIiCiAgICBOb3JtYWxpemUgZGF0ZXRpbWUgdG8gVVRDIGFuZCBmb3JtYXQgYXMgSVNPIDg2MDEgd2l0aCAnWicgc3VmZml4LgogICAgIiIiCiAgICBpZiBkdC50emluZm8gaXMgTm9uZToKICAgICAgICBkdCA9IGR0LnJlcGxhY2UodHppbmZvPVVUQykKICAgIGVsc2U6CiAgICAgICAgZHQgPSBkdC5hc3RpbWV6b25lKFVUQykKICAgIHJldHVybiBkdC5pc29mb3JtYXQoKS5yZXBsYWNlKCIrMDA6MDAiLCAiWiIpCgoKZGVmIF9vdXRwdXRfcGF0aF9mb3JfdG9kYXkoYmFzZV9kaXI6IFBhdGggfCBOb25lID0gTm9uZSkgLT4gUGF0aDoKICAgICIiIgogICAgQnVpbGQgdG9kYXkncyBpbnRlcmltIHBvc3RzIHBhdGg6CiAgICAgIGRhdGEvaW50ZXJpbS9ZWVlZL1lZWVktTU0vWVlZWS1NTS1ERC9wb3N0cy5qc29ubAogICAgIiIiCiAgICB0b2RheSA9IGRhdGUudG9kYXkoKQogICAgaWYgYmFzZV9kaXIgaXMgTm9uZToKICAgICAgICBiYXNlX2RpciA9IFBhdGgoImRhdGEiKSAvICJpbnRlcmltIgoKICAgIHllYXJfZGlyID0gYmFzZV9kaXIgLyBmInt0b2RheS55ZWFyfSIKICAgIG1vbnRoX2RpciA9IHllYXJfZGlyIC8gZiJ7dG9kYXkueWVhcn0te3RvZGF5Lm1vbnRoOjAyZH0iCiAgICBkYXlfZGlyID0gbW9udGhfZGlyIC8gdG9kYXkuaXNvZm9ybWF0KCkKICAgIGRheV9kaXIubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQogICAgcmV0dXJuIGRheV9kaXIgLyAicG9zdHMuanNvbmwiCgoKZGVmIF9lbnN1cmVfb3V0cHV0X3BhdGgob3V0X3BhdGg6IFBhdGggfCBOb25lKSAtPiBQYXRoOgogICAgIiIiCiAgICBVc2UgdGhlIHByb3ZpZGVkIG91dF9wYXRoLCBvciBkZWZhdWx0IHRvIHRoZSBzdGFuZGFyZCBpbnRlcmltIHBhdGguCiAgICBFbnN1cmVzIHBhcmVudCBkaXJlY3RvcmllcyBleGlzdC4KICAgICIiIgogICAgaWYgb3V0X3BhdGggaXMgTm9uZToKICAgICAgICBvdXRfcGF0aCA9IF9vdXRwdXRfcGF0aF9mb3JfdG9kYXkoKQogICAgb3V0X3BhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHJldHVybiBvdXRfcGF0aAoKCmRlZiBfbG9hZF9jaGFubmVsc19mcm9tX2ZpbGUocGF0aDogUGF0aCkgLT4gbGlzdFtDaGFubmVsQ29uZmlnXToKICAgIGNoYW5uZWxzOiBsaXN0W0NoYW5uZWxDb25maWddID0gW10KICAgIHdpdGggcGF0aC5vcGVuKCJyIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICBmb3IgbGluZSBpbiBmOgogICAgICAgICAgICBsaW5lID0gbGluZS5zdHJpcCgpCiAgICAgICAgICAgIGlmIG5vdCBsaW5lOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZGF0YSA9IGpzb24ubG9hZHMobGluZSkKICAgICAgICAgICAgY2ZnID0gQ2hhbm5lbENvbmZpZy5mcm9tX2pzb24oZGF0YSkKICAgICAgICAgICAgY2hhbm5lbHMuYXBwZW5kKGNmZykKICAgIHJldHVybiBjaGFubmVscwoKZGVmIF9wYXNzZXNfd29yZF9maWx0ZXJzKAogICAgdGV4dDogc3RyLAogICAgYmxhY2tsaXN0OiBsaXN0W3N0cl0gfCB0dXBsZVtzdHIsIC4uLl0gfCBOb25lLAogICAgd2hpdGVsaXN0OiBsaXN0W3N0cl0gfCB0dXBsZVtzdHIsIC4uLl0gfCBOb25lLAopIC0+IGJvb2w6CiAgICAiIiIKICAgIFJldHVybiBUcnVlIGlmZiB0ZXh0IGlzIGFsbG93ZWQgdW5kZXIgdGhlIGJsYWNrbGlzdC93aGl0ZWxpc3QgcnVsZXMuCgogICAgLSBibGFja2xpc3Q6IGlmIGFueSB3b3JkIGlzIHByZXNlbnQgKGNhc2UtaW5zZW5zaXRpdmUpLCByZWplY3QuCiAgICAtIHdoaXRlbGlzdDogaWYgcHJvdmlkZWQsIHJlcXVpcmUgYXQgbGVhc3Qgb25lIHdvcmQgYmUgcHJlc2VudC4KICAgICIiIgogICAgbG93ZXJlZCA9IHRleHQubG93ZXIoKQoKICAgIGlmIGJsYWNrbGlzdDoKICAgICAgICBmb3Igd29yZCBpbiBibGFja2xpc3Q6CiAgICAgICAgICAgIGlmIHdvcmQubG93ZXIoKSBpbiBsb3dlcmVkOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgd2hpdGVsaXN0OgogICAgICAgIGZvciB3b3JkIGluIHdoaXRlbGlzdDoKICAgICAgICAgICAgaWYgd29yZC5sb3dlcigpIGluIGxvd2VyZWQ6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHJldHVybiBUcnVlCgoKCmFzeW5jIGRlZiBfaXRlcl9tZXNzYWdlc19pbl9yYW5nZSgKICAgIGNsaWVudDogVGVsZWdyYW1DbGllbnQsCiAgICBlbnRpdHk6IHR5cGVzLlR5cGVJbnB1dFBlZXIgfCBzdHIsCiAgICBzdGFydF9kdDogZGF0ZXRpbWUsCiAgICBlbmRfZHQ6IGRhdGV0aW1lLAopIC0+IEFzeW5jSXRlcmF0b3JbdHlwZXMuTWVzc2FnZV06CiAgICAiIiIKICAgIFlpZWxkIG1lc3NhZ2VzIGZvciBgZW50aXR5YCB3aXRoIGRhdGUgaW4gW3N0YXJ0X2R0LCBlbmRfZHRdIChVVEMpLgoKICAgIFdlIGl0ZXJhdGUgYmFja3dhcmRzIGZyb20gKGVuZF9kdCArIDEgc2Vjb25kKSB1bnRpbCB3ZSBkcm9wIGJlbG93IHN0YXJ0X2R0LgogICAgIiIiCiAgICBvZmZzZXRfZHQgPSBlbmRfZHQgKyB0aW1lZGVsdGEoc2Vjb25kcz0xKQoKICAgIGFzeW5jIGZvciBtc2cgaW4gY2xpZW50Lml0ZXJfbWVzc2FnZXMoZW50aXR5LCBvZmZzZXRfZGF0ZT1vZmZzZXRfZHQpOgogICAgICAgIGlmIG1zZy5kYXRlIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIG1zZ19kdCA9IG1zZy5kYXRlCiAgICAgICAgaWYgbXNnX2R0LnR6aW5mbyBpcyBOb25lOgogICAgICAgICAgICBtc2dfZHQgPSBtc2dfZHQucmVwbGFjZSh0emluZm89VVRDKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1zZ19kdCA9IG1zZ19kdC5hc3RpbWV6b25lKFVUQykKCiAgICAgICAgaWYgbXNnX2R0IDwgc3RhcnRfZHQ6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgbXNnX2R0ID4gZW5kX2R0OgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICB5aWVsZCBtc2cKCgphc3luYyBkZWYgX3RyYW5zbGF0ZV9tZXNzYWdlX3RleHQoCiAgICBjbGllbnQ6IFRlbGVncmFtQ2xpZW50LAogICAgZW50aXR5OiB0eXBlcy5UeXBlSW5wdXRQZWVyIHwgc3RyLAogICAgbWVzc2FnZTogdHlwZXMuTWVzc2FnZSwKICAgIHRvX2xhbmc6IHN0ciA9ICJlbiIsCikgLT4gc3RyIHwgTm9uZToKICAgIG9yaWdpbmFsX3RleHQgPSAobWVzc2FnZS5tZXNzYWdlIG9yICIiKS5zdHJpcCgpCiAgICBpZiBub3Qgb3JpZ2luYWxfdGV4dDoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGlmIGxlbihvcmlnaW5hbF90ZXh0KSA8IE1JTl9UUkFOU0xBVElPTl9MRU5HVEg6CiAgICAgICAgbG9nZ2VyLmRlYnVnKAogICAgICAgICAgICAiU2tpcHBpbmcgdHJhbnNsYXRpb24gZm9yIHNob3J0IG1lc3NhZ2UgJXMgKGxlbj0lZCA8ICVkKSIsCiAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgIGxlbihvcmlnaW5hbF90ZXh0KSwKICAgICAgICAgICAgTUlOX1RSQU5TTEFUSU9OX0xFTkdUSCwKICAgICAgICApCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBsYXN0X2Vycm9yOiBFeGNlcHRpb24gfCBOb25lID0gTm9uZQoKICAgIGZvciBhdHRlbXB0IGluIHJhbmdlKDEsIE1BWF9UUkFOU0xBVElPTl9SRVRSSUVTICsgMSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBsb2dnZXIuZGVidWcoCiAgICAgICAgICAgICAgICAiVHJhbnNsYXRpbmcgbWVzc2FnZSAlcyAoYXR0ZW1wdCAlZC8lZCkiLAogICAgICAgICAgICAgICAgbWVzc2FnZS5pZCwKICAgICAgICAgICAgICAgIGF0dGVtcHQsCiAgICAgICAgICAgICAgICBNQVhfVFJBTlNMQVRJT05fUkVUUklFUywKICAgICAgICAgICAgKQoKICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgY2xpZW50KAogICAgICAgICAgICAgICAgZnVuY3Rpb25zLm1lc3NhZ2VzLlRyYW5zbGF0ZVRleHRSZXF1ZXN0KAogICAgICAgICAgICAgICAgICAgIHBlZXI9ZW50aXR5LAogICAgICAgICAgICAgICAgICAgIGlkPVttZXNzYWdlLmlkXSwKICAgICAgICAgICAgICAgICAgICB0b19sYW5nPXRvX2xhbmcsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIGdldGF0dHIocmVzdWx0LCAicmVzdWx0IiwgTm9uZSk6CiAgICAgICAgICAgICAgICB0cmFuc2xhdGVkID0gcmVzdWx0LnJlc3VsdFswXS50ZXh0IG9yIG9yaWdpbmFsX3RleHQKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRyYW5zbGF0ZWQgPSBvcmlnaW5hbF90ZXh0CgogICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlZAoKICAgICAgICBleGNlcHQgRmxvb2RXYWl0RXJyb3IgYXMgZToKICAgICAgICAgICAgbGFzdF9lcnJvciA9IGUKICAgICAgICAgICAgcmVxdWlyZWQgPSBlLnNlY29uZHMKCiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKAogICAgICAgICAgICAgICAgIkZsb29kV2FpdEVycm9yIGZvciBtZXNzYWdlICVzIChhdHRlbXB0ICVkLyVkKTogIgogICAgICAgICAgICAgICAgIiVzIHNlY29uZHMgcmVxdWlyZWQgYnkgVGVsZWdyYW0uIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgICAgICBhdHRlbXB0LAogICAgICAgICAgICAgICAgTUFYX1RSQU5TTEFUSU9OX1JFVFJJRVMsCiAgICAgICAgICAgICAgICByZXF1aXJlZCwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgaWYgYXR0ZW1wdCA9PSBNQVhfVFJBTlNMQVRJT05fUkVUUklFUzoKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKHJlcXVpcmVkICsgMSkKCiAgICAgICAgZXhjZXB0IFJQQ0Vycm9yIGFzIGU6CiAgICAgICAgICAgIGxhc3RfZXJyb3IgPSBlCiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKAogICAgICAgICAgICAgICAgIlJQQ0Vycm9yIGZvciBtZXNzYWdlICVzIG9uIGF0dGVtcHQgJWQvJWQ6ICVzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgICAgICBhdHRlbXB0LAogICAgICAgICAgICAgICAgTUFYX1RSQU5TTEFUSU9OX1JFVFJJRVMsCiAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICApCgogICAgICAgICAgICBpZiBhdHRlbXB0ID09IE1BWF9UUkFOU0xBVElPTl9SRVRSSUVTOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoQkFTRV9SRVRSWV9TTEVFUF9TRUNPTkRTICogYXR0ZW1wdCkKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsYXN0X2Vycm9yID0gZQogICAgICAgICAgICBsb2dnZXIud2FybmluZygKICAgICAgICAgICAgICAgICJVbmV4cGVjdGVkIHRyYW5zbGF0aW9uIGVycm9yIGZvciBtZXNzYWdlICVzIG9uIGF0dGVtcHQgJWQvJWQ6ICVzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgICAgICBhdHRlbXB0LAogICAgICAgICAgICAgICAgTUFYX1RSQU5TTEFUSU9OX1JFVFJJRVMsCiAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICApCgogICAgICAgICAgICBpZiBhdHRlbXB0ID09IE1BWF9UUkFOU0xBVElPTl9SRVRSSUVTOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoQkFTRV9SRVRSWV9TTEVFUF9TRUNPTkRTICogYXR0ZW1wdCkKCiAgICByYWlzZSBUcmFuc2xhdGlvbkZhaWxlZCgKICAgICAgICBmIkZhaWxlZCB0byB0cmFuc2xhdGUgbWVzc2FnZSB7bWVzc2FnZS5pZH0gYWZ0ZXIgIgogICAgICAgIGYie01BWF9UUkFOU0xBVElPTl9SRVRSSUVTfSBhdHRlbXB0cy4gbGFzdF9lcnJvcj17bGFzdF9lcnJvciFyfSIKICAgICkKCgpkZWYgX2V4dHJhY3RfbWVzc2FnZV90ZXh0KG1zZzogdHlwZXMuTWVzc2FnZSkgLT4gc3RyOgogICAgIiIiCiAgICBHZXQgdGhlIHRleHQgY29udGVudCBvZiBhIG1lc3NhZ2UgKHNraXBwaW5nIHNlcnZpY2UvZW1wdHkgbWVzc2FnZXMpLgogICAgIiIiCiAgICB0ZXh0ID0gbXNnLm1lc3NhZ2Ugb3IgZ2V0YXR0cihtc2csICJyYXdfdGV4dCIsICIiKSBvciAiIgogICAgcmV0dXJuIHRleHQuc3RyaXAoKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ29yZSBhc3luYyBpbXBsZW1lbnRhdGlvbgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKYXN5bmMgZGVmIF9pbmdlc3RfdGVsZWdyYW1fd2luZG93X2FzeW5jKAogICAgc3RhcnRfZGF0ZTogc3RyLAogICAgZW5kX2RhdGU6IHN0ciB8IE5vbmUsCiAgICBvdXRfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAogICAgY2hhbm5lbHNfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAogICAgYWxpYXNlczogbGlzdFtzdHJdIHwgTm9uZSA9IE5vbmUsCiAgICBibGFja2xpc3Q6IGxpc3Rbc3RyXSB8IE5vbmUgPSBOb25lLAogICAgd2hpdGVsaXN0OiBsaXN0W3N0cl0gfCBOb25lID0gTm9uZSwKKSAtPiB0dXBsZVtQYXRoLCBsaXN0W2RpY3RdXToKICAgICIiIgogICAgQ29yZSBhc3luYyBpbXBsZW1lbnRhdGlvbi4KCiAgICBOb3c6CiAgICAgIC0gUHJlLWZpbHRlcnMgbWVzc2FnZXMgYnkgUEhSQVNFX0ZJTFRFUlMgb24gdGhlICpyYXcqIHRleHQuCiAgICAgIC0gRm9yIG5vbi1FbmdsaXNoIGNoYW5uZWxzLCBvbmx5IHRob3NlIHByZS1maWx0ZXJlZCBtZXNzYWdlcyBhcmUKICAgICAgICBjb25zaWRlcmVkIGZvciB0cmFuc2xhdGlvbiBhbmQgY291bnRlZCBpbiB0aGUgcHJvZ3Jlc3MgYmFyLgogICAgIiIiCiAgICBhcGlfaWQsIGFwaV9oYXNoLCBzZXNzaW9uX25hbWUgPSBfbG9hZF90ZWxlZ3JhbV9jcmVkZW50aWFscygpCiAgICBzdGFydF9kdCwgZW5kX2R0ID0gX3BhcnNlX2RhdGVfcmFuZ2Uoc3RhcnRfZGF0ZSwgZW5kX2RhdGUpCgogICAgIyBEZXRlcm1pbmUgY2hhbm5lbHM6IGZpbGUgb3ZlcnJpZGVzIGhhcmQtY29kZWQgbGlzdCBpZiBnaXZlbgogICAgaWYgY2hhbm5lbHNfcGF0aCBpcyBub3QgTm9uZToKICAgICAgICBhbGxfY2hhbm5lbHMgPSBfbG9hZF9jaGFubmVsc19mcm9tX2ZpbGUoY2hhbm5lbHNfcGF0aCkKICAgICAgICBpZiBub3QgYWxsX2NoYW5uZWxzOgogICAgICAgICAgICBsb2dnZXIud2FybmluZygKICAgICAgICAgICAgICAgICJObyBjaGFubmVscyBmb3VuZCBpbiAlczsgZmFsbGluZyBiYWNrIHRvIEhBUkRDT0RFRF9DSEFOTkVMUyIsCiAgICAgICAgICAgICAgICBjaGFubmVsc19wYXRoLAogICAgICAgICAgICApCiAgICAgICAgICAgIGFsbF9jaGFubmVscyA9IEhBUkRDT0RFRF9DSEFOTkVMU1s6XQogICAgZWxzZToKICAgICAgICBhbGxfY2hhbm5lbHMgPSBIQVJEQ09ERURfQ0hBTk5FTFNbOl0KCiAgICAjIE5vcm1hbGl6ZSBhbGlhc2VzIChpZiBhbnkpIGFuZCBmaWx0ZXIgYnkgYWxpYXMgLyBjaGFubmVsX25hbWUgKyBhY3RpdmUKICAgIGFsaWFzX3NldCA9IHthLmxzdHJpcCgiQCIpLnN0cmlwKCkgZm9yIGEgaW4gYWxpYXNlc30gaWYgYWxpYXNlcyBlbHNlIE5vbmUKCiAgICBkZWYgX3NlbGVjdChjZmc6IENoYW5uZWxDb25maWcpIC0+IGJvb2w6CiAgICAgICAgaWYgbm90IGNmZy5hY3RpdmU6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGlmIGFsaWFzX3NldCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICMgbWF0Y2ggb24gYWxpYXMgb3IgY2hhbm5lbF9uYW1lICh3aXRob3V0IEApCiAgICAgICAgY25hbWUgPSBjZmcuY2hhbm5lbF9uYW1lLmxzdHJpcCgiQCIpLnN0cmlwKCkKICAgICAgICByZXR1cm4gY2ZnLmFsaWFzIGluIGFsaWFzX3NldCBvciBjbmFtZSBpbiBhbGlhc19zZXQKCiAgICBjaGFubmVscyA9IFtjZmcgZm9yIGNmZyBpbiBhbGxfY2hhbm5lbHMgaWYgX3NlbGVjdChjZmcpXQoKICAgIGlmIG5vdCBjaGFubmVsczoKICAgICAgICBsb2dnZXIuaW5mbygiTm8gbWF0Y2hpbmcgYWN0aXZlIGNoYW5uZWxzIGluIGNvbmZpZ3VyYXRpb24uIikKCiAgICBvdXRwdXRfcGF0aCA9IF9lbnN1cmVfb3V0cHV0X3BhdGgob3V0X3BhdGgpCgogICAgbG9nZ2VyLmluZm8oCiAgICAgICAgIkluZ2VzdGluZyBUZWxlZ3JhbSB3aW5kb3cgJXMg4oaSICVzIGludG8gJXMiLAogICAgICAgIHN0YXJ0X2R0Lmlzb2Zvcm1hdCgpLAogICAgICAgIGVuZF9kdC5pc29mb3JtYXQoKSwKICAgICAgICBvdXRwdXRfcGF0aCwKICAgICkKCiAgICByZWNvcmRzOiBsaXN0W2RpY3RdID0gW10KCiAgICBhc3luYyB3aXRoIFRlbGVncmFtQ2xpZW50KHNlc3Npb25fbmFtZSwgYXBpX2lkLCBhcGlfaGFzaCkgYXMgY2xpZW50OgogICAgICAgIHdpdGggb3V0cHV0X3BhdGgub3BlbigiYSIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIG91dF9mOgogICAgICAgICAgICBmb3IgY2ZnIGluIGNoYW5uZWxzOgogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oCiAgICAgICAgICAgICAgICAgICAgIkZldGNoaW5nIGZyb20gY2hhbm5lbCAlcyAoYWxpYXM9JXMsIGxhbmc9JXMpIiwKICAgICAgICAgICAgICAgICAgICBjZmcuY2hhbm5lbF9uYW1lLAogICAgICAgICAgICAgICAgICAgIGNmZy5hbGlhcywKICAgICAgICAgICAgICAgICAgICBjZmcuY2hhbm5lbF9sYW5nLAogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBlbnRpdHkgPSBhd2FpdCBjbGllbnQuZ2V0X2VudGl0eShjZmcuY2hhbm5lbF9uYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0IFJQQ0Vycm9yIGFzIGV4YzoKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICJGYWlsZWQgdG8gcmVzb2x2ZSBjaGFubmVsICVzOiAlcyIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNmZy5jaGFubmVsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGV4YywKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBsYW5nID0gY2ZnLmNoYW5uZWxfbGFuZy5sb3dlcigpCgogICAgICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAgICAgIyBFTkdMSVNIIENIQU5ORUxTIOKAlCBzaW5nbGUgcGFzcywgcGhyYXNlIGZpbHRlciBvbmx5CiAgICAgICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICBpZiBsYW5nID09ICJlbiI6CiAgICAgICAgICAgICAgICAgICAgYXN5bmMgZm9yIG1zZyBpbiBfaXRlcl9tZXNzYWdlc19pbl9yYW5nZSgKICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50PWNsaWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5PWVudGl0eSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfZHQ9c3RhcnRfZHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZF9kdD1lbmRfZHQsCiAgICAgICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dF9vcmlnID0gX2V4dHJhY3RfbWVzc2FnZV90ZXh0KG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRleHRfb3JpZzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgICAgICAjIFByZS1maWx0ZXIgb24gcmF3IHRleHQgKFJ1c3NpYW4gTW9EIHBocmFzZSBhcHBlYXJzCiAgICAgICAgICAgICAgICAgICAgICAgICMgZGlyZWN0bHkgaW4gb3JpZ2luYWwgdGV4dCkuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBfbWF0Y2hlc19waHJhc2VfZmlsdGVyKHRleHRfb3JpZyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dF9lbiA9IHRleHRfb3JpZwogICAgICAgICAgICAgICAgICAgICAgICByYXdfdGV4dCA9IE5vbmUKCiAgICAgICAgICAgICAgICAgICAgICAgICMgQXBwbHkgYmxhY2tsaXN0L3doaXRlbGlzdCBvbiBmaW5hbCB0ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBfcGFzc2VzX3dvcmRfZmlsdGVycyh0ZXh0X2VuLCBibGFja2xpc3QsIHdoaXRlbGlzdCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6ICJ0ZWxlZ3JhbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2hhbm5lbCI6IGNmZy5jaGFubmVsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWxpYXMiOiBjZmcuYWxpYXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2hhbm5lbF9sYW5nIjogY2ZnLmNoYW5uZWxfbGFuZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwb3N0X2lkIjogbXNnLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInB1Ymxpc2hlZF9hdCI6IF91dGNfaXNvKG1zZy5kYXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJmZXRjaGVkX2F0IjogX3V0Y19pc28oZGF0ZXRpbWUubm93KFVUQykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInJhd190ZXh0IjogcmF3X3RleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGV4dCI6IHRleHRfZW4sCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIG91dF9mLndyaXRlKGpzb24uZHVtcHMocmVjb3JkLCBlbnN1cmVfYXNjaWk9RmFsc2UpICsgIlxuIikKICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkcy5hcHBlbmQocmVjb3JkKQoKICAgICAgICAgICAgICAgICAgICAjIERvbmUgd2l0aCB0aGlzIGNoYW5uZWwKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgICAgICMgTk9OLUVOR0xJU0ggQ0hBTk5FTFMgKGUuZy4gR2VuZXJhbFN0YWZmWlNVLCBsYW5nPSd1aycpCiAgICAgICAgICAgICAgICAjIEZpcnN0IHBhc3M6IGZpbmQgd2hpY2ggbWVzc2FnZXMgKmJvdGgqIG1hdGNoIHRoZQogICAgICAgICAgICAgICAgIyBwaHJhc2UgZmlsdGVyIGFuZCBhcmUgd29ydGggdHJhbnNsYXRpbmcuCiAgICAgICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICB0cmFuc2xhdGVfY2FuZGlkYXRlczogc2V0W2ludF0gPSBzZXQoKQoKICAgICAgICAgICAgICAgIGFzeW5jIGZvciBtc2cgaW4gX2l0ZXJfbWVzc2FnZXNfaW5fcmFuZ2UoCiAgICAgICAgICAgICAgICAgICAgY2xpZW50PWNsaWVudCwKICAgICAgICAgICAgICAgICAgICBlbnRpdHk9ZW50aXR5LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X2R0PXN0YXJ0X2R0LAogICAgICAgICAgICAgICAgICAgIGVuZF9kdD1lbmRfZHQsCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIHRleHRfb3JpZyA9IF9leHRyYWN0X21lc3NhZ2VfdGV4dChtc2cpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRleHRfb3JpZzoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgIyBQUkUtRklMVEVSIGJ5IFBIUkFTRV9GSUxURVJTIG9uIFJBVyBURVhUCiAgICAgICAgICAgICAgICAgICAgIyAoZS5nLiBVa3JhaW5pYW4gItCe0L/QtdGA0LDRgtC40LLQvdCwINGW0L3RhNC+0YDQvNCw0YbRltGPINGB0YLQsNC90L7QvCDQvdCwIikuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IF9tYXRjaGVzX3BocmFzZV9maWx0ZXIodGV4dF9vcmlnKToKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgaWYgbGFuZyA9PSAidWsiOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc2hvdWxkX3RyYW5zbGF0ZV91a19wb3N0KHRleHRfb3JpZyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVfY2FuZGlkYXRlcy5hZGQobXNnLmlkKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICMgT3RoZXIgbm9uLUVOIGxhbmd1YWdlcywgaWYgeW91IGV2ZXIgYWRkIHRoZW0uCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZV9jYW5kaWRhdGVzLmFkZChtc2cuaWQpCgogICAgICAgICAgICAgICAgdG90YWxfdG9fdHJhbnNsYXRlID0gbGVuKHRyYW5zbGF0ZV9jYW5kaWRhdGVzKQogICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSBQcm9ncmVzc0Jhcih0b3RhbF90b190cmFuc2xhdGUgaWYgdG90YWxfdG9fdHJhbnNsYXRlID4gMCBlbHNlIDEpCgogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oCiAgICAgICAgICAgICAgICAgICAgIkNoYW5uZWwgJXM6ICVkIG1lc3NhZ2VzIG1hdGNoIHNpdHJlcCBwaHJhc2VzIGFuZCByZXF1aXJlIHRyYW5zbGF0aW9uLiIsCiAgICAgICAgICAgICAgICAgICAgY2ZnLmNoYW5uZWxfbmFtZSwKICAgICAgICAgICAgICAgICAgICB0b3RhbF90b190cmFuc2xhdGUsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAgICAgIyBTRUNPTkQgUEFTUyDigJQgcmVhbCBpbmdlc3Rpb24sIG9ubHkgZm9yIGNhbmRpZGF0ZXMKICAgICAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgICAgIGFzeW5jIGZvciBtc2cgaW4gX2l0ZXJfbWVzc2FnZXNfaW5fcmFuZ2UoCiAgICAgICAgICAgICAgICAgICAgY2xpZW50PWNsaWVudCwKICAgICAgICAgICAgICAgICAgICBlbnRpdHk9ZW50aXR5LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X2R0PXN0YXJ0X2R0LAogICAgICAgICAgICAgICAgICAgIGVuZF9kdD1lbmRfZHQsCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgICMgT25seSB0b3VjaCBtZXNzYWdlcyB3ZSBkZWNpZGVkIHdlcmUgaW50ZXJlc3RpbmcgaW4gcGFzcyAxLgogICAgICAgICAgICAgICAgICAgIGlmIG1zZy5pZCBub3QgaW4gdHJhbnNsYXRlX2NhbmRpZGF0ZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgIHRleHRfb3JpZyA9IF9leHRyYWN0X21lc3NhZ2VfdGV4dChtc2cpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRleHRfb3JpZzoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0X2VuID0gYXdhaXQgX3RyYW5zbGF0ZV9tZXNzYWdlX3RleHQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQ9Y2xpZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5PWVudGl0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9bXNnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9fbGFuZz0iZW4iLAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRleHRfZW4gaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkdmFuY2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgICAgIHJhd190ZXh0ID0gdGV4dF9vcmlnCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkdmFuY2UoKQoKICAgICAgICAgICAgICAgICAgICBleGNlcHQgVHJhbnNsYXRpb25GYWlsZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmZpbmlzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlCgogICAgICAgICAgICAgICAgICAgICMgWW91ICpjYW4qIHJlLWNoZWNrIHRoZSBwaHJhc2UgZmlsdGVyIG9uIHRleHRfZW4gaGVyZSwKICAgICAgICAgICAgICAgICAgICAjIGJ1dCBnaXZlbiB0aGUgZml4ZWQgZm9ybXVsYWljIGhlYWRlcnMsIGl0J3MgcHJvYmFibHkKICAgICAgICAgICAgICAgICAgICAjIHJlZHVuZGFudC4gS2VlcGluZyB0aGUgcmVjb3JkIHVuY29uZGl0aW9uYWxseSBmb3IKICAgICAgICAgICAgICAgICAgICAjIGFsbCBjYW5kaWRhdGVzOgogICAgICAgICAgICAgICAgICAgIHJlY29yZCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6ICJ0ZWxlZ3JhbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJjaGFubmVsIjogY2ZnLmNoYW5uZWxfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgImNoYW5uZWxfbGFuZyI6IGNmZy5jaGFubmVsX2xhbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICJwb3N0X2lkIjogbXNnLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAicHVibGlzaGVkX2F0IjogX3V0Y19pc28obXNnLmRhdGUpLAogICAgICAgICAgICAgICAgICAgICAgICAiZmV0Y2hlZF9hdCI6IF91dGNfaXNvKGRhdGV0aW1lLm5vdyhVVEMpKSwKICAgICAgICAgICAgICAgICAgICAgICAgInRleHQiOiB0ZXh0X2VuLAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgb3V0X2Yud3JpdGUoanNvbi5kdW1wcyhyZWNvcmQsIGVuc3VyZV9hc2NpaT1GYWxzZSkgKyAiXG4iKQogICAgICAgICAgICAgICAgICAgIHJlY29yZHMuYXBwZW5kKHJlY29yZCkKCiAgICAgICAgICAgICAgICBwcm9ncmVzcy5maW5pc2goKQoKICAgIGxvZ2dlci5pbmZvKCJJbmdlc3Rpb24gY29tcGxldGUsIG91dHB1dCB3cml0dGVuIHRvICVzIiwgb3V0cHV0X3BhdGgpCiAgICByZXR1cm4gb3V0cHV0X3BhdGgsIHJlY29yZHMKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFB1YmxpYyBzeW5jIHdyYXBwZXIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpkZWYgZmV0Y2hfcG9zdHMoCiAgICBzdGFydF9kYXRlOiBzdHIsCiAgICBlbmRfZGF0ZTogc3RyIHwgTm9uZSA9IE5vbmUsCiAgICBjaGFubmVsc19wYXRoOiBQYXRoIHwgTm9uZSA9IE5vbmUsCiAgICBvdXRfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAopIC0+IHR1cGxlW1BhdGgsIGxpc3RbZGljdF1dOgogICAgIiIiCiAgICBTeW5jaHJvbm91cyB3cmFwcGVyIGFyb3VuZCB0aGUgYXN5bmMgaW5nZXN0IGZ1bmN0aW9uLgogICAgIiIiCiAgICByZXR1cm4gYXN5bmNpby5ydW4oCiAgICAgICAgX2luZ2VzdF90ZWxlZ3JhbV93aW5kb3dfYXN5bmMoCiAgICAgICAgICAgIHN0YXJ0X2RhdGU9c3RhcnRfZGF0ZSwKICAgICAgICAgICAgZW5kX2RhdGU9ZW5kX2RhdGUsCiAgICAgICAgICAgIG91dF9wYXRoPW91dF9wYXRoLAogICAgICAgICAgICBjaGFubmVsc19wYXRoPWNoYW5uZWxzX3BhdGgsCiAgICAgICAgKQogICAgKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ0xJIGVudHJ5cG9pbnQKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpkZWYgbWFpbihhcmd2OiBsaXN0W3N0cl0gfCBOb25lID0gTm9uZSkgLT4gaW50OgogICAgcGFyc2VyID0gYXJncGFyc2UuQXJndW1lbnRQYXJzZXIoCiAgICAgICAgZGVzY3JpcHRpb249IkZldGNoIGFuZCB0cmFuc2xhdGUgVGVsZWdyYW0gcG9zdHMgaW4gYSBkYXRlIHdpbmRvdy4iCiAgICApCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KAogICAgICAgICItcyIsCiAgICAgICAgIi0tc3RhcnQiLAogICAgICAgIHJlcXVpcmVkPVRydWUsCiAgICAgICAgaGVscD0iU3RhcnQgZGF0ZSAoWVlZWS1NTS1ERCwgaW5jbHVzaXZlKS4iLAogICAgKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICAiLWUiLAogICAgICAgICItLWVuZCIsCiAgICAgICAgaGVscD0iRW5kIGRhdGUgKFlZWVktTU0tREQsIGluY2x1c2l2ZSkuIERlZmF1bHRzIHRvIHN0YXJ0IGRhdGUgaWYgb21pdHRlZC4iLAogICAgKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICAiLWkiLAogICAgICAgICItLWltcG9ydCIsCiAgICAgICAgZGVzdD0iaW1wb3J0X3BhdGgiLAogICAgICAgIGhlbHA9KAogICAgICAgICAgICAiT3B0aW9uYWwgcGF0aCB0byBjaGFubmVscyBKU09OTCBmaWxlLiAiCiAgICAgICAgICAgICJJZiBwcm92aWRlZCwgb3ZlcnJpZGVzIHRoZSBoYXJkLWNvZGVkIGNoYW5uZWwgbGlzdC4iCiAgICAgICAgKSwKICAgICkKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgIi1vIiwKICAgICAgICAiLS1vdXQiLAogICAgICAgIGRlc3Q9Im91dF9wYXRoIiwKICAgICAgICBoZWxwPSgKICAgICAgICAgICAgIk9wdGlvbmFsIEpTT05MIG91dHB1dCBwYXRoLiAiCiAgICAgICAgICAgICJJZiBvbWl0dGVkLCB1c2VzIGRhdGEvaW50ZXJpbS9ZWVlZL1lZWVktTU0vWVlZWS1NTS1ERC9wb3N0cy5qc29ubC4iCiAgICAgICAgKSwKICAgICkKCiAgICBhcmdzID0gcGFyc2VyLnBhcnNlX2FyZ3MoYXJndikKCiAgICBzdGFydF9kYXRlID0gYXJncy5zdGFydAogICAgZW5kX2RhdGUgPSBhcmdzLmVuZAoKICAgIGNoYW5uZWxzX3BhdGg6IFBhdGggfCBOb25lID0gUGF0aChhcmdzLmltcG9ydF9wYXRoKSBpZiBhcmdzLmltcG9ydF9wYXRoIGVsc2UgTm9uZQogICAgb3V0X3BhdGg6IFBhdGggfCBOb25lID0gUGF0aChhcmdzLm91dF9wYXRoKSBpZiBhcmdzLm91dF9wYXRoIGVsc2UgTm9uZQoKICAgIG91dHB1dF9wYXRoLCByZWNvcmRzID0gZmV0Y2hfcG9zdHMoCiAgICAgICAgc3RhcnRfZGF0ZT1zdGFydF9kYXRlLAogICAgICAgIGVuZF9kYXRlPWVuZF9kYXRlLAogICAgICAgIGNoYW5uZWxzX3BhdGg9Y2hhbm5lbHNfcGF0aCwKICAgICAgICBvdXRfcGF0aD1vdXRfcGF0aCwKICAgICkKCiAgICBwcmludChmIldyb3RlIHtsZW4ocmVjb3Jkcyl9IHJlY29yZHMgdG8ge291dHB1dF9wYXRofSIpCiAgICByZXR1cm4gMAoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICByYWlzZSBTeXN0ZW1FeGl0KG1haW4oKSkKAAAAAAAAAABgVwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6D0AAAAAAADoPQAAAAAAAAAAAAAAAPC/"
				],
				[
					127,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAArVsAAAAAAACYWAAAIyBzcmMvbW9kbXltYXAvaW5nZXN0L3RlbGVncmFtX3dpbmRvdy5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgppbXBvcnQgYXJncGFyc2UKaW1wb3J0IGFzeW5jaW8KaW1wb3J0IGpzb24KaW1wb3J0IGxvZ2dpbmcKaW1wb3J0IG9zCmltcG9ydCByZQpmcm9tIGNvbGxlY3Rpb25zLmFiYyBpbXBvcnQgQXN5bmNJdGVyYXRvcgpmcm9tIGRhdGFjbGFzc2VzIGltcG9ydCBkYXRhY2xhc3MKZnJvbSBkYXRldGltZSBpbXBvcnQgVVRDLCBkYXRlLCBkYXRldGltZSwgdGltZSwgdGltZWRlbHRhCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBvcnQgRmluYWwKCmZyb20gZG90ZW52IGltcG9ydCBsb2FkX2RvdGVudgpmcm9tIHRlbGV0aG9uIGltcG9ydCBUZWxlZ3JhbUNsaWVudApmcm9tIHRlbGV0aG9uLmVycm9ycyBpbXBvcnQgRmxvb2RXYWl0RXJyb3IsIFJQQ0Vycm9yCmZyb20gdGVsZXRob24udGwgaW1wb3J0IGZ1bmN0aW9ucywgdHlwZXMKCmZyb20gc2l0cmVwYzIuZG9tLnR5cGVkZWZzIGltcG9ydCBQb3N0Cgpsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKbG9hZF9kb3RlbnYoKQoKYXBpX2lkID0gb3MuZ2V0ZW52KCJBUElfSUQiKQphcGlfaGFzaCA9IG9zLmdldGVudigiQVBJX0hBU0giKQoKIyBIb3cgYWdncmVzc2l2ZWx5IHdlIHRyYW5zbGF0ZQpNSU5fVFJBTlNMQVRJT05fTEVOR1RIID0gNDAgICMgY2hhcmFjdGVyczsgdHVuZSBhcyBkZXNpcmVkClRSQU5TTEFURV9TTEVFUF9TRUNPTkRTID0gNS4wICAjIHBvbGl0ZSBkZWxheSBiZXR3ZWVuIFRyYW5zbGF0ZVRleHRSZXF1ZXN0IGNhbGxzCk1BWF9UUkFOU0xBVElPTl9SRVRSSUVTID0gNQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBDaGFubmVsIGNvbmZpZwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKQGRhdGFjbGFzcwpjbGFzcyBDaGFubmVsQ29uZmlnOgogICAgY2hhbm5lbF9uYW1lOiBzdHIKICAgIGFsaWFzOiBzdHIKICAgIGNoYW5uZWxfbGFuZzogc3RyCiAgICBhY3RpdmU6IGJvb2wKCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tX2pzb24oY2xzLCBkYXRhOiBkaWN0KSAtPiBDaGFubmVsQ29uZmlnOgogICAgICAgIHJldHVybiBjbHMoCiAgICAgICAgICAgIGNoYW5uZWxfbmFtZT1kYXRhWyJjaGFubmVsX25hbWUiXSwKICAgICAgICAgICAgYWxpYXM9ZGF0YS5nZXQoImFsaWFzIiwgZGF0YVsiY2hhbm5lbF9uYW1lIl0pLAogICAgICAgICAgICBjaGFubmVsX2xhbmc9ZGF0YS5nZXQoImNoYW5uZWxfbGFuZyIsICJlbiIpLAogICAgICAgICAgICBhY3RpdmU9Ym9vbChkYXRhLmdldCgiYWN0aXZlIiwgRmFsc2UpKSwKICAgICAgICApCgoKSEFSRENPREVEX0NIQU5ORUxTOiBsaXN0W0NoYW5uZWxDb25maWddID0gW10gIyBubyBtb3JlIGhhcmRjb2RlZCBjaGFubmVscwoKIyBQaHJhc2VzIHRvIGtlZXAgcG9zdHMgZm9yLiBFZGl0L2V4dGVuZCBhcyBuZWVkZWQuIFdpbGwgYmUgb3ZlcnJpZGVuIGlmIC0td2hpdGVsaXN0IGlzIHVzZWQKUEhSQVNFX0ZJTFRFUlM6IGxpc3Rbc3RyXSA9IFsKICAgICJPcGVyYXRpb25hbCBpbmZvcm1hdGlvbiBhcyBvZiIsCiAgICAib24gcHJvZ3Jlc3Mgb2Ygc3BlY2lhbCBtaWxpdGFyeSBvcGVyYXRpb24gYXMgb2YiLAogICAgItCe0L/QtdGA0LDRgtC40LLQvdCwINGW0L3RhNC+0YDQvNCw0YbRltGPINGB0YLQsNC90L7QvCDQvdCwIiwKICAgICJDb29yZGluYXRlczoiLApdCgpCQVNFX1JFVFJZX1NMRUVQX1NFQ09ORFMgPSA1LjAgICMgYWRqdXN0IGlmIG5lZWRlZAoKRlJPTlRMSU5FX0tFWVdPUkRTOiBGaW5hbCA9ICgpCgojIEtleXdvcmRzL2hhc2h0YWdzIHRvICpza2lwKiAodHJhaW5pbmcgLyBQUiAvIHJlY3J1aXRtZW50KSDigJQgY3VycmVudGx5IHVudXNlZApUUkFJTklOR19IQVNIVEFHUzogRmluYWwgPSAoCiAgICAiI9C/0ZbQtNCz0L7RgtC+0LLQutCw0LfRgdGDIiwKICAgICIj0L/RltC00LPQvtGC0L7QstC60LDQt9GB0YMyMDI1IiwKKQoKVFJBSU5JTkdfUEhSQVNFUzogRmluYWwgPSAoCiAgICAi0YnQvtC00L3RjyDQstC00L7RgdC60L7QvdCw0LvRjtGO0YLRjCDRgdCy0L7RlyDQvdCw0LLQuNGH0LrQuCIsCiAgICAi0L3QsNCy0LjRh9C60Lgg0YLQsCDQstC80ZbQvdC90Y8iLAogICAgItC/0ZbQtNCz0L7RgtC+0LLQutCwIiwKICAgICLRgtGA0LXQvdGD0LLQsNC90L3RjyIsCiAgICAi0Y/QuiDQtNGW0Y/RgtC4INCyIMKr0YPRgNCx0LDQvdGWwrsiLAogICAgJ9GP0Log0LTRltGP0YLQuCDQsiAi0YPRgNCx0LDQvdGWIicsCiAgICAi0Y/QuiDQstGA0Y/RgtGD0LLQsNGC0Lgg0L/QvtCx0YDQsNGC0LjQvNCwIiwKICAgICLQstGW0LTQtNGW0LvQtdC90L3RjyDQutC+0LzRg9C90ZbQutCw0YbRltC5IiwKICAgICLQv9GA0LXRgdGB0LvRg9C20LHQsCIsCiAgICAi0L/RgNC10YEt0YHQu9GD0LbQsdCwIiwKKQoKUkVDUlVJVE1FTlRfUEhSQVNFUzogRmluYWwgPSAoCiAgICAi0L/RgNC40ZTQtNC90YPQudGC0LXRgdGMINC00L4g0YHQuNC7INC+0LHQvtGA0L7QvdC4IiwKICAgICLRgNCw0LfQvtC8INC/0LXRgNC10LzQvtC20LXQvNC+IiwKICAgICLRgdC70LDQstCwINGD0LrRgNCw0ZfQvdGWIiwKKQoKVE9QT05ZTV9MSUtFX1JFID0gcmUuY29tcGlsZShyIlxiW9CQLdCv0IbQh9CE0pBdW9CwLdGP0ZbRl9GU0pEnXSsoPzosfFxiKSIpCgoKY2xhc3MgUHJvZ3Jlc3NCYXI6CiAgICBkZWYgX19pbml0X18oc2VsZiwgdG90YWw6IGludCwgd2lkdGg6IGludCA9IDMwKToKICAgICAgICBzZWxmLnRvdGFsID0gbWF4KHRvdGFsLCAxKQogICAgICAgIHNlbGYud2lkdGggPSB3aWR0aAogICAgICAgIHNlbGYuY291bnQgPSAwCgogICAgZGVmIGFkdmFuY2Uoc2VsZikgLT4gTm9uZToKICAgICAgICBzZWxmLmNvdW50ICs9IDEKICAgICAgICBmaWxsZWQgPSBpbnQoc2VsZi53aWR0aCAqIChzZWxmLmNvdW50IC8gc2VsZi50b3RhbCkpCiAgICAgICAgYmFyID0gIuKWiCIgKiBmaWxsZWQgKyAi4paRIiAqIChzZWxmLndpZHRoIC0gZmlsbGVkKQogICAgICAgIHByaW50KGYiXHJbIHtiYXJ9IF0ge3NlbGYuY291bnR9L3tzZWxmLnRvdGFsfSIsIGVuZD0iIiwgZmx1c2g9VHJ1ZSkKCiAgICBkZWYgZmluaXNoKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgcHJpbnQoKSAgIyBtb3ZlIHRvIG5leHQgbGluZQoKCmRlZiBzaG91bGRfdHJhbnNsYXRlX3VrX3Bvc3QodGV4dDogc3RyKSAtPiBib29sOgogICAgYmxhY2tsaXN0ID0gUkVDUlVJVE1FTlRfUEhSQVNFUyArIFRSQUlOSU5HX1BIUkFTRVMgKyBUUkFJTklOR19IQVNIVEFHUwogICAgbG93ZXJlZCA9IHRleHQubG93ZXIoKQogICAgcmV0dXJuIG5vdCBhbnkod29yZC5sb3dlcigpIGluIGxvd2VyZWQgZm9yIHdvcmQgaW4gYmxhY2tsaXN0KQoKCmNsYXNzIFRyYW5zbGF0aW9uRmFpbGVkKFJ1bnRpbWVFcnJvcik6CiAgICBwYXNzCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBGaWx0ZXJzICYgaGVscGVycwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCmRlZiBfbWF0Y2hlc19waHJhc2VfZmlsdGVyKHRleHQ6IHN0cikgLT4gYm9vbDoKICAgICIiIgogICAgUmV0dXJuIFRydWUgaWYgYHRleHRgIGNvbnRhaW5zIGFueSBvZiB0aGUgY29uZmlndXJlZCBwaHJhc2VzIChjYXNlLWluc2Vuc2l0aXZlKS4KICAgICIiIgogICAgaWYgbm90IHRleHQ6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBsb3dlcmVkID0gdGV4dC5sb3dlcigpCiAgICByZXR1cm4gYW55KHBocmFzZS5sb3dlcigpIGluIGxvd2VyZWQgZm9yIHBocmFzZSBpbiBQSFJBU0VfRklMVEVSUykKCgpkZWYgX2xvYWRfdGVsZWdyYW1fY3JlZGVudGlhbHMoKSAtPiB0dXBsZVtpbnQsIHN0ciwgc3RyXToKICAgICIiIgogICAgTG9hZCBUZWxlZ3JhbSBBUEkgY3JlZGVudGlhbHMgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuCgogICAgUmVxdWlyZWQ6CiAgICAgIC0gQVBJX0lEICAgICAgKGludCkKICAgICAgLSBBUElfSEFTSCAgICAoc3RyKQoKICAgIE9wdGlvbmFsOgogICAgICAtIFRFTEVHUkFNX1NFU1NJT05fTkFNRSAoc3RyLCBkZWZhdWx0cyB0byAibW9kbXltYXAiKQogICAgIiIiCiAgICBhcGlfaWRfcmF3ID0gb3MuZ2V0ZW52KCJBUElfSUQiKQogICAgYXBpX2hhc2ggPSBvcy5nZXRlbnYoIkFQSV9IQVNIIikKCiAgICBpZiBhcGlfaWRfcmF3IGlzIE5vbmUgb3IgYXBpX2hhc2ggaXMgTm9uZToKICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkFQSV9JRCBhbmQgQVBJX0hBU0ggbXVzdCBiZSBzZXQgaW4gdGhlIGVudmlyb25tZW50IikKCiAgICBhcGlfaWQgPSBpbnQoYXBpX2lkX3JhdykKICAgIHNlc3Npb25fbmFtZSA9IG9zLmdldGVudigiVEVMRUdSQU1fU0VTU0lPTl9OQU1FIiwgIm1vZG15bWFwIikKICAgIHJldHVybiBhcGlfaWQsIGFwaV9oYXNoLCBzZXNzaW9uX25hbWUKCgpkZWYgX3BhcnNlX2RhdGVfcmFuZ2UoCiAgICBzdGFydF9kYXRlOiBzdHIgfCBkYXRlLAogICAgZW5kX2RhdGU6IHN0ciB8IGRhdGUgfCBOb25lLAopIC0+IHR1cGxlW2RhdGV0aW1lLCBkYXRldGltZV06CiAgICAiIiIKICAgIEFjY2VwdHMgZWl0aGVyIElTTyBzdHJpbmdzIG9yIGRhdGV0aW1lLmRhdGUgb2JqZWN0cy4KICAgIFJldHVybnMgYW4gaW5jbHVzaXZlIFVUQyBkYXRldGltZSByYW5nZS4KICAgICIiIgogICAgaWYgaXNpbnN0YW5jZShzdGFydF9kYXRlLCBkYXRlKToKICAgICAgICBzdGFydF9kID0gc3RhcnRfZGF0ZQogICAgZWxzZToKICAgICAgICBzdGFydF9kID0gZGF0ZS5mcm9taXNvZm9ybWF0KHN0YXJ0X2RhdGUpCgogICAgaWYgZW5kX2RhdGUgaXMgTm9uZToKICAgICAgICBlbmRfZCA9IHN0YXJ0X2QKICAgIGVsc2U6CiAgICAgICAgaWYgaXNpbnN0YW5jZShlbmRfZGF0ZSwgZGF0ZSk6CiAgICAgICAgICAgIGVuZF9kID0gZW5kX2RhdGUKICAgICAgICBlbHNlOgogICAgICAgICAgICBlbmRfZCA9IGRhdGUuZnJvbWlzb2Zvcm1hdChlbmRfZGF0ZSkKCiAgICBpZiBlbmRfZCA8IHN0YXJ0X2Q6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiZW5kX2RhdGUgbXVzdCBiZSA+PSBzdGFydF9kYXRlIikKCiAgICBzdGFydF9kdCA9IGRhdGV0aW1lLmNvbWJpbmUoc3RhcnRfZCwgdGltZS5taW4sIHR6aW5mbz1VVEMpCiAgICBlbmRfZHQgPSBkYXRldGltZS5jb21iaW5lKGVuZF9kLCB0aW1lLm1heCwgdHppbmZvPVVUQykKICAgIHJldHVybiBzdGFydF9kdCwgZW5kX2R0CgoKZGVmIF91dGNfaXNvKGR0OiBkYXRldGltZSkgLT4gc3RyOgogICAgIiIiCiAgICBOb3JtYWxpemUgZGF0ZXRpbWUgdG8gVVRDIGFuZCBmb3JtYXQgYXMgSVNPIDg2MDEgd2l0aCAnWicgc3VmZml4LgogICAgIiIiCiAgICBpZiBkdC50emluZm8gaXMgTm9uZToKICAgICAgICBkdCA9IGR0LnJlcGxhY2UodHppbmZvPVVUQykKICAgIGVsc2U6CiAgICAgICAgZHQgPSBkdC5hc3RpbWV6b25lKFVUQykKICAgIHJldHVybiBkdC5pc29mb3JtYXQoKS5yZXBsYWNlKCIrMDA6MDAiLCAiWiIpCgoKZGVmIF9vdXRwdXRfcGF0aF9mb3JfdG9kYXkoYmFzZV9kaXI6IFBhdGggfCBOb25lID0gTm9uZSkgLT4gUGF0aDoKICAgICIiIgogICAgQnVpbGQgdG9kYXkncyBpbnRlcmltIHBvc3RzIHBhdGg6CiAgICAgIGRhdGEvaW50ZXJpbS9ZWVlZL1lZWVktTU0vWVlZWS1NTS1ERC9wb3N0cy5qc29ubAogICAgIiIiCiAgICB0b2RheSA9IGRhdGUudG9kYXkoKQogICAgaWYgYmFzZV9kaXIgaXMgTm9uZToKICAgICAgICBiYXNlX2RpciA9IFBhdGgoImRhdGEiKSAvICJpbnRlcmltIgoKICAgIHllYXJfZGlyID0gYmFzZV9kaXIgLyBmInt0b2RheS55ZWFyfSIKICAgIG1vbnRoX2RpciA9IHllYXJfZGlyIC8gZiJ7dG9kYXkueWVhcn0te3RvZGF5Lm1vbnRoOjAyZH0iCiAgICBkYXlfZGlyID0gbW9udGhfZGlyIC8gdG9kYXkuaXNvZm9ybWF0KCkKICAgIGRheV9kaXIubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQogICAgcmV0dXJuIGRheV9kaXIgLyAicG9zdHMuanNvbmwiCgoKZGVmIF9lbnN1cmVfb3V0cHV0X3BhdGgob3V0X3BhdGg6IFBhdGggfCBOb25lKSAtPiBQYXRoOgogICAgIiIiCiAgICBVc2UgdGhlIHByb3ZpZGVkIG91dF9wYXRoLCBvciBkZWZhdWx0IHRvIHRoZSBzdGFuZGFyZCBpbnRlcmltIHBhdGguCiAgICBFbnN1cmVzIHBhcmVudCBkaXJlY3RvcmllcyBleGlzdC4KICAgICIiIgogICAgaWYgb3V0X3BhdGggaXMgTm9uZToKICAgICAgICBvdXRfcGF0aCA9IF9vdXRwdXRfcGF0aF9mb3JfdG9kYXkoKQogICAgb3V0X3BhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHJldHVybiBvdXRfcGF0aAoKCmRlZiBfbG9hZF9jaGFubmVsc19mcm9tX2ZpbGUocGF0aDogUGF0aCkgLT4gbGlzdFtDaGFubmVsQ29uZmlnXToKICAgIGNoYW5uZWxzOiBsaXN0W0NoYW5uZWxDb25maWddID0gW10KICAgIHdpdGggcGF0aC5vcGVuKCJyIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICBmb3IgbGluZSBpbiBmOgogICAgICAgICAgICBsaW5lID0gbGluZS5zdHJpcCgpCiAgICAgICAgICAgIGlmIG5vdCBsaW5lOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgZGF0YSA9IGpzb24ubG9hZHMobGluZSkKICAgICAgICAgICAgY2ZnID0gQ2hhbm5lbENvbmZpZy5mcm9tX2pzb24oZGF0YSkKICAgICAgICAgICAgY2hhbm5lbHMuYXBwZW5kKGNmZykKICAgIHJldHVybiBjaGFubmVscwoKZGVmIF9wYXNzZXNfd29yZF9maWx0ZXJzKAogICAgdGV4dDogc3RyLAogICAgYmxhY2tsaXN0OiBsaXN0W3N0cl0gfCB0dXBsZVtzdHIsIC4uLl0gfCBOb25lLAogICAgd2hpdGVsaXN0OiBsaXN0W3N0cl0gfCB0dXBsZVtzdHIsIC4uLl0gfCBOb25lLAopIC0+IGJvb2w6CiAgICAiIiIKICAgIFJldHVybiBUcnVlIGlmZiB0ZXh0IGlzIGFsbG93ZWQgdW5kZXIgdGhlIGJsYWNrbGlzdC93aGl0ZWxpc3QgcnVsZXMuCgogICAgLSBibGFja2xpc3Q6IGlmIGFueSB3b3JkIGlzIHByZXNlbnQgKGNhc2UtaW5zZW5zaXRpdmUpLCByZWplY3QuCiAgICAtIHdoaXRlbGlzdDogaWYgcHJvdmlkZWQsIHJlcXVpcmUgYXQgbGVhc3Qgb25lIHdvcmQgYmUgcHJlc2VudC4KICAgICIiIgogICAgbG93ZXJlZCA9IHRleHQubG93ZXIoKQoKICAgIGlmIGJsYWNrbGlzdDoKICAgICAgICBmb3Igd29yZCBpbiBibGFja2xpc3Q6CiAgICAgICAgICAgIGlmIHdvcmQubG93ZXIoKSBpbiBsb3dlcmVkOgogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgd2hpdGVsaXN0OgogICAgICAgIGZvciB3b3JkIGluIHdoaXRlbGlzdDoKICAgICAgICAgICAgaWYgd29yZC5sb3dlcigpIGluIGxvd2VyZWQ6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHJldHVybiBUcnVlCgoKCmFzeW5jIGRlZiBfaXRlcl9tZXNzYWdlc19pbl9yYW5nZSgKICAgIGNsaWVudDogVGVsZWdyYW1DbGllbnQsCiAgICBlbnRpdHk6IHR5cGVzLlR5cGVJbnB1dFBlZXIgfCBzdHIsCiAgICBzdGFydF9kdDogZGF0ZXRpbWUsCiAgICBlbmRfZHQ6IGRhdGV0aW1lLAopIC0+IEFzeW5jSXRlcmF0b3JbdHlwZXMuTWVzc2FnZV06CiAgICAiIiIKICAgIFlpZWxkIG1lc3NhZ2VzIGZvciBgZW50aXR5YCB3aXRoIGRhdGUgaW4gW3N0YXJ0X2R0LCBlbmRfZHRdIChVVEMpLgoKICAgIFdlIGl0ZXJhdGUgYmFja3dhcmRzIGZyb20gKGVuZF9kdCArIDEgc2Vjb25kKSB1bnRpbCB3ZSBkcm9wIGJlbG93IHN0YXJ0X2R0LgogICAgIiIiCiAgICBvZmZzZXRfZHQgPSBlbmRfZHQgKyB0aW1lZGVsdGEoc2Vjb25kcz0xKQoKICAgIGFzeW5jIGZvciBtc2cgaW4gY2xpZW50Lml0ZXJfbWVzc2FnZXMoZW50aXR5LCBvZmZzZXRfZGF0ZT1vZmZzZXRfZHQpOgogICAgICAgIGlmIG1zZy5kYXRlIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIG1zZ19kdCA9IG1zZy5kYXRlCiAgICAgICAgaWYgbXNnX2R0LnR6aW5mbyBpcyBOb25lOgogICAgICAgICAgICBtc2dfZHQgPSBtc2dfZHQucmVwbGFjZSh0emluZm89VVRDKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1zZ19kdCA9IG1zZ19kdC5hc3RpbWV6b25lKFVUQykKCiAgICAgICAgaWYgbXNnX2R0IDwgc3RhcnRfZHQ6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgbXNnX2R0ID4gZW5kX2R0OgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICB5aWVsZCBtc2cKCgphc3luYyBkZWYgX3RyYW5zbGF0ZV9tZXNzYWdlX3RleHQoCiAgICBjbGllbnQ6IFRlbGVncmFtQ2xpZW50LAogICAgZW50aXR5OiB0eXBlcy5UeXBlSW5wdXRQZWVyIHwgc3RyLAogICAgbWVzc2FnZTogdHlwZXMuTWVzc2FnZSwKICAgIHRvX2xhbmc6IHN0ciA9ICJlbiIsCikgLT4gc3RyIHwgTm9uZToKICAgIG9yaWdpbmFsX3RleHQgPSAobWVzc2FnZS5tZXNzYWdlIG9yICIiKS5zdHJpcCgpCiAgICBpZiBub3Qgb3JpZ2luYWxfdGV4dDoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGlmIGxlbihvcmlnaW5hbF90ZXh0KSA8IE1JTl9UUkFOU0xBVElPTl9MRU5HVEg6CiAgICAgICAgbG9nZ2VyLmRlYnVnKAogICAgICAgICAgICAiU2tpcHBpbmcgdHJhbnNsYXRpb24gZm9yIHNob3J0IG1lc3NhZ2UgJXMgKGxlbj0lZCA8ICVkKSIsCiAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgIGxlbihvcmlnaW5hbF90ZXh0KSwKICAgICAgICAgICAgTUlOX1RSQU5TTEFUSU9OX0xFTkdUSCwKICAgICAgICApCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBsYXN0X2Vycm9yOiBFeGNlcHRpb24gfCBOb25lID0gTm9uZQoKICAgIGZvciBhdHRlbXB0IGluIHJhbmdlKDEsIE1BWF9UUkFOU0xBVElPTl9SRVRSSUVTICsgMSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBsb2dnZXIuZGVidWcoCiAgICAgICAgICAgICAgICAiVHJhbnNsYXRpbmcgbWVzc2FnZSAlcyAoYXR0ZW1wdCAlZC8lZCkiLAogICAgICAgICAgICAgICAgbWVzc2FnZS5pZCwKICAgICAgICAgICAgICAgIGF0dGVtcHQsCiAgICAgICAgICAgICAgICBNQVhfVFJBTlNMQVRJT05fUkVUUklFUywKICAgICAgICAgICAgKQoKICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgY2xpZW50KAogICAgICAgICAgICAgICAgZnVuY3Rpb25zLm1lc3NhZ2VzLlRyYW5zbGF0ZVRleHRSZXF1ZXN0KAogICAgICAgICAgICAgICAgICAgIHBlZXI9ZW50aXR5LAogICAgICAgICAgICAgICAgICAgIGlkPVttZXNzYWdlLmlkXSwKICAgICAgICAgICAgICAgICAgICB0b19sYW5nPXRvX2xhbmcsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIGdldGF0dHIocmVzdWx0LCAicmVzdWx0IiwgTm9uZSk6CiAgICAgICAgICAgICAgICB0cmFuc2xhdGVkID0gcmVzdWx0LnJlc3VsdFswXS50ZXh0IG9yIG9yaWdpbmFsX3RleHQKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRyYW5zbGF0ZWQgPSBvcmlnaW5hbF90ZXh0CgogICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlZAoKICAgICAgICBleGNlcHQgRmxvb2RXYWl0RXJyb3IgYXMgZToKICAgICAgICAgICAgbGFzdF9lcnJvciA9IGUKICAgICAgICAgICAgcmVxdWlyZWQgPSBlLnNlY29uZHMKCiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKAogICAgICAgICAgICAgICAgIkZsb29kV2FpdEVycm9yIGZvciBtZXNzYWdlICVzIChhdHRlbXB0ICVkLyVkKTogIgogICAgICAgICAgICAgICAgIiVzIHNlY29uZHMgcmVxdWlyZWQgYnkgVGVsZWdyYW0uIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgICAgICBhdHRlbXB0LAogICAgICAgICAgICAgICAgTUFYX1RSQU5TTEFUSU9OX1JFVFJJRVMsCiAgICAgICAgICAgICAgICByZXF1aXJlZCwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgaWYgYXR0ZW1wdCA9PSBNQVhfVFJBTlNMQVRJT05fUkVUUklFUzoKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKHJlcXVpcmVkICsgMSkKCiAgICAgICAgZXhjZXB0IFJQQ0Vycm9yIGFzIGU6CiAgICAgICAgICAgIGxhc3RfZXJyb3IgPSBlCiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKAogICAgICAgICAgICAgICAgIlJQQ0Vycm9yIGZvciBtZXNzYWdlICVzIG9uIGF0dGVtcHQgJWQvJWQ6ICVzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgICAgICBhdHRlbXB0LAogICAgICAgICAgICAgICAgTUFYX1RSQU5TTEFUSU9OX1JFVFJJRVMsCiAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICApCgogICAgICAgICAgICBpZiBhdHRlbXB0ID09IE1BWF9UUkFOU0xBVElPTl9SRVRSSUVTOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoQkFTRV9SRVRSWV9TTEVFUF9TRUNPTkRTICogYXR0ZW1wdCkKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsYXN0X2Vycm9yID0gZQogICAgICAgICAgICBsb2dnZXIud2FybmluZygKICAgICAgICAgICAgICAgICJVbmV4cGVjdGVkIHRyYW5zbGF0aW9uIGVycm9yIGZvciBtZXNzYWdlICVzIG9uIGF0dGVtcHQgJWQvJWQ6ICVzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgICAgICBhdHRlbXB0LAogICAgICAgICAgICAgICAgTUFYX1RSQU5TTEFUSU9OX1JFVFJJRVMsCiAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICApCgogICAgICAgICAgICBpZiBhdHRlbXB0ID09IE1BWF9UUkFOU0xBVElPTl9SRVRSSUVTOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoQkFTRV9SRVRSWV9TTEVFUF9TRUNPTkRTICogYXR0ZW1wdCkKCiAgICByYWlzZSBUcmFuc2xhdGlvbkZhaWxlZCgKICAgICAgICBmIkZhaWxlZCB0byB0cmFuc2xhdGUgbWVzc2FnZSB7bWVzc2FnZS5pZH0gYWZ0ZXIgIgogICAgICAgIGYie01BWF9UUkFOU0xBVElPTl9SRVRSSUVTfSBhdHRlbXB0cy4gbGFzdF9lcnJvcj17bGFzdF9lcnJvciFyfSIKICAgICkKCgpkZWYgX2V4dHJhY3RfbWVzc2FnZV90ZXh0KG1zZzogdHlwZXMuTWVzc2FnZSkgLT4gc3RyOgogICAgIiIiCiAgICBHZXQgdGhlIHRleHQgY29udGVudCBvZiBhIG1lc3NhZ2UgKHNraXBwaW5nIHNlcnZpY2UvZW1wdHkgbWVzc2FnZXMpLgogICAgIiIiCiAgICB0ZXh0ID0gbXNnLm1lc3NhZ2Ugb3IgZ2V0YXR0cihtc2csICJyYXdfdGV4dCIsICIiKSBvciAiIgogICAgcmV0dXJuIHRleHQuc3RyaXAoKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ29yZSBhc3luYyBpbXBsZW1lbnRhdGlvbgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKYXN5bmMgZGVmIF9pbmdlc3RfdGVsZWdyYW1fd2luZG93X2FzeW5jKAogICAgc3RhcnRfZGF0ZTogc3RyLAogICAgZW5kX2RhdGU6IHN0ciB8IE5vbmUsCiAgICBvdXRfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAogICAgY2hhbm5lbHNfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAogICAgYWxpYXNlczogbGlzdFtzdHJdIHwgTm9uZSA9IE5vbmUsCiAgICBibGFja2xpc3Q6IGxpc3Rbc3RyXSB8IE5vbmUgPSBOb25lLAogICAgd2hpdGVsaXN0OiBsaXN0W3N0cl0gfCBOb25lID0gTm9uZSwKKSAtPiB0dXBsZVtQYXRoLCBsaXN0W2RpY3RdXToKICAgICIiIgogICAgQ29yZSBhc3luYyBpbXBsZW1lbnRhdGlvbi4KCiAgICBOb3c6CiAgICAgIC0gUHJlLWZpbHRlcnMgbWVzc2FnZXMgYnkgUEhSQVNFX0ZJTFRFUlMgb24gdGhlICpyYXcqIHRleHQuCiAgICAgIC0gRm9yIG5vbi1FbmdsaXNoIGNoYW5uZWxzLCBvbmx5IHRob3NlIHByZS1maWx0ZXJlZCBtZXNzYWdlcyBhcmUKICAgICAgICBjb25zaWRlcmVkIGZvciB0cmFuc2xhdGlvbiBhbmQgY291bnRlZCBpbiB0aGUgcHJvZ3Jlc3MgYmFyLgogICAgIiIiCiAgICBhcGlfaWQsIGFwaV9oYXNoLCBzZXNzaW9uX25hbWUgPSBfbG9hZF90ZWxlZ3JhbV9jcmVkZW50aWFscygpCiAgICBzdGFydF9kdCwgZW5kX2R0ID0gX3BhcnNlX2RhdGVfcmFuZ2Uoc3RhcnRfZGF0ZSwgZW5kX2RhdGUpCgogICAgIyBEZXRlcm1pbmUgY2hhbm5lbHM6IGZpbGUgb3ZlcnJpZGVzIGhhcmQtY29kZWQgbGlzdCBpZiBnaXZlbgogICAgaWYgY2hhbm5lbHNfcGF0aCBpcyBub3QgTm9uZToKICAgICAgICBhbGxfY2hhbm5lbHMgPSBfbG9hZF9jaGFubmVsc19mcm9tX2ZpbGUoY2hhbm5lbHNfcGF0aCkKICAgICAgICBpZiBub3QgYWxsX2NoYW5uZWxzOgogICAgICAgICAgICBsb2dnZXIud2FybmluZygKICAgICAgICAgICAgICAgICJObyBjaGFubmVscyBmb3VuZCBpbiAlczsgZmFsbGluZyBiYWNrIHRvIEhBUkRDT0RFRF9DSEFOTkVMUyIsCiAgICAgICAgICAgICAgICBjaGFubmVsc19wYXRoLAogICAgICAgICAgICApCiAgICAgICAgICAgIGFsbF9jaGFubmVscyA9IEhBUkRDT0RFRF9DSEFOTkVMU1s6XQogICAgZWxzZToKICAgICAgICBhbGxfY2hhbm5lbHMgPSBIQVJEQ09ERURfQ0hBTk5FTFNbOl0KCiAgICAjIE5vcm1hbGl6ZSBhbGlhc2VzIChpZiBhbnkpIGFuZCBmaWx0ZXIgYnkgYWxpYXMgLyBjaGFubmVsX25hbWUgKyBhY3RpdmUKICAgIGFsaWFzX3NldCA9IHthLmxzdHJpcCgiQCIpLnN0cmlwKCkgZm9yIGEgaW4gYWxpYXNlc30gaWYgYWxpYXNlcyBlbHNlIE5vbmUKCiAgICBkZWYgX3NlbGVjdChjZmc6IENoYW5uZWxDb25maWcpIC0+IGJvb2w6CiAgICAgICAgaWYgbm90IGNmZy5hY3RpdmU6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGlmIGFsaWFzX3NldCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICMgbWF0Y2ggb24gYWxpYXMgb3IgY2hhbm5lbF9uYW1lICh3aXRob3V0IEApCiAgICAgICAgY25hbWUgPSBjZmcuY2hhbm5lbF9uYW1lLmxzdHJpcCgiQCIpLnN0cmlwKCkKICAgICAgICByZXR1cm4gY2ZnLmFsaWFzIGluIGFsaWFzX3NldCBvciBjbmFtZSBpbiBhbGlhc19zZXQKCiAgICBjaGFubmVscyA9IFtjZmcgZm9yIGNmZyBpbiBhbGxfY2hhbm5lbHMgaWYgX3NlbGVjdChjZmcpXQoKICAgIGlmIG5vdCBjaGFubmVsczoKICAgICAgICBsb2dnZXIuaW5mbygiTm8gbWF0Y2hpbmcgYWN0aXZlIGNoYW5uZWxzIGluIGNvbmZpZ3VyYXRpb24uIikKCiAgICBvdXRwdXRfcGF0aCA9IF9lbnN1cmVfb3V0cHV0X3BhdGgob3V0X3BhdGgpCgogICAgbG9nZ2VyLmluZm8oCiAgICAgICAgIkluZ2VzdGluZyBUZWxlZ3JhbSB3aW5kb3cgJXMg4oaSICVzIGludG8gJXMiLAogICAgICAgIHN0YXJ0X2R0Lmlzb2Zvcm1hdCgpLAogICAgICAgIGVuZF9kdC5pc29mb3JtYXQoKSwKICAgICAgICBvdXRwdXRfcGF0aCwKICAgICkKCiAgICByZWNvcmRzOiBsaXN0W2RpY3RdID0gW10KCiAgICBhc3luYyB3aXRoIFRlbGVncmFtQ2xpZW50KHNlc3Npb25fbmFtZSwgYXBpX2lkLCBhcGlfaGFzaCkgYXMgY2xpZW50OgogICAgICAgIHdpdGggb3V0cHV0X3BhdGgub3BlbigiYSIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIG91dF9mOgogICAgICAgICAgICBmb3IgY2ZnIGluIGNoYW5uZWxzOgogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oCiAgICAgICAgICAgICAgICAgICAgIkZldGNoaW5nIGZyb20gY2hhbm5lbCAlcyAoYWxpYXM9JXMsIGxhbmc9JXMpIiwKICAgICAgICAgICAgICAgICAgICBjZmcuY2hhbm5lbF9uYW1lLAogICAgICAgICAgICAgICAgICAgIGNmZy5hbGlhcywKICAgICAgICAgICAgICAgICAgICBjZmcuY2hhbm5lbF9sYW5nLAogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBlbnRpdHkgPSBhd2FpdCBjbGllbnQuZ2V0X2VudGl0eShjZmcuY2hhbm5lbF9uYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0IFJQQ0Vycm9yIGFzIGV4YzoKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICJGYWlsZWQgdG8gcmVzb2x2ZSBjaGFubmVsICVzOiAlcyIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNmZy5jaGFubmVsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGV4YywKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBsYW5nID0gY2ZnLmNoYW5uZWxfbGFuZy5sb3dlcigpCgogICAgICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAgICAgIyBFTkdMSVNIIENIQU5ORUxTIOKAlCBzaW5nbGUgcGFzcywgcGhyYXNlIGZpbHRlciBvbmx5CiAgICAgICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICBpZiBsYW5nID09ICJlbiI6CiAgICAgICAgICAgICAgICAgICAgYXN5bmMgZm9yIG1zZyBpbiBfaXRlcl9tZXNzYWdlc19pbl9yYW5nZSgKICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50PWNsaWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5PWVudGl0eSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfZHQ9c3RhcnRfZHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZF9kdD1lbmRfZHQsCiAgICAgICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dF9vcmlnID0gX2V4dHJhY3RfbWVzc2FnZV90ZXh0KG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRleHRfb3JpZzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgICAgICAjIFByZS1maWx0ZXIgb24gcmF3IHRleHQgKFJ1c3NpYW4gTW9EIHBocmFzZSBhcHBlYXJzCiAgICAgICAgICAgICAgICAgICAgICAgICMgZGlyZWN0bHkgaW4gb3JpZ2luYWwgdGV4dCkuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBfbWF0Y2hlc19waHJhc2VfZmlsdGVyKHRleHRfb3JpZyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dF9lbiA9IHRleHRfb3JpZwogICAgICAgICAgICAgICAgICAgICAgICByYXdfdGV4dCA9IE5vbmUKCiAgICAgICAgICAgICAgICAgICAgICAgICMgQXBwbHkgYmxhY2tsaXN0L3doaXRlbGlzdCBvbiBmaW5hbCB0ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBfcGFzc2VzX3dvcmRfZmlsdGVycyh0ZXh0X2VuLCBibGFja2xpc3QsIHdoaXRlbGlzdCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6ICJ0ZWxlZ3JhbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2hhbm5lbCI6IGNmZy5jaGFubmVsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWxpYXMiOiBjZmcuYWxpYXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2hhbm5lbF9sYW5nIjogY2ZnLmNoYW5uZWxfbGFuZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwb3N0X2lkIjogbXNnLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInB1Ymxpc2hlZF9hdCI6IF91dGNfaXNvKG1zZy5kYXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJmZXRjaGVkX2F0IjogX3V0Y19pc28oZGF0ZXRpbWUubm93KFVUQykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInJhd190ZXh0IjogcmF3X3RleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGV4dCI6IHRleHRfZW4sCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIG91dF9mLndyaXRlKGpzb24uZHVtcHMocmVjb3JkLCBlbnN1cmVfYXNjaWk9RmFsc2UpICsgIlxuIikKICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkcy5hcHBlbmQocmVjb3JkKQoKICAgICAgICAgICAgICAgICAgICAjIERvbmUgd2l0aCB0aGlzIGNoYW5uZWwKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgICAgICMgTk9OLUVOR0xJU0ggQ0hBTk5FTFMgKGUuZy4gR2VuZXJhbFN0YWZmWlNVLCBsYW5nPSd1aycpCiAgICAgICAgICAgICAgICAjIEZpcnN0IHBhc3M6IGZpbmQgd2hpY2ggbWVzc2FnZXMgKmJvdGgqIG1hdGNoIHRoZQogICAgICAgICAgICAgICAgIyBwaHJhc2UgZmlsdGVyIGFuZCBhcmUgd29ydGggdHJhbnNsYXRpbmcuCiAgICAgICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICB0cmFuc2xhdGVfY2FuZGlkYXRlczogc2V0W2ludF0gPSBzZXQoKQoKICAgICAgICAgICAgICAgIGFzeW5jIGZvciBtc2cgaW4gX2l0ZXJfbWVzc2FnZXNfaW5fcmFuZ2UoCiAgICAgICAgICAgICAgICAgICAgY2xpZW50PWNsaWVudCwKICAgICAgICAgICAgICAgICAgICBlbnRpdHk9ZW50aXR5LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X2R0PXN0YXJ0X2R0LAogICAgICAgICAgICAgICAgICAgIGVuZF9kdD1lbmRfZHQsCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIHRleHRfb3JpZyA9IF9leHRyYWN0X21lc3NhZ2VfdGV4dChtc2cpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRleHRfb3JpZzoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgIyBQUkUtRklMVEVSIGJ5IFBIUkFTRV9GSUxURVJTIG9uIFJBVyBURVhUCiAgICAgICAgICAgICAgICAgICAgIyAoZS5nLiBVa3JhaW5pYW4gItCe0L/QtdGA0LDRgtC40LLQvdCwINGW0L3RhNC+0YDQvNCw0YbRltGPINGB0YLQsNC90L7QvCDQvdCwIikuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IF9tYXRjaGVzX3BocmFzZV9maWx0ZXIodGV4dF9vcmlnKToKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgaWYgbGFuZyA9PSAidWsiOgogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3Qgc2hvdWxkX3RyYW5zbGF0ZV91a19wb3N0KHRleHRfb3JpZyk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVfY2FuZGlkYXRlcy5hZGQobXNnLmlkKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICMgT3RoZXIgbm9uLUVOIGxhbmd1YWdlcywgaWYgeW91IGV2ZXIgYWRkIHRoZW0uCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZV9jYW5kaWRhdGVzLmFkZChtc2cuaWQpCgogICAgICAgICAgICAgICAgdG90YWxfdG9fdHJhbnNsYXRlID0gbGVuKHRyYW5zbGF0ZV9jYW5kaWRhdGVzKQogICAgICAgICAgICAgICAgcHJvZ3Jlc3MgPSBQcm9ncmVzc0Jhcih0b3RhbF90b190cmFuc2xhdGUgaWYgdG90YWxfdG9fdHJhbnNsYXRlID4gMCBlbHNlIDEpCgogICAgICAgICAgICAgICAgbG9nZ2VyLmluZm8oCiAgICAgICAgICAgICAgICAgICAgIkNoYW5uZWwgJXM6ICVkIG1lc3NhZ2VzIG1hdGNoIHNpdHJlcCBwaHJhc2VzIGFuZCByZXF1aXJlIHRyYW5zbGF0aW9uLiIsCiAgICAgICAgICAgICAgICAgICAgY2ZnLmNoYW5uZWxfbmFtZSwKICAgICAgICAgICAgICAgICAgICB0b3RhbF90b190cmFuc2xhdGUsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAgICAgIyBTRUNPTkQgUEFTUyDigJQgcmVhbCBpbmdlc3Rpb24sIG9ubHkgZm9yIGNhbmRpZGF0ZXMKICAgICAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgICAgIGFzeW5jIGZvciBtc2cgaW4gX2l0ZXJfbWVzc2FnZXNfaW5fcmFuZ2UoCiAgICAgICAgICAgICAgICAgICAgY2xpZW50PWNsaWVudCwKICAgICAgICAgICAgICAgICAgICBlbnRpdHk9ZW50aXR5LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X2R0PXN0YXJ0X2R0LAogICAgICAgICAgICAgICAgICAgIGVuZF9kdD1lbmRfZHQsCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgICMgT25seSB0b3VjaCBtZXNzYWdlcyB3ZSBkZWNpZGVkIHdlcmUgaW50ZXJlc3RpbmcgaW4gcGFzcyAxLgogICAgICAgICAgICAgICAgICAgIGlmIG1zZy5pZCBub3QgaW4gdHJhbnNsYXRlX2NhbmRpZGF0ZXM6CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgIHRleHRfb3JpZyA9IF9leHRyYWN0X21lc3NhZ2VfdGV4dChtc2cpCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRleHRfb3JpZzoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0X2VuID0gYXdhaXQgX3RyYW5zbGF0ZV9tZXNzYWdlX3RleHQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQ9Y2xpZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5PWVudGl0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9bXNnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9fbGFuZz0iZW4iLAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRleHRfZW4gaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkdmFuY2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgICAgIHJhd190ZXh0ID0gdGV4dF9vcmlnCiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmFkdmFuY2UoKQoKICAgICAgICAgICAgICAgICAgICBleGNlcHQgVHJhbnNsYXRpb25GYWlsZWQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLmZpbmlzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlCgogICAgICAgICAgICAgICAgICAgICMgWW91ICpjYW4qIHJlLWNoZWNrIHRoZSBwaHJhc2UgZmlsdGVyIG9uIHRleHRfZW4gaGVyZSwKICAgICAgICAgICAgICAgICAgICAjIGJ1dCBnaXZlbiB0aGUgZml4ZWQgZm9ybXVsYWljIGhlYWRlcnMsIGl0J3MgcHJvYmFibHkKICAgICAgICAgICAgICAgICAgICAjIHJlZHVuZGFudC4gS2VlcGluZyB0aGUgcmVjb3JkIHVuY29uZGl0aW9uYWxseSBmb3IKICAgICAgICAgICAgICAgICAgICAjIGFsbCBjYW5kaWRhdGVzOgogICAgICAgICAgICAgICAgICAgIHJlY29yZCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6ICJ0ZWxlZ3JhbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJjaGFubmVsIjogY2ZnLmNoYW5uZWxfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgImNoYW5uZWxfbGFuZyI6IGNmZy5jaGFubmVsX2xhbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICJwb3N0X2lkIjogbXNnLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAicHVibGlzaGVkX2F0IjogX3V0Y19pc28obXNnLmRhdGUpLAogICAgICAgICAgICAgICAgICAgICAgICAiZmV0Y2hlZF9hdCI6IF91dGNfaXNvKGRhdGV0aW1lLm5vdyhVVEMpKSwKICAgICAgICAgICAgICAgICAgICAgICAgInRleHQiOiB0ZXh0X2VuLAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgb3V0X2Yud3JpdGUoanNvbi5kdW1wcyhyZWNvcmQsIGVuc3VyZV9hc2NpaT1GYWxzZSkgKyAiXG4iKQogICAgICAgICAgICAgICAgICAgIHJlY29yZHMuYXBwZW5kKHJlY29yZCkKCiAgICAgICAgICAgICAgICBwcm9ncmVzcy5maW5pc2goKQoKICAgIGxvZ2dlci5pbmZvKCJJbmdlc3Rpb24gY29tcGxldGUsIG91dHB1dCB3cml0dGVuIHRvICVzIiwgb3V0cHV0X3BhdGgpCiAgICByZXR1cm4gb3V0cHV0X3BhdGgsIHJlY29yZHMKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFB1YmxpYyBzeW5jIHdyYXBwZXIKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpkZWYgZmV0Y2hfcG9zdHMoCiAgICBzdGFydF9kYXRlOiBzdHIsCiAgICBlbmRfZGF0ZTogc3RyIHwgTm9uZSA9IE5vbmUsCiAgICBjaGFubmVsc19wYXRoOiBQYXRoIHwgTm9uZSA9IE5vbmUsCiAgICBvdXRfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAopIC0+IHR1cGxlW1BhdGgsIGxpc3RbZGljdF1dOgogICAgIiIiCiAgICBTeW5jaHJvbm91cyB3cmFwcGVyIGFyb3VuZCB0aGUgYXN5bmMgaW5nZXN0IGZ1bmN0aW9uLgogICAgIiIiCiAgICByZXR1cm4gYXN5bmNpby5ydW4oCiAgICAgICAgX2luZ2VzdF90ZWxlZ3JhbV93aW5kb3dfYXN5bmMoCiAgICAgICAgICAgIHN0YXJ0X2RhdGU9c3RhcnRfZGF0ZSwKICAgICAgICAgICAgZW5kX2RhdGU9ZW5kX2RhdGUsCiAgICAgICAgICAgIG91dF9wYXRoPW91dF9wYXRoLAogICAgICAgICAgICBjaGFubmVsc19wYXRoPWNoYW5uZWxzX3BhdGgsCiAgICAgICAgKQogICAgKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ0xJIGVudHJ5cG9pbnQKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpkZWYgbWFpbihhcmd2OiBsaXN0W3N0cl0gfCBOb25lID0gTm9uZSkgLT4gaW50OgogICAgcGFyc2VyID0gYXJncGFyc2UuQXJndW1lbnRQYXJzZXIoCiAgICAgICAgZGVzY3JpcHRpb249IkZldGNoIGFuZCB0cmFuc2xhdGUgVGVsZWdyYW0gcG9zdHMgaW4gYSBkYXRlIHdpbmRvdy4iCiAgICApCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KAogICAgICAgICItcyIsCiAgICAgICAgIi0tc3RhcnQiLAogICAgICAgIHJlcXVpcmVkPVRydWUsCiAgICAgICAgaGVscD0iU3RhcnQgZGF0ZSAoWVlZWS1NTS1ERCwgaW5jbHVzaXZlKS4iLAogICAgKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICAiLWUiLAogICAgICAgICItLWVuZCIsCiAgICAgICAgaGVscD0iRW5kIGRhdGUgKFlZWVktTU0tREQsIGluY2x1c2l2ZSkuIERlZmF1bHRzIHRvIHN0YXJ0IGRhdGUgaWYgb21pdHRlZC4iLAogICAgKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICAiLWkiLAogICAgICAgICItLWltcG9ydCIsCiAgICAgICAgZGVzdD0iaW1wb3J0X3BhdGgiLAogICAgICAgIGhlbHA9KAogICAgICAgICAgICAiT3B0aW9uYWwgcGF0aCB0byBjaGFubmVscyBKU09OTCBmaWxlLiAiCiAgICAgICAgICAgICJJZiBwcm92aWRlZCwgb3ZlcnJpZGVzIHRoZSBoYXJkLWNvZGVkIGNoYW5uZWwgbGlzdC4iCiAgICAgICAgKSwKICAgICkKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgIi1vIiwKICAgICAgICAiLS1vdXQiLAogICAgICAgIGRlc3Q9Im91dF9wYXRoIiwKICAgICAgICBoZWxwPSgKICAgICAgICAgICAgIk9wdGlvbmFsIEpTT05MIG91dHB1dCBwYXRoLiAiCiAgICAgICAgICAgICJJZiBvbWl0dGVkLCB1c2VzIGRhdGEvaW50ZXJpbS9ZWVlZL1lZWVktTU0vWVlZWS1NTS1ERC9wb3N0cy5qc29ubC4iCiAgICAgICAgKSwKICAgICkKCiAgICBhcmdzID0gcGFyc2VyLnBhcnNlX2FyZ3MoYXJndikKCiAgICBzdGFydF9kYXRlID0gYXJncy5zdGFydAogICAgZW5kX2RhdGUgPSBhcmdzLmVuZAoKICAgIGNoYW5uZWxzX3BhdGg6IFBhdGggfCBOb25lID0gUGF0aChhcmdzLmltcG9ydF9wYXRoKSBpZiBhcmdzLmltcG9ydF9wYXRoIGVsc2UgTm9uZQogICAgb3V0X3BhdGg6IFBhdGggfCBOb25lID0gUGF0aChhcmdzLm91dF9wYXRoKSBpZiBhcmdzLm91dF9wYXRoIGVsc2UgTm9uZQoKICAgIG91dHB1dF9wYXRoLCByZWNvcmRzID0gZmV0Y2hfcG9zdHMoCiAgICAgICAgc3RhcnRfZGF0ZT1zdGFydF9kYXRlLAogICAgICAgIGVuZF9kYXRlPWVuZF9kYXRlLAogICAgICAgIGNoYW5uZWxzX3BhdGg9Y2hhbm5lbHNfcGF0aCwKICAgICAgICBvdXRfcGF0aD1vdXRfcGF0aCwKICAgICkKCiAgICBwcmludChmIldyb3RlIHtsZW4ocmVjb3Jkcyl9IHJlY29yZHMgdG8ge291dHB1dF9wYXRofSIpCiAgICByZXR1cm4gMAoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICByYWlzZSBTeXN0ZW1FeGl0KG1haW4oKSkK",
					"AQAAAAAAAAABAAAAAAAAAAAAAABgVwAAAAAAAAAAAAAAAPC/"
				],
				[
					131,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADJXAAAIyBzcmMvc2l0cmVwYzIvaW5nZXN0L3RlbGVncmFtLnB5CmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBhcmdwYXJzZQppbXBvcnQgYXN5bmNpbwppbXBvcnQganNvbgppbXBvcnQgbG9nZ2luZwppbXBvcnQgb3MKaW1wb3J0IHJlCmZyb20gY29sbGVjdGlvbnMuYWJjIGltcG9ydCBBc3luY0l0ZXJhdG9yCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcwpmcm9tIGRhdGV0aW1lIGltcG9ydCBVVEMsIGRhdGUsIGRhdGV0aW1lLCB0aW1lLCB0aW1lZGVsdGEKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmZyb20gdHlwaW5nIGltcG9ydCBGaW5hbCwgQW55Cgpmcm9tIGRvdGVudiBpbXBvcnQgbG9hZF9kb3RlbnYKZnJvbSB0ZWxldGhvbiBpbXBvcnQgVGVsZWdyYW1DbGllbnQKZnJvbSB0ZWxldGhvbi5lcnJvcnMgaW1wb3J0IEZsb29kV2FpdEVycm9yLCBSUENFcnJvcgpmcm9tIHRlbGV0aG9uLnRsIGltcG9ydCBmdW5jdGlvbnMsIHR5cGVzCgpsb2dnZXIgPSBsb2dnaW5nLmdldExvZ2dlcihfX25hbWVfXykKbG9hZF9kb3RlbnYoKQoKIyBIb3cgYWdncmVzc2l2ZWx5IHdlIHRyYW5zbGF0ZQpNSU5fVFJBTlNMQVRJT05fTEVOR1RIID0gNDAgICMgY2hhcmFjdGVyczsgdHVuZSBhcyBkZXNpcmVkClRSQU5TTEFURV9TTEVFUF9TRUNPTkRTID0gNS4wICAjIHBvbGl0ZSBkZWxheSBiZXR3ZWVuIFRyYW5zbGF0ZVRleHRSZXF1ZXN0IGNhbGxzCk1BWF9UUkFOU0xBVElPTl9SRVRSSUVTID0gNQoKQkFTRV9SRVRSWV9TTEVFUF9TRUNPTkRTID0gNS4wICAjIGFkanVzdCBpZiBuZWVkZWQKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ2hhbm5lbCBjb25maWcKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpAZGF0YWNsYXNzCmNsYXNzIENoYW5uZWxDb25maWc6CiAgICBjaGFubmVsX25hbWU6IHN0cgogICAgYWxpYXM6IHN0cgogICAgY2hhbm5lbF9sYW5nOiBzdHIKICAgIGFjdGl2ZTogYm9vbAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZyb21fanNvbihjbHMsIGRhdGE6IGRpY3Rbc3RyLCBBbnldKSAtPiBDaGFubmVsQ29uZmlnOgogICAgICAgIHJldHVybiBjbHMoCiAgICAgICAgICAgIGNoYW5uZWxfbmFtZT1zdHIoZGF0YVsiY2hhbm5lbF9uYW1lIl0pLAogICAgICAgICAgICBhbGlhcz1zdHIoZGF0YS5nZXQoImFsaWFzIiwgZGF0YVsiY2hhbm5lbF9uYW1lIl0pKSwKICAgICAgICAgICAgY2hhbm5lbF9sYW5nPXN0cihkYXRhLmdldCgiY2hhbm5lbF9sYW5nIiwgImVuIikpLAogICAgICAgICAgICBhY3RpdmU9Ym9vbChkYXRhLmdldCgiYWN0aXZlIiwgRmFsc2UpKSwKICAgICAgICApCgoKIyBObyBtb3JlIGhhcmRjb2RlZCBjaGFubmVsczsgdGhpcyByZW1haW5zIGFzIGEgZmFsbGJhY2sgaWYgeW91IGV2ZXIgd2FudCBpdC4KSEFSRENPREVEX0NIQU5ORUxTOiBsaXN0W0NoYW5uZWxDb25maWddID0gW10KCiMgUGhyYXNlcyB0byBrZWVwIHBvc3RzIGZvci4gRWRpdC9leHRlbmQgYXMgbmVlZGVkLgpQSFJBU0VfRklMVEVSUzogbGlzdFtzdHJdID0gWwogICAgIk9wZXJhdGlvbmFsIGluZm9ybWF0aW9uIGFzIG9mIiwKICAgICJvbiBwcm9ncmVzcyBvZiBzcGVjaWFsIG1pbGl0YXJ5IG9wZXJhdGlvbiBhcyBvZiIsCiAgICAi0J7Qv9C10YDQsNGC0LjQstC90LAg0ZbQvdGE0L7RgNC80LDRhtGW0Y8g0YHRgtCw0L3QvtC8INC90LAiLAogICAgIkNvb3JkaW5hdGVzOiIsCl0KCkZST05UTElORV9LRVlXT1JEUzogRmluYWwgPSAoKQoKIyBLZXl3b3Jkcy9oYXNodGFncyB0byAqc2tpcCogKHRyYWluaW5nIC8gUFIgLyByZWNydWl0bWVudCkg4oCUIGN1cnJlbnRseSB1bnVzZWQKVFJBSU5JTkdfSEFTSFRBR1M6IEZpbmFsID0gKAogICAgIiPQv9GW0LTQs9C+0YLQvtCy0LrQsNC30YHRgyIsCiAgICAiI9C/0ZbQtNCz0L7RgtC+0LLQutCw0LfRgdGDMjAyNSIsCikKClRSQUlOSU5HX1BIUkFTRVM6IEZpbmFsID0gKAogICAgItGJ0L7QtNC90Y8g0LLQtNC+0YHQutC+0L3QsNC70Y7RjtGC0Ywg0YHQstC+0Zcg0L3QsNCy0LjRh9C60LgiLAogICAgItC90LDQstC40YfQutC4INGC0LAg0LLQvNGW0L3QvdGPIiwKICAgICLQv9GW0LTQs9C+0YLQvtCy0LrQsCIsCiAgICAi0YLRgNC10L3Rg9Cy0LDQvdC90Y8iLAogICAgItGP0Log0LTRltGP0YLQuCDQsiDCq9GD0YDQsdCw0L3RlsK7IiwKICAgICfRj9C6INC00ZbRj9GC0Lgg0LIgItGD0YDQsdCw0L3RliInLAogICAgItGP0Log0LLRgNGP0YLRg9Cy0LDRgtC4INC/0L7QsdGA0LDRgtC40LzQsCIsCiAgICAi0LLRltC00LTRltC70LXQvdC90Y8g0LrQvtC80YPQvdGW0LrQsNGG0ZbQuSIsCiAgICAi0L/RgNC10YHRgdC70YPQttCx0LAiLAogICAgItC/0YDQtdGBLdGB0LvRg9C20LHQsCIsCikKClJFQ1JVSVRNRU5UX1BIUkFTRVM6IEZpbmFsID0gKAogICAgItC/0YDQuNGU0LTQvdGD0LnRgtC10YHRjCDQtNC+INGB0LjQuyDQvtCx0L7RgNC+0L3QuCIsCiAgICAi0YDQsNC30L7QvCDQv9C10YDQtdC80L7QttC10LzQviIsCiAgICAi0YHQu9Cw0LLQsCDRg9C60YDQsNGX0L3RliIsCikKClRPUE9OWU1fTElLRV9SRSA9IHJlLmNvbXBpbGUociJcYlvQkC3Qr9CG0IfQhNKQXVvQsC3Rj9GW0ZfRlNKRJ10rKD86LHxcYikiKQoKCmNsYXNzIFRyYW5zbGF0aW9uRmFpbGVkKFJ1bnRpbWVFcnJvcik6CiAgICBwYXNzCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIZWxwZXJzIC8gZmlsdGVycwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCmRlZiBzaG91bGRfdHJhbnNsYXRlX3VrX3Bvc3QodGV4dDogc3RyKSAtPiBib29sOgogICAgYmxhY2tsaXN0ID0gUkVDUlVJVE1FTlRfUEhSQVNFUyArIFRSQUlOSU5HX1BIUkFTRVMgKyBUUkFJTklOR19IQVNIVEFHUwogICAgbG93ZXJlZCA9IHRleHQubG93ZXIoKQogICAgcmV0dXJuIG5vdCBhbnkod29yZC5sb3dlcigpIGluIGxvd2VyZWQgZm9yIHdvcmQgaW4gYmxhY2tsaXN0KQoKCmRlZiBfbWF0Y2hlc19waHJhc2VfZmlsdGVyKHRleHQ6IHN0cikgLT4gYm9vbDoKICAgICIiIgogICAgUmV0dXJuIFRydWUgaWYgYHRleHRgIGNvbnRhaW5zIGFueSBvZiB0aGUgY29uZmlndXJlZCBwaHJhc2VzIChjYXNlLWluc2Vuc2l0aXZlKS4KICAgICIiIgogICAgaWYgbm90IHRleHQ6CiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBsb3dlcmVkID0gdGV4dC5sb3dlcigpCiAgICByZXR1cm4gYW55KHBocmFzZS5sb3dlcigpIGluIGxvd2VyZWQgZm9yIHBocmFzZSBpbiBQSFJBU0VfRklMVEVSUykKCgpkZWYgX3Bhc3Nlc193b3JkX2ZpbHRlcnMoCiAgICB0ZXh0OiBzdHIsCiAgICBibGFja2xpc3Q6IGxpc3Rbc3RyXSB8IHR1cGxlW3N0ciwgLi4uXSB8IE5vbmUsCiAgICB3aGl0ZWxpc3Q6IGxpc3Rbc3RyXSB8IHR1cGxlW3N0ciwgLi4uXSB8IE5vbmUsCikgLT4gYm9vbDoKICAgICIiIgogICAgUmV0dXJuIFRydWUgaWZmIHRleHQgaXMgYWxsb3dlZCB1bmRlciBibGFja2xpc3Qvd2hpdGVsaXN0IHJ1bGVzLgoKICAgIC0gYmxhY2tsaXN0OiBpZiBhbnkgd29yZCBpcyBwcmVzZW50IChjYXNlLWluc2Vuc2l0aXZlKSwgcmVqZWN0LgogICAgLSB3aGl0ZWxpc3Q6IGlmIHByb3ZpZGVkLCByZXF1aXJlIGF0IGxlYXN0IG9uZSB3b3JkIGJlIHByZXNlbnQuCiAgICAiIiIKICAgIGxvd2VyZWQgPSB0ZXh0Lmxvd2VyKCkKCiAgICBpZiBibGFja2xpc3Q6CiAgICAgICAgZm9yIHdvcmQgaW4gYmxhY2tsaXN0OgogICAgICAgICAgICBpZiB3b3JkLmxvd2VyKCkgaW4gbG93ZXJlZDoKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGlmIHdoaXRlbGlzdDoKICAgICAgICBmb3Igd29yZCBpbiB3aGl0ZWxpc3Q6CiAgICAgICAgICAgIGlmIHdvcmQubG93ZXIoKSBpbiBsb3dlcmVkOgogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICByZXR1cm4gVHJ1ZQoKCmRlZiBfbG9hZF90ZWxlZ3JhbV9jcmVkZW50aWFscygpIC0+IHR1cGxlW2ludCwgc3RyLCBzdHJdOgogICAgIiIiCiAgICBMb2FkIFRlbGVncmFtIEFQSSBjcmVkZW50aWFscyBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlcy4KCiAgICBSZXF1aXJlZDoKICAgICAgLSBBUElfSUQgICAgICAoaW50KQogICAgICAtIEFQSV9IQVNIICAgIChzdHIpCgogICAgT3B0aW9uYWw6CiAgICAgIC0gVEVMRUdSQU1fU0VTU0lPTl9OQU1FIChzdHIsIGRlZmF1bHRzIHRvICJzaXRyZXBjMiIpCiAgICAiIiIKICAgIGFwaV9pZF9yYXcgPSBvcy5nZXRlbnYoIkFQSV9JRCIpCiAgICBhcGlfaGFzaCA9IG9zLmdldGVudigiQVBJX0hBU0giKQoKICAgIGlmIGFwaV9pZF9yYXcgaXMgTm9uZSBvciBhcGlfaGFzaCBpcyBOb25lOgogICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQVBJX0lEIGFuZCBBUElfSEFTSCBtdXN0IGJlIHNldCBpbiB0aGUgZW52aXJvbm1lbnQiKQoKICAgIGFwaV9pZCA9IGludChhcGlfaWRfcmF3KQogICAgc2Vzc2lvbl9uYW1lID0gb3MuZ2V0ZW52KCJURUxFR1JBTV9TRVNTSU9OX05BTUUiLCAic2l0cmVwYzIiKQogICAgcmV0dXJuIGFwaV9pZCwgYXBpX2hhc2gsIHNlc3Npb25fbmFtZQoKCmRlZiBfcGFyc2VfZGF0ZV9yYW5nZSgKICAgIHN0YXJ0X2RhdGU6IHN0ciB8IGRhdGUsCiAgICBlbmRfZGF0ZTogc3RyIHwgZGF0ZSB8IE5vbmUsCikgLT4gdHVwbGVbZGF0ZXRpbWUsIGRhdGV0aW1lXToKICAgICIiIgogICAgQWNjZXB0cyBlaXRoZXIgSVNPIHN0cmluZ3Mgb3IgZGF0ZXRpbWUuZGF0ZSBvYmplY3RzLgogICAgUmV0dXJucyBhbiBpbmNsdXNpdmUgVVRDIGRhdGV0aW1lIHJhbmdlLgogICAgIiIiCiAgICBpZiBpc2luc3RhbmNlKHN0YXJ0X2RhdGUsIGRhdGUpOgogICAgICAgIHN0YXJ0X2QgPSBzdGFydF9kYXRlCiAgICBlbHNlOgogICAgICAgIHN0YXJ0X2QgPSBkYXRlLmZyb21pc29mb3JtYXQoc3RhcnRfZGF0ZSkKCiAgICBpZiBlbmRfZGF0ZSBpcyBOb25lOgogICAgICAgIGVuZF9kID0gc3RhcnRfZAogICAgZWxzZToKICAgICAgICBpZiBpc2luc3RhbmNlKGVuZF9kYXRlLCBkYXRlKToKICAgICAgICAgICAgZW5kX2QgPSBlbmRfZGF0ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGVuZF9kID0gZGF0ZS5mcm9taXNvZm9ybWF0KGVuZF9kYXRlKQoKICAgIGlmIGVuZF9kIDwgc3RhcnRfZDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJlbmRfZGF0ZSBtdXN0IGJlID49IHN0YXJ0X2RhdGUiKQoKICAgIHN0YXJ0X2R0ID0gZGF0ZXRpbWUuY29tYmluZShzdGFydF9kLCB0aW1lLm1pbiwgdHppbmZvPVVUQykKICAgIGVuZF9kdCA9IGRhdGV0aW1lLmNvbWJpbmUoZW5kX2QsIHRpbWUubWF4LCB0emluZm89VVRDKQogICAgcmV0dXJuIHN0YXJ0X2R0LCBlbmRfZHQKCgpkZWYgX3V0Y19pc28oZHQ6IGRhdGV0aW1lKSAtPiBzdHI6CiAgICAiIiIKICAgIE5vcm1hbGl6ZSBkYXRldGltZSB0byBVVEMgYW5kIGZvcm1hdCBhcyBJU08gODYwMSB3aXRoICdaJyBzdWZmaXguCiAgICAiIiIKICAgIGlmIGR0LnR6aW5mbyBpcyBOb25lOgogICAgICAgIGR0ID0gZHQucmVwbGFjZSh0emluZm89VVRDKQogICAgZWxzZToKICAgICAgICBkdCA9IGR0LmFzdGltZXpvbmUoVVRDKQogICAgcmV0dXJuIGR0Lmlzb2Zvcm1hdCgpLnJlcGxhY2UoIiswMDowMCIsICJaIikKCgpkZWYgX291dHB1dF9wYXRoX2Zvcl90b2RheShiYXNlX2RpcjogUGF0aCB8IE5vbmUgPSBOb25lKSAtPiBQYXRoOgogICAgIiIiCiAgICBCdWlsZCB0b2RheSdzIGludGVyaW0gcG9zdHMgcGF0aDoKICAgICAgZGF0YS9pbnRlcmltL1lZWVkvWVlZWS1NTS9ZWVlZLU1NLUREL3Bvc3RzLmpzb25sCiAgICAiIiIKICAgIHRvZGF5ID0gZGF0ZS50b2RheSgpCiAgICBpZiBiYXNlX2RpciBpcyBOb25lOgogICAgICAgIGJhc2VfZGlyID0gUGF0aCgiZGF0YSIpIC8gImludGVyaW0iCgogICAgeWVhcl9kaXIgPSBiYXNlX2RpciAvIGYie3RvZGF5LnllYXJ9IgogICAgbW9udGhfZGlyID0geWVhcl9kaXIgLyBmInt0b2RheS55ZWFyfS17dG9kYXkubW9udGg6MDJkfSIKICAgIGRheV9kaXIgPSBtb250aF9kaXIgLyB0b2RheS5pc29mb3JtYXQoKQogICAgZGF5X2Rpci5ta2RpcihwYXJlbnRzPVRydWUsIGV4aXN0X29rPVRydWUpCiAgICByZXR1cm4gZGF5X2RpciAvICJwb3N0cy5qc29ubCIKCgpkZWYgX2Vuc3VyZV9vdXRwdXRfcGF0aChvdXRfcGF0aDogUGF0aCB8IE5vbmUpIC0+IFBhdGg6CiAgICAiIiIKICAgIFVzZSB0aGUgcHJvdmlkZWQgb3V0X3BhdGgsIG9yIGRlZmF1bHQgdG8gdGhlIHN0YW5kYXJkIGludGVyaW0gcGF0aC4KICAgIEVuc3VyZXMgcGFyZW50IGRpcmVjdG9yaWVzIGV4aXN0LgogICAgIiIiCiAgICBpZiBvdXRfcGF0aCBpcyBOb25lOgogICAgICAgIG91dF9wYXRoID0gX291dHB1dF9wYXRoX2Zvcl90b2RheSgpCiAgICBvdXRfcGF0aC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQogICAgcmV0dXJuIG91dF9wYXRoCgoKZGVmIF9sb2FkX2NoYW5uZWxzX2Zyb21fZmlsZShwYXRoOiBQYXRoKSAtPiBsaXN0W0NoYW5uZWxDb25maWddOgogICAgIiIiCiAgICBMb2FkIGFsbCBjaGFubmVscyBmcm9tIGEgSlNPTkwgZmlsZTsgZG8gbm90IGZpbHRlciBvbiAnYWN0aXZlJyBoZXJlLgogICAgIiIiCiAgICBjaGFubmVsczogbGlzdFtDaGFubmVsQ29uZmlnXSA9IFtdCiAgICBpZiBub3QgcGF0aC5leGlzdHMoKToKICAgICAgICByZXR1cm4gY2hhbm5lbHMKCiAgICB3aXRoIHBhdGgub3BlbigiciIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6CiAgICAgICAgZm9yIGxpbmUgaW4gZjoKICAgICAgICAgICAgbGluZSA9IGxpbmUuc3RyaXAoKQogICAgICAgICAgICBpZiBub3QgbGluZToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGRhdGEgPSBqc29uLmxvYWRzKGxpbmUpCiAgICAgICAgICAgIGNmZyA9IENoYW5uZWxDb25maWcuZnJvbV9qc29uKGRhdGEpCiAgICAgICAgICAgIGNoYW5uZWxzLmFwcGVuZChjZmcpCiAgICByZXR1cm4gY2hhbm5lbHMKCgpkZWYgX25vcm1hbGl6ZV9oYW5kbGUoczogc3RyKSAtPiBzdHI6CiAgICAiIiIKICAgIE5vcm1hbGl6ZSBhIGhhbmRsZS9hbGlhcyBmb3IgY29tcGFyaXNvbjogc3RyaXAgJ0AnLCB0cmltLCBsb3dlcmNhc2UuCiAgICAiIiIKICAgIHJldHVybiBzLmxzdHJpcCgiQCIpLnN0cmlwKCkubG93ZXIoKQoKCmFzeW5jIGRlZiBfaXRlcl9tZXNzYWdlc19pbl9yYW5nZSgKICAgIGNsaWVudDogVGVsZWdyYW1DbGllbnQsCiAgICBlbnRpdHk6IHR5cGVzLlR5cGVJbnB1dFBlZXIgfCBzdHIsCiAgICBzdGFydF9kdDogZGF0ZXRpbWUsCiAgICBlbmRfZHQ6IGRhdGV0aW1lLAopIC0+IEFzeW5jSXRlcmF0b3JbdHlwZXMuTWVzc2FnZV06CiAgICAiIiIKICAgIFlpZWxkIG1lc3NhZ2VzIGZvciBgZW50aXR5YCB3aXRoIGRhdGUgaW4gW3N0YXJ0X2R0LCBlbmRfZHRdIChVVEMpLgoKICAgIFdlIGl0ZXJhdGUgYmFja3dhcmRzIGZyb20gKGVuZF9kdCArIDEgc2Vjb25kKSB1bnRpbCB3ZSBkcm9wIGJlbG93IHN0YXJ0X2R0LgogICAgIiIiCiAgICBvZmZzZXRfZHQgPSBlbmRfZHQgKyB0aW1lZGVsdGEoc2Vjb25kcz0xKQoKICAgIGFzeW5jIGZvciBtc2cgaW4gY2xpZW50Lml0ZXJfbWVzc2FnZXMoZW50aXR5LCBvZmZzZXRfZGF0ZT1vZmZzZXRfZHQpOgogICAgICAgIGlmIG1zZy5kYXRlIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIG1zZ19kdCA9IG1zZy5kYXRlCiAgICAgICAgaWYgbXNnX2R0LnR6aW5mbyBpcyBOb25lOgogICAgICAgICAgICBtc2dfZHQgPSBtc2dfZHQucmVwbGFjZSh0emluZm89VVRDKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG1zZ19kdCA9IG1zZ19kdC5hc3RpbWV6b25lKFVUQykKCiAgICAgICAgaWYgbXNnX2R0IDwgc3RhcnRfZHQ6CiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgbXNnX2R0ID4gZW5kX2R0OgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICB5aWVsZCBtc2cKCgphc3luYyBkZWYgX3RyYW5zbGF0ZV9tZXNzYWdlX3RleHQoCiAgICBjbGllbnQ6IFRlbGVncmFtQ2xpZW50LAogICAgZW50aXR5OiB0eXBlcy5UeXBlSW5wdXRQZWVyIHwgc3RyLAogICAgbWVzc2FnZTogdHlwZXMuTWVzc2FnZSwKICAgIHRvX2xhbmc6IHN0ciA9ICJlbiIsCikgLT4gc3RyIHwgTm9uZToKICAgIG9yaWdpbmFsX3RleHQgPSAobWVzc2FnZS5tZXNzYWdlIG9yICIiKS5zdHJpcCgpCiAgICBpZiBub3Qgb3JpZ2luYWxfdGV4dDoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIGlmIGxlbihvcmlnaW5hbF90ZXh0KSA8IE1JTl9UUkFOU0xBVElPTl9MRU5HVEg6CiAgICAgICAgbG9nZ2VyLmRlYnVnKAogICAgICAgICAgICAiU2tpcHBpbmcgdHJhbnNsYXRpb24gZm9yIHNob3J0IG1lc3NhZ2UgJXMgKGxlbj0lZCA8ICVkKSIsCiAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgIGxlbihvcmlnaW5hbF90ZXh0KSwKICAgICAgICAgICAgTUlOX1RSQU5TTEFUSU9OX0xFTkdUSCwKICAgICAgICApCiAgICAgICAgcmV0dXJuIE5vbmUKCiAgICBsYXN0X2Vycm9yOiBFeGNlcHRpb24gfCBOb25lID0gTm9uZQoKICAgIGZvciBhdHRlbXB0IGluIHJhbmdlKDEsIE1BWF9UUkFOU0xBVElPTl9SRVRSSUVTICsgMSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBsb2dnZXIuZGVidWcoCiAgICAgICAgICAgICAgICAiVHJhbnNsYXRpbmcgbWVzc2FnZSAlcyAoYXR0ZW1wdCAlZC8lZCkiLAogICAgICAgICAgICAgICAgbWVzc2FnZS5pZCwKICAgICAgICAgICAgICAgIGF0dGVtcHQsCiAgICAgICAgICAgICAgICBNQVhfVFJBTlNMQVRJT05fUkVUUklFUywKICAgICAgICAgICAgKQoKICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgY2xpZW50KAogICAgICAgICAgICAgICAgZnVuY3Rpb25zLm1lc3NhZ2VzLlRyYW5zbGF0ZVRleHRSZXF1ZXN0KAogICAgICAgICAgICAgICAgICAgIHBlZXI9ZW50aXR5LAogICAgICAgICAgICAgICAgICAgIGlkPVttZXNzYWdlLmlkXSwKICAgICAgICAgICAgICAgICAgICB0b19sYW5nPXRvX2xhbmcsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIGdldGF0dHIocmVzdWx0LCAicmVzdWx0IiwgTm9uZSk6CiAgICAgICAgICAgICAgICB0cmFuc2xhdGVkID0gcmVzdWx0LnJlc3VsdFswXS50ZXh0IG9yIG9yaWdpbmFsX3RleHQKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHRyYW5zbGF0ZWQgPSBvcmlnaW5hbF90ZXh0CgogICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlZAoKICAgICAgICBleGNlcHQgRmxvb2RXYWl0RXJyb3IgYXMgZToKICAgICAgICAgICAgbGFzdF9lcnJvciA9IGUKICAgICAgICAgICAgcmVxdWlyZWQgPSBlLnNlY29uZHMKCiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKAogICAgICAgICAgICAgICAgIkZsb29kV2FpdEVycm9yIGZvciBtZXNzYWdlICVzIChhdHRlbXB0ICVkLyVkKTogIgogICAgICAgICAgICAgICAgIiVzIHNlY29uZHMgcmVxdWlyZWQgYnkgVGVsZWdyYW0uIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgICAgICBhdHRlbXB0LAogICAgICAgICAgICAgICAgTUFYX1RSQU5TTEFUSU9OX1JFVFJJRVMsCiAgICAgICAgICAgICAgICByZXF1aXJlZCwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgaWYgYXR0ZW1wdCA9PSBNQVhfVFJBTlNMQVRJT05fUkVUUklFUzoKICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICBhd2FpdCBhc3luY2lvLnNsZWVwKHJlcXVpcmVkICsgMSkKCiAgICAgICAgZXhjZXB0IFJQQ0Vycm9yIGFzIGU6CiAgICAgICAgICAgIGxhc3RfZXJyb3IgPSBlCiAgICAgICAgICAgIGxvZ2dlci53YXJuaW5nKAogICAgICAgICAgICAgICAgIlJQQ0Vycm9yIGZvciBtZXNzYWdlICVzIG9uIGF0dGVtcHQgJWQvJWQ6ICVzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgICAgICBhdHRlbXB0LAogICAgICAgICAgICAgICAgTUFYX1RSQU5TTEFUSU9OX1JFVFJJRVMsCiAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICApCgogICAgICAgICAgICBpZiBhdHRlbXB0ID09IE1BWF9UUkFOU0xBVElPTl9SRVRSSUVTOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoQkFTRV9SRVRSWV9TTEVFUF9TRUNPTkRTICogYXR0ZW1wdCkKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsYXN0X2Vycm9yID0gZQogICAgICAgICAgICBsb2dnZXIud2FybmluZygKICAgICAgICAgICAgICAgICJVbmV4cGVjdGVkIHRyYW5zbGF0aW9uIGVycm9yIGZvciBtZXNzYWdlICVzIG9uIGF0dGVtcHQgJWQvJWQ6ICVzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2UuaWQsCiAgICAgICAgICAgICAgICBhdHRlbXB0LAogICAgICAgICAgICAgICAgTUFYX1RSQU5TTEFUSU9OX1JFVFJJRVMsCiAgICAgICAgICAgICAgICBlLAogICAgICAgICAgICApCgogICAgICAgICAgICBpZiBhdHRlbXB0ID09IE1BWF9UUkFOU0xBVElPTl9SRVRSSUVTOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgICAgIGF3YWl0IGFzeW5jaW8uc2xlZXAoQkFTRV9SRVRSWV9TTEVFUF9TRUNPTkRTICogYXR0ZW1wdCkKCiAgICByYWlzZSBUcmFuc2xhdGlvbkZhaWxlZCgKICAgICAgICBmIkZhaWxlZCB0byB0cmFuc2xhdGUgbWVzc2FnZSB7bWVzc2FnZS5pZH0gYWZ0ZXIgIgogICAgICAgIGYie01BWF9UUkFOU0xBVElPTl9SRVRSSUVTfSBhdHRlbXB0cy4gbGFzdF9lcnJvcj17bGFzdF9lcnJvciFyfSIKICAgICkKCgpkZWYgX2V4dHJhY3RfbWVzc2FnZV90ZXh0KG1zZzogdHlwZXMuTWVzc2FnZSkgLT4gc3RyOgogICAgIiIiCiAgICBHZXQgdGhlIHRleHQgY29udGVudCBvZiBhIG1lc3NhZ2UgKHNraXBwaW5nIHNlcnZpY2UvZW1wdHkgbWVzc2FnZXMpLgogICAgIiIiCiAgICB0ZXh0ID0gbXNnLm1lc3NhZ2Ugb3IgZ2V0YXR0cihtc2csICJyYXdfdGV4dCIsICIiKSBvciAiIgogICAgcmV0dXJuIHRleHQuc3RyaXAoKQoKCmNsYXNzIFByb2dyZXNzQmFyOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHRvdGFsOiBpbnQsIHdpZHRoOiBpbnQgPSAzMCk6CiAgICAgICAgc2VsZi50b3RhbCA9IG1heCh0b3RhbCwgMSkKICAgICAgICBzZWxmLndpZHRoID0gd2lkdGgKICAgICAgICBzZWxmLmNvdW50ID0gMAoKICAgIGRlZiBhZHZhbmNlKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5jb3VudCArPSAxCiAgICAgICAgZmlsbGVkID0gaW50KHNlbGYud2lkdGggKiAoc2VsZi5jb3VudCAvIHNlbGYudG90YWwpKQogICAgICAgIGJhciA9ICLilogiICogZmlsbGVkICsgIuKWkSIgKiAoc2VsZi53aWR0aCAtIGZpbGxlZCkKICAgICAgICBwcmludChmIlxyWyB7YmFyfSBdIHtzZWxmLmNvdW50fS97c2VsZi50b3RhbH0iLCBlbmQ9IiIsIGZsdXNoPVRydWUpCgogICAgZGVmIGZpbmlzaChzZWxmKSAtPiBOb25lOgogICAgICAgIHByaW50KCkgICMgbW92ZSB0byBuZXh0IGxpbmUKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIENvcmUgYXN5bmMgaW1wbGVtZW50YXRpb24KIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgphc3luYyBkZWYgX2luZ2VzdF90ZWxlZ3JhbV93aW5kb3dfYXN5bmMoCiAgICBzdGFydF9kYXRlOiBzdHIsCiAgICBlbmRfZGF0ZTogc3RyIHwgTm9uZSwKICAgIG91dF9wYXRoOiBQYXRoIHwgTm9uZSA9IE5vbmUsCiAgICBjaGFubmVsc19wYXRoOiBQYXRoIHwgTm9uZSA9IE5vbmUsCiAgICBhbGlhc2VzOiBsaXN0W3N0cl0gfCBOb25lID0gTm9uZSwKICAgIGJsYWNrbGlzdDogbGlzdFtzdHJdIHwgTm9uZSA9IE5vbmUsCiAgICB3aGl0ZWxpc3Q6IGxpc3Rbc3RyXSB8IE5vbmUgPSBOb25lLAopIC0+IHR1cGxlW1BhdGgsIGxpc3RbZGljdF1dOgogICAgIiIiCiAgICBDb3JlIGFzeW5jIGltcGxlbWVudGF0aW9uLgoKICAgIFBhcmFtZXRlcnM6CiAgICAgIC0gc3RhcnRfZGF0ZSwgZW5kX2RhdGU6IFlZWVktTU0tREQgc3RyaW5ncyAoZW5kIGluY2x1c2l2ZSkuCiAgICAgIC0gb3V0X3BhdGg6IG9wdGlvbmFsIHBvc3RzLmpzb25sIHBhdGg7IGRlZmF1bHRzIHRvIGRhdGEvaW50ZXJpbS8uLi4KICAgICAgLSBjaGFubmVsc19wYXRoOiBwYXRoIHRvIHRnX2NoYW5uZWxzLmpzb25sOyBpZiBOb25lLCBmYWxscyBiYWNrIHRvIEhBUkRDT0RFRF9DSEFOTkVMUy4KICAgICAgLSBhbGlhc2VzOiBpZiBwcm92aWRlZCwgcmVzdHJpY3QgdG8gY2hhbm5lbHMgd2hvc2UgYWxpYXMgb3IgY2hhbm5lbF9uYW1lIG1hdGNoZXMKICAgICAgICAgICAgICAgICBhbnkgb2YgdGhlc2UgKGNhc2UtaW5zZW5zaXRpdmUsICdAJyBpZ25vcmVkKTsgb3RoZXJ3aXNlIGFsbCBhY3RpdmUgY2hhbm5lbHMuCiAgICAgIC0gYmxhY2tsaXN0OiByZWplY3QgcG9zdHMgY29udGFpbmluZyBhbnkgb2YgdGhlc2Ugd29yZHMgKGNhc2UtaW5zZW5zaXRpdmUpLgogICAgICAtIHdoaXRlbGlzdDogaWYgcHJvdmlkZWQsIGtlZXAgb25seSBwb3N0cyBjb250YWluaW5nIGF0IGxlYXN0IG9uZSBvZiB0aGVzZSB3b3Jkcy4KICAgICIiIgogICAgYXBpX2lkLCBhcGlfaGFzaCwgc2Vzc2lvbl9uYW1lID0gX2xvYWRfdGVsZWdyYW1fY3JlZGVudGlhbHMoKQogICAgc3RhcnRfZHQsIGVuZF9kdCA9IF9wYXJzZV9kYXRlX3JhbmdlKHN0YXJ0X2RhdGUsIGVuZF9kYXRlKQoKICAgICMgRGV0ZXJtaW5lIGNoYW5uZWxzOiBmaWxlIG92ZXJyaWRlcyBoYXJkLWNvZGVkIGxpc3QgaWYgZ2l2ZW4KICAgIGlmIGNoYW5uZWxzX3BhdGggaXMgbm90IE5vbmU6CiAgICAgICAgYWxsX2NoYW5uZWxzID0gX2xvYWRfY2hhbm5lbHNfZnJvbV9maWxlKGNoYW5uZWxzX3BhdGgpCiAgICAgICAgaWYgbm90IGFsbF9jaGFubmVsczoKICAgICAgICAgICAgbG9nZ2VyLndhcm5pbmcoCiAgICAgICAgICAgICAgICAiTm8gY2hhbm5lbHMgZm91bmQgaW4gJXM7IGZhbGxpbmcgYmFjayB0byBIQVJEQ09ERURfQ0hBTk5FTFMiLAogICAgICAgICAgICAgICAgY2hhbm5lbHNfcGF0aCwKICAgICAgICAgICAgKQogICAgICAgICAgICBhbGxfY2hhbm5lbHMgPSBIQVJEQ09ERURfQ0hBTk5FTFNbOl0KICAgIGVsc2U6CiAgICAgICAgYWxsX2NoYW5uZWxzID0gSEFSRENPREVEX0NIQU5ORUxTWzpdCgogICAgYWxpYXNfc2V0ID0gKAogICAgICAgIHtfbm9ybWFsaXplX2hhbmRsZShhKSBmb3IgYSBpbiBhbGlhc2VzfQogICAgICAgIGlmIGFsaWFzZXMgaXMgbm90IE5vbmUKICAgICAgICBlbHNlIE5vbmUKICAgICkKCiAgICBkZWYgX3NlbGVjdChjZmc6IENoYW5uZWxDb25maWcpIC0+IGJvb2w6CiAgICAgICAgIyBBbHdheXMgaG9ub3IgJ2FjdGl2ZScgZmxhZwogICAgICAgIGlmIG5vdCBjZmcuYWN0aXZlOgogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBpZiBhbGlhc19zZXQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBjX2FsaWFzID0gX25vcm1hbGl6ZV9oYW5kbGUoY2ZnLmFsaWFzKQogICAgICAgIGNfbmFtZSA9IF9ub3JtYWxpemVfaGFuZGxlKGNmZy5jaGFubmVsX25hbWUpCiAgICAgICAgcmV0dXJuIGNfYWxpYXMgaW4gYWxpYXNfc2V0IG9yIGNfbmFtZSBpbiBhbGlhc19zZXQKCiAgICBjaGFubmVscyA9IFtjZmcgZm9yIGNmZyBpbiBhbGxfY2hhbm5lbHMgaWYgX3NlbGVjdChjZmcpXQoKICAgIGlmIG5vdCBjaGFubmVsczoKICAgICAgICBsb2dnZXIuaW5mbygiTm8gbWF0Y2hpbmcgYWN0aXZlIGNoYW5uZWxzIGluIGNvbmZpZ3VyYXRpb24uIikKICAgICAgICBvdXRwdXRfcGF0aCA9IF9lbnN1cmVfb3V0cHV0X3BhdGgob3V0X3BhdGgpCiAgICAgICAgcmV0dXJuIG91dHB1dF9wYXRoLCBbXQoKICAgIG91dHB1dF9wYXRoID0gX2Vuc3VyZV9vdXRwdXRfcGF0aChvdXRfcGF0aCkKCiAgICBsb2dnZXIuaW5mbygKICAgICAgICAiSW5nZXN0aW5nIFRlbGVncmFtIHdpbmRvdyAlcyDihpIgJXMgaW50byAlcyIsCiAgICAgICAgc3RhcnRfZHQuaXNvZm9ybWF0KCksCiAgICAgICAgZW5kX2R0Lmlzb2Zvcm1hdCgpLAogICAgICAgIG91dHB1dF9wYXRoLAogICAgKQoKICAgIHJlY29yZHM6IGxpc3RbZGljdF0gPSBbXQoKICAgIGFzeW5jIHdpdGggVGVsZWdyYW1DbGllbnQoc2Vzc2lvbl9uYW1lLCBhcGlfaWQsIGFwaV9oYXNoKSBhcyBjbGllbnQ6CiAgICAgICAgd2l0aCBvdXRwdXRfcGF0aC5vcGVuKCJhIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgb3V0X2Y6CiAgICAgICAgICAgIGZvciBjZmcgaW4gY2hhbm5lbHM6CiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygKICAgICAgICAgICAgICAgICAgICAiRmV0Y2hpbmcgZnJvbSBjaGFubmVsICVzIChhbGlhcz0lcywgbGFuZz0lcywgYWN0aXZlPSVzKSIsCiAgICAgICAgICAgICAgICAgICAgY2ZnLmNoYW5uZWxfbmFtZSwKICAgICAgICAgICAgICAgICAgICBjZmcuYWxpYXMsCiAgICAgICAgICAgICAgICAgICAgY2ZnLmNoYW5uZWxfbGFuZywKICAgICAgICAgICAgICAgICAgICBjZmcuYWN0aXZlLAogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBlbnRpdHkgPSBhd2FpdCBjbGllbnQuZ2V0X2VudGl0eShjZmcuY2hhbm5lbF9uYW1lKQogICAgICAgICAgICAgICAgZXhjZXB0IFJQQ0Vycm9yIGFzIGV4YzoKICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoCiAgICAgICAgICAgICAgICAgICAgICAgICJGYWlsZWQgdG8gcmVzb2x2ZSBjaGFubmVsICVzOiAlcyIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNmZy5jaGFubmVsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGV4YywKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBsYW5nID0gY2ZnLmNoYW5uZWxfbGFuZy5sb3dlcigpCgogICAgICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAgICAgIyBFTkdMSVNIIENIQU5ORUxTIOKAlCBzaW5nbGUgcGFzcywgcGhyYXNlICsgd29yZCBmaWx0ZXJzCiAgICAgICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICBpZiBsYW5nID09ICJlbiI6CiAgICAgICAgICAgICAgICAgICAgYXN5bmMgZm9yIG1zZyBpbiBfaXRlcl9tZXNzYWdlc19pbl9yYW5nZSgKICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50PWNsaWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5PWVudGl0eSwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfZHQ9c3RhcnRfZHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZF9kdD1lbmRfZHQsCiAgICAgICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dF9vcmlnID0gX2V4dHJhY3RfbWVzc2FnZV90ZXh0KG1zZykKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHRleHRfb3JpZzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgICAgICAjIFByZS1maWx0ZXIgb24gcmF3IHRleHQgLyBoZWFkZXIgcGhyYXNlcwogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgX21hdGNoZXNfcGhyYXNlX2ZpbHRlcih0ZXh0X29yaWcpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRfZW4gPSB0ZXh0X29yaWcKICAgICAgICAgICAgICAgICAgICAgICAgcmF3X3RleHQgPSBOb25lCgogICAgICAgICAgICAgICAgICAgICAgICAjIEFwcGx5IHdvcmQgZmlsdGVycyBvbiBmaW5hbCB0ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBfcGFzc2VzX3dvcmRfZmlsdGVycyh0ZXh0X2VuLCBibGFja2xpc3QsIHdoaXRlbGlzdCk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6ICJ0ZWxlZ3JhbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2hhbm5lbCI6IGNmZy5jaGFubmVsX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYWxpYXMiOiBjZmcuYWxpYXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiY2hhbm5lbF9sYW5nIjogY2ZnLmNoYW5uZWxfbGFuZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwb3N0X2lkIjogbXNnLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInB1Ymxpc2hlZF9hdCI6IF91dGNfaXNvKG1zZy5kYXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJmZXRjaGVkX2F0IjogX3V0Y19pc28oZGF0ZXRpbWUubm93KFVUQykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInJhd190ZXh0IjogcmF3X3RleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidGV4dCI6IHRleHRfZW4sCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIG91dF9mLndyaXRlKGpzb24uZHVtcHMocmVjb3JkLCBlbnN1cmVfYXNjaWk9RmFsc2UpICsgIlxuIikKICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkcy5hcHBlbmQocmVjb3JkKQoKICAgICAgICAgICAgICAgICAgICAjIERvbmUgd2l0aCB0aGlzIGNoYW5uZWwKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgICAgICMgTk9OLUVOR0xJU0ggQ0hBTk5FTFMgKGUuZy4gbGFuZz0ndWsnKQogICAgICAgICAgICAgICAgIyBGaXJzdCBwYXNzOiBmaW5kIHdoaWNoIG1lc3NhZ2VzIG1hdGNoIHBocmFzZSBmaWx0ZXIKICAgICAgICAgICAgICAgICMgYW5kIGFyZSB3b3J0aCB0cmFuc2xhdGluZy4KICAgICAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgICAgIHRyYW5zbGF0ZV9jYW5kaWRhdGVzOiBzZXRbaW50XSA9IHNldCgpCgogICAgICAgICAgICAgICAgYXN5bmMgZm9yIG1zZyBpbiBfaXRlcl9tZXNzYWdlc19pbl9yYW5nZSgKICAgICAgICAgICAgICAgICAgICBjbGllbnQ9Y2xpZW50LAogICAgICAgICAgICAgICAgICAgIGVudGl0eT1lbnRpdHksCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfZHQ9c3RhcnRfZHQsCiAgICAgICAgICAgICAgICAgICAgZW5kX2R0PWVuZF9kdCwKICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgdGV4dF9vcmlnID0gX2V4dHJhY3RfbWVzc2FnZV90ZXh0KG1zZykKICAgICAgICAgICAgICAgICAgICBpZiBub3QgdGV4dF9vcmlnOgogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICBpZiBub3QgX21hdGNoZXNfcGhyYXNlX2ZpbHRlcih0ZXh0X29yaWcpOgogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICBpZiBsYW5nID09ICJ1ayI6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzaG91bGRfdHJhbnNsYXRlX3VrX3Bvc3QodGV4dF9vcmlnKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZV9jYW5kaWRhdGVzLmFkZChtc2cuaWQpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlX2NhbmRpZGF0ZXMuYWRkKG1zZy5pZCkKCiAgICAgICAgICAgICAgICB0b3RhbF90b190cmFuc2xhdGUgPSBsZW4odHJhbnNsYXRlX2NhbmRpZGF0ZXMpCiAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IFByb2dyZXNzQmFyKHRvdGFsX3RvX3RyYW5zbGF0ZSBpZiB0b3RhbF90b190cmFuc2xhdGUgPiAwIGVsc2UgMSkKCiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbygKICAgICAgICAgICAgICAgICAgICAiQ2hhbm5lbCAlczogJWQgbWVzc2FnZXMgbWF0Y2ggc2l0cmVwIHBocmFzZXMgYW5kIHJlcXVpcmUgdHJhbnNsYXRpb24uIiwKICAgICAgICAgICAgICAgICAgICBjZmcuY2hhbm5lbF9uYW1lLAogICAgICAgICAgICAgICAgICAgIHRvdGFsX3RvX3RyYW5zbGF0ZSwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICAgICAjIFNFQ09ORCBQQVNTIOKAlCByZWFsIGluZ2VzdGlvbiwgb25seSBmb3IgY2FuZGlkYXRlcwogICAgICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAgICAgYXN5bmMgZm9yIG1zZyBpbiBfaXRlcl9tZXNzYWdlc19pbl9yYW5nZSgKICAgICAgICAgICAgICAgICAgICBjbGllbnQ9Y2xpZW50LAogICAgICAgICAgICAgICAgICAgIGVudGl0eT1lbnRpdHksCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfZHQ9c3RhcnRfZHQsCiAgICAgICAgICAgICAgICAgICAgZW5kX2R0PWVuZF9kdCwKICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgaWYgbXNnLmlkIG5vdCBpbiB0cmFuc2xhdGVfY2FuZGlkYXRlczoKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgdGV4dF9vcmlnID0gX2V4dHJhY3RfbWVzc2FnZV90ZXh0KG1zZykKICAgICAgICAgICAgICAgICAgICBpZiBub3QgdGV4dF9vcmlnOgogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRfZW4gPSBhd2FpdCBfdHJhbnNsYXRlX21lc3NhZ2VfdGV4dCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudD1jbGllbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHk9ZW50aXR5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT1tc2csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b19sYW5nPSJlbiIsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdGV4dF9lbiBpcyBOb25lOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWR2YW5jZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICAgICAgcmF3X3RleHQgPSB0ZXh0X29yaWcKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuYWR2YW5jZSgpCgogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBUcmFuc2xhdGlvbkZhaWxlZDoKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MuZmluaXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2UKCiAgICAgICAgICAgICAgICAgICAgIyBBcHBseSB3b3JkIGZpbHRlcnMgb24gdHJhbnNsYXRlZCB0ZXh0CiAgICAgICAgICAgICAgICAgICAgaWYgbm90IF9wYXNzZXNfd29yZF9maWx0ZXJzKHRleHRfZW4sIGJsYWNrbGlzdCwgd2hpdGVsaXN0KToKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICAgICAgcmVjb3JkID0gewogICAgICAgICAgICAgICAgICAgICAgICAic291cmNlIjogInRlbGVncmFtIiwKICAgICAgICAgICAgICAgICAgICAgICAgImNoYW5uZWwiOiBjZmcuY2hhbm5lbF9uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAiYWxpYXMiOiBjZmcuYWxpYXMsCiAgICAgICAgICAgICAgICAgICAgICAgICJjaGFubmVsX2xhbmciOiBjZmcuY2hhbm5lbF9sYW5nLAogICAgICAgICAgICAgICAgICAgICAgICAicG9zdF9pZCI6IG1zZy5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgInB1Ymxpc2hlZF9hdCI6IF91dGNfaXNvKG1zZy5kYXRlKSwKICAgICAgICAgICAgICAgICAgICAgICAgImZldGNoZWRfYXQiOiBfdXRjX2lzbyhkYXRldGltZS5ub3coVVRDKSksCiAgICAgICAgICAgICAgICAgICAgICAgICJ0ZXh0IjogdGV4dF9lbiwKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIG91dF9mLndyaXRlKGpzb24uZHVtcHMocmVjb3JkLCBlbnN1cmVfYXNjaWk9RmFsc2UpICsgIlxuIikKICAgICAgICAgICAgICAgICAgICByZWNvcmRzLmFwcGVuZChyZWNvcmQpCgogICAgICAgICAgICAgICAgcHJvZ3Jlc3MuZmluaXNoKCkKCiAgICBsb2dnZXIuaW5mbygiSW5nZXN0aW9uIGNvbXBsZXRlLCBvdXRwdXQgd3JpdHRlbiB0byAlcyIsIG91dHB1dF9wYXRoKQogICAgcmV0dXJuIG91dHB1dF9wYXRoLCByZWNvcmRzCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBQdWJsaWMgc3luYyB3cmFwcGVyCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKZGVmIGZldGNoX3Bvc3RzKAogICAgc3RhcnRfZGF0ZTogc3RyLAogICAgZW5kX2RhdGU6IHN0ciB8IE5vbmUgPSBOb25lLAogICAgY2hhbm5lbHNfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAogICAgb3V0X3BhdGg6IFBhdGggfCBOb25lID0gTm9uZSwKICAgIGFsaWFzZXM6IGxpc3Rbc3RyXSB8IE5vbmUgPSBOb25lLAogICAgYmxhY2tsaXN0OiBsaXN0W3N0cl0gfCBOb25lID0gTm9uZSwKICAgIHdoaXRlbGlzdDogbGlzdFtzdHJdIHwgTm9uZSA9IE5vbmUsCikgLT4gdHVwbGVbUGF0aCwgbGlzdFtkaWN0XV06CiAgICAiIiIKICAgIFN5bmNocm9ub3VzIHdyYXBwZXIgYXJvdW5kIHRoZSBhc3luYyBpbmdlc3QgZnVuY3Rpb24uCgogICAgVGhpcyBpcyB0aGUgbWFpbiBlbnRyeSBwb2ludCB1c2VkIGJ5IHRoZSBUeXBlciBDTEk6CgogICAgICAgIHNpdHJlcGMyIGZldGNoIDxzb3VyY2U+IC0tc3RhcnQgLi4uIFstLWVuZCAuLi5dIFstLWJsYWNrbGlzdCAuLi5dIFstLXdoaXRlbGlzdCAuLi5dCgogICAgLSBhbGlhc2VzOiBsaXN0IG9mIGFsaWFzL2NoYW5uZWwgaWRlbnRpZmllcnMsIG9yIE5vbmUgZm9yICJhbGwgYWN0aXZlIi4KICAgICIiIgogICAgcmV0dXJuIGFzeW5jaW8ucnVuKAogICAgICAgIF9pbmdlc3RfdGVsZWdyYW1fd2luZG93X2FzeW5jKAogICAgICAgICAgICBzdGFydF9kYXRlPXN0YXJ0X2RhdGUsCiAgICAgICAgICAgIGVuZF9kYXRlPWVuZF9kYXRlLAogICAgICAgICAgICBvdXRfcGF0aD1vdXRfcGF0aCwKICAgICAgICAgICAgY2hhbm5lbHNfcGF0aD1jaGFubmVsc19wYXRoLAogICAgICAgICAgICBhbGlhc2VzPWFsaWFzZXMsCiAgICAgICAgICAgIGJsYWNrbGlzdD1ibGFja2xpc3QsCiAgICAgICAgICAgIHdoaXRlbGlzdD13aGl0ZWxpc3QsCiAgICAgICAgKQogICAgKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTGVnYWN5IENMSSBlbnRyeXBvaW50IChvcHRpb25hbCkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpkZWYgbWFpbihhcmd2OiBsaXN0W3N0cl0gfCBOb25lID0gTm9uZSkgLT4gaW50OgogICAgIiIiCiAgICBMZWdhY3kgYXJncGFyc2UgZW50cnlwb2ludC4gWW91IGNhbiBzdGlsbCBydW46CgogICAgICAgIHB5dGhvbiAtbSBzaXRyZXBjMi5pbmdlc3QudGVsZWdyYW0gLXMgMjAyNS0xMi0wMSAtZSAyMDI1LTEyLTA1IC1pIHBhdGgvdG8vdGdfY2hhbm5lbHMuanNvbmwKCiAgICBUaGlzIGRvZXMgbm90IGV4cG9zZSBhbGlhc2VzL2ZpbHRlcnM7IGZvciB0aGF0LCB1c2UgdGhlIFR5cGVyIENMSSAoYHNpdHJlcGMyIGZldGNoYCkuCiAgICAiIiIKICAgIHBhcnNlciA9IGFyZ3BhcnNlLkFyZ3VtZW50UGFyc2VyKAogICAgICAgIGRlc2NyaXB0aW9uPSJGZXRjaCBhbmQgdHJhbnNsYXRlIFRlbGVncmFtIHBvc3RzIGluIGEgZGF0ZSB3aW5kb3cuIgogICAgKQogICAgcGFyc2VyLmFkZF9hcmd1bWVudCgKICAgICAgICAiLXMiLAogICAgICAgICItLXN0YXJ0IiwKICAgICAgICByZXF1aXJlZD1UcnVlLAogICAgICAgIGhlbHA9IlN0YXJ0IGRhdGUgKFlZWVktTU0tREQsIGluY2x1c2l2ZSkuIiwKICAgICkKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgIi1lIiwKICAgICAgICAiLS1lbmQiLAogICAgICAgIGhlbHA9IkVuZCBkYXRlIChZWVlZLU1NLURELCBpbmNsdXNpdmUpLiBEZWZhdWx0cyB0byBzdGFydCBkYXRlIGlmIG9taXR0ZWQuIiwKICAgICkKICAgIHBhcnNlci5hZGRfYXJndW1lbnQoCiAgICAgICAgIi1pIiwKICAgICAgICAiLS1pbXBvcnQiLAogICAgICAgIGRlc3Q9ImltcG9ydF9wYXRoIiwKICAgICAgICBoZWxwPSgKICAgICAgICAgICAgIk9wdGlvbmFsIHBhdGggdG8gY2hhbm5lbHMgSlNPTkwgZmlsZS4gIgogICAgICAgICAgICAiSWYgcHJvdmlkZWQsIG92ZXJyaWRlcyB0aGUgaGFyZC1jb2RlZCBjaGFubmVsIGxpc3QuIgogICAgICAgICksCiAgICApCiAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KAogICAgICAgICItbyIsCiAgICAgICAgIi0tb3V0IiwKICAgICAgICBkZXN0PSJvdXRfcGF0aCIsCiAgICAgICAgaGVscD0oCiAgICAgICAgICAgICJPcHRpb25hbCBKU09OTCBvdXRwdXQgcGF0aC4gIgogICAgICAgICAgICAiSWYgb21pdHRlZCwgdXNlcyBkYXRhL2ludGVyaW0vWVlZWS9ZWVlZLU1NL1lZWVktTU0tREQvcG9zdHMuanNvbmwuIgogICAgICAgICksCiAgICApCgogICAgYXJncyA9IHBhcnNlci5wYXJzZV9hcmdzKGFyZ3YpCgogICAgc3RhcnRfZGF0ZSA9IGFyZ3Muc3RhcnQKICAgIGVuZF9kYXRlID0gYXJncy5lbmQKCiAgICBjaGFubmVsc19wYXRoOiBQYXRoIHwgTm9uZSA9IFBhdGgoYXJncy5pbXBvcnRfcGF0aCkgaWYgYXJncy5pbXBvcnRfcGF0aCBlbHNlIE5vbmUKICAgIG91dF9wYXRoOiBQYXRoIHwgTm9uZSA9IFBhdGgoYXJncy5vdXRfcGF0aCkgaWYgYXJncy5vdXRfcGF0aCBlbHNlIE5vbmUKCiAgICBvdXRwdXRfcGF0aCwgcmVjb3JkcyA9IGZldGNoX3Bvc3RzKAogICAgICAgIHN0YXJ0X2RhdGU9c3RhcnRfZGF0ZSwKICAgICAgICBlbmRfZGF0ZT1lbmRfZGF0ZSwKICAgICAgICBjaGFubmVsc19wYXRoPWNoYW5uZWxzX3BhdGgsCiAgICAgICAgb3V0X3BhdGg9b3V0X3BhdGgsCiAgICAgICAgYWxpYXNlcz1Ob25lLAogICAgICAgIGJsYWNrbGlzdD1Ob25lLAogICAgICAgIHdoaXRlbGlzdD1Ob25lLAogICAgKQoKICAgIHByaW50KGYiV3JvdGUge2xlbihyZWNvcmRzKX0gcmVjb3JkcyB0byB7b3V0cHV0X3BhdGh9IikKICAgIHJldHVybiAwCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHJhaXNlIFN5c3RlbUV4aXQobWFpbigpKQoAAAAAAAAAAK1bAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlAEAAAAAAACUAQAAAAAAAAAAAAAAAPC/"
				],
				[
					136,
					1,
					"left_delete",
					null,
					"AgAAAOAAAAAAAAAA4AAAAAAAAAA5AAAAZnJvbSBkYXRldGltZSBpbXBvcnQgVVRDLCBkYXRlLCBkYXRldGltZSwgdGltZSwgdGltZWRlbHRh3wAAAAAAAADfAAAAAAAAAAEAAAAK",
					"AQAAAAAAAAABAAAAGQEAAAAAAADgAAAAAAAAAAAAAAAAAPC/"
				],
				[
					139,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAALkBAAAAAAAAugEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuQEAAAAAAAC5AQAAAAAAAAAAAAAAAPC/"
				],
				[
					140,
					1,
					"paste",
					null,
					"AQAAALoBAAAAAAAADAIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAugEAAAAAAAC6AQAAAAAAAAAAAAAAAPC/"
				],
				[
					206,
					1,
					"paste",
					null,
					"AQAAAI5bAAAAAAAAl2UAAAAAAAA3AAAAaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHJhaXNlIFN5c3RlbUV4aXQobWFpbigpKQ",
					"AQAAAAAAAAABAAAAxVsAAAAAAACOWwAAAAAAAAAAAAAAAPC/"
				],
				[
					245,
					1,
					"toggle_comment",
					{
						"block": false
					},
					"AgAAAGw+AAAAAAAAbj4AAAAAAAAAAAAAGD4AAAAAAAAaPgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAeD4AAAAAAAAAPgAAAAAAAAAAAAAAAPC/"
				],
				[
					249,
					1,
					"toggle_comment",
					{
						"block": false
					},
					"AgAAANBMAAAAAAAA0kwAAAAAAAAAAAAAgEwAAAAAAACCTAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3EwAAAAAAABsTAAAAAAAAAAAAAAAAPC/"
				],
				[
					255,
					1,
					"insert",
					{
						"characters": "\nprint"
					},
					"BgAAAHU8AAAAAAAAjjwAAAAAAAAAAAAAjjwAAAAAAACPPAAAAAAAAAAAAACPPAAAAAAAAJA8AAAAAAAAAAAAAJA8AAAAAAAAkTwAAAAAAAAAAAAAkTwAAAAAAACSPAAAAAAAAAAAAACSPAAAAAAAAJM8AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdTwAAAAAAAB1PAAAAAAAAAAAAAAAAPC/"
				],
				[
					256,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAJM8AAAAAAAAlTwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAkzwAAAAAAACTPAAAAAAAAAAAAAAAAPC/"
				],
				[
					257,
					1,
					"insert",
					{
						"characters": "mas"
					},
					"AwAAAJQ8AAAAAAAAlTwAAAAAAAAAAAAAlTwAAAAAAACWPAAAAAAAAAAAAACWPAAAAAAAAJc8AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlDwAAAAAAACUPAAAAAAAAAAAAAAAAPC/"
				],
				[
					258,
					2,
					"left_delete",
					null,
					"AgAAAJY8AAAAAAAAljwAAAAAAAABAAAAc5U8AAAAAAAAlTwAAAAAAAABAAAAYQ",
					"AQAAAAAAAAABAAAAlzwAAAAAAACXPAAAAAAAAAAAAAAAAPC/"
				],
				[
					259,
					1,
					"insert",
					{
						"characters": "sg"
					},
					"AgAAAJU8AAAAAAAAljwAAAAAAAAAAAAAljwAAAAAAACXPAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlTwAAAAAAACVPAAAAAAAAAAAAAAAAPC/"
				],
				[
					265,
					1,
					"insert",
					{
						"characters": "f"
					},
					"AQAAADY8AAAAAAAANzwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANjwAAAAAAAA2PAAAAAAAAAAAAAAAAPC/"
				],
				[
					266,
					1,
					"left_delete",
					null,
					"AQAAADY8AAAAAAAANjwAAAAAAAABAAAAZg",
					"AQAAAAAAAAABAAAANzwAAAAAAAA3PAAAAAAAAAAAAAAAAPC/"
				],
				[
					275,
					1,
					"reindent",
					null,
					"AQAAAEsdAAAAAAAATx0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASx0AAAAAAABLHQAAAAAAAAAAAAAAAPC/"
				],
				[
					276,
					1,
					"insert",
					{
						"characters": "print"
					},
					"BQAAAE8dAAAAAAAAUB0AAAAAAAAAAAAAUB0AAAAAAABRHQAAAAAAAAAAAABRHQAAAAAAAFIdAAAAAAAAAAAAAFIdAAAAAAAAUx0AAAAAAAAAAAAAUx0AAAAAAABUHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAATx0AAAAAAABPHQAAAAAAAAAAAAAAAPC/"
				],
				[
					277,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAFQdAAAAAAAAVh0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVB0AAAAAAABUHQAAAAAAAAAAAAAAAPC/"
				],
				[
					278,
					1,
					"insert",
					{
						"characters": "star"
					},
					"BAAAAFUdAAAAAAAAVh0AAAAAAAAAAAAAVh0AAAAAAABXHQAAAAAAAAAAAABXHQAAAAAAAFgdAAAAAAAAAAAAAFgdAAAAAAAAWR0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVR0AAAAAAABVHQAAAAAAAAAAAAAAAPC/"
				],
				[
					279,
					4,
					"left_delete",
					null,
					"BAAAAFgdAAAAAAAAWB0AAAAAAAABAAAAclcdAAAAAAAAVx0AAAAAAAABAAAAYVYdAAAAAAAAVh0AAAAAAAABAAAAdFUdAAAAAAAAVR0AAAAAAAABAAAAcw",
					"AQAAAAAAAAABAAAAWR0AAAAAAABZHQAAAAAAAAAAAAAAAPC/"
				],
				[
					280,
					1,
					"insert",
					{
						"characters": "f"
					},
					"AQAAAFUdAAAAAAAAVh0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVR0AAAAAAABVHQAAAAAAAAAAAAAAAPC/"
				],
				[
					281,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAAFYdAAAAAAAAWB0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVh0AAAAAAABWHQAAAAAAAAAAAAAAAPC/"
				],
				[
					282,
					1,
					"insert",
					{
						"characters": "start"
					},
					"BQAAAFcdAAAAAAAAWB0AAAAAAAAAAAAAWB0AAAAAAABZHQAAAAAAAAAAAABZHQAAAAAAAFodAAAAAAAAAAAAAFodAAAAAAAAWx0AAAAAAAAAAAAAWx0AAAAAAABcHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAVx0AAAAAAABXHQAAAAAAAAAAAAAAAPC/"
				],
				[
					283,
					1,
					"insert",
					{
						"characters": " date:"
					},
					"BgAAAFwdAAAAAAAAXR0AAAAAAAAAAAAAXR0AAAAAAABeHQAAAAAAAAAAAABeHQAAAAAAAF8dAAAAAAAAAAAAAF8dAAAAAAAAYB0AAAAAAAAAAAAAYB0AAAAAAABhHQAAAAAAAAAAAABhHQAAAAAAAGIdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXB0AAAAAAABcHQAAAAAAAAAAAAAAAPC/"
				],
				[
					284,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAGIdAAAAAAAAYx0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYh0AAAAAAABiHQAAAAAAAAAAAAAAAPC/"
				],
				[
					285,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAGMdAAAAAAAAZR0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAYx0AAAAAAABjHQAAAAAAAAAAAAAAAPC/"
				],
				[
					286,
					1,
					"insert",
					{
						"characters": "date"
					},
					"BAAAAGQdAAAAAAAAZR0AAAAAAAAAAAAAZR0AAAAAAABmHQAAAAAAAAAAAABmHQAAAAAAAGcdAAAAAAAAAAAAAGcdAAAAAAAAaB0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZB0AAAAAAABkHQAAAAAAAAAAAAAAAPC/"
				],
				[
					287,
					4,
					"left_delete",
					null,
					"BAAAAGcdAAAAAAAAZx0AAAAAAAABAAAAZWYdAAAAAAAAZh0AAAAAAAABAAAAdGUdAAAAAAAAZR0AAAAAAAABAAAAYWQdAAAAAAAAZB0AAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAaB0AAAAAAABoHQAAAAAAAAAAAAAAAPC/"
				],
				[
					288,
					1,
					"insert",
					{
						"characters": "str"
					},
					"AwAAAGQdAAAAAAAAZR0AAAAAAAAAAAAAZR0AAAAAAABmHQAAAAAAAAAAAABmHQAAAAAAAGcdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZB0AAAAAAABkHQAAAAAAAAAAAAAAAPC/"
				],
				[
					289,
					1,
					"left_delete",
					null,
					"AQAAAGYdAAAAAAAAZh0AAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAAZx0AAAAAAABnHQAAAAAAAAAAAAAAAPC/"
				],
				[
					290,
					1,
					"insert",
					{
						"characters": "at"
					},
					"AgAAAGYdAAAAAAAAZx0AAAAAAAAAAAAAZx0AAAAAAABoHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZh0AAAAAAABmHQAAAAAAAAAAAAAAAPC/"
				],
				[
					291,
					1,
					"left_delete",
					null,
					"AQAAAGcdAAAAAAAAZx0AAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAAaB0AAAAAAABoHQAAAAAAAAAAAAAAAPC/"
				],
				[
					292,
					1,
					"insert",
					{
						"characters": "rt_dt"
					},
					"BQAAAGcdAAAAAAAAaB0AAAAAAAAAAAAAaB0AAAAAAABpHQAAAAAAAAAAAABpHQAAAAAAAGodAAAAAAAAAAAAAGodAAAAAAAAax0AAAAAAAAAAAAAax0AAAAAAABsHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZx0AAAAAAABnHQAAAAAAAAAAAAAAAPC/"
				],
				[
					299,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"AwAAALkdAAAAAAAAwh0AAAAAAAAAAAAAwh0AAAAAAADDHQAAAAAAAAAAAADDHQAAAAAAAMQdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuR0AAAAAAAC5HQAAAAAAAAAAAAAAAPC/"
				],
				[
					300,
					1,
					"insert",
					{
						"characters": " not"
					},
					"BAAAAMQdAAAAAAAAxR0AAAAAAAAAAAAAxR0AAAAAAADGHQAAAAAAAAAAAADGHQAAAAAAAMcdAAAAAAAAAAAAAMcdAAAAAAAAyB0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxB0AAAAAAADEHQAAAAAAAAAAAAAAAPC/"
				],
				[
					301,
					1,
					"insert",
					{
						"characters": " ms"
					},
					"AwAAAMgdAAAAAAAAyR0AAAAAAAAAAAAAyR0AAAAAAADKHQAAAAAAAAAAAADKHQAAAAAAAMsdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyB0AAAAAAADIHQAAAAAAAAAAAAAAAPC/"
				],
				[
					302,
					12,
					"left_delete",
					null,
					"DAAAAModAAAAAAAAyh0AAAAAAAABAAAAc8kdAAAAAAAAyR0AAAAAAAABAAAAbcgdAAAAAAAAyB0AAAAAAAABAAAAIMcdAAAAAAAAxx0AAAAAAAABAAAAdMYdAAAAAAAAxh0AAAAAAAABAAAAb8UdAAAAAAAAxR0AAAAAAAABAAAAbsQdAAAAAAAAxB0AAAAAAAABAAAAIMMdAAAAAAAAwx0AAAAAAAABAAAAZsIdAAAAAAAAwh0AAAAAAAABAAAAab4dAAAAAAAAvh0AAAAAAAAEAAAAICAgILodAAAAAAAAuh0AAAAAAAAEAAAAICAgILkdAAAAAAAAuR0AAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAyx0AAAAAAADLHQAAAAAAAAAAAAAAAPC/"
				],
				[
					309,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAAG8dAAAAAAAAdB0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAbx0AAAAAAABvHQAAAAAAAAAAAAAAAPC/"
				],
				[
					310,
					1,
					"insert",
					{
						"characters": "messages"
					},
					"CAAAAHQdAAAAAAAAdR0AAAAAAAAAAAAAdR0AAAAAAAB2HQAAAAAAAAAAAAB2HQAAAAAAAHcdAAAAAAAAAAAAAHcdAAAAAAAAeB0AAAAAAAAAAAAAeB0AAAAAAAB5HQAAAAAAAAAAAAB5HQAAAAAAAHodAAAAAAAAAAAAAHodAAAAAAAAex0AAAAAAAAAAAAAex0AAAAAAAB8HQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdB0AAAAAAAB0HQAAAAAAAAAAAAAAAPC/"
				],
				[
					311,
					1,
					"insert",
					{
						"characters": " ="
					},
					"AgAAAHwdAAAAAAAAfR0AAAAAAAAAAAAAfR0AAAAAAAB+HQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfB0AAAAAAAB8HQAAAAAAAAAAAAAAAPC/"
				],
				[
					312,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAH4dAAAAAAAAfx0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfh0AAAAAAAB+HQAAAAAAAAAAAAAAAPC/"
				],
				[
					323,
					1,
					"paste",
					null,
					"AQAAAH8dAAAAAAAAsh0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfx0AAAAAAAB/HQAAAAAAAAAAAAAAAPC/"
				],
				[
					324,
					1,
					"insert",
					{
						"characters": "\nif"
					},
					"AwAAALIdAAAAAAAAtx0AAAAAAAAAAAAAtx0AAAAAAAC4HQAAAAAAAAAAAAC4HQAAAAAAALkdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsh0AAAAAAACyHQAAAAAAAAAAAAAAAPC/"
				],
				[
					325,
					1,
					"insert",
					{
						"characters": " not"
					},
					"BAAAALkdAAAAAAAAuh0AAAAAAAAAAAAAuh0AAAAAAAC7HQAAAAAAAAAAAAC7HQAAAAAAALwdAAAAAAAAAAAAALwdAAAAAAAAvR0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAuR0AAAAAAAC5HQAAAAAAAAAAAAAAAPC/"
				],
				[
					326,
					1,
					"insert",
					{
						"characters": " messages:"
					},
					"CgAAAL0dAAAAAAAAvh0AAAAAAAAAAAAAvh0AAAAAAAC/HQAAAAAAAAAAAAC/HQAAAAAAAMAdAAAAAAAAAAAAAMAdAAAAAAAAwR0AAAAAAAAAAAAAwR0AAAAAAADCHQAAAAAAAAAAAADCHQAAAAAAAMMdAAAAAAAAAAAAAMMdAAAAAAAAxB0AAAAAAAAAAAAAxB0AAAAAAADFHQAAAAAAAAAAAADFHQAAAAAAAMYdAAAAAAAAAAAAAMYdAAAAAAAAxx0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvR0AAAAAAAC9HQAAAAAAAAAAAAAAAPC/"
				],
				[
					327,
					1,
					"insert",
					{
						"characters": "\nprint"
					},
					"BgAAAMcdAAAAAAAA0B0AAAAAAAAAAAAA0B0AAAAAAADRHQAAAAAAAAAAAADRHQAAAAAAANIdAAAAAAAAAAAAANIdAAAAAAAA0x0AAAAAAAAAAAAA0x0AAAAAAADUHQAAAAAAAAAAAADUHQAAAAAAANUdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxx0AAAAAAADHHQAAAAAAAAAAAAAAAPC/"
				],
				[
					328,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAANUdAAAAAAAA1x0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1R0AAAAAAADVHQAAAAAAAAAAAAAAAPC/"
				],
				[
					329,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAANYdAAAAAAAA2B0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1h0AAAAAAADWHQAAAAAAAAAAAAAAAPC/"
				],
				[
					330,
					1,
					"insert",
					{
						"characters": "No"
					},
					"AgAAANcdAAAAAAAA2B0AAAAAAAAAAAAA2B0AAAAAAADZHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1x0AAAAAAADXHQAAAAAAAAAAAAAAAPC/"
				],
				[
					331,
					1,
					"insert",
					{
						"characters": " message"
					},
					"CAAAANkdAAAAAAAA2h0AAAAAAAAAAAAA2h0AAAAAAADbHQAAAAAAAAAAAADbHQAAAAAAANwdAAAAAAAAAAAAANwdAAAAAAAA3R0AAAAAAAAAAAAA3R0AAAAAAADeHQAAAAAAAAAAAADeHQAAAAAAAN8dAAAAAAAAAAAAAN8dAAAAAAAA4B0AAAAAAAAAAAAA4B0AAAAAAADhHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2R0AAAAAAADZHQAAAAAAAAAAAAAAAPC/"
				],
				[
					332,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOEdAAAAAAAA4h0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4R0AAAAAAADhHQAAAAAAAAAAAAAAAPC/"
				],
				[
					333,
					1,
					"left_delete",
					null,
					"AQAAAOEdAAAAAAAA4R0AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAA4h0AAAAAAADiHQAAAAAAAAAAAAAAAPC/"
				],
				[
					334,
					1,
					"insert",
					{
						"characters": "s"
					},
					"AQAAAOEdAAAAAAAA4h0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4R0AAAAAAADhHQAAAAAAAAAAAAAAAPC/"
				],
				[
					335,
					1,
					"insert",
					{
						"characters": " located"
					},
					"CAAAAOIdAAAAAAAA4x0AAAAAAAAAAAAA4x0AAAAAAADkHQAAAAAAAAAAAADkHQAAAAAAAOUdAAAAAAAAAAAAAOUdAAAAAAAA5h0AAAAAAAAAAAAA5h0AAAAAAADnHQAAAAAAAAAAAADnHQAAAAAAAOgdAAAAAAAAAAAAAOgdAAAAAAAA6R0AAAAAAAAAAAAA6R0AAAAAAADqHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4h0AAAAAAADiHQAAAAAAAAAAAAAAAPC/"
				],
				[
					336,
					1,
					"insert",
					{
						"characters": " at"
					},
					"AwAAAOodAAAAAAAA6x0AAAAAAAAAAAAA6x0AAAAAAADsHQAAAAAAAAAAAADsHQAAAAAAAO0dAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6h0AAAAAAADqHQAAAAAAAAAAAAAAAPC/"
				],
				[
					337,
					1,
					"insert",
					{
						"characters": " all."
					},
					"BQAAAO0dAAAAAAAA7h0AAAAAAAAAAAAA7h0AAAAAAADvHQAAAAAAAAAAAADvHQAAAAAAAPAdAAAAAAAAAAAAAPAdAAAAAAAA8R0AAAAAAAAAAAAA8R0AAAAAAADyHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7R0AAAAAAADtHQAAAAAAAAAAAAAAAPC/"
				],
				[
					341,
					1,
					"insert",
					{
						"characters": "messages"
					},
					"CAAAAAoeAAAAAAAACx4AAAAAAAAzAAAAY2xpZW50Lml0ZXJfbWVzc2FnZXMoZW50aXR5LCBvZmZzZXRfZGF0ZT1vZmZzZXRfZHQpCx4AAAAAAAAMHgAAAAAAAAAAAAAMHgAAAAAAAA0eAAAAAAAAAAAAAA0eAAAAAAAADh4AAAAAAAAAAAAADh4AAAAAAAAPHgAAAAAAAAAAAAAPHgAAAAAAABAeAAAAAAAAAAAAABAeAAAAAAAAER4AAAAAAAAAAAAAER4AAAAAAAASHgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAPR4AAAAAAAAKHgAAAAAAAAAAAAAAAPC/"
				],
				[
					380,
					1,
					"toggle_comment",
					{
						"block": false
					},
					"AgAAAAM+AAAAAAAABT4AAAAAAAAAAAAAwT0AAAAAAADDPQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADz4AAAAAAAC/PQAAAAAAAAAAAAAAAPC/"
				],
				[
					384,
					1,
					"toggle_comment",
					{
						"block": false
					},
					"AgAAADxFAAAAAAAAPkUAAAAAAAAAAAAA/kQAAAAAAAAARQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASEUAAAAAAAD9RAAAAAAAAAAAAAAAAPC/"
				],
				[
					406,
					2,
					"left_delete",
					null,
					"AgAAAPQ8AAAAAAAA9DwAAAAAAAAiAAAAICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQobXNnKfM8AAAAAAAA8zwAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAAFj0AAAAAAAD0PAAAAAAAAAAAAAAAAPC/"
				],
				[
					412,
					2,
					"left_delete",
					null,
					"AgAAAEsdAAAAAAAASx0AAAAAAAAkAAAAICAgIHByaW50KGYic3RhcnQgZGF0ZToge3N0YXJ0X2R0fSIpSh0AAAAAAABKHQAAAAAAAAEAAAAK",
					"AQAAAAAAAAABAAAAbx0AAAAAAABLHQAAAAAAAAAAAAAAAPC/"
				],
				[
					415,
					7,
					"left_delete",
					null,
					"BwAAAMUdAAAAAAAAxR0AAAAAAAAHAAAAIGF0IGFsbMQdAAAAAAAAxB0AAAAAAAABAAAAZMMdAAAAAAAAwx0AAAAAAAABAAAAZcIdAAAAAAAAwh0AAAAAAAABAAAAdMEdAAAAAAAAwR0AAAAAAAABAAAAYcAdAAAAAAAAwB0AAAAAAAABAAAAY78dAAAAAAAAvx0AAAAAAAABAAAAbw",
					"AQAAAAAAAAABAAAAzB0AAAAAAADFHQAAAAAAAAAAAAAAAPC/"
				],
				[
					416,
					1,
					"insert",
					{
						"characters": "f"
					},
					"AQAAAL8dAAAAAAAAwB0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvx0AAAAAAAC/HQAAAAAAAAAAAAAAAPC/"
				],
				[
					417,
					2,
					"left_delete",
					null,
					"AgAAAL8dAAAAAAAAvx0AAAAAAAABAAAAZr4dAAAAAAAAvh0AAAAAAAABAAAAbA",
					"AQAAAAAAAAABAAAAwB0AAAAAAADAHQAAAAAAAAAAAAAAAPC/"
				],
				[
					418,
					1,
					"insert",
					{
						"characters": "found."
					},
					"BgAAAL4dAAAAAAAAvx0AAAAAAAAAAAAAvx0AAAAAAADAHQAAAAAAAAAAAADAHQAAAAAAAMEdAAAAAAAAAAAAAMEdAAAAAAAAwh0AAAAAAAAAAAAAwh0AAAAAAADDHQAAAAAAAAAAAADDHQAAAAAAAMQdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAvh0AAAAAAAC+HQAAAAAAAAAAAAAAAPC/"
				],
				[
					419,
					1,
					"insert",
					{
						"characters": " There"
					},
					"BgAAAMQdAAAAAAAAxR0AAAAAAAAAAAAAxR0AAAAAAADGHQAAAAAAAAAAAADGHQAAAAAAAMcdAAAAAAAAAAAAAMcdAAAAAAAAyB0AAAAAAAAAAAAAyB0AAAAAAADJHQAAAAAAAAAAAADJHQAAAAAAAModAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxB0AAAAAAADEHQAAAAAAAAAAAAAAAPC/"
				],
				[
					420,
					1,
					"insert",
					{
						"characters": " m"
					},
					"AgAAAModAAAAAAAAyx0AAAAAAAAAAAAAyx0AAAAAAADMHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyh0AAAAAAADKHQAAAAAAAAAAAAAAAPC/"
				],
				[
					421,
					7,
					"left_delete",
					null,
					"BwAAAMsdAAAAAAAAyx0AAAAAAAABAAAAbcodAAAAAAAAyh0AAAAAAAABAAAAIMkdAAAAAAAAyR0AAAAAAAABAAAAZcgdAAAAAAAAyB0AAAAAAAABAAAAcscdAAAAAAAAxx0AAAAAAAABAAAAZcYdAAAAAAAAxh0AAAAAAAABAAAAaMUdAAAAAAAAxR0AAAAAAAABAAAAVA",
					"AQAAAAAAAAABAAAAzB0AAAAAAADMHQAAAAAAAAAAAAAAAPC/"
				],
				[
					422,
					1,
					"insert",
					{
						"characters": "Please"
					},
					"BgAAAMUdAAAAAAAAxh0AAAAAAAAAAAAAxh0AAAAAAADHHQAAAAAAAAAAAADHHQAAAAAAAMgdAAAAAAAAAAAAAMgdAAAAAAAAyR0AAAAAAAAAAAAAyR0AAAAAAADKHQAAAAAAAAAAAADKHQAAAAAAAMsdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAxR0AAAAAAADFHQAAAAAAAAAAAAAAAPC/"
				],
				[
					423,
					1,
					"insert",
					{
						"characters": " c"
					},
					"AgAAAMsdAAAAAAAAzB0AAAAAAAAAAAAAzB0AAAAAAADNHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyx0AAAAAAADLHQAAAAAAAAAAAAAAAPC/"
				],
				[
					424,
					1,
					"left_delete",
					null,
					"AQAAAMwdAAAAAAAAzB0AAAAAAAABAAAAYw",
					"AQAAAAAAAAABAAAAzR0AAAAAAADNHQAAAAAAAAAAAAAAAPC/"
				],
				[
					425,
					1,
					"insert",
					{
						"characters": "check"
					},
					"BQAAAMwdAAAAAAAAzR0AAAAAAAAAAAAAzR0AAAAAAADOHQAAAAAAAAAAAADOHQAAAAAAAM8dAAAAAAAAAAAAAM8dAAAAAAAA0B0AAAAAAAAAAAAA0B0AAAAAAADRHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzB0AAAAAAADMHQAAAAAAAAAAAAAAAPC/"
				],
				[
					426,
					1,
					"insert",
					{
						"characters": " th"
					},
					"AwAAANEdAAAAAAAA0h0AAAAAAAAAAAAA0h0AAAAAAADTHQAAAAAAAAAAAADTHQAAAAAAANQdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0R0AAAAAAADRHQAAAAAAAAAAAAAAAPC/"
				],
				[
					427,
					2,
					"left_delete",
					null,
					"AgAAANMdAAAAAAAA0x0AAAAAAAABAAAAaNIdAAAAAAAA0h0AAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAA1B0AAAAAAADUHQAAAAAAAAAAAAAAAPC/"
				],
				[
					428,
					1,
					"insert",
					{
						"characters": "the"
					},
					"AwAAANIdAAAAAAAA0x0AAAAAAAAAAAAA0x0AAAAAAADUHQAAAAAAAAAAAADUHQAAAAAAANUdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0h0AAAAAAADSHQAAAAAAAAAAAAAAAPC/"
				],
				[
					429,
					1,
					"insert",
					{
						"characters": " channel"
					},
					"CAAAANUdAAAAAAAA1h0AAAAAAAAAAAAA1h0AAAAAAADXHQAAAAAAAAAAAADXHQAAAAAAANgdAAAAAAAAAAAAANgdAAAAAAAA2R0AAAAAAAAAAAAA2R0AAAAAAADaHQAAAAAAAAAAAADaHQAAAAAAANsdAAAAAAAAAAAAANsdAAAAAAAA3B0AAAAAAAAAAAAA3B0AAAAAAADdHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1R0AAAAAAADVHQAAAAAAAAAAAAAAAPC/"
				],
				[
					430,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAN0dAAAAAAAA3h0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3R0AAAAAAADdHQAAAAAAAAAAAAAAAPC/"
				],
				[
					431,
					12,
					"left_delete",
					null,
					"DAAAAN0dAAAAAAAA3R0AAAAAAAABAAAAINwdAAAAAAAA3B0AAAAAAAABAAAAbNsdAAAAAAAA2x0AAAAAAAABAAAAZdodAAAAAAAA2h0AAAAAAAABAAAAbtkdAAAAAAAA2R0AAAAAAAABAAAAbtgdAAAAAAAA2B0AAAAAAAABAAAAYdcdAAAAAAAA1x0AAAAAAAABAAAAaNYdAAAAAAAA1h0AAAAAAAABAAAAY9UdAAAAAAAA1R0AAAAAAAABAAAAINQdAAAAAAAA1B0AAAAAAAABAAAAZdMdAAAAAAAA0x0AAAAAAAABAAAAaNIdAAAAAAAA0h0AAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAA3h0AAAAAAADeHQAAAAAAAAAAAAAAAPC/"
				],
				[
					432,
					1,
					"insert",
					{
						"characters": "your"
					},
					"BAAAANIdAAAAAAAA0x0AAAAAAAAAAAAA0x0AAAAAAADUHQAAAAAAAAAAAADUHQAAAAAAANUdAAAAAAAAAAAAANUdAAAAAAAA1h0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0h0AAAAAAADSHQAAAAAAAAAAAAAAAPC/"
				],
				[
					433,
					1,
					"insert",
					{
						"characters": " source"
					},
					"BwAAANYdAAAAAAAA1x0AAAAAAAAAAAAA1x0AAAAAAADYHQAAAAAAAAAAAADYHQAAAAAAANkdAAAAAAAAAAAAANkdAAAAAAAA2h0AAAAAAAAAAAAA2h0AAAAAAADbHQAAAAAAAAAAAADbHQAAAAAAANwdAAAAAAAAAAAAANwdAAAAAAAA3R0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA1h0AAAAAAADWHQAAAAAAAAAAAAAAAPC/"
				],
				[
					434,
					1,
					"insert",
					{
						"characters": " entry"
					},
					"BgAAAN0dAAAAAAAA3h0AAAAAAAAAAAAA3h0AAAAAAADfHQAAAAAAAAAAAADfHQAAAAAAAOAdAAAAAAAAAAAAAOAdAAAAAAAA4R0AAAAAAAAAAAAA4R0AAAAAAADiHQAAAAAAAAAAAADiHQAAAAAAAOMdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3R0AAAAAAADdHQAAAAAAAAAAAAAAAPC/"
				],
				[
					435,
					1,
					"left_delete",
					null,
					"AQAAAOIdAAAAAAAA4h0AAAAAAAABAAAAeQ",
					"AQAAAAAAAAABAAAA4x0AAAAAAADjHQAAAAAAAAAAAAAAAPC/"
				],
				[
					436,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOIdAAAAAAAA4x0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4h0AAAAAAADiHQAAAAAAAAAAAAAAAPC/"
				],
				[
					437,
					1,
					"left_delete",
					null,
					"AQAAAOIdAAAAAAAA4h0AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAA4x0AAAAAAADjHQAAAAAAAAAAAAAAAPC/"
				],
				[
					438,
					1,
					"insert",
					{
						"characters": "y"
					},
					"AQAAAOIdAAAAAAAA4x0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4h0AAAAAAADiHQAAAAAAAAAAAAAAAPC/"
				],
				[
					439,
					1,
					"insert",
					{
						"characters": " to"
					},
					"AwAAAOMdAAAAAAAA5B0AAAAAAAAAAAAA5B0AAAAAAADlHQAAAAAAAAAAAADlHQAAAAAAAOYdAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4x0AAAAAAADjHQAAAAAAAAAAAAAAAPC/"
				],
				[
					440,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOYdAAAAAAAA5x0AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5h0AAAAAAADmHQAAAAAAAAAAAAAAAPC/"
				],
				[
					441,
					4,
					"left_delete",
					null,
					"BAAAAOYdAAAAAAAA5h0AAAAAAAABAAAAIOUdAAAAAAAA5R0AAAAAAAABAAAAb+QdAAAAAAAA5B0AAAAAAAABAAAAdOMdAAAAAAAA4x0AAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAA5x0AAAAAAADnHQAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"console":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/Volumes/bladerunner/Projects/sitrepc2"
	],
	"file_history":
	[
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/app.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/source_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/fetch_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_serialization.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/db/schema.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/db/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_nodes.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/config/paths.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/io.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/index.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/aliases.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/ruler.py",
		"/Volumes/bladerunner/Projects/sitrepc2/pyproject.toml",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/init_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/group_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/locale_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_direction_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/init_db.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/db_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/typedefs.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_group_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_locale_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_region_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/schema.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/direction_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/config/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/db/core.py",
		"/Volumes/bladerunner/Projects/sitrepc2/data/schema.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/region_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_regions.py",
		"/Users/bladerunner/Projects/mod-mymap/data/spatial/op_groups.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/spatial/clustering.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/spatial/direction_axis.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/resolution.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/lss_scoping.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/typedefs.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/sectioning.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/event_locations.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/context/candidate_narrowing.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/exonyms.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial/ua_settlements.csv",
		"/Volumes/bladerunner/Projects/warreport_ua_settlement_aliases/cid_encoding.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/update_direction_aliases.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/add_aliases.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/normalize_aliases.py",
		"/Volumes/bladerunner/Projects/warreport_ua_settlement_aliases/warreport_ua_settlement_aliases.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial/ua_settlements.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/README.md",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_summary.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/bootstrap.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/context/group.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/typedefs.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/add_id.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_reader.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_writer.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/context/candidate_narrowing.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/context/direction.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/resolution.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/sectioning.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/lss_scoping.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/ruler.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/phrases.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_anchor_resolution.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pre_dom_review.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_review_section.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/context/region.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/context.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/context/base.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/telegram.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/typedefs.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/events.py",
		"/Volumes/bladerunner/Projects/sitrepc2/enrich_admin4.py",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial/regions.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/missing_qids.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/op_locale_by_quid.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/duplicateqid.py",
		"/Volumes/bladerunner/Projects/sitrepc2/repair_region.py",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial/ua_settlements_with_regions.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial/ua_admin4.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/d_lookup.json",
		"/Volumes/bladerunner/Projects/sitrepc2/ua_admin4.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/enrichment/add_admin4.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/util/encoding.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/resolver.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/spatial/frontline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/directionals.jsonl",
		"/Users/bladerunner/Projects/telex/telex.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/event_locations.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/spatial/distance.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/util/serialization.py",
		"/Volumes/bladerunner/Projects/sitrepc2/add_id.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/locale_lookup.csv.bak",
		"/Volumes/bladerunner/Projects/sitrepc2/.gitignore",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/holmes/holmes.bak/events.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/locations/event_locations.py",
		"/Users/bladerunner/Projects/mod-mymap/src/modmymap/nlp/context.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/holmes/holmes.bak/phrases.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/tg_channels.jsonl",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/holmes/holmes.bak/bootstrap.py",
		"/Volumes/bladerunner/Projects/sitrepc2/LICENSE.txt",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/war_lexicon.json",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/op_groups.json",
		"/Users/bladerunner/Projects/types.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/pipeline.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/config/__init__.py",
		"/Users/bladerunner/Projects/mod-mymap/src/modmymap/ingest/telegram.py",
		"/Users/bladerunner/Projects/sitrepc2/config/paths.py",
		"/Users/bladerunner/Projects/sitrepc2/holmes_test.py",
		"/Users/bladerunner/Projects/sitrepc2.bak/src/sitrepc2/util/install_models.py",
		"/Users/bladerunner/Projects/mod-mymap/pyproject.toml",
		"/Users/bladerunner/Projects/mod-mymap/src/modmymap/util/install_models.py",
		"/Users/bladerunner/Projects/sitrepc2/pyproject.toml",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/__init__.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/app.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/init_cmd.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/util/normalize.py",
		"/Users/bladerunner/Projects/sitrepc2/config/resources.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/macros.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/phrases.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/telegram_ingest.py",
		"/Users/bladerunner/Projects/tel_ex/telex.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/locations.py",
		"/Users/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/events.py"
	],
	"find":
	{
		"height": 40.0
	},
	"find_in_files":
	{
		"height": 119.0,
		"where_history":
		[
			"<open folders>"
		]
	},
	"find_state":
	{
		"case_sensitive": false,
		"find_history":
		[
			"print",
			"if not _matches",
			"#if not _matches_phrase_filter(text_orig):\n    #continue",
			"if not _matches_phrase_filter(text_orig):\n    continue",
			"if not _pass",
			"if not",
			"load_dotenv",
			"direction",
			"id ",
			"direction",
			"region_osm",
			", ",
			"region",
			"from sitrepc2.nlp.",
			"search",
			"decode",
			"Chervona Sloboda",
			"Sloboda",
			"Q33345",
			"27212295",
			"Q33345",
			"Severodonetsk",
			"Q33349",
			"orikhiv",
			"orikhov",
			"590847913708267500",
			"myrne",
			"petrovskoye",
			"makiyivka",
			"Лисичанськ",
			"lusychansk",
			"lusichansk",
			"lusychansk",
			"makiivka",
			"makiyivka",
			"Opytne",
			"Q4391252",
			"Q4391253",
			"Q4391252",
			"q4325070",
			"Q4325070",
			"novoprokopovka",
			"Q4125689",
			"vornivka",
			"voroni",
			"voroneve",
			"Тягинка",
			"stativka",
			"Q4183525",
			"Q4183527",
			"Q4183525",
			"zah",
			"Q4188906",
			"Захірне",
			"zahirdne",
			"zahirne",
			"Невське",
			"Nevske",
			"Menivka",
			"^.menivka",
			"mine",
			"mini",
			"Q4290695",
			"Min",
			"min",
			"minevka",
			"minivka",
			"miniivka",
			"minevka",
			"miniivka",
			"Q4210539",
			"Q521105",
			"orichiv",
			"orekhov",
			"orekhiv",
			"orekhiv,",
			"orikhiv,",
			"orikhiv",
			"orekhiv",
			"orekhov",
			"orekhov,",
			"orokhiv,",
			"orekhiv,",
			"orikhiv,",
			"Pliashivka",
			"Q4366022",
			"q4210161",
			"Q4210161",
			"verkhnia tokmachka",
			"oblast",
			"Корни́вка",
			"kornivka",
			"krynky",
			"krynki",
			"mali krynky",
			"krynky",
			"prudynky",
			"Q4366022",
			"Пляшевка",
			"plyashevka",
			"plashevka",
			"pliashevka",
			"novolubivka",
			"novo lubivka",
			"novolubivka",
			"novo lubivka",
			"Donetskedge",
			"donetskedge",
			"Dzhankoi",
			"eupatoria",
			"Kreminna",
			"lysychansk",
			"Lysychansk",
			"Sevastopol",
			"severodonetsk",
			"Severodonetsk",
			"Berdiansk",
			"Crimea",
			"Crymea",
			"мелітопол",
			"мелітополь",
			"melitopol",
			"dniproline",
			"Q4382534",
			"Prudi",
			"Prudianka",
			"dniprol",
			"dniproline"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
			",",
			"from sitrepc2.lss",
			"region",
			"register_search_phrases",
			"events",
			"Event",
			"Location",
			"EventMatch",
			"WordMatch",
			"GAZ_GROUPS",
			"",
			"Location",
			"EventMatch",
			"LocaleCandidate",
			"List"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": false,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"file": "src/sitrepc2/ingest/telegram.py",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 26136,
						"regions":
						{
						},
						"selection":
						[
							[
								7203,
								7203
							]
						],
						"settings":
						{
							"allow_quiet_save": true,
							"reload_file_on_change": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 4960.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 28.0
	},
	"input":
	{
		"height": 44.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.find_results":
	{
		"height": 160.0,
		"history":
		[
		]
	},
	"pinned_build_system": "",
	"project": "sitrepc2.sublime-project",
	"replace":
	{
		"height": 72.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"utils/units/unit_str.py"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 255.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 592.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": false,
	"show_open_files": true,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 211.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
