{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"region",
				"region_names"
			],
			[
				"defa",
				"default_aliases_field"
			],
			[
				"TRA",
				"TRAINING_HASHTAGS"
			],
			[
				"norn",
				"normalize_location_key"
			],
			[
				"Pr",
				"ProximityAnchor"
			],
			[
				"candidat",
				"locale_candidates"
			],
			[
				"Resol",
				"ResolvedLocation"
			],
			[
				"Ev",
				"EventMention"
			],
			[
				"serai",
				"serialize_resolved"
			],
			[
				"rnd",
				"rndr_ctx_changed"
			],
			[
				"phy",
				"phys_ctx_changed"
			],
			[
				"edpi_",
				"edpi_ctx_changed"
			],
			[
				"prope",
				"property\tNew Property"
			],
			[
				"Cano",
				"CANONICAL"
			],
			[
				"__",
				"__setattr__"
			],
			[
				"imp",
				"imprecise_str"
			],
			[
				"g",
				"geometryChanged"
			],
			[
				"geom",
				"geometryAboutToChange"
			],
			[
				"para",
				"params_kwargs"
			],
			[
				"_fiel",
				"_fields_by_key"
			],
			[
				"proe",
				"property_line_edit"
			],
			[
				"pre",
				"property_line_edit"
			],
			[
				"Proper",
				"property\tNew Property"
			],
			[
				"Ty",
				"TYPE_CHECKING"
			],
			[
				"prop",
				"propertyCommitted"
			],
			[
				"pro",
				"property\tNew Property"
			],
			[
				"U",
				"UnitStrGeometryField"
			],
			[
				"propert",
				"property\tNew Property"
			],
			[
				"Unit",
				"UnitStrGeometry"
			],
			[
				"TYP",
				"TYPE_CHECKING"
			],
			[
				"new_rec",
				"new_rect_y"
			],
			[
				"ele",
				"elem_modview"
			],
			[
				"geome",
				"geometryChanged"
			],
			[
				"proepr",
				"property\tNew Property"
			],
			[
				"opu",
				"populate_pages_with_csv"
			],
			[
				"appl",
				"_apply_base_hints"
			],
			[
				"proper",
				"property\tNew Property"
			],
			[
				"bor",
				"border_width"
			],
			[
				"_ds",
				"_display_dpi"
			],
			[
				"proep",
				"property\tNew Property"
			],
			[
				"setMax",
				"setMaximumWidth"
			],
			[
				"DEF",
				"DEFAULT_INCREMENTS"
			],
			[
				"geomet",
				"geometry_with_px_pos"
			],
			[
				"uni",
				"unit_str_geometry_field"
			],
			[
				"Uni",
				"UnitStrGeometryField"
			],
			[
				"_geom",
				"unit_str_geometry_field"
			],
			[
				"QGraph",
				"QGraphicsObject"
			],
			[
				"bll",
				"bleed_field"
			],
			[
				"corn",
				"corners_field"
			],
			[
				"_bor",
				"_border_color"
			],
			[
				"_obr",
				"_border_color"
			],
			[
				"bord",
				"border_color"
			],
			[
				"QPAIN",
				"QPainterPathStroker"
			],
			[
				"_has_",
				"_has_csv_content"
			],
			[
				"c",
				"component_template"
			],
			[
				"compon",
				"component_template"
			],
			[
				"ov",
				"_overset_hit_rect"
			],
			[
				"ove",
				"overset_hit_rect"
			],
			[
				"lai",
				"laid_out_h"
			],
			[
				"lad",
				"laid_out_w"
			],
			[
				"is_",
				"is_overset_expanded"
			],
			[
				"_is",
				"_is_overset_expanded"
			],
			[
				"_over",
				"_overset_hit_rect"
			],
			[
				"with",
				"geometry_with_px_pos"
			],
			[
				"Al",
				"AlignLeft"
			],
			[
				"Align",
				"AlignHCenter"
			],
			[
				"font",
				"last_font_new_default"
			],
			[
				"remove_t",
				"remove_template_by_pid"
			],
			[
				"bleed",
				"bleed_label"
			],
			[
				"UnitS",
				"UnitStrGeometry"
			],
			[
				"Compon",
				"ComponentTemplate"
			],
			[
				"req",
				"required_next"
			],
			[
				"ComponentTem",
				"ComponentTemplateView"
			],
			[
				"remove_temp",
				"remove_template_from_all_tabs"
			],
			[
				"upd",
				"updateGrid"
			],
			[
				"_pa",
				"_pagination_policy"
			],
			[
				"paginat",
				"pagination_policy"
			],
			[
				"pag",
				"pagination_policy"
			],
			[
				"Clon",
				"CloneComponentToSlotsCommand"
			],
			[
				"pagina",
				"pagination_policy"
			],
			[
				"white",
				"whitespace_in_units"
			],
			[
				"set",
				"setParentItem"
			],
			[
				"Com",
				"ComponentElement"
			],
			[
				"parse",
				"parse_dimension"
			],
			[
				"unre",
				"unreg_target"
			],
			[
				"prot",
				"proto_registry"
			],
			[
				"temp",
				"template_updated"
			],
			[
				"resize_s",
				"resize_start_item_pos"
			],
			[
				"UnitSt",
				"UnitStrGeometry"
			],
			[
				"_dragging_star",
				"_dragging_start_geom"
			],
			[
				"resize_st",
				"resize_start_item_geometry"
			],
			[
				"_dra",
				"_dragging_start_geom"
			],
			[
				"starting",
				"starting_drag_item"
			],
			[
				"elem",
				"elment_changed"
			],
			[
				"unit_st",
				"unit_str_geometry"
			],
			[
				"obje",
				"object_registered"
			],
			[
				"globa",
				"global_get_by_prefix"
			],
			[
				"ori",
				"orientation_changed"
			],
			[
				"_a",
				"_applyOrientation"
			],
			[
				"PAGE",
				"PAGE_SIZES"
			],
			[
				"_regis",
				"_ensure_registered"
			],
			[
				"sele",
				"selected_element"
			],
			[
				"get_all_",
				"get_global_by_type"
			],
			[
				"_handl",
				"_handle_property_change"
			],
			[
				"selec",
				"selected_element"
			],
			[
				"conf",
				"conform_geometry_pos"
			],
			[
				"conform",
				"conform_geometry_rect"
			],
			[
				"conform_geom",
				"conform_geometry_rect"
			],
			[
				"_mar",
				"_margin_top"
			],
			[
				"pagination",
				"pagination_policy"
			],
			[
				"compone",
				"component_template"
			],
			[
				"cand",
				"candidate_item"
			],
			[
				"flag",
				"display_flag_changed"
			],
			[
				"curre",
				"currentItem"
			],
			[
				"get_page",
				"get_page_rect_px"
			],
			[
				"_marg",
				"_margin_right"
			],
			[
				"Resiz",
				"ResizeAndMoveElementCommand"
			],
			[
				"Resize",
				"ResizeTemplateCommand"
			],
			[
				"Change",
				"ChangeGeometryCommand"
			],
			[
				"QGraphcisS",
				"QGraphicsSceneDragDropEvent"
			],
			[
				"_current",
				"_current_template"
			],
			[
				"on",
				"object_name_changed"
			],
			[
				"setM",
				"setMinimumWidth"
			],
			[
				"setMini",
				"setMinimumWidth"
			],
			[
				"C",
				"ComponentTemplate"
			],
			[
				"_al",
				"_alt_drag_first_pass"
			],
			[
				"resize_star",
				"resize_start_scene_pos"
			],
			[
				"eleme",
				"element_changed"
			]
		]
	},
	"buffers":
	[
		{
			"contents": "",
			"settings":
			{
				"buffer_size": 0,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"insert",
					{
						"characters": "e"
					},
					"AQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					2,
					1,
					"left_delete",
					null,
					"AQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/controller/editor_controller.py",
			"settings":
			{
				"buffer_size": 6238,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAnRkAAAAAAAAECgAAIyBzcmMvZGJlZGl0YzIvY29udHJvbGxlci9lZGl0b3JfY29udHJvbGxlci5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGRiZWRpdGMyLmVudW1zIGltcG9ydCBDb2xsZWN0aW9uS2luZCwgRWRpdG9yTW9kZQpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9yZWFkIGltcG9ydCAoCiAgICBsaXN0X2VudGl0aWVzLAogICAgbG9hZF9lbnRpdHksCikKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmVudHJ5X2RldGFpbHNfc3RhY2sgaW1wb3J0IEVudHJ5RGV0YWlsc1N0YWNrCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5lbnRyeV9saXN0X3ZpZXcgaW1wb3J0IEVudHJ5TGlzdFZpZXcKZnJvbSBkYmVkaXRjMi53aWRnZXRzLm5hdmlnYXRpb25fdHJlZSBpbXBvcnQgTmF2aWdhdGlvblRyZWUKZnJvbSBkYmVkaXRjMi53aWRnZXRzLnNlYXJjaF9wYW5lbCBpbXBvcnQgU2VhcmNoUGFuZWwKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmFwcF90b29sYmFyIGltcG9ydCBBcHBUb29sQmFyCgoKY2xhc3MgRWRpdG9yQ29udHJvbGxlcjoKICAgICIiIgogICAgUmVhZC1vbmx5IGNvbnRyb2xsZXIgZm9yIEdhemV0dGVlciBicm93c2luZy4KCiAgICBUaGlzIGNvbnRyb2xsZXI6CiAgICAtIFJlc3BvbmRzIHRvIG5hdmlnYXRpb24gY2hhbmdlcwogICAgLSBMb2FkcyBlbnRpdHkgbGlzdHMKICAgIC0gTG9hZHMgZW50aXR5IGRldGFpbHMKICAgIC0gVXBkYXRlcyB2aWV3cwoKICAgIE5vIGVkaXRpbmcgbG9naWMgZXhpc3RzIGhlcmUgeWV0LgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgKiwKICAgICAgICBuYXZpZ2F0aW9uOiBOYXZpZ2F0aW9uVHJlZSwKICAgICAgICBzZWFyY2g6IFNlYXJjaFBhbmVsLAogICAgICAgIGVudHJ5X2xpc3Q6IEVudHJ5TGlzdFZpZXcsCiAgICAgICAgZGV0YWlsczogRW50cnlEZXRhaWxzU3RhY2ssCiAgICAgICAgdG9vbGJhcjogQXBwVG9vbEJhciwKICAgICkgLT4gTm9uZToKICAgICAgICBzZWxmLl9uYXZpZ2F0aW9uID0gbmF2aWdhdGlvbgogICAgICAgIHNlbGYuX3NlYXJjaCA9IHNlYXJjaAogICAgICAgIHNlbGYuX2VudHJ5X2xpc3QgPSBlbnRyeV9saXN0CiAgICAgICAgc2VsZi5fZGV0YWlscyA9IGRldGFpbHMKICAgICAgICBzZWxmLl90b29sYmFyID0gdG9vbGJhcgoKICAgICAgICBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb246IENvbGxlY3Rpb25LaW5kIHwgTm9uZSA9IE5vbmUKCiAgICAgICAgIyAtLS0gV2lyZSBzaWduYWxzIC0tLQogICAgICAgIHNlbGYuX25hdmlnYXRpb24uY29sbGVjdGlvblNlbGVjdGVkLmNvbm5lY3Qoc2VsZi5vbl9jb2xsZWN0aW9uX3NlbGVjdGVkKQogICAgICAgIHNlbGYuX2VudHJ5X2xpc3QuZW50cnlTZWxlY3RlZC5jb25uZWN0KHNlbGYub25fZW50cnlfc2VsZWN0ZWQpCgogICAgICAgICMgU3RhcnQgaW4gdmlldyBtb2RlCiAgICAgICAgc2VsZi5fdG9vbGJhci5zZXRfbW9kZShFZGl0b3JNb2RlLlZJRVcpCiAgICAgICAgc2VsZi5fdG9vbGJhci5zZXRfYWN0aW9uc19lbmFibGVkKAogICAgICAgICAgICBhZGQ9RmFsc2UsCiAgICAgICAgICAgIGVkaXQ9RmFsc2UsCiAgICAgICAgICAgIHJlbW92ZT1GYWxzZSwKICAgICAgICAgICAgcmVzdG9yZT1GYWxzZSwKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSGFuZGxlcnMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX2NvbGxlY3Rpb25fc2VsZWN0ZWQoc2VsZiwga2luZDogQ29sbGVjdGlvbktpbmQpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgTG9hZCBsaXN0IG9mIGVudGl0aWVzIGZvciB0aGUgc2VsZWN0ZWQgY29sbGVjdGlvbi4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gPSBraW5kCgogICAgICAgIGVudHJpZXMgPSBsaXN0X2VudGl0aWVzKGtpbmQpCiAgICAgICAgc2VsZi5fZW50cnlfbGlzdC5zZXRfZW50cmllcyhlbnRyaWVzKQogICAgICAgIHNlbGYuX2RldGFpbHMuc2hvd19lbXB0eSgpCgogICAgZGVmIG9uX2VudHJ5X3NlbGVjdGVkKHNlbGYsIGVudHJ5X2lkOiBpbnQpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgTG9hZCBkZXRhaWxzIGZvciB0aGUgc2VsZWN0ZWQgZW50aXR5LgogICAgICAgICIiIgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgZW50aXR5ID0gbG9hZF9lbnRpdHkoc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uLCBlbnRyeV9pZCkKCiAgICAgICAgc2VsZi5fZGV0YWlscy5zaG93X2dhemV0dGVlcl92aWV3KCkKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LnNldF9lbnRpdHlfdHlwZShzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24pCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5zZXRfZW50aXR5X2RhdGEoZW50aXR5KQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAECgAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACdGQAAIyBzcmMvZGJlZGl0YzIvY29udHJvbGxlci9lZGl0b3JfY29udHJvbGxlci5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGRiZWRpdGMyLmVudW1zIGltcG9ydCBDb2xsZWN0aW9uS2luZCwgRWRpdG9yTW9kZQpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9yZWFkIGltcG9ydCAoCiAgICBsaXN0X2VudGl0aWVzLAogICAgbG9hZF9lbnRpdHksCikKZnJvbSBkYmVkaXRjMi5zZXJ2aWNlcy5nYXpldHRlZXJfc2VhcmNoIGltcG9ydCBzZWFyY2hfZW50aXRpZXMKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmVudHJ5X2RldGFpbHNfc3RhY2sgaW1wb3J0IEVudHJ5RGV0YWlsc1N0YWNrCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5lbnRyeV9saXN0X3ZpZXcgaW1wb3J0IEVudHJ5TGlzdFZpZXcKZnJvbSBkYmVkaXRjMi53aWRnZXRzLm5hdmlnYXRpb25fdHJlZSBpbXBvcnQgTmF2aWdhdGlvblRyZWUKZnJvbSBkYmVkaXRjMi53aWRnZXRzLnNlYXJjaF9wYW5lbCBpbXBvcnQgU2VhcmNoUGFuZWwKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmFwcF90b29sYmFyIGltcG9ydCBBcHBUb29sQmFyCgpmcm9tIHNpdHJlcGMyLmdhemV0dGVlci5hbGlhc19zZXJ2aWNlIGltcG9ydCBhcHBseV9hbGlhc19jaGFuZ2VzCmZyb20gZGJlZGl0YzIuc2VydmljZXMuZ2F6ZXR0ZWVyX3NlYXJjaCBpbXBvcnQgX0RPTUFJTl9GT1JfQ09MTEVDVElPTgoKCmNsYXNzIEVkaXRvckNvbnRyb2xsZXI6CiAgICAiIiIKICAgIENvbnRyb2xsZXIgZm9yIEdhemV0dGVlciBicm93c2luZyB3aXRoIGFsaWFzIGVkaXRpbmcgc3VwcG9ydC4KCiAgICBSZXNwb25zaWJpbGl0aWVzOgogICAgLSBMb2FkIGVudGl0eSBsaXN0cwogICAgLSBMb2FkIGVudGl0eSBkZXRhaWxzCiAgICAtIFRyYWNrIGFsaWFzIGVkaXQgZGVsdGFzCiAgICAtIEFwcGx5IGFsaWFzIGNoYW5nZXMgdmlhIHNpdHJlcGMyIHNlcnZpY2VzCgogICAgU2NvcGU6CiAgICAtIEdhemV0dGVlciBvbmx5CiAgICAtIEFsaWFzIGVkaXRpbmcgb25seQogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgKiwKICAgICAgICBuYXZpZ2F0aW9uOiBOYXZpZ2F0aW9uVHJlZSwKICAgICAgICBzZWFyY2g6IFNlYXJjaFBhbmVsLAogICAgICAgIGVudHJ5X2xpc3Q6IEVudHJ5TGlzdFZpZXcsCiAgICAgICAgZGV0YWlsczogRW50cnlEZXRhaWxzU3RhY2ssCiAgICAgICAgdG9vbGJhcjogQXBwVG9vbEJhciwKICAgICkgLT4gTm9uZToKICAgICAgICBzZWxmLl9uYXZpZ2F0aW9uID0gbmF2aWdhdGlvbgogICAgICAgIHNlbGYuX3NlYXJjaCA9IHNlYXJjaAogICAgICAgIHNlbGYuX2VudHJ5X2xpc3QgPSBlbnRyeV9saXN0CiAgICAgICAgc2VsZi5fZGV0YWlscyA9IGRldGFpbHMKICAgICAgICBzZWxmLl90b29sYmFyID0gdG9vbGJhcgoKICAgICAgICBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb246IENvbGxlY3Rpb25LaW5kIHwgTm9uZSA9IE5vbmUKICAgICAgICBzZWxmLl9jdXJyZW50X2VudGl0eV9pZDogaW50IHwgTm9uZSA9IE5vbmUKCiAgICAgICAgIyBBbGlhcyBlZGl0IHN0YXRlCiAgICAgICAgc2VsZi5fb3JpZ2luYWxfYWxpYXNlczogc2V0W3N0cl0gPSBzZXQoKQogICAgICAgIHNlbGYuX2FkZGVkX2FsaWFzZXM6IHNldFtzdHJdID0gc2V0KCkKICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXM6IHNldFtzdHJdID0gc2V0KCkKCiAgICAgICAgIyAtLS0gV2lyZSBzaWduYWxzIC0tLQogICAgICAgIHNlbGYuX25hdmlnYXRpb24uY29sbGVjdGlvblNlbGVjdGVkLmNvbm5lY3Qoc2VsZi5vbl9jb2xsZWN0aW9uX3NlbGVjdGVkKQogICAgICAgIHNlbGYuX2VudHJ5X2xpc3QuZW50cnlTZWxlY3RlZC5jb25uZWN0KHNlbGYub25fZW50cnlfc2VsZWN0ZWQpCiAgICAgICAgc2VsZi5fc2VhcmNoLnNlYXJjaFRleHRDaGFuZ2VkLmNvbm5lY3Qoc2VsZi5vbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKQogICAgICAgIHNlbGYuX3NlYXJjaC5zZWFyY2hTdWJtaXR0ZWQuY29ubmVjdChzZWxmLm9uX3NlYXJjaF9zdWJtaXR0ZWQpCgogICAgICAgIHNlbGYuX2RldGFpbHMuZ2F6ZXR0ZWVyX3ZpZXcuYWxpYXNBZGRSZXF1ZXN0ZWQuY29ubmVjdCgKICAgICAgICAgICAgc2VsZi5vbl9hbGlhc19hZGRlZAogICAgICAgICkKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LmFsaWFzUmVtb3ZlUmVxdWVzdGVkLmNvbm5lY3QoCiAgICAgICAgICAgIHNlbGYub25fYWxpYXNfcmVtb3ZlZAogICAgICAgICkKCiAgICAgICAgc2VsZi5fdG9vbGJhci5zYXZlUmVxdWVzdGVkLmNvbm5lY3Qoc2VsZi5vbl9zYXZlX2FsaWFzZXMpCiAgICAgICAgc2VsZi5fdG9vbGJhci5jYW5jZWxSZXF1ZXN0ZWQuY29ubmVjdChzZWxmLm9uX2NhbmNlbF9hbGlhc2VzKQoKICAgICAgICAjIFN0YXJ0IGluIHZpZXcgbW9kZQogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2V0X21vZGUoRWRpdG9yTW9kZS5WSUVXKQogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2V0X2FjdGlvbnNfZW5hYmxlZCgKICAgICAgICAgICAgYWRkPUZhbHNlLAogICAgICAgICAgICBlZGl0PUZhbHNlLAogICAgICAgICAgICByZW1vdmU9RmFsc2UsCiAgICAgICAgICAgIHJlc3RvcmU9RmFsc2UsCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIENvbGxlY3Rpb24gLyBlbnRpdHkgbG9hZGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgb25fY29sbGVjdGlvbl9zZWxlY3RlZChzZWxmLCBraW5kOiBDb2xsZWN0aW9uS2luZCkgLT4gTm9uZToKICAgICAgICBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gPSBraW5kCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgPSBOb25lCgogICAgICAgIGVudHJpZXMgPSBsaXN0X2VudGl0aWVzKGtpbmQpCiAgICAgICAgc2VsZi5fZW50cnlfbGlzdC5zZXRfZW50cmllcyhlbnRyaWVzKQogICAgICAgIHNlbGYuX2RldGFpbHMuc2hvd19lbXB0eSgpCgogICAgZGVmIG9uX2VudHJ5X3NlbGVjdGVkKHNlbGYsIGVudHJ5X2lkOiBpbnQpIC0+IE5vbmU6CiAgICAgICAgaWYgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBlbnRpdHkgPSBsb2FkX2VudGl0eShzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24sIGVudHJ5X2lkKQoKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZ2F6ZXR0ZWVyX3ZpZXcoKQogICAgICAgIHNlbGYuX2RldGFpbHMuZ2F6ZXR0ZWVyX3ZpZXcuc2V0X2VudGl0eV90eXBlKHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbikKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LnNldF9lbnRpdHlfZGF0YShlbnRpdHkpCgogICAgICAgICMgSW5pdGlhbGl6ZSBhbGlhcyBlZGl0IHN0YXRlCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgPSBlbnRyeV9pZAogICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXMgPSBzZXQoZW50aXR5LmFsaWFzZXMgb3IgW10pCiAgICAgICAgc2VsZi5fYWRkZWRfYWxpYXNlcy5jbGVhcigpCiAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzLmNsZWFyKCkKCiAgICAgICAgIyBBbGlhcyBlZGl0aW5nIGlzIHRoZSBvbmx5IGVuYWJsZWQgYWN0aW9uIGZvciBub3cKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9hY3Rpb25zX2VuYWJsZWQoCiAgICAgICAgICAgIGFkZD1GYWxzZSwKICAgICAgICAgICAgZWRpdD1GYWxzZSwKICAgICAgICAgICAgcmVtb3ZlPUZhbHNlLAogICAgICAgICAgICByZXN0b3JlPUZhbHNlLAogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTZWFyY2ggaGFuZGxpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX3NlYXJjaF90ZXh0X2NoYW5nZWQoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgbm90IHRleHQuc3RyaXAoKToKICAgICAgICAgICAgZW50cmllcyA9IGxpc3RfZW50aXRpZXMoc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGVudHJpZXMgPSBzZWFyY2hfZW50aXRpZXMoCiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uPXNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiwKICAgICAgICAgICAgICAgIHRleHQ9dGV4dCwKICAgICAgICAgICAgKQoKICAgICAgICBzZWxmLl9lbnRyeV9saXN0LnNldF9lbnRyaWVzKGVudHJpZXMpCiAgICAgICAgc2VsZi5fZGV0YWlscy5zaG93X2VtcHR5KCkKCiAgICBkZWYgb25fc2VhcmNoX3N1Ym1pdHRlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5vbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKHRleHQpCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgQWxpYXMgZWRpdGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgb25fYWxpYXNfYWRkZWQoc2VsZiwgYWxpYXM6IHN0cikgLT4gTm9uZToKICAgICAgICBhbGlhcyA9IGFsaWFzLnN0cmlwKCkKICAgICAgICBpZiBub3QgYWxpYXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpZiBhbGlhcyBpbiBzZWxmLl9vcmlnaW5hbF9hbGlhc2VzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZi5fYWRkZWRfYWxpYXNlcy5hZGQoYWxpYXMpCiAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzLmRpc2NhcmQoYWxpYXMpCiAgICAgICAgc2VsZi5fcmVmcmVzaF9hbGlhc192aWV3KCkKCiAgICBkZWYgb25fYWxpYXNfcmVtb3ZlZChzZWxmLCBhbGlhczogc3RyKSAtPiBOb25lOgogICAgICAgIGlmIGFsaWFzIGluIHNlbGYuX2FkZGVkX2FsaWFzZXM6CiAgICAgICAgICAgIHNlbGYuX2FkZGVkX2FsaWFzZXMucmVtb3ZlKGFsaWFzKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX3JlbW92ZWRfYWxpYXNlcy5hZGQoYWxpYXMpCgogICAgICAgIHNlbGYuX3JlZnJlc2hfYWxpYXNfdmlldygpCgogICAgZGVmIF9yZWZyZXNoX2FsaWFzX3ZpZXcoc2VsZikgLT4gTm9uZToKICAgICAgICBhbGlhc2VzID0gKAogICAgICAgICAgICBzZWxmLl9vcmlnaW5hbF9hbGlhc2VzCiAgICAgICAgICAgIHwgc2VsZi5fYWRkZWRfYWxpYXNlcwogICAgICAgICkgLSBzZWxmLl9yZW1vdmVkX2FsaWFzZXMKCiAgICAgICAgdmlldyA9IHNlbGYuX2RldGFpbHMuZ2F6ZXR0ZWVyX3ZpZXcKICAgICAgICB2aWV3Ll9hbGlhc2VzX2xpc3QuY2xlYXIoKQogICAgICAgIHZpZXcuX2FsaWFzZXNfbGlzdC5hZGRJdGVtcyhzb3J0ZWQoYWxpYXNlcykpCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2F2ZSAvIGNhbmNlbAogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgb25fc2F2ZV9hbGlhc2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgKAogICAgICAgICAgICBzZWxmLl9jdXJyZW50X2VudGl0eV9pZCBpcyBOb25lCiAgICAgICAgICAgIG9yIHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiBpcyBOb25lCiAgICAgICAgKToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIG5vdCBzZWxmLl9hZGRlZF9hbGlhc2VzIGFuZCBub3Qgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgZG9tYWluID0gX0RPTUFJTl9GT1JfQ09MTEVDVElPTltzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb25dCgogICAgICAgIGFwcGx5X2FsaWFzX2NoYW5nZXMoCiAgICAgICAgICAgIGRvbWFpbj1kb21haW4sCiAgICAgICAgICAgIGVudGl0eV9pZHM9W3NlbGYuX2N1cnJlbnRfZW50aXR5X2lkXSwKICAgICAgICAgICAgYWRkZWQ9c2VsZi5fYWRkZWRfYWxpYXNlcywKICAgICAgICAgICAgcmVtb3ZlZD1zZWxmLl9yZW1vdmVkX2FsaWFzZXMsCiAgICAgICAgKQoKICAgICAgICAjIFJlbG9hZCBlbnRpdHkgdG8gcmVmbGVjdCBjYW5vbmljYWwgc3RhdGUKICAgICAgICBzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkKQoKICAgIGRlZiBvbl9jYW5jZWxfYWxpYXNlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkKQoAAAAAAAAAAJ0ZAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnRkAAAAAAACdGQAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"paste",
					null,
					"AQAAAMkCAAAAAAAADAMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAyQIAAAAAAADJAgAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADgGQAAIyBzcmMvZGJlZGl0YzIvY29udHJvbGxlci9lZGl0b3JfY29udHJvbGxlci5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGRiZWRpdGMyLmVudW1zIGltcG9ydCBDb2xsZWN0aW9uS2luZCwgRWRpdG9yTW9kZQpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9yZWFkIGltcG9ydCAoCiAgICBsaXN0X2VudGl0aWVzLAogICAgbG9hZF9lbnRpdHksCikKZnJvbSBkYmVkaXRjMi5zZXJ2aWNlcy5nYXpldHRlZXJfc2VhcmNoIGltcG9ydCBzZWFyY2hfZW50aXRpZXMKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmVudHJ5X2RldGFpbHNfc3RhY2sgaW1wb3J0IEVudHJ5RGV0YWlsc1N0YWNrCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5lbnRyeV9saXN0X3ZpZXcgaW1wb3J0IEVudHJ5TGlzdFZpZXcKZnJvbSBkYmVkaXRjMi53aWRnZXRzLm5hdmlnYXRpb25fdHJlZSBpbXBvcnQgTmF2aWdhdGlvblRyZWUKZnJvbSBkYmVkaXRjMi53aWRnZXRzLnNlYXJjaF9wYW5lbCBpbXBvcnQgU2VhcmNoUGFuZWwKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmFwcF90b29sYmFyIGltcG9ydCBBcHBUb29sQmFyCgpmcm9tIHNpdHJlcGMyLmdhemV0dGVlci5hbGlhc19zZXJ2aWNlIGltcG9ydCBhcHBseV9hbGlhc19jaGFuZ2VzCmZyb20gZGJlZGl0YzIuc2VydmljZXMuZ2F6ZXR0ZWVyX3NlYXJjaCBpbXBvcnQgX0RPTUFJTl9GT1JfQ09MTEVDVElPTgpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9hbGlhc19icm93c2VyIGltcG9ydCBsaXN0X2FsaWFzZXMKCgpjbGFzcyBFZGl0b3JDb250cm9sbGVyOgogICAgIiIiCiAgICBDb250cm9sbGVyIGZvciBHYXpldHRlZXIgYnJvd3Npbmcgd2l0aCBhbGlhcyBlZGl0aW5nIHN1cHBvcnQuCgogICAgUmVzcG9uc2liaWxpdGllczoKICAgIC0gTG9hZCBlbnRpdHkgbGlzdHMKICAgIC0gTG9hZCBlbnRpdHkgZGV0YWlscwogICAgLSBUcmFjayBhbGlhcyBlZGl0IGRlbHRhcwogICAgLSBBcHBseSBhbGlhcyBjaGFuZ2VzIHZpYSBzaXRyZXBjMiBzZXJ2aWNlcwoKICAgIFNjb3BlOgogICAgLSBHYXpldHRlZXIgb25seQogICAgLSBBbGlhcyBlZGl0aW5nIG9ubHkKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgICosCiAgICAgICAgbmF2aWdhdGlvbjogTmF2aWdhdGlvblRyZWUsCiAgICAgICAgc2VhcmNoOiBTZWFyY2hQYW5lbCwKICAgICAgICBlbnRyeV9saXN0OiBFbnRyeUxpc3RWaWV3LAogICAgICAgIGRldGFpbHM6IEVudHJ5RGV0YWlsc1N0YWNrLAogICAgICAgIHRvb2xiYXI6IEFwcFRvb2xCYXIsCiAgICApIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fbmF2aWdhdGlvbiA9IG5hdmlnYXRpb24KICAgICAgICBzZWxmLl9zZWFyY2ggPSBzZWFyY2gKICAgICAgICBzZWxmLl9lbnRyeV9saXN0ID0gZW50cnlfbGlzdAogICAgICAgIHNlbGYuX2RldGFpbHMgPSBkZXRhaWxzCiAgICAgICAgc2VsZi5fdG9vbGJhciA9IHRvb2xiYXIKCiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uOiBDb2xsZWN0aW9uS2luZCB8IE5vbmUgPSBOb25lCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQ6IGludCB8IE5vbmUgPSBOb25lCgogICAgICAgICMgQWxpYXMgZWRpdCBzdGF0ZQogICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXM6IHNldFtzdHJdID0gc2V0KCkKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCiAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCgogICAgICAgICMgLS0tIFdpcmUgc2lnbmFscyAtLS0KICAgICAgICBzZWxmLl9uYXZpZ2F0aW9uLmNvbGxlY3Rpb25TZWxlY3RlZC5jb25uZWN0KHNlbGYub25fY29sbGVjdGlvbl9zZWxlY3RlZCkKICAgICAgICBzZWxmLl9lbnRyeV9saXN0LmVudHJ5U2VsZWN0ZWQuY29ubmVjdChzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKQogICAgICAgIHNlbGYuX3NlYXJjaC5zZWFyY2hUZXh0Q2hhbmdlZC5jb25uZWN0KHNlbGYub25fc2VhcmNoX3RleHRfY2hhbmdlZCkKICAgICAgICBzZWxmLl9zZWFyY2guc2VhcmNoU3VibWl0dGVkLmNvbm5lY3Qoc2VsZi5vbl9zZWFyY2hfc3VibWl0dGVkKQoKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LmFsaWFzQWRkUmVxdWVzdGVkLmNvbm5lY3QoCiAgICAgICAgICAgIHNlbGYub25fYWxpYXNfYWRkZWQKICAgICAgICApCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5hbGlhc1JlbW92ZVJlcXVlc3RlZC5jb25uZWN0KAogICAgICAgICAgICBzZWxmLm9uX2FsaWFzX3JlbW92ZWQKICAgICAgICApCgogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2F2ZVJlcXVlc3RlZC5jb25uZWN0KHNlbGYub25fc2F2ZV9hbGlhc2VzKQogICAgICAgIHNlbGYuX3Rvb2xiYXIuY2FuY2VsUmVxdWVzdGVkLmNvbm5lY3Qoc2VsZi5vbl9jYW5jZWxfYWxpYXNlcykKCiAgICAgICAgIyBTdGFydCBpbiB2aWV3IG1vZGUKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9tb2RlKEVkaXRvck1vZGUuVklFVykKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9hY3Rpb25zX2VuYWJsZWQoCiAgICAgICAgICAgIGFkZD1GYWxzZSwKICAgICAgICAgICAgZWRpdD1GYWxzZSwKICAgICAgICAgICAgcmVtb3ZlPUZhbHNlLAogICAgICAgICAgICByZXN0b3JlPUZhbHNlLAogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDb2xsZWN0aW9uIC8gZW50aXR5IGxvYWRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX2NvbGxlY3Rpb25fc2VsZWN0ZWQoc2VsZiwga2luZDogQ29sbGVjdGlvbktpbmQpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uID0ga2luZAogICAgICAgIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkID0gTm9uZQoKICAgICAgICBlbnRyaWVzID0gbGlzdF9lbnRpdGllcyhraW5kKQogICAgICAgIHNlbGYuX2VudHJ5X2xpc3Quc2V0X2VudHJpZXMoZW50cmllcykKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZW1wdHkoKQoKICAgIGRlZiBvbl9lbnRyeV9zZWxlY3RlZChzZWxmLCBlbnRyeV9pZDogaW50KSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgZW50aXR5ID0gbG9hZF9lbnRpdHkoc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uLCBlbnRyeV9pZCkKCiAgICAgICAgc2VsZi5fZGV0YWlscy5zaG93X2dhemV0dGVlcl92aWV3KCkKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LnNldF9lbnRpdHlfdHlwZShzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24pCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5zZXRfZW50aXR5X2RhdGEoZW50aXR5KQoKICAgICAgICAjIEluaXRpYWxpemUgYWxpYXMgZWRpdCBzdGF0ZQogICAgICAgIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkID0gZW50cnlfaWQKICAgICAgICBzZWxmLl9vcmlnaW5hbF9hbGlhc2VzID0gc2V0KGVudGl0eS5hbGlhc2VzIG9yIFtdKQogICAgICAgIHNlbGYuX2FkZGVkX2FsaWFzZXMuY2xlYXIoKQogICAgICAgIHNlbGYuX3JlbW92ZWRfYWxpYXNlcy5jbGVhcigpCgogICAgICAgICMgQWxpYXMgZWRpdGluZyBpcyB0aGUgb25seSBlbmFibGVkIGFjdGlvbiBmb3Igbm93CiAgICAgICAgc2VsZi5fdG9vbGJhci5zZXRfYWN0aW9uc19lbmFibGVkKAogICAgICAgICAgICBhZGQ9RmFsc2UsCiAgICAgICAgICAgIGVkaXQ9RmFsc2UsCiAgICAgICAgICAgIHJlbW92ZT1GYWxzZSwKICAgICAgICAgICAgcmVzdG9yZT1GYWxzZSwKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2VhcmNoIGhhbmRsaW5nCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBvbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIG5vdCB0ZXh0LnN0cmlwKCk6CiAgICAgICAgICAgIGVudHJpZXMgPSBsaXN0X2VudGl0aWVzKHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbikKICAgICAgICBlbHNlOgogICAgICAgICAgICBlbnRyaWVzID0gc2VhcmNoX2VudGl0aWVzKAogICAgICAgICAgICAgICAgY29sbGVjdGlvbj1zZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24sCiAgICAgICAgICAgICAgICB0ZXh0PXRleHQsCiAgICAgICAgICAgICkKCiAgICAgICAgc2VsZi5fZW50cnlfbGlzdC5zZXRfZW50cmllcyhlbnRyaWVzKQogICAgICAgIHNlbGYuX2RldGFpbHMuc2hvd19lbXB0eSgpCgogICAgZGVmIG9uX3NlYXJjaF9zdWJtaXR0ZWQoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIHNlbGYub25fc2VhcmNoX3RleHRfY2hhbmdlZCh0ZXh0KQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFsaWFzIGVkaXRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX2FsaWFzX2FkZGVkKHNlbGYsIGFsaWFzOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgYWxpYXMgPSBhbGlhcy5zdHJpcCgpCiAgICAgICAgaWYgbm90IGFsaWFzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgYWxpYXMgaW4gc2VsZi5fb3JpZ2luYWxfYWxpYXNlczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuX2FkZGVkX2FsaWFzZXMuYWRkKGFsaWFzKQogICAgICAgIHNlbGYuX3JlbW92ZWRfYWxpYXNlcy5kaXNjYXJkKGFsaWFzKQogICAgICAgIHNlbGYuX3JlZnJlc2hfYWxpYXNfdmlldygpCgogICAgZGVmIG9uX2FsaWFzX3JlbW92ZWQoc2VsZiwgYWxpYXM6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBhbGlhcyBpbiBzZWxmLl9hZGRlZF9hbGlhc2VzOgogICAgICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzLnJlbW92ZShhbGlhcykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXMuYWRkKGFsaWFzKQoKICAgICAgICBzZWxmLl9yZWZyZXNoX2FsaWFzX3ZpZXcoKQoKICAgIGRlZiBfcmVmcmVzaF9hbGlhc192aWV3KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgYWxpYXNlcyA9ICgKICAgICAgICAgICAgc2VsZi5fb3JpZ2luYWxfYWxpYXNlcwogICAgICAgICAgICB8IHNlbGYuX2FkZGVkX2FsaWFzZXMKICAgICAgICApIC0gc2VsZi5fcmVtb3ZlZF9hbGlhc2VzCgogICAgICAgIHZpZXcgPSBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3CiAgICAgICAgdmlldy5fYWxpYXNlc19saXN0LmNsZWFyKCkKICAgICAgICB2aWV3Ll9hbGlhc2VzX2xpc3QuYWRkSXRlbXMoc29ydGVkKGFsaWFzZXMpKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNhdmUgLyBjYW5jZWwKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX3NhdmVfYWxpYXNlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmICgKICAgICAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgaXMgTm9uZQogICAgICAgICAgICBvciBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZQogICAgICAgICk6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpZiBub3Qgc2VsZi5fYWRkZWRfYWxpYXNlcyBhbmQgbm90IHNlbGYuX3JlbW92ZWRfYWxpYXNlczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGRvbWFpbiA9IF9ET01BSU5fRk9SX0NPTExFQ1RJT05bc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uXQoKICAgICAgICBhcHBseV9hbGlhc19jaGFuZ2VzKAogICAgICAgICAgICBkb21haW49ZG9tYWluLAogICAgICAgICAgICBlbnRpdHlfaWRzPVtzZWxmLl9jdXJyZW50X2VudGl0eV9pZF0sCiAgICAgICAgICAgIGFkZGVkPXNlbGYuX2FkZGVkX2FsaWFzZXMsCiAgICAgICAgICAgIHJlbW92ZWQ9c2VsZi5fcmVtb3ZlZF9hbGlhc2VzLAogICAgICAgICkKCiAgICAgICAgIyBSZWxvYWQgZW50aXR5IHRvIHJlZmxlY3QgY2Fub25pY2FsIHN0YXRlCiAgICAgICAgc2VsZi5vbl9lbnRyeV9zZWxlY3RlZChzZWxmLl9jdXJyZW50X2VudGl0eV9pZCkKCiAgICBkZWYgb25fY2FuY2VsX2FsaWFzZXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2VudGl0eV9pZCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgc2VsZi5vbl9lbnRyeV9zZWxlY3RlZChzZWxmLl9jdXJyZW50X2VudGl0eV9pZCkKAAAAAAAAAADgGQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAJQMAAAAAAAAlAwAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"paste",
					null,
					"AQAAADwLAAAAAAAAugwAAAAAAAAKAQAAICAgIGRlZiBvbl9jb2xsZWN0aW9uX3NlbGVjdGVkKHNlbGYsIGtpbmQ6IENvbGxlY3Rpb25LaW5kKSAtPiBOb25lOgogICAgICAgIHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiA9IGtpbmQKICAgICAgICBzZWxmLl9jdXJyZW50X2VudGl0eV9pZCA9IE5vbmUKCiAgICAgICAgZW50cmllcyA9IGxpc3RfZW50aXRpZXMoa2luZCkKICAgICAgICBzZWxmLl9lbnRyeV9saXN0LnNldF9lbnRyaWVzKGVudHJpZXMpCiAgICAgICAgc2VsZi5fZGV0YWlscy5zaG93X2VtcHR5KCk",
					"AQAAAAAAAAABAAAARgwAAAAAAAA8CwAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"paste",
					null,
					"AQAAAIUQAAAAAAAADhMAAAAAAAC5AQAAICAgIGRlZiBvbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIG5vdCB0ZXh0LnN0cmlwKCk6CiAgICAgICAgICAgIGVudHJpZXMgPSBsaXN0X2VudGl0aWVzKHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbikKICAgICAgICBlbHNlOgogICAgICAgICAgICBlbnRyaWVzID0gc2VhcmNoX2VudGl0aWVzKAogICAgICAgICAgICAgICAgY29sbGVjdGlvbj1zZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24sCiAgICAgICAgICAgICAgICB0ZXh0PXRleHQsCiAgICAgICAgICAgICkKCiAgICAgICAgc2VsZi5fZW50cnlfbGlzdC5zZXRfZW50cmllcyhlbnRyaWVzKQogICAgICAgIHNlbGYuX2RldGFpbHMuc2hvd19lbXB0eSgp",
					"AQAAAAAAAAABAAAAPhIAAAAAAACFEAAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					1,
					"indent",
					null,
					"EQAAAIUQAAAAAAAAiRAAAAAAAAAAAAAAvhAAAAAAAADCEAAAAAAAAAAAAADrEAAAAAAAAO8QAAAAAAAAAAAAADcRAAAAAAAAOxEAAAAAAAAAAAAARBEAAAAAAABIEQAAAAAAAAAAAABoEQAAAAAAAGwRAAAAAAAAAAAAAJcRAAAAAAAAmxEAAAAAAAAAAAAAuREAAAAAAAC9EQAAAAAAAAAAAADHEQAAAAAAAMsRAAAAAAAAAAAAAOYRAAAAAAAA6hEAAAAAAAAAAAAABhIAAAAAAAAKEgAAAAAAAAAAAABWEgAAAAAAAFoSAAAAAAAAAAAAAGwSAAAAAAAAcBIAAAAAAAAAAAAAmhIAAAAAAACeEgAAAAAAAAAAAAC/EgAAAAAAAMMSAAAAAAAAAAAAAPUSAAAAAAAA+RIAAAAAAAAAAAAAKBMAAAAAAAAsEwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADhMAAAAAAACFEAAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"indent",
					null,
					"CwAAADwLAAAAAAAAQAsAAAAAAAAAAAAAgAsAAAAAAACECwAAAAAAAAAAAACoCwAAAAAAAKwLAAAAAAAAAAAAANALAAAAAAAA1AsAAAAAAAAAAAAA3QsAAAAAAADhCwAAAAAAAAAAAAALDAAAAAAAAA8MAAAAAAAAAAAAACoMAAAAAAAALgwAAAAAAAAAAAAASgwAAAAAAABODAAAAAAAAAAAAAB/DAAAAAAAAIMMAAAAAAAAAAAAAJUMAAAAAAAAmQwAAAAAAAAAAAAAwwwAAAAAAADHDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAugwAAAAAAAA8CwAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACUGwAAIyBzcmMvZGJlZGl0YzIvY29udHJvbGxlci9lZGl0b3JfY29udHJvbGxlci5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGRiZWRpdGMyLmVudW1zIGltcG9ydCBDb2xsZWN0aW9uS2luZCwgRWRpdG9yTW9kZQpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9yZWFkIGltcG9ydCAoCiAgICBsaXN0X2VudGl0aWVzLAogICAgbG9hZF9lbnRpdHksCikKZnJvbSBkYmVkaXRjMi5zZXJ2aWNlcy5nYXpldHRlZXJfc2VhcmNoIGltcG9ydCBzZWFyY2hfZW50aXRpZXMKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmVudHJ5X2RldGFpbHNfc3RhY2sgaW1wb3J0IEVudHJ5RGV0YWlsc1N0YWNrCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5lbnRyeV9saXN0X3ZpZXcgaW1wb3J0IEVudHJ5TGlzdFZpZXcKZnJvbSBkYmVkaXRjMi53aWRnZXRzLm5hdmlnYXRpb25fdHJlZSBpbXBvcnQgTmF2aWdhdGlvblRyZWUKZnJvbSBkYmVkaXRjMi53aWRnZXRzLnNlYXJjaF9wYW5lbCBpbXBvcnQgU2VhcmNoUGFuZWwKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmFwcF90b29sYmFyIGltcG9ydCBBcHBUb29sQmFyCgpmcm9tIHNpdHJlcGMyLmdhemV0dGVlci5hbGlhc19zZXJ2aWNlIGltcG9ydCBhcHBseV9hbGlhc19jaGFuZ2VzCmZyb20gZGJlZGl0YzIuc2VydmljZXMuZ2F6ZXR0ZWVyX3NlYXJjaCBpbXBvcnQgX0RPTUFJTl9GT1JfQ09MTEVDVElPTgpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9hbGlhc19icm93c2VyIGltcG9ydCBsaXN0X2FsaWFzZXMKCgpjbGFzcyBFZGl0b3JDb250cm9sbGVyOgogICAgIiIiCiAgICBDb250cm9sbGVyIGZvciBHYXpldHRlZXIgYnJvd3Npbmcgd2l0aCBhbGlhcyBlZGl0aW5nIHN1cHBvcnQuCgogICAgUmVzcG9uc2liaWxpdGllczoKICAgIC0gTG9hZCBlbnRpdHkgbGlzdHMKICAgIC0gTG9hZCBlbnRpdHkgZGV0YWlscwogICAgLSBUcmFjayBhbGlhcyBlZGl0IGRlbHRhcwogICAgLSBBcHBseSBhbGlhcyBjaGFuZ2VzIHZpYSBzaXRyZXBjMiBzZXJ2aWNlcwoKICAgIFNjb3BlOgogICAgLSBHYXpldHRlZXIgb25seQogICAgLSBBbGlhcyBlZGl0aW5nIG9ubHkKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgICosCiAgICAgICAgbmF2aWdhdGlvbjogTmF2aWdhdGlvblRyZWUsCiAgICAgICAgc2VhcmNoOiBTZWFyY2hQYW5lbCwKICAgICAgICBlbnRyeV9saXN0OiBFbnRyeUxpc3RWaWV3LAogICAgICAgIGRldGFpbHM6IEVudHJ5RGV0YWlsc1N0YWNrLAogICAgICAgIHRvb2xiYXI6IEFwcFRvb2xCYXIsCiAgICApIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fbmF2aWdhdGlvbiA9IG5hdmlnYXRpb24KICAgICAgICBzZWxmLl9zZWFyY2ggPSBzZWFyY2gKICAgICAgICBzZWxmLl9lbnRyeV9saXN0ID0gZW50cnlfbGlzdAogICAgICAgIHNlbGYuX2RldGFpbHMgPSBkZXRhaWxzCiAgICAgICAgc2VsZi5fdG9vbGJhciA9IHRvb2xiYXIKCiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uOiBDb2xsZWN0aW9uS2luZCB8IE5vbmUgPSBOb25lCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQ6IGludCB8IE5vbmUgPSBOb25lCgogICAgICAgICMgQWxpYXMgZWRpdCBzdGF0ZQogICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXM6IHNldFtzdHJdID0gc2V0KCkKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCiAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCgogICAgICAgICMgLS0tIFdpcmUgc2lnbmFscyAtLS0KICAgICAgICBzZWxmLl9uYXZpZ2F0aW9uLmNvbGxlY3Rpb25TZWxlY3RlZC5jb25uZWN0KHNlbGYub25fY29sbGVjdGlvbl9zZWxlY3RlZCkKICAgICAgICBzZWxmLl9lbnRyeV9saXN0LmVudHJ5U2VsZWN0ZWQuY29ubmVjdChzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKQogICAgICAgIHNlbGYuX3NlYXJjaC5zZWFyY2hUZXh0Q2hhbmdlZC5jb25uZWN0KHNlbGYub25fc2VhcmNoX3RleHRfY2hhbmdlZCkKICAgICAgICBzZWxmLl9zZWFyY2guc2VhcmNoU3VibWl0dGVkLmNvbm5lY3Qoc2VsZi5vbl9zZWFyY2hfc3VibWl0dGVkKQoKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LmFsaWFzQWRkUmVxdWVzdGVkLmNvbm5lY3QoCiAgICAgICAgICAgIHNlbGYub25fYWxpYXNfYWRkZWQKICAgICAgICApCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5hbGlhc1JlbW92ZVJlcXVlc3RlZC5jb25uZWN0KAogICAgICAgICAgICBzZWxmLm9uX2FsaWFzX3JlbW92ZWQKICAgICAgICApCgogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2F2ZVJlcXVlc3RlZC5jb25uZWN0KHNlbGYub25fc2F2ZV9hbGlhc2VzKQogICAgICAgIHNlbGYuX3Rvb2xiYXIuY2FuY2VsUmVxdWVzdGVkLmNvbm5lY3Qoc2VsZi5vbl9jYW5jZWxfYWxpYXNlcykKCiAgICAgICAgIyBTdGFydCBpbiB2aWV3IG1vZGUKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9tb2RlKEVkaXRvck1vZGUuVklFVykKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9hY3Rpb25zX2VuYWJsZWQoCiAgICAgICAgICAgIGFkZD1GYWxzZSwKICAgICAgICAgICAgZWRpdD1GYWxzZSwKICAgICAgICAgICAgcmVtb3ZlPUZhbHNlLAogICAgICAgICAgICByZXN0b3JlPUZhbHNlLAogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDb2xsZWN0aW9uIC8gZW50aXR5IGxvYWRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX2NvbGxlY3Rpb25fc2VsZWN0ZWQoc2VsZiwga2luZDogQ29sbGVjdGlvbktpbmQpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uID0ga2luZAogICAgICAgIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkID0gTm9uZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVudHJpZXMgPSBsaXN0X2FsaWFzZXMoa2luZD1raW5kKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKAogICAgICAgICAgICAgICAgZiJGYWlsZWQgdG8gbGlzdCBhbGlhc2VzIGZvciB7a2luZH0iCiAgICAgICAgICAgICkgZnJvbSBlCgogICAgICAgIHNlbGYuX2VudHJ5X2xpc3Quc2V0X2VudHJpZXMoZW50cmllcykKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZW1wdHkoKQoKCiAgICBkZWYgb25fZW50cnlfc2VsZWN0ZWQoc2VsZiwgZW50cnlfaWQ6IGludCkgLT4gTm9uZToKICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGVudGl0eSA9IGxvYWRfZW50aXR5KHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiwgZW50cnlfaWQpCgogICAgICAgIHNlbGYuX2RldGFpbHMuc2hvd19nYXpldHRlZXJfdmlldygpCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5zZXRfZW50aXR5X3R5cGUoc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uKQogICAgICAgIHNlbGYuX2RldGFpbHMuZ2F6ZXR0ZWVyX3ZpZXcuc2V0X2VudGl0eV9kYXRhKGVudGl0eSkKCiAgICAgICAgIyBJbml0aWFsaXplIGFsaWFzIGVkaXQgc3RhdGUKICAgICAgICBzZWxmLl9jdXJyZW50X2VudGl0eV9pZCA9IGVudHJ5X2lkCiAgICAgICAgc2VsZi5fb3JpZ2luYWxfYWxpYXNlcyA9IHNldChlbnRpdHkuYWxpYXNlcyBvciBbXSkKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzLmNsZWFyKCkKICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXMuY2xlYXIoKQoKICAgICAgICAjIEFsaWFzIGVkaXRpbmcgaXMgdGhlIG9ubHkgZW5hYmxlZCBhY3Rpb24gZm9yIG5vdwogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2V0X2FjdGlvbnNfZW5hYmxlZCgKICAgICAgICAgICAgYWRkPUZhbHNlLAogICAgICAgICAgICBlZGl0PUZhbHNlLAogICAgICAgICAgICByZW1vdmU9RmFsc2UsCiAgICAgICAgICAgIHJlc3RvcmU9RmFsc2UsCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlYXJjaCBoYW5kbGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgb25fc2VhcmNoX3RleHRfY2hhbmdlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgaWYgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiU2VhcmNoIGludm9rZWQgd2l0aCBubyBhY3RpdmUgY29sbGVjdGlvbiIpCgogICAgICAgIHRyeToKICAgICAgICAgICAgZW50cmllcyA9IGxpc3RfYWxpYXNlcygKICAgICAgICAgICAgICAgIGtpbmQ9c2VsZi5fY3VycmVudF9jb2xsZWN0aW9uLAogICAgICAgICAgICAgICAgc2VhcmNoX3RleHQ9dGV4dCwKICAgICAgICAgICAgKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKAogICAgICAgICAgICAgICAgZiJBbGlhcyBzZWFyY2ggZmFpbGVkIGZvciB7c2VsZi5fY3VycmVudF9jb2xsZWN0aW9ufToge3RleHQhcn0iCiAgICAgICAgICAgICkgZnJvbSBlCgogICAgICAgIHNlbGYuX2VudHJ5X2xpc3Quc2V0X2VudHJpZXMoZW50cmllcykKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZW1wdHkoKQoKCiAgICBkZWYgb25fc2VhcmNoX3N1Ym1pdHRlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgIyBpZGVudGljYWwgYmVoYXZpb3IsIGV4cGxpY2l0IGVudHJ5IHBvaW50CiAgICAgICAgc2VsZi5vbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKHRleHQpCgoKICAgIGRlZiBvbl9zZWFyY2hfc3VibWl0dGVkKHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZToKICAgICAgICBzZWxmLm9uX3NlYXJjaF90ZXh0X2NoYW5nZWQodGV4dCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBBbGlhcyBlZGl0aW5nCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBvbl9hbGlhc19hZGRlZChzZWxmLCBhbGlhczogc3RyKSAtPiBOb25lOgogICAgICAgIGFsaWFzID0gYWxpYXMuc3RyaXAoKQogICAgICAgIGlmIG5vdCBhbGlhczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGFsaWFzIGluIHNlbGYuX29yaWdpbmFsX2FsaWFzZXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzLmFkZChhbGlhcykKICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXMuZGlzY2FyZChhbGlhcykKICAgICAgICBzZWxmLl9yZWZyZXNoX2FsaWFzX3ZpZXcoKQoKICAgIGRlZiBvbl9hbGlhc19yZW1vdmVkKHNlbGYsIGFsaWFzOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgaWYgYWxpYXMgaW4gc2VsZi5fYWRkZWRfYWxpYXNlczoKICAgICAgICAgICAgc2VsZi5fYWRkZWRfYWxpYXNlcy5yZW1vdmUoYWxpYXMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzLmFkZChhbGlhcykKCiAgICAgICAgc2VsZi5fcmVmcmVzaF9hbGlhc192aWV3KCkKCiAgICBkZWYgX3JlZnJlc2hfYWxpYXNfdmlldyhzZWxmKSAtPiBOb25lOgogICAgICAgIGFsaWFzZXMgPSAoCiAgICAgICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXMKICAgICAgICAgICAgfCBzZWxmLl9hZGRlZF9hbGlhc2VzCiAgICAgICAgKSAtIHNlbGYuX3JlbW92ZWRfYWxpYXNlcwoKICAgICAgICB2aWV3ID0gc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldwogICAgICAgIHZpZXcuX2FsaWFzZXNfbGlzdC5jbGVhcigpCiAgICAgICAgdmlldy5fYWxpYXNlc19saXN0LmFkZEl0ZW1zKHNvcnRlZChhbGlhc2VzKSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTYXZlIC8gY2FuY2VsCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBvbl9zYXZlX2FsaWFzZXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiAoCiAgICAgICAgICAgIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkIGlzIE5vbmUKICAgICAgICAgICAgb3Igc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uIGlzIE5vbmUKICAgICAgICApOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgbm90IHNlbGYuX2FkZGVkX2FsaWFzZXMgYW5kIG5vdCBzZWxmLl9yZW1vdmVkX2FsaWFzZXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBkb21haW4gPSBfRE9NQUlOX0ZPUl9DT0xMRUNUSU9OW3NlbGYuX2N1cnJlbnRfY29sbGVjdGlvbl0KCiAgICAgICAgYXBwbHlfYWxpYXNfY2hhbmdlcygKICAgICAgICAgICAgZG9tYWluPWRvbWFpbiwKICAgICAgICAgICAgZW50aXR5X2lkcz1bc2VsZi5fY3VycmVudF9lbnRpdHlfaWRdLAogICAgICAgICAgICBhZGRlZD1zZWxmLl9hZGRlZF9hbGlhc2VzLAogICAgICAgICAgICByZW1vdmVkPXNlbGYuX3JlbW92ZWRfYWxpYXNlcywKICAgICAgICApCgogICAgICAgICMgUmVsb2FkIGVudGl0eSB0byByZWZsZWN0IGNhbm9uaWNhbCBzdGF0ZQogICAgICAgIHNlbGYub25fZW50cnlfc2VsZWN0ZWQoc2VsZi5fY3VycmVudF9lbnRpdHlfaWQpCgogICAgZGVmIG9uX2NhbmNlbF9hbGlhc2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYub25fZW50cnlfc2VsZWN0ZWQoc2VsZi5fY3VycmVudF9lbnRpdHlfaWQpCgAAAAAAAAAAlBsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5gwAAAAAAAA8CwAAAAAAAAAAAAAAAPC/"
				],
				[
					44,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAsxsAAAAAAACUGwAAIyBzcmMvZGJlZGl0YzIvY29udHJvbGxlci9lZGl0b3JfY29udHJvbGxlci5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGRiZWRpdGMyLmVudW1zIGltcG9ydCBDb2xsZWN0aW9uS2luZCwgRWRpdG9yTW9kZQpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9yZWFkIGltcG9ydCAoCiAgICBsaXN0X2VudGl0aWVzLAogICAgbG9hZF9lbnRpdHksCikKZnJvbSBkYmVkaXRjMi5zZXJ2aWNlcy5nYXpldHRlZXJfc2VhcmNoIGltcG9ydCBzZWFyY2hfZW50aXRpZXMKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmVudHJ5X2RldGFpbHNfc3RhY2sgaW1wb3J0IEVudHJ5RGV0YWlsc1N0YWNrCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5lbnRyeV9saXN0X3ZpZXcgaW1wb3J0IEVudHJ5TGlzdFZpZXcKZnJvbSBkYmVkaXRjMi53aWRnZXRzLm5hdmlnYXRpb25fdHJlZSBpbXBvcnQgTmF2aWdhdGlvblRyZWUKZnJvbSBkYmVkaXRjMi53aWRnZXRzLnNlYXJjaF9wYW5lbCBpbXBvcnQgU2VhcmNoUGFuZWwKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmFwcF90b29sYmFyIGltcG9ydCBBcHBUb29sQmFyCgpmcm9tIHNpdHJlcGMyLmdhemV0dGVlci5hbGlhc19zZXJ2aWNlIGltcG9ydCBhcHBseV9hbGlhc19jaGFuZ2VzCmZyb20gZGJlZGl0YzIuc2VydmljZXMuZ2F6ZXR0ZWVyX3NlYXJjaCBpbXBvcnQgX0RPTUFJTl9GT1JfQ09MTEVDVElPTgpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9hbGlhc19icm93c2VyIGltcG9ydCBsaXN0X2FsaWFzZXMKCgpjbGFzcyBFZGl0b3JDb250cm9sbGVyOgogICAgIiIiCiAgICBDb250cm9sbGVyIGZvciBHYXpldHRlZXIgYnJvd3Npbmcgd2l0aCBhbGlhcyBlZGl0aW5nIHN1cHBvcnQuCgogICAgUmVzcG9uc2liaWxpdGllczoKICAgIC0gTG9hZCBlbnRpdHkgbGlzdHMKICAgIC0gTG9hZCBlbnRpdHkgZGV0YWlscwogICAgLSBUcmFjayBhbGlhcyBlZGl0IGRlbHRhcwogICAgLSBBcHBseSBhbGlhcyBjaGFuZ2VzIHZpYSBzaXRyZXBjMiBzZXJ2aWNlcwoKICAgIFNjb3BlOgogICAgLSBHYXpldHRlZXIgb25seQogICAgLSBBbGlhcyBlZGl0aW5nIG9ubHkKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgICosCiAgICAgICAgbmF2aWdhdGlvbjogTmF2aWdhdGlvblRyZWUsCiAgICAgICAgc2VhcmNoOiBTZWFyY2hQYW5lbCwKICAgICAgICBlbnRyeV9saXN0OiBFbnRyeUxpc3RWaWV3LAogICAgICAgIGRldGFpbHM6IEVudHJ5RGV0YWlsc1N0YWNrLAogICAgICAgIHRvb2xiYXI6IEFwcFRvb2xCYXIsCiAgICApIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fbmF2aWdhdGlvbiA9IG5hdmlnYXRpb24KICAgICAgICBzZWxmLl9zZWFyY2ggPSBzZWFyY2gKICAgICAgICBzZWxmLl9lbnRyeV9saXN0ID0gZW50cnlfbGlzdAogICAgICAgIHNlbGYuX2RldGFpbHMgPSBkZXRhaWxzCiAgICAgICAgc2VsZi5fdG9vbGJhciA9IHRvb2xiYXIKCiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uOiBDb2xsZWN0aW9uS2luZCB8IE5vbmUgPSBOb25lCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQ6IGludCB8IE5vbmUgPSBOb25lCgogICAgICAgICMgQWxpYXMgZWRpdCBzdGF0ZQogICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXM6IHNldFtzdHJdID0gc2V0KCkKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCiAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCgogICAgICAgICMgLS0tIFdpcmUgc2lnbmFscyAtLS0KICAgICAgICBzZWxmLl9uYXZpZ2F0aW9uLmNvbGxlY3Rpb25TZWxlY3RlZC5jb25uZWN0KHNlbGYub25fY29sbGVjdGlvbl9zZWxlY3RlZCkKICAgICAgICBzZWxmLl9lbnRyeV9saXN0LmVudHJ5U2VsZWN0ZWQuY29ubmVjdChzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKQogICAgICAgIHNlbGYuX3NlYXJjaC5zZWFyY2hUZXh0Q2hhbmdlZC5jb25uZWN0KHNlbGYub25fc2VhcmNoX3RleHRfY2hhbmdlZCkKICAgICAgICBzZWxmLl9zZWFyY2guc2VhcmNoU3VibWl0dGVkLmNvbm5lY3Qoc2VsZi5vbl9zZWFyY2hfc3VibWl0dGVkKQoKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LmFsaWFzQWRkUmVxdWVzdGVkLmNvbm5lY3QoCiAgICAgICAgICAgIHNlbGYub25fYWxpYXNfYWRkZWQKICAgICAgICApCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5hbGlhc1JlbW92ZVJlcXVlc3RlZC5jb25uZWN0KAogICAgICAgICAgICBzZWxmLm9uX2FsaWFzX3JlbW92ZWQKICAgICAgICApCgogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2F2ZVJlcXVlc3RlZC5jb25uZWN0KHNlbGYub25fc2F2ZV9hbGlhc2VzKQogICAgICAgIHNlbGYuX3Rvb2xiYXIuY2FuY2VsUmVxdWVzdGVkLmNvbm5lY3Qoc2VsZi5vbl9jYW5jZWxfYWxpYXNlcykKCiAgICAgICAgIyBTdGFydCBpbiB2aWV3IG1vZGUKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9tb2RlKEVkaXRvck1vZGUuVklFVykKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9hY3Rpb25zX2VuYWJsZWQoCiAgICAgICAgICAgIGFkZD1GYWxzZSwKICAgICAgICAgICAgZWRpdD1GYWxzZSwKICAgICAgICAgICAgcmVtb3ZlPUZhbHNlLAogICAgICAgICAgICByZXN0b3JlPUZhbHNlLAogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDb2xsZWN0aW9uIC8gZW50aXR5IGxvYWRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX2NvbGxlY3Rpb25fc2VsZWN0ZWQoc2VsZiwga2luZDogQ29sbGVjdGlvbktpbmQpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uID0ga2luZAogICAgICAgIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkID0gTm9uZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVudHJpZXMgPSBsaXN0X2FsaWFzZXMoa2luZD1raW5kKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKAogICAgICAgICAgICAgICAgZiJGYWlsZWQgdG8gbGlzdCBhbGlhc2VzIGZvciB7a2luZH0iCiAgICAgICAgICAgICkgZnJvbSBlCgogICAgICAgIHNlbGYuX2VudHJ5X2xpc3Quc2V0X2VudHJpZXMoZW50cmllcykKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZW1wdHkoKQoKCiAgICBkZWYgb25fZW50cnlfc2VsZWN0ZWQoc2VsZiwgZW50cnlfaWQ6IGludCkgLT4gTm9uZToKICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGVudGl0eSA9IGxvYWRfZW50aXR5KHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiwgZW50cnlfaWQpCgogICAgICAgIHNlbGYuX2RldGFpbHMuc2hvd19nYXpldHRlZXJfdmlldygpCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5zZXRfZW50aXR5X3R5cGUoc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uKQogICAgICAgIHNlbGYuX2RldGFpbHMuZ2F6ZXR0ZWVyX3ZpZXcuc2V0X2VudGl0eV9kYXRhKGVudGl0eSkKCiAgICAgICAgIyBJbml0aWFsaXplIGFsaWFzIGVkaXQgc3RhdGUKICAgICAgICBzZWxmLl9jdXJyZW50X2VudGl0eV9pZCA9IGVudHJ5X2lkCiAgICAgICAgc2VsZi5fb3JpZ2luYWxfYWxpYXNlcyA9IHNldChlbnRpdHkuYWxpYXNlcyBvciBbXSkKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzLmNsZWFyKCkKICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXMuY2xlYXIoKQoKICAgICAgICAjIEFsaWFzIGVkaXRpbmcgaXMgdGhlIG9ubHkgZW5hYmxlZCBhY3Rpb24gZm9yIG5vdwogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2V0X2FjdGlvbnNfZW5hYmxlZCgKICAgICAgICAgICAgYWRkPUZhbHNlLAogICAgICAgICAgICBlZGl0PUZhbHNlLAogICAgICAgICAgICByZW1vdmU9RmFsc2UsCiAgICAgICAgICAgIHJlc3RvcmU9RmFsc2UsCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlYXJjaCBoYW5kbGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgb25fc2VhcmNoX3RleHRfY2hhbmdlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgaWYgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiU2VhcmNoIGludm9rZWQgd2l0aCBubyBhY3RpdmUgY29sbGVjdGlvbiIpCgogICAgICAgIHRyeToKICAgICAgICAgICAgZW50cmllcyA9IGxpc3RfYWxpYXNlcygKICAgICAgICAgICAgICAgIGtpbmQ9c2VsZi5fY3VycmVudF9jb2xsZWN0aW9uLAogICAgICAgICAgICAgICAgc2VhcmNoX3RleHQ9dGV4dCwKICAgICAgICAgICAgKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKAogICAgICAgICAgICAgICAgZiJBbGlhcyBzZWFyY2ggZmFpbGVkIGZvciB7c2VsZi5fY3VycmVudF9jb2xsZWN0aW9ufToge3RleHQhcn0iCiAgICAgICAgICAgICkgZnJvbSBlCgogICAgICAgIHNlbGYuX2VudHJ5X2xpc3Quc2V0X2VudHJpZXMoZW50cmllcykKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZW1wdHkoKQoKCiAgICBkZWYgb25fc2VhcmNoX3N1Ym1pdHRlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgIyBpZGVudGljYWwgYmVoYXZpb3IsIGV4cGxpY2l0IGVudHJ5IHBvaW50CiAgICAgICAgc2VsZi5vbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKHRleHQpCgoKICAgIGRlZiBvbl9zZWFyY2hfc3VibWl0dGVkKHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZToKICAgICAgICBzZWxmLm9uX3NlYXJjaF90ZXh0X2NoYW5nZWQodGV4dCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBBbGlhcyBlZGl0aW5nCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBvbl9hbGlhc19hZGRlZChzZWxmLCBhbGlhczogc3RyKSAtPiBOb25lOgogICAgICAgIGFsaWFzID0gYWxpYXMuc3RyaXAoKQogICAgICAgIGlmIG5vdCBhbGlhczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIGFsaWFzIGluIHNlbGYuX29yaWdpbmFsX2FsaWFzZXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzLmFkZChhbGlhcykKICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXMuZGlzY2FyZChhbGlhcykKICAgICAgICBzZWxmLl9yZWZyZXNoX2FsaWFzX3ZpZXcoKQoKICAgIGRlZiBvbl9hbGlhc19yZW1vdmVkKHNlbGYsIGFsaWFzOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgaWYgYWxpYXMgaW4gc2VsZi5fYWRkZWRfYWxpYXNlczoKICAgICAgICAgICAgc2VsZi5fYWRkZWRfYWxpYXNlcy5yZW1vdmUoYWxpYXMpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzLmFkZChhbGlhcykKCiAgICAgICAgc2VsZi5fcmVmcmVzaF9hbGlhc192aWV3KCkKCiAgICBkZWYgX3JlZnJlc2hfYWxpYXNfdmlldyhzZWxmKSAtPiBOb25lOgogICAgICAgIGFsaWFzZXMgPSAoCiAgICAgICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXMKICAgICAgICAgICAgfCBzZWxmLl9hZGRlZF9hbGlhc2VzCiAgICAgICAgKSAtIHNlbGYuX3JlbW92ZWRfYWxpYXNlcwoKICAgICAgICB2aWV3ID0gc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldwogICAgICAgIHZpZXcuX2FsaWFzZXNfbGlzdC5jbGVhcigpCiAgICAgICAgdmlldy5fYWxpYXNlc19saXN0LmFkZEl0ZW1zKHNvcnRlZChhbGlhc2VzKSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTYXZlIC8gY2FuY2VsCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBvbl9zYXZlX2FsaWFzZXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiAoCiAgICAgICAgICAgIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkIGlzIE5vbmUKICAgICAgICAgICAgb3Igc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uIGlzIE5vbmUKICAgICAgICApOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgbm90IHNlbGYuX2FkZGVkX2FsaWFzZXMgYW5kIG5vdCBzZWxmLl9yZW1vdmVkX2FsaWFzZXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBkb21haW4gPSBfRE9NQUlOX0ZPUl9DT0xMRUNUSU9OW3NlbGYuX2N1cnJlbnRfY29sbGVjdGlvbl0KCiAgICAgICAgYXBwbHlfYWxpYXNfY2hhbmdlcygKICAgICAgICAgICAgZG9tYWluPWRvbWFpbiwKICAgICAgICAgICAgZW50aXR5X2lkcz1bc2VsZi5fY3VycmVudF9lbnRpdHlfaWRdLAogICAgICAgICAgICBhZGRlZD1zZWxmLl9hZGRlZF9hbGlhc2VzLAogICAgICAgICAgICByZW1vdmVkPXNlbGYuX3JlbW92ZWRfYWxpYXNlcywKICAgICAgICApCgogICAgICAgICMgUmVsb2FkIGVudGl0eSB0byByZWZsZWN0IGNhbm9uaWNhbCBzdGF0ZQogICAgICAgIHNlbGYub25fZW50cnlfc2VsZWN0ZWQoc2VsZi5fY3VycmVudF9lbnRpdHlfaWQpCgogICAgZGVmIG9uX2NhbmNlbF9hbGlhc2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYub25fZW50cnlfc2VsZWN0ZWQoc2VsZi5fY3VycmVudF9lbnRpdHlfaWQpCg",
					"AQAAAAAAAAABAAAAAAAAAAAAAACUGwAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACzGwAAIyBzcmMvZGJlZGl0YzIvY29udHJvbGxlci9lZGl0b3JfY29udHJvbGxlci5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGRiZWRpdGMyLmVudW1zIGltcG9ydCBDb2xsZWN0aW9uS2luZCwgRWRpdG9yTW9kZQpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9yZWFkIGltcG9ydCBsb2FkX2VudGl0eQpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9zZWFyY2ggaW1wb3J0IF9ET01BSU5fRk9SX0NPTExFQ1RJT04KZnJvbSBkYmVkaXRjMi5zZXJ2aWNlcy5nYXpldHRlZXJfYWxpYXNfYnJvd3NlciBpbXBvcnQgbGlzdF9hbGlhc2VzCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5lbnRyeV9kZXRhaWxzX3N0YWNrIGltcG9ydCBFbnRyeURldGFpbHNTdGFjawpmcm9tIGRiZWRpdGMyLndpZGdldHMuZW50cnlfbGlzdF92aWV3IGltcG9ydCBFbnRyeUxpc3RWaWV3CmZyb20gZGJlZGl0YzIud2lkZ2V0cy5uYXZpZ2F0aW9uX3RyZWUgaW1wb3J0IE5hdmlnYXRpb25UcmVlCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5zZWFyY2hfcGFuZWwgaW1wb3J0IFNlYXJjaFBhbmVsCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5hcHBfdG9vbGJhciBpbXBvcnQgQXBwVG9vbEJhcgoKZnJvbSBzaXRyZXBjMi5nYXpldHRlZXIuYWxpYXNfc2VydmljZSBpbXBvcnQgYXBwbHlfYWxpYXNfY2hhbmdlcwoKCmNsYXNzIEVkaXRvckNvbnRyb2xsZXI6CiAgICAiIiIKICAgIENvbnRyb2xsZXIgZm9yIEdhemV0dGVlciBicm93c2luZyB3aXRoIGFsaWFzIGVkaXRpbmcgc3VwcG9ydC4KCiAgICBSZXNwb25zaWJpbGl0aWVzOgogICAgLSBCcm93c2UgYWxpYXNlcyAoYWxpYXMtZmlyc3QpCiAgICAtIFJlc29sdmUgZW50aXR5IGZyb20gYWxpYXMKICAgIC0gRGlzcGxheSBlbnRpdHkgZGV0YWlscwogICAgLSBBbGxvdyBlZGl0aW5nIG9mIGFsaWFzZXMgb25seQoKICAgIFNjb3BlOgogICAgLSBHYXpldHRlZXIgb25seQogICAgLSBBbGlhcyBlZGl0aW5nIG9ubHkKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgICosCiAgICAgICAgbmF2aWdhdGlvbjogTmF2aWdhdGlvblRyZWUsCiAgICAgICAgc2VhcmNoOiBTZWFyY2hQYW5lbCwKICAgICAgICBlbnRyeV9saXN0OiBFbnRyeUxpc3RWaWV3LAogICAgICAgIGRldGFpbHM6IEVudHJ5RGV0YWlsc1N0YWNrLAogICAgICAgIHRvb2xiYXI6IEFwcFRvb2xCYXIsCiAgICApIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fbmF2aWdhdGlvbiA9IG5hdmlnYXRpb24KICAgICAgICBzZWxmLl9zZWFyY2ggPSBzZWFyY2gKICAgICAgICBzZWxmLl9lbnRyeV9saXN0ID0gZW50cnlfbGlzdAogICAgICAgIHNlbGYuX2RldGFpbHMgPSBkZXRhaWxzCiAgICAgICAgc2VsZi5fdG9vbGJhciA9IHRvb2xiYXIKCiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uOiBDb2xsZWN0aW9uS2luZCB8IE5vbmUgPSBOb25lCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQ6IGludCB8IE5vbmUgPSBOb25lCgogICAgICAgICMgQWxpYXMgZWRpdCBzdGF0ZQogICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXM6IHNldFtzdHJdID0gc2V0KCkKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCiAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCgogICAgICAgICMgLS0tIFdpcmUgc2lnbmFscyAtLS0KICAgICAgICBzZWxmLl9uYXZpZ2F0aW9uLmNvbGxlY3Rpb25TZWxlY3RlZC5jb25uZWN0KHNlbGYub25fY29sbGVjdGlvbl9zZWxlY3RlZCkKICAgICAgICBzZWxmLl9lbnRyeV9saXN0LmVudHJ5U2VsZWN0ZWQuY29ubmVjdChzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKQogICAgICAgIHNlbGYuX3NlYXJjaC5zZWFyY2hUZXh0Q2hhbmdlZC5jb25uZWN0KHNlbGYub25fc2VhcmNoX3RleHRfY2hhbmdlZCkKICAgICAgICBzZWxmLl9zZWFyY2guc2VhcmNoU3VibWl0dGVkLmNvbm5lY3Qoc2VsZi5vbl9zZWFyY2hfc3VibWl0dGVkKQoKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LmFsaWFzQWRkUmVxdWVzdGVkLmNvbm5lY3QoCiAgICAgICAgICAgIHNlbGYub25fYWxpYXNfYWRkZWQKICAgICAgICApCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5hbGlhc1JlbW92ZVJlcXVlc3RlZC5jb25uZWN0KAogICAgICAgICAgICBzZWxmLm9uX2FsaWFzX3JlbW92ZWQKICAgICAgICApCgogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2F2ZVJlcXVlc3RlZC5jb25uZWN0KHNlbGYub25fc2F2ZV9hbGlhc2VzKQogICAgICAgIHNlbGYuX3Rvb2xiYXIuY2FuY2VsUmVxdWVzdGVkLmNvbm5lY3Qoc2VsZi5vbl9jYW5jZWxfYWxpYXNlcykKCiAgICAgICAgIyBTdGFydCBpbiB2aWV3IG1vZGUKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9tb2RlKEVkaXRvck1vZGUuVklFVykKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9hY3Rpb25zX2VuYWJsZWQoCiAgICAgICAgICAgIGFkZD1GYWxzZSwKICAgICAgICAgICAgZWRpdD1GYWxzZSwKICAgICAgICAgICAgcmVtb3ZlPUZhbHNlLAogICAgICAgICAgICByZXN0b3JlPUZhbHNlLAogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDb2xsZWN0aW9uIC8gZW50aXR5IGxvYWRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX2NvbGxlY3Rpb25fc2VsZWN0ZWQoc2VsZiwga2luZDogQ29sbGVjdGlvbktpbmQpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uID0ga2luZAogICAgICAgIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkID0gTm9uZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVudHJpZXMgPSBsaXN0X2FsaWFzZXMoa2luZD1raW5kKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKAogICAgICAgICAgICAgICAgZiJGYWlsZWQgdG8gbGlzdCBhbGlhc2VzIGZvciBjb2xsZWN0aW9uOiB7a2luZH0iCiAgICAgICAgICAgICkgZnJvbSBlCgogICAgICAgIHNlbGYuX2VudHJ5X2xpc3Quc2V0X2VudHJpZXMoZW50cmllcykKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZW1wdHkoKQoKICAgIGRlZiBvbl9lbnRyeV9zZWxlY3RlZChzZWxmLCBlbnRyeV9pZDogaW50KSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkVudHJ5IHNlbGVjdGVkIHdpdGggbm8gYWN0aXZlIGNvbGxlY3Rpb24iKQoKICAgICAgICBlbnRpdHkgPSBsb2FkX2VudGl0eShzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24sIGVudHJ5X2lkKQoKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZ2F6ZXR0ZWVyX3ZpZXcoKQogICAgICAgIHNlbGYuX2RldGFpbHMuZ2F6ZXR0ZWVyX3ZpZXcuc2V0X2VudGl0eV90eXBlKHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbikKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LnNldF9lbnRpdHlfZGF0YShlbnRpdHkpCgogICAgICAgICMgSW5pdGlhbGl6ZSBhbGlhcyBlZGl0IHN0YXRlCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgPSBlbnRyeV9pZAogICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXMgPSBzZXQoZW50aXR5LmFsaWFzZXMgb3IgW10pCiAgICAgICAgc2VsZi5fYWRkZWRfYWxpYXNlcy5jbGVhcigpCiAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzLmNsZWFyKCkKCiAgICAgICAgc2VsZi5fdG9vbGJhci5zZXRfYWN0aW9uc19lbmFibGVkKAogICAgICAgICAgICBhZGQ9RmFsc2UsCiAgICAgICAgICAgIGVkaXQ9RmFsc2UsCiAgICAgICAgICAgIHJlbW92ZT1GYWxzZSwKICAgICAgICAgICAgcmVzdG9yZT1GYWxzZSwKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2VhcmNoIGhhbmRsaW5nCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBvbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJTZWFyY2ggaW52b2tlZCB3aXRoIG5vIGFjdGl2ZSBjb2xsZWN0aW9uIikKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBlbnRyaWVzID0gbGlzdF9hbGlhc2VzKAogICAgICAgICAgICAgICAga2luZD1zZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24sCiAgICAgICAgICAgICAgICBzZWFyY2hfdGV4dD10ZXh0LAogICAgICAgICAgICApCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoCiAgICAgICAgICAgICAgICBmIkFsaWFzIHNlYXJjaCBmYWlsZWQgZm9yIHtzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb259OiB7dGV4dCFyfSIKICAgICAgICAgICAgKSBmcm9tIGUKCiAgICAgICAgc2VsZi5fZW50cnlfbGlzdC5zZXRfZW50cmllcyhlbnRyaWVzKQogICAgICAgIHNlbGYuX2RldGFpbHMuc2hvd19lbXB0eSgpCgogICAgZGVmIG9uX3NlYXJjaF9zdWJtaXR0ZWQoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIHNlbGYub25fc2VhcmNoX3RleHRfY2hhbmdlZCh0ZXh0KQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFsaWFzIGVkaXRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX2FsaWFzX2FkZGVkKHNlbGYsIGFsaWFzOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgYWxpYXMgPSBhbGlhcy5zdHJpcCgpCiAgICAgICAgaWYgbm90IGFsaWFzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgYWxpYXMgaW4gc2VsZi5fb3JpZ2luYWxfYWxpYXNlczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuX2FkZGVkX2FsaWFzZXMuYWRkKGFsaWFzKQogICAgICAgIHNlbGYuX3JlbW92ZWRfYWxpYXNlcy5kaXNjYXJkKGFsaWFzKQogICAgICAgIHNlbGYuX3JlZnJlc2hfYWxpYXNfdmlldygpCgogICAgZGVmIG9uX2FsaWFzX3JlbW92ZWQoc2VsZiwgYWxpYXM6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBhbGlhcyBpbiBzZWxmLl9hZGRlZF9hbGlhc2VzOgogICAgICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzLnJlbW92ZShhbGlhcykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXMuYWRkKGFsaWFzKQoKICAgICAgICBzZWxmLl9yZWZyZXNoX2FsaWFzX3ZpZXcoKQoKICAgIGRlZiBfcmVmcmVzaF9hbGlhc192aWV3KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgYWxpYXNlcyA9ICgKICAgICAgICAgICAgc2VsZi5fb3JpZ2luYWxfYWxpYXNlcwogICAgICAgICAgICB8IHNlbGYuX2FkZGVkX2FsaWFzZXMKICAgICAgICApIC0gc2VsZi5fcmVtb3ZlZF9hbGlhc2VzCgogICAgICAgIHZpZXcgPSBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3CiAgICAgICAgdmlldy5fYWxpYXNlc19saXN0LmNsZWFyKCkKICAgICAgICB2aWV3Ll9hbGlhc2VzX2xpc3QuYWRkSXRlbXMoc29ydGVkKGFsaWFzZXMpKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNhdmUgLyBjYW5jZWwKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX3NhdmVfYWxpYXNlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmICgKICAgICAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgaXMgTm9uZQogICAgICAgICAgICBvciBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZQogICAgICAgICk6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiU2F2ZSByZXF1ZXN0ZWQgd2l0aCBubyBhY3RpdmUgZW50aXR5IikKCiAgICAgICAgaWYgbm90IHNlbGYuX2FkZGVkX2FsaWFzZXMgYW5kIG5vdCBzZWxmLl9yZW1vdmVkX2FsaWFzZXM6CiAgICAgICAgICAgIHJldHVybiAgIyBleHBsaWNpdCBuby1vcAoKICAgICAgICBkb21haW4gPSBfRE9NQUlOX0ZPUl9DT0xMRUNUSU9OLmdldChzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24pCiAgICAgICAgaWYgZG9tYWluIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigKICAgICAgICAgICAgICAgIGYiQWxpYXMgc2F2aW5nIG5vdCBzdXBwb3J0ZWQgZm9yIHtzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb259IgogICAgICAgICAgICApCgogICAgICAgIGFwcGx5X2FsaWFzX2NoYW5nZXMoCiAgICAgICAgICAgIGRvbWFpbj1kb21haW4sCiAgICAgICAgICAgIGVudGl0eV9pZHM9W3NlbGYuX2N1cnJlbnRfZW50aXR5X2lkXSwKICAgICAgICAgICAgYWRkZWQ9c2VsZi5fYWRkZWRfYWxpYXNlcywKICAgICAgICAgICAgcmVtb3ZlZD1zZWxmLl9yZW1vdmVkX2FsaWFzZXMsCiAgICAgICAgKQoKICAgICAgICAjIFJlbG9hZCBjYW5vbmljYWwgc3RhdGUKICAgICAgICBzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkKQoKICAgIGRlZiBvbl9jYW5jZWxfYWxpYXNlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2FuY2VsIHJlcXVlc3RlZCB3aXRoIG5vIGFjdGl2ZSBlbnRpdHkiKQoKICAgICAgICBzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkKQoAAAAAAAAAALMbAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsxsAAAAAAACzGwAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAXhgAAAAAAACzGwAAIyBzcmMvZGJlZGl0YzIvY29udHJvbGxlci9lZGl0b3JfY29udHJvbGxlci5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGRiZWRpdGMyLmVudW1zIGltcG9ydCBDb2xsZWN0aW9uS2luZCwgRWRpdG9yTW9kZQpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9yZWFkIGltcG9ydCBsb2FkX2VudGl0eQpmcm9tIGRiZWRpdGMyLnNlcnZpY2VzLmdhemV0dGVlcl9zZWFyY2ggaW1wb3J0IF9ET01BSU5fRk9SX0NPTExFQ1RJT04KZnJvbSBkYmVkaXRjMi5zZXJ2aWNlcy5nYXpldHRlZXJfYWxpYXNfYnJvd3NlciBpbXBvcnQgbGlzdF9hbGlhc2VzCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5lbnRyeV9kZXRhaWxzX3N0YWNrIGltcG9ydCBFbnRyeURldGFpbHNTdGFjawpmcm9tIGRiZWRpdGMyLndpZGdldHMuZW50cnlfbGlzdF92aWV3IGltcG9ydCBFbnRyeUxpc3RWaWV3CmZyb20gZGJlZGl0YzIud2lkZ2V0cy5uYXZpZ2F0aW9uX3RyZWUgaW1wb3J0IE5hdmlnYXRpb25UcmVlCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5zZWFyY2hfcGFuZWwgaW1wb3J0IFNlYXJjaFBhbmVsCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5hcHBfdG9vbGJhciBpbXBvcnQgQXBwVG9vbEJhcgoKZnJvbSBzaXRyZXBjMi5nYXpldHRlZXIuYWxpYXNfc2VydmljZSBpbXBvcnQgYXBwbHlfYWxpYXNfY2hhbmdlcwoKCmNsYXNzIEVkaXRvckNvbnRyb2xsZXI6CiAgICAiIiIKICAgIENvbnRyb2xsZXIgZm9yIEdhemV0dGVlciBicm93c2luZyB3aXRoIGFsaWFzIGVkaXRpbmcgc3VwcG9ydC4KCiAgICBSZXNwb25zaWJpbGl0aWVzOgogICAgLSBCcm93c2UgYWxpYXNlcyAoYWxpYXMtZmlyc3QpCiAgICAtIFJlc29sdmUgZW50aXR5IGZyb20gYWxpYXMKICAgIC0gRGlzcGxheSBlbnRpdHkgZGV0YWlscwogICAgLSBBbGxvdyBlZGl0aW5nIG9mIGFsaWFzZXMgb25seQoKICAgIFNjb3BlOgogICAgLSBHYXpldHRlZXIgb25seQogICAgLSBBbGlhcyBlZGl0aW5nIG9ubHkKICAgICIiIgoKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgICosCiAgICAgICAgbmF2aWdhdGlvbjogTmF2aWdhdGlvblRyZWUsCiAgICAgICAgc2VhcmNoOiBTZWFyY2hQYW5lbCwKICAgICAgICBlbnRyeV9saXN0OiBFbnRyeUxpc3RWaWV3LAogICAgICAgIGRldGFpbHM6IEVudHJ5RGV0YWlsc1N0YWNrLAogICAgICAgIHRvb2xiYXI6IEFwcFRvb2xCYXIsCiAgICApIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fbmF2aWdhdGlvbiA9IG5hdmlnYXRpb24KICAgICAgICBzZWxmLl9zZWFyY2ggPSBzZWFyY2gKICAgICAgICBzZWxmLl9lbnRyeV9saXN0ID0gZW50cnlfbGlzdAogICAgICAgIHNlbGYuX2RldGFpbHMgPSBkZXRhaWxzCiAgICAgICAgc2VsZi5fdG9vbGJhciA9IHRvb2xiYXIKCiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uOiBDb2xsZWN0aW9uS2luZCB8IE5vbmUgPSBOb25lCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQ6IGludCB8IE5vbmUgPSBOb25lCgogICAgICAgICMgQWxpYXMgZWRpdCBzdGF0ZQogICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXM6IHNldFtzdHJdID0gc2V0KCkKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCiAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzOiBzZXRbc3RyXSA9IHNldCgpCgogICAgICAgICMgLS0tIFdpcmUgc2lnbmFscyAtLS0KICAgICAgICBzZWxmLl9uYXZpZ2F0aW9uLmNvbGxlY3Rpb25TZWxlY3RlZC5jb25uZWN0KHNlbGYub25fY29sbGVjdGlvbl9zZWxlY3RlZCkKICAgICAgICBzZWxmLl9lbnRyeV9saXN0LmVudHJ5U2VsZWN0ZWQuY29ubmVjdChzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKQogICAgICAgIHNlbGYuX3NlYXJjaC5zZWFyY2hUZXh0Q2hhbmdlZC5jb25uZWN0KHNlbGYub25fc2VhcmNoX3RleHRfY2hhbmdlZCkKICAgICAgICBzZWxmLl9zZWFyY2guc2VhcmNoU3VibWl0dGVkLmNvbm5lY3Qoc2VsZi5vbl9zZWFyY2hfc3VibWl0dGVkKQoKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LmFsaWFzQWRkUmVxdWVzdGVkLmNvbm5lY3QoCiAgICAgICAgICAgIHNlbGYub25fYWxpYXNfYWRkZWQKICAgICAgICApCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5hbGlhc1JlbW92ZVJlcXVlc3RlZC5jb25uZWN0KAogICAgICAgICAgICBzZWxmLm9uX2FsaWFzX3JlbW92ZWQKICAgICAgICApCgogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2F2ZVJlcXVlc3RlZC5jb25uZWN0KHNlbGYub25fc2F2ZV9hbGlhc2VzKQogICAgICAgIHNlbGYuX3Rvb2xiYXIuY2FuY2VsUmVxdWVzdGVkLmNvbm5lY3Qoc2VsZi5vbl9jYW5jZWxfYWxpYXNlcykKCiAgICAgICAgIyBTdGFydCBpbiB2aWV3IG1vZGUKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9tb2RlKEVkaXRvck1vZGUuVklFVykKICAgICAgICBzZWxmLl90b29sYmFyLnNldF9hY3Rpb25zX2VuYWJsZWQoCiAgICAgICAgICAgIGFkZD1GYWxzZSwKICAgICAgICAgICAgZWRpdD1GYWxzZSwKICAgICAgICAgICAgcmVtb3ZlPUZhbHNlLAogICAgICAgICAgICByZXN0b3JlPUZhbHNlLAogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDb2xsZWN0aW9uIC8gZW50aXR5IGxvYWRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX2NvbGxlY3Rpb25fc2VsZWN0ZWQoc2VsZiwga2luZDogQ29sbGVjdGlvbktpbmQpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uID0ga2luZAogICAgICAgIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkID0gTm9uZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGVudHJpZXMgPSBsaXN0X2FsaWFzZXMoa2luZD1raW5kKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKAogICAgICAgICAgICAgICAgZiJGYWlsZWQgdG8gbGlzdCBhbGlhc2VzIGZvciBjb2xsZWN0aW9uOiB7a2luZH0iCiAgICAgICAgICAgICkgZnJvbSBlCgogICAgICAgIHNlbGYuX2VudHJ5X2xpc3Quc2V0X2VudHJpZXMoZW50cmllcykKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZW1wdHkoKQoKICAgIGRlZiBvbl9lbnRyeV9zZWxlY3RlZChzZWxmLCBlbnRyeV9pZDogaW50KSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkVudHJ5IHNlbGVjdGVkIHdpdGggbm8gYWN0aXZlIGNvbGxlY3Rpb24iKQoKICAgICAgICBlbnRpdHkgPSBsb2FkX2VudGl0eShzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24sIGVudHJ5X2lkKQoKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZ2F6ZXR0ZWVyX3ZpZXcoKQogICAgICAgIHNlbGYuX2RldGFpbHMuZ2F6ZXR0ZWVyX3ZpZXcuc2V0X2VudGl0eV90eXBlKHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbikKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LnNldF9lbnRpdHlfZGF0YShlbnRpdHkpCgogICAgICAgICMgSW5pdGlhbGl6ZSBhbGlhcyBlZGl0IHN0YXRlCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgPSBlbnRyeV9pZAogICAgICAgIHNlbGYuX29yaWdpbmFsX2FsaWFzZXMgPSBzZXQoZW50aXR5LmFsaWFzZXMgb3IgW10pCiAgICAgICAgc2VsZi5fYWRkZWRfYWxpYXNlcy5jbGVhcigpCiAgICAgICAgc2VsZi5fcmVtb3ZlZF9hbGlhc2VzLmNsZWFyKCkKCiAgICAgICAgc2VsZi5fdG9vbGJhci5zZXRfYWN0aW9uc19lbmFibGVkKAogICAgICAgICAgICBhZGQ9RmFsc2UsCiAgICAgICAgICAgIGVkaXQ9RmFsc2UsCiAgICAgICAgICAgIHJlbW92ZT1GYWxzZSwKICAgICAgICAgICAgcmVzdG9yZT1GYWxzZSwKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2VhcmNoIGhhbmRsaW5nCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBvbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJTZWFyY2ggaW52b2tlZCB3aXRoIG5vIGFjdGl2ZSBjb2xsZWN0aW9uIikKCiAgICAgICAgdHJ5OgogICAgICAgICAgICBlbnRyaWVzID0gbGlzdF9hbGlhc2VzKAogICAgICAgICAgICAgICAga2luZD1zZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24sCiAgICAgICAgICAgICAgICBzZWFyY2hfdGV4dD10ZXh0LAogICAgICAgICAgICApCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoCiAgICAgICAgICAgICAgICBmIkFsaWFzIHNlYXJjaCBmYWlsZWQgZm9yIHtzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb259OiB7dGV4dCFyfSIKICAgICAgICAgICAgKSBmcm9tIGUKCiAgICAgICAgc2VsZi5fZW50cnlfbGlzdC5zZXRfZW50cmllcyhlbnRyaWVzKQogICAgICAgIHNlbGYuX2RldGFpbHMuc2hvd19lbXB0eSgpCgogICAgZGVmIG9uX3NlYXJjaF9zdWJtaXR0ZWQoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIHNlbGYub25fc2VhcmNoX3RleHRfY2hhbmdlZCh0ZXh0KQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFsaWFzIGVkaXRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX2FsaWFzX2FkZGVkKHNlbGYsIGFsaWFzOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgYWxpYXMgPSBhbGlhcy5zdHJpcCgpCiAgICAgICAgaWYgbm90IGFsaWFzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgYWxpYXMgaW4gc2VsZi5fb3JpZ2luYWxfYWxpYXNlczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuX2FkZGVkX2FsaWFzZXMuYWRkKGFsaWFzKQogICAgICAgIHNlbGYuX3JlbW92ZWRfYWxpYXNlcy5kaXNjYXJkKGFsaWFzKQogICAgICAgIHNlbGYuX3JlZnJlc2hfYWxpYXNfdmlldygpCgogICAgZGVmIG9uX2FsaWFzX3JlbW92ZWQoc2VsZiwgYWxpYXM6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBhbGlhcyBpbiBzZWxmLl9hZGRlZF9hbGlhc2VzOgogICAgICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzLnJlbW92ZShhbGlhcykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXMuYWRkKGFsaWFzKQoKICAgICAgICBzZWxmLl9yZWZyZXNoX2FsaWFzX3ZpZXcoKQoKICAgIGRlZiBfcmVmcmVzaF9hbGlhc192aWV3KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgYWxpYXNlcyA9ICgKICAgICAgICAgICAgc2VsZi5fb3JpZ2luYWxfYWxpYXNlcwogICAgICAgICAgICB8IHNlbGYuX2FkZGVkX2FsaWFzZXMKICAgICAgICApIC0gc2VsZi5fcmVtb3ZlZF9hbGlhc2VzCgogICAgICAgIHZpZXcgPSBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3CiAgICAgICAgdmlldy5fYWxpYXNlc19saXN0LmNsZWFyKCkKICAgICAgICB2aWV3Ll9hbGlhc2VzX2xpc3QuYWRkSXRlbXMoc29ydGVkKGFsaWFzZXMpKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNhdmUgLyBjYW5jZWwKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX3NhdmVfYWxpYXNlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmICgKICAgICAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgaXMgTm9uZQogICAgICAgICAgICBvciBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZQogICAgICAgICk6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiU2F2ZSByZXF1ZXN0ZWQgd2l0aCBubyBhY3RpdmUgZW50aXR5IikKCiAgICAgICAgaWYgbm90IHNlbGYuX2FkZGVkX2FsaWFzZXMgYW5kIG5vdCBzZWxmLl9yZW1vdmVkX2FsaWFzZXM6CiAgICAgICAgICAgIHJldHVybiAgIyBleHBsaWNpdCBuby1vcAoKICAgICAgICBkb21haW4gPSBfRE9NQUlOX0ZPUl9DT0xMRUNUSU9OLmdldChzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24pCiAgICAgICAgaWYgZG9tYWluIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigKICAgICAgICAgICAgICAgIGYiQWxpYXMgc2F2aW5nIG5vdCBzdXBwb3J0ZWQgZm9yIHtzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb259IgogICAgICAgICAgICApCgogICAgICAgIGFwcGx5X2FsaWFzX2NoYW5nZXMoCiAgICAgICAgICAgIGRvbWFpbj1kb21haW4sCiAgICAgICAgICAgIGVudGl0eV9pZHM9W3NlbGYuX2N1cnJlbnRfZW50aXR5X2lkXSwKICAgICAgICAgICAgYWRkZWQ9c2VsZi5fYWRkZWRfYWxpYXNlcywKICAgICAgICAgICAgcmVtb3ZlZD1zZWxmLl9yZW1vdmVkX2FsaWFzZXMsCiAgICAgICAgKQoKICAgICAgICAjIFJlbG9hZCBjYW5vbmljYWwgc3RhdGUKICAgICAgICBzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkKQoKICAgIGRlZiBvbl9jYW5jZWxfYWxpYXNlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiQ2FuY2VsIHJlcXVlc3RlZCB3aXRoIG5vIGFjdGl2ZSBlbnRpdHkiKQoKICAgICAgICBzZWxmLm9uX2VudHJ5X3NlbGVjdGVkKHNlbGYuX2N1cnJlbnRfZW50aXR5X2lkKQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAACzGwAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABeGAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYmVkaXRjMi5lbnVtcyBpbXBvcnQgQ29sbGVjdGlvbktpbmQsIEVkaXRvck1vZGUKZnJvbSBkYmVkaXRjMi5zZXJ2aWNlcy5nYXpldHRlZXJfcmVhZCBpbXBvcnQgbG9hZF9lbnRpdHkKZnJvbSBkYmVkaXRjMi5zZXJ2aWNlcy5nYXpldHRlZXJfYWxpYXNfYnJvd3NlciBpbXBvcnQgbGlzdF9hbGlhc2VzCmZyb20gZGJlZGl0YzIuc2VydmljZXMuZ2F6ZXR0ZWVyX3NlYXJjaCBpbXBvcnQgX0RPTUFJTl9GT1JfQ09MTEVDVElPTgoKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmVudHJ5X2RldGFpbHNfc3RhY2sgaW1wb3J0IEVudHJ5RGV0YWlsc1N0YWNrCmZyb20gZGJlZGl0YzIud2lkZ2V0cy5lbnRyeV9saXN0X3ZpZXcgaW1wb3J0IEVudHJ5TGlzdFZpZXcKZnJvbSBkYmVkaXRjMi53aWRnZXRzLm5hdmlnYXRpb25fdHJlZSBpbXBvcnQgTmF2aWdhdGlvblRyZWUKZnJvbSBkYmVkaXRjMi53aWRnZXRzLnNlYXJjaF9wYW5lbCBpbXBvcnQgU2VhcmNoUGFuZWwKZnJvbSBkYmVkaXRjMi53aWRnZXRzLmFwcF90b29sYmFyIGltcG9ydCBBcHBUb29sQmFyCgpmcm9tIHNpdHJlcGMyLmdhemV0dGVlci5hbGlhc19zZXJ2aWNlIGltcG9ydCBhcHBseV9hbGlhc19jaGFuZ2VzCgoKY2xhc3MgRWRpdG9yQ29udHJvbGxlcjoKICAgICIiIgogICAgQ29udHJvbGxlciBmb3IgR2F6ZXR0ZWVyIGJyb3dzaW5nIHdpdGggYWxpYXMgZWRpdGluZyBzdXBwb3J0LgoKICAgIFNjb3BlOgogICAgLSBHYXpldHRlZXIgb25seQogICAgLSBBbGlhcyBlZGl0aW5nIG9ubHkKICAgIC0gTm8gc3RydWN0dXJhbCBtdXRhdGlvbgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKAogICAgICAgIHNlbGYsCiAgICAgICAgKiwKICAgICAgICBuYXZpZ2F0aW9uOiBOYXZpZ2F0aW9uVHJlZSwKICAgICAgICBzZWFyY2g6IFNlYXJjaFBhbmVsLAogICAgICAgIGVudHJ5X2xpc3Q6IEVudHJ5TGlzdFZpZXcsCiAgICAgICAgZGV0YWlsczogRW50cnlEZXRhaWxzU3RhY2ssCiAgICAgICAgdG9vbGJhcjogQXBwVG9vbEJhciwKICAgICkgLT4gTm9uZToKICAgICAgICBzZWxmLl9uYXZpZ2F0aW9uID0gbmF2aWdhdGlvbgogICAgICAgIHNlbGYuX3NlYXJjaCA9IHNlYXJjaAogICAgICAgIHNlbGYuX2VudHJ5X2xpc3QgPSBlbnRyeV9saXN0CiAgICAgICAgc2VsZi5fZGV0YWlscyA9IGRldGFpbHMKICAgICAgICBzZWxmLl90b29sYmFyID0gdG9vbGJhcgoKICAgICAgICBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb246IENvbGxlY3Rpb25LaW5kIHwgTm9uZSA9IE5vbmUKICAgICAgICBzZWxmLl9jdXJyZW50X2VudGl0eV9pZDogaW50IHwgTm9uZSA9IE5vbmUKCiAgICAgICAgc2VsZi5fb3JpZ2luYWxfYWxpYXNlczogc2V0W3N0cl0gPSBzZXQoKQogICAgICAgIHNlbGYuX2FkZGVkX2FsaWFzZXM6IHNldFtzdHJdID0gc2V0KCkKICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXM6IHNldFtzdHJdID0gc2V0KCkKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgU2lnbmFsIHdpcmluZwogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fbmF2aWdhdGlvbi5jb2xsZWN0aW9uU2VsZWN0ZWQuY29ubmVjdChzZWxmLm9uX2NvbGxlY3Rpb25fc2VsZWN0ZWQpCiAgICAgICAgc2VsZi5fZW50cnlfbGlzdC5lbnRyeVNlbGVjdGVkLmNvbm5lY3Qoc2VsZi5vbl9lbnRyeV9zZWxlY3RlZCkKCiAgICAgICAgc2VsZi5fc2VhcmNoLnNlYXJjaFRleHRDaGFuZ2VkLmNvbm5lY3Qoc2VsZi5vbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKQogICAgICAgIHNlbGYuX3NlYXJjaC5zZWFyY2hTdWJtaXR0ZWQuY29ubmVjdChzZWxmLm9uX3NlYXJjaF9zdWJtaXR0ZWQpCgogICAgICAgIHNlbGYuX2RldGFpbHMuZ2F6ZXR0ZWVyX3ZpZXcuYWxpYXNBZGRSZXF1ZXN0ZWQuY29ubmVjdCgKICAgICAgICAgICAgc2VsZi5vbl9hbGlhc19hZGRlZAogICAgICAgICkKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LmFsaWFzUmVtb3ZlUmVxdWVzdGVkLmNvbm5lY3QoCiAgICAgICAgICAgIHNlbGYub25fYWxpYXNfcmVtb3ZlZAogICAgICAgICkKCiAgICAgICAgIyBUb29sYmFyIGludGVudCBtYXBwaW5nIChhdXRob3JpdGF0aXZlKQogICAgICAgIHNlbGYuX3Rvb2xiYXIuZWRpdFJlcXVlc3RlZC5jb25uZWN0KHNlbGYub25fc2F2ZV9hbGlhc2VzKQogICAgICAgIHNlbGYuX3Rvb2xiYXIucmVzdG9yZVJlcXVlc3RlZC5jb25uZWN0KHNlbGYub25fY2FuY2VsX2FsaWFzZXMpCgogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2V0X21vZGUoRWRpdG9yTW9kZS5WSUVXKQogICAgICAgIHNlbGYuX3Rvb2xiYXIuc2V0X2FjdGlvbnNfZW5hYmxlZCgKICAgICAgICAgICAgYWRkPUZhbHNlLAogICAgICAgICAgICBlZGl0PUZhbHNlLAogICAgICAgICAgICByZW1vdmU9RmFsc2UsCiAgICAgICAgICAgIHJlc3RvcmU9RmFsc2UsCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIENvbGxlY3Rpb24gLyBlbnRpdHkgbG9hZGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgb25fY29sbGVjdGlvbl9zZWxlY3RlZChzZWxmLCBraW5kOiBDb2xsZWN0aW9uS2luZCkgLT4gTm9uZToKICAgICAgICBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gPSBraW5kCiAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgPSBOb25lCgogICAgICAgIGVudHJpZXMgPSBsaXN0X2FsaWFzZXMoa2luZD1raW5kKQogICAgICAgIHNlbGYuX2VudHJ5X2xpc3Quc2V0X2VudHJpZXMoZW50cmllcykKICAgICAgICBzZWxmLl9kZXRhaWxzLnNob3dfZW1wdHkoKQoKICAgIGRlZiBvbl9lbnRyeV9zZWxlY3RlZChzZWxmLCBlbnRyeV9pZDogaW50KSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfY29sbGVjdGlvbiBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgZW50aXR5ID0gbG9hZF9lbnRpdHkoc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uLCBlbnRyeV9pZCkKCiAgICAgICAgc2VsZi5fZGV0YWlscy5zaG93X2dhemV0dGVlcl92aWV3KCkKICAgICAgICBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3LnNldF9lbnRpdHlfdHlwZShzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24pCiAgICAgICAgc2VsZi5fZGV0YWlscy5nYXpldHRlZXJfdmlldy5zZXRfZW50aXR5X2RhdGEoZW50aXR5KQoKICAgICAgICBzZWxmLl9jdXJyZW50X2VudGl0eV9pZCA9IGVudHJ5X2lkCiAgICAgICAgc2VsZi5fb3JpZ2luYWxfYWxpYXNlcyA9IHNldChlbnRpdHkuYWxpYXNlcyBvciBbXSkKICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzLmNsZWFyKCkKICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXMuY2xlYXIoKQoKICAgICAgICAjIEVuYWJsZSBjb21taXQgLyBkaXNjYXJkCiAgICAgICAgc2VsZi5fdG9vbGJhci5zZXRfYWN0aW9uc19lbmFibGVkKAogICAgICAgICAgICBhZGQ9RmFsc2UsCiAgICAgICAgICAgIGVkaXQ9VHJ1ZSwKICAgICAgICAgICAgcmVtb3ZlPUZhbHNlLAogICAgICAgICAgICByZXN0b3JlPVRydWUsCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlYXJjaCBoYW5kbGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgb25fc2VhcmNoX3RleHRfY2hhbmdlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgaWYgc2VsZi5fY3VycmVudF9jb2xsZWN0aW9uIGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigiU2VhcmNoIGludm9rZWQgd2l0aG91dCBhY3RpdmUgY29sbGVjdGlvbiIpCgogICAgICAgIGVudHJpZXMgPSBsaXN0X2FsaWFzZXMoCiAgICAgICAgICAgIGtpbmQ9c2VsZi5fY3VycmVudF9jb2xsZWN0aW9uLAogICAgICAgICAgICBzZWFyY2hfdGV4dD10ZXh0LAogICAgICAgICkKICAgICAgICBzZWxmLl9lbnRyeV9saXN0LnNldF9lbnRyaWVzKGVudHJpZXMpCiAgICAgICAgc2VsZi5fZGV0YWlscy5zaG93X2VtcHR5KCkKCiAgICBkZWYgb25fc2VhcmNoX3N1Ym1pdHRlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5vbl9zZWFyY2hfdGV4dF9jaGFuZ2VkKHRleHQpCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgQWxpYXMgZWRpdGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgb25fYWxpYXNfYWRkZWQoc2VsZiwgYWxpYXM6IHN0cikgLT4gTm9uZToKICAgICAgICBhbGlhcyA9IGFsaWFzLnN0cmlwKCkKICAgICAgICBpZiBub3QgYWxpYXMgb3IgYWxpYXMgaW4gc2VsZi5fb3JpZ2luYWxfYWxpYXNlczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuX2FkZGVkX2FsaWFzZXMuYWRkKGFsaWFzKQogICAgICAgIHNlbGYuX3JlbW92ZWRfYWxpYXNlcy5kaXNjYXJkKGFsaWFzKQogICAgICAgIHNlbGYuX3JlZnJlc2hfYWxpYXNfdmlldygpCgogICAgZGVmIG9uX2FsaWFzX3JlbW92ZWQoc2VsZiwgYWxpYXM6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBhbGlhcyBpbiBzZWxmLl9hZGRlZF9hbGlhc2VzOgogICAgICAgICAgICBzZWxmLl9hZGRlZF9hbGlhc2VzLnJlbW92ZShhbGlhcykKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9yZW1vdmVkX2FsaWFzZXMuYWRkKGFsaWFzKQoKICAgICAgICBzZWxmLl9yZWZyZXNoX2FsaWFzX3ZpZXcoKQoKICAgIGRlZiBfcmVmcmVzaF9hbGlhc192aWV3KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgYWxpYXNlcyA9ICgKICAgICAgICAgICAgc2VsZi5fb3JpZ2luYWxfYWxpYXNlcyB8IHNlbGYuX2FkZGVkX2FsaWFzZXMKICAgICAgICApIC0gc2VsZi5fcmVtb3ZlZF9hbGlhc2VzCgogICAgICAgIHZpZXcgPSBzZWxmLl9kZXRhaWxzLmdhemV0dGVlcl92aWV3CiAgICAgICAgdmlldy5fYWxpYXNlc19saXN0LmNsZWFyKCkKICAgICAgICB2aWV3Ll9hbGlhc2VzX2xpc3QuYWRkSXRlbXMoc29ydGVkKGFsaWFzZXMpKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIENvbW1pdCAvIGRpc2NhcmQKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIG9uX3NhdmVfYWxpYXNlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmICgKICAgICAgICAgICAgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgaXMgTm9uZQogICAgICAgICAgICBvciBzZWxmLl9jdXJyZW50X2NvbGxlY3Rpb24gaXMgTm9uZQogICAgICAgICAgICBvciBub3QgKHNlbGYuX2FkZGVkX2FsaWFzZXMgb3Igc2VsZi5fcmVtb3ZlZF9hbGlhc2VzKQogICAgICAgICk6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBkb21haW4gPSBfRE9NQUlOX0ZPUl9DT0xMRUNUSU9OW3NlbGYuX2N1cnJlbnRfY29sbGVjdGlvbl0KCiAgICAgICAgYXBwbHlfYWxpYXNfY2hhbmdlcygKICAgICAgICAgICAgZG9tYWluPWRvbWFpbiwKICAgICAgICAgICAgZW50aXR5X2lkcz1bc2VsZi5fY3VycmVudF9lbnRpdHlfaWRdLAogICAgICAgICAgICBhZGRlZD1zZWxmLl9hZGRlZF9hbGlhc2VzLAogICAgICAgICAgICByZW1vdmVkPXNlbGYuX3JlbW92ZWRfYWxpYXNlcywKICAgICAgICApCgogICAgICAgIHNlbGYub25fZW50cnlfc2VsZWN0ZWQoc2VsZi5fY3VycmVudF9lbnRpdHlfaWQpCgogICAgZGVmIG9uX2NhbmNlbF9hbGlhc2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgc2VsZi5fY3VycmVudF9lbnRpdHlfaWQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYub25fZW50cnlfc2VsZWN0ZWQoc2VsZi5fY3VycmVudF9lbnRpdHlfaWQpCgAAAAAAAAAAXhgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAXhgAAAAAAABeGAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/widgets/search_panel.py",
			"settings":
			{
				"buffer_size": 3077,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAABgwAAAAAAADJCAAAIyBzcmMvZGJlZGl0YzIvd2lkZ2V0cy9zZWFyY2hfcGFuZWwucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0Q29yZSBpbXBvcnQgU2lnbmFsCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0ICgKICAgIFFXaWRnZXQsCiAgICBRSEJveExheW91dCwKICAgIFFMaW5lRWRpdCwKICAgIFFDb21ib0JveCwKICAgIFFMYWJlbCwKKQoKZnJvbSBkYmVkaXRjMi5lbnVtcyBpbXBvcnQgQ29sbGVjdGlvbktpbmQKCgpjbGFzcyBTZWFyY2hQYW5lbChRV2lkZ2V0KToKICAgICIiIgogICAgU2NvcGVkIHNlYXJjaCBwYW5lbC4KCiAgICBQcm92aWRlczoKICAgIC0gU2VhcmNoIHRleHQgZmllbGQKICAgIC0gQ29sbGVjdGlvbiBzY29wZSBzZWxlY3RvcgogICAgLSBTZW1hbnRpYyBmaWVsZCBzZWxlY3RvcgoKICAgIEVtaXRzIHNlYXJjaCBpbnRlbnQgb25seS4KICAgICIiIgoKICAgIHNlYXJjaFRleHRDaGFuZ2VkID0gU2lnbmFsKHN0cikKICAgIHNlYXJjaFN1Ym1pdHRlZCA9IFNpZ25hbChzdHIpCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHBhcmVudD1Ob25lKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkuX19pbml0X18ocGFyZW50KQoKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdCA9IFFMaW5lRWRpdChzZWxmKQogICAgICAgIHNlbGYuX3NlYXJjaF9lZGl0LnNldFBsYWNlaG9sZGVyVGV4dCgiU2VhcmNoLi4uIikKCiAgICAgICAgc2VsZi5fY29sbGVjdGlvbl9jb21ibyA9IFFDb21ib0JveChzZWxmKQogICAgICAgIHNlbGYuX2ZpZWxkX2NvbWJvID0gUUNvbWJvQm94KHNlbGYpCgogICAgICAgIGxheW91dCA9IFFIQm94TGF5b3V0KHNlbGYpCiAgICAgICAgbGF5b3V0LnNldENvbnRlbnRzTWFyZ2lucygwLCAwLCAwLCAwKQoKICAgICAgICBsYXlvdXQuYWRkV2lkZ2V0KFFMYWJlbCgiU2VhcmNoOiIsIHNlbGYpKQogICAgICAgIGxheW91dC5hZGRXaWRnZXQoc2VsZi5fc2VhcmNoX2VkaXQsIHN0cmV0Y2g9MSkKICAgICAgICBsYXlvdXQuYWRkV2lkZ2V0KFFMYWJlbCgiSW46Iiwgc2VsZikpCiAgICAgICAgbGF5b3V0LmFkZFdpZGdldChzZWxmLl9jb2xsZWN0aW9uX2NvbWJvKQogICAgICAgIGxheW91dC5hZGRXaWRnZXQoUUxhYmVsKCJCeToiLCBzZWxmKSkKICAgICAgICBsYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2ZpZWxkX2NvbWJvKQoKICAgICAgICBzZWxmLl9wb3B1bGF0ZV9jb2xsZWN0aW9ucygpCgogICAgICAgIHNlbGYuX3NlYXJjaF9lZGl0LnRleHRDaGFuZ2VkLmNvbm5lY3Qoc2VsZi5zZWFyY2hUZXh0Q2hhbmdlZCkKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdC5yZXR1cm5QcmVzc2VkLmNvbm5lY3QoCiAgICAgICAgICAgIGxhbWJkYTogc2VsZi5zZWFyY2hTdWJtaXR0ZWQuZW1pdChzZWxmLl9zZWFyY2hfZWRpdC50ZXh0KCkpCiAgICAgICAgKQoKICAgIGRlZiBfcG9wdWxhdGVfY29sbGVjdGlvbnMoc2VsZikgLT4gTm9uZToKICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2NvbWJvLmNsZWFyKCkKICAgICAgICBmb3Iga2luZCBpbiBDb2xsZWN0aW9uS2luZDoKICAgICAgICAgICAgc2VsZi5fY29sbGVjdGlvbl9jb21iby5hZGRJdGVtKGtpbmQubmFtZS5yZXBsYWNlKCJfIiwgIiAiKS50aXRsZSgpLCBraW5kKQoKICAgIGRlZiBzZXRfY29sbGVjdGlvbihzZWxmLCBraW5kOiBDb2xsZWN0aW9uS2luZCkgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBTZXQgdGhlIGN1cnJlbnQgY29sbGVjdGlvbiBzY29wZS4KICAgICAgICAiIiIKICAgICAgICBpbmRleCA9IHNlbGYuX2NvbGxlY3Rpb25fY29tYm8uZmluZERhdGEoa2luZCkKICAgICAgICBpZiBpbmRleCA+PSAwOgogICAgICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2NvbWJvLnNldEN1cnJlbnRJbmRleChpbmRleCkKCiAgICBkZWYgc2V0X3NlYXJjaF9maWVsZHMoc2VsZiwgZmllbGRzOiBsaXN0W3N0cl0pIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgUG9wdWxhdGUgdGhlIHNlbWFudGljIGZpZWxkIHNlbGVjdG9yLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX2ZpZWxkX2NvbWJvLmNsZWFyKCkKICAgICAgICBmb3IgZmllbGQgaW4gZmllbGRzOgogICAgICAgICAgICBzZWxmLl9maWVsZF9jb21iby5hZGRJdGVtKGZpZWxkKQoKICAgIGRlZiBjbGVhcihzZWxmKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIENsZWFyIHRoZSBzZWFyY2ggaW5wdXQuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQuY2xlYXIoKQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAADJCAAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAJDAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0Q29yZSBpbXBvcnQgU2lnbmFsCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0ICgKICAgIFFXaWRnZXQsCiAgICBRSEJveExheW91dCwKICAgIFFMaW5lRWRpdCwKICAgIFFDb21ib0JveCwKICAgIFFMYWJlbCwKKQoKZnJvbSBkYmVkaXRjMi5lbnVtcyBpbXBvcnQgQ29sbGVjdGlvbktpbmQKCgpjbGFzcyBTZWFyY2hQYW5lbChRV2lkZ2V0KToKICAgICIiIgogICAgU2NvcGVkIHNlYXJjaCBwYW5lbC4KCiAgICBQcm92aWRlczoKICAgIC0gU2VhcmNoIHRleHQgZmllbGQKICAgIC0gQ29sbGVjdGlvbiBzY29wZSBzZWxlY3RvciAoZGlzcGxheSBvbmx5IGZvciBub3cpCiAgICAtIFNlbWFudGljIGZpZWxkIHNlbGVjdG9yIChsb2NrZWQgdG8gQWxpYXMgZm9yIG5vdykKCiAgICBFbWl0czoKICAgIC0gc2VhcmNoVGV4dENoYW5nZWQoc3RyKQogICAgLSBzZWFyY2hTdWJtaXR0ZWQoc3RyKQogICAgIiIiCgogICAgc2VhcmNoVGV4dENoYW5nZWQgPSBTaWduYWwoc3RyKQogICAgc2VhcmNoU3VibWl0dGVkID0gU2lnbmFsKHN0cikKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFyZW50PU5vbmUpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhwYXJlbnQpCgogICAgICAgIHNlbGYuX3NlYXJjaF9lZGl0ID0gUUxpbmVFZGl0KHNlbGYpCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQuc2V0UGxhY2Vob2xkZXJUZXh0KCJTZWFyY2guLi4iKQoKICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2NvbWJvID0gUUNvbWJvQm94KHNlbGYpCiAgICAgICAgc2VsZi5fZmllbGRfY29tYm8gPSBRQ29tYm9Cb3goc2VsZikKCiAgICAgICAgbGF5b3V0ID0gUUhCb3hMYXlvdXQoc2VsZikKICAgICAgICBsYXlvdXQuc2V0Q29udGVudHNNYXJnaW5zKDAsIDAsIDAsIDApCgogICAgICAgIGxheW91dC5hZGRXaWRnZXQoUUxhYmVsKCJTZWFyY2g6Iiwgc2VsZikpCiAgICAgICAgbGF5b3V0LmFkZFdpZGdldChzZWxmLl9zZWFyY2hfZWRpdCwgc3RyZXRjaD0xKQogICAgICAgIGxheW91dC5hZGRXaWRnZXQoUUxhYmVsKCJJbjoiLCBzZWxmKSkKICAgICAgICBsYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2NvbGxlY3Rpb25fY29tYm8pCiAgICAgICAgbGF5b3V0LmFkZFdpZGdldChRTGFiZWwoIkJ5OiIsIHNlbGYpKQogICAgICAgIGxheW91dC5hZGRXaWRnZXQoc2VsZi5fZmllbGRfY29tYm8pCgogICAgICAgIHNlbGYuX3BvcHVsYXRlX2NvbGxlY3Rpb25zKCkKICAgICAgICBzZWxmLl9wb3B1bGF0ZV9maWVsZHMoKQoKICAgICAgICAjIC0tLSBTaWduYWwgd2lyaW5nIC0tLQogICAgICAgIHNlbGYuX3NlYXJjaF9lZGl0LnRleHRDaGFuZ2VkLmNvbm5lY3QoCiAgICAgICAgICAgIHNlbGYuc2VhcmNoVGV4dENoYW5nZWQuZW1pdAogICAgICAgICkKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdC5yZXR1cm5QcmVzc2VkLmNvbm5lY3QoCiAgICAgICAgICAgIGxhbWJkYTogc2VsZi5zZWFyY2hTdWJtaXR0ZWQuZW1pdChzZWxmLl9zZWFyY2hfZWRpdC50ZXh0KCkpCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9wb3B1bGF0ZV9jb2xsZWN0aW9ucyhzZWxmKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIFBvcHVsYXRlIGNvbGxlY3Rpb24gc2VsZWN0b3IgKGRpc3BsYXktb25seSBmb3Igbm93KS4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2NvbWJvLmNsZWFyKCkKICAgICAgICBmb3Iga2luZCBpbiBDb2xsZWN0aW9uS2luZDoKICAgICAgICAgICAgc2VsZi5fY29sbGVjdGlvbl9jb21iby5hZGRJdGVtKAogICAgICAgICAgICAgICAga2luZC5uYW1lLnJlcGxhY2UoIl8iLCAiICIpLnRpdGxlKCksCiAgICAgICAgICAgICAgICBraW5kLAogICAgICAgICAgICApCgogICAgICAgICMg8J+UkiBDb2xsZWN0aW9uIHNlbGVjdGlvbiBpcyBkcml2ZW4gZWxzZXdoZXJlIChOYXZpZ2F0aW9uVHJlZSkKICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2NvbWJvLnNldEVuYWJsZWQoRmFsc2UpCgogICAgZGVmIF9wb3B1bGF0ZV9maWVsZHMoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBQb3B1bGF0ZSBzZW1hbnRpYyBsb29rdXAgZmllbGRzLgoKICAgICAgICBGb3Igbm93OgogICAgICAgIC0gQWxpYXMgaXMgdGhlIG9ubHkgc3VwcG9ydGVkIGxvb2t1cCBtb2RlCiAgICAgICAgLSBPdGhlciBtb2RlcyBhcmUgc2hvd24gYnV0IGRpc2FibGVkCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fZmllbGRfY29tYm8uY2xlYXIoKQogICAgICAgIHNlbGYuX2ZpZWxkX2NvbWJvLmFkZEl0ZW0oIkFsaWFzIikKCiAgICAgICAgIyBGdXR1cmUgKG5vdCB5ZXQgaW1wbGVtZW50ZWQpCiAgICAgICAgc2VsZi5fZmllbGRfY29tYm8uYWRkSXRlbSgiT1NNIElEIikKICAgICAgICBzZWxmLl9maWVsZF9jb21iby5hZGRJdGVtKCJXaWtpZGF0YSIpCgogICAgICAgIHNlbGYuX2ZpZWxkX2NvbWJvLnNldEN1cnJlbnRJbmRleCgwKQogICAgICAgIHNlbGYuX2ZpZWxkX2NvbWJvLnNldEVuYWJsZWQoRmFsc2UpCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgc2V0X2NvbGxlY3Rpb24oc2VsZiwga2luZDogQ29sbGVjdGlvbktpbmQpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgU2V0IHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gc2NvcGUgKHZpc3VhbCBvbmx5KS4KICAgICAgICAiIiIKICAgICAgICBpbmRleCA9IHNlbGYuX2NvbGxlY3Rpb25fY29tYm8uZmluZERhdGEoa2luZCkKICAgICAgICBpZiBpbmRleCA+PSAwOgogICAgICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2NvbWJvLnNldEN1cnJlbnRJbmRleChpbmRleCkKCiAgICBkZWYgY2xlYXIoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBDbGVhciB0aGUgc2VhcmNoIGlucHV0LgogICAgICAgICIiIgogICAgICAgIHNlbGYuX3NlYXJjaF9lZGl0LmNsZWFyKCkKAAAAAAAAAAAGDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABgwAAAAAAAAGDAAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"insert",
					{
						"characters": "d"
					},
					"AQAAAGUIAAAAAAAAZggAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAZQgAAAAAAABmCAAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					1,
					"left_delete",
					null,
					"AQAAAGUIAAAAAAAAZQgAAAAAAAABAAAAZA",
					"AQAAAAAAAAABAAAAZggAAAAAAABmCAAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAIDAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0Q29yZSBpbXBvcnQgU2lnbmFsCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0ICgKICAgIFFXaWRnZXQsCiAgICBRSEJveExheW91dCwKICAgIFFMaW5lRWRpdCwKICAgIFFDb21ib0JveCwKICAgIFFMYWJlbCwKKQoKZnJvbSBkYmVkaXRjMi5lbnVtcyBpbXBvcnQgQ29sbGVjdGlvbktpbmQKCgpjbGFzcyBTZWFyY2hQYW5lbChRV2lkZ2V0KToKICAgICIiIgogICAgU2NvcGVkIHNlYXJjaCBwYW5lbC4KCiAgICBQcm92aWRlczoKICAgIC0gU2VhcmNoIHRleHQgZmllbGQKICAgIC0gQ29sbGVjdGlvbiBzY29wZSBzZWxlY3RvciAoZGlzcGxheSBvbmx5IGZvciBub3cpCiAgICAtIFNlbWFudGljIGZpZWxkIHNlbGVjdG9yIChsb2NrZWQgdG8gQWxpYXMgZm9yIG5vdykKCiAgICBFbWl0czoKICAgIC0gc2VhcmNoVGV4dENoYW5nZWQoc3RyKQogICAgLSBzZWFyY2hTdWJtaXR0ZWQoc3RyKQogICAgIiIiCgogICAgc2VhcmNoVGV4dENoYW5nZWQgPSBTaWduYWwoc3RyKQogICAgc2VhcmNoU3VibWl0dGVkID0gU2lnbmFsKHN0cikKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFyZW50PU5vbmUpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhwYXJlbnQpCgogICAgICAgIHNlbGYuX3NlYXJjaF9lZGl0ID0gUUxpbmVFZGl0KHNlbGYpCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQuc2V0UGxhY2Vob2xkZXJUZXh0KCJTZWFyY2guLi4iKQoKICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2NvbWJvID0gUUNvbWJvQm94KHNlbGYpCiAgICAgICAgc2VsZi5fZmllbGRfY29tYm8gPSBRQ29tYm9Cb3goc2VsZikKCiAgICAgICAgbGF5b3V0ID0gUUhCb3hMYXlvdXQoc2VsZikKICAgICAgICBsYXlvdXQuc2V0Q29udGVudHNNYXJnaW5zKDAsIDAsIDAsIDApCgogICAgICAgIGxheW91dC5hZGRXaWRnZXQoUUxhYmVsKCJTZWFyY2g6Iiwgc2VsZikpCiAgICAgICAgbGF5b3V0LmFkZFdpZGdldChzZWxmLl9zZWFyY2hfZWRpdCwgc3RyZXRjaD0xKQogICAgICAgIGxheW91dC5hZGRXaWRnZXQoUUxhYmVsKCJJbjoiLCBzZWxmKSkKICAgICAgICBsYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2NvbGxlY3Rpb25fY29tYm8pCiAgICAgICAgbGF5b3V0LmFkZFdpZGdldChRTGFiZWwoIkJ5OiIsIHNlbGYpKQogICAgICAgIGxheW91dC5hZGRXaWRnZXQoc2VsZi5fZmllbGRfY29tYm8pCgogICAgICAgIHNlbGYuX3BvcHVsYXRlX2NvbGxlY3Rpb25zKCkKICAgICAgICBzZWxmLl9wb3B1bGF0ZV9maWVsZHMoKQoKICAgICAgICAjIC0tLSBTaWduYWwgd2lyaW5nIC0tLQogICAgICAgIHNlbGYuX3NlYXJjaF9lZGl0LnRleHRDaGFuZ2VkLmNvbm5lY3QoCiAgICAgICAgICAgIHNlbGYuc2VhcmNoVGV4dENoYW5nZWQuZW1pdAogICAgICAgICkKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdC5yZXR1cm5QcmVzc2VkLmNvbm5lY3QoCiAgICAgICAgICAgIGxhbWJkYTogc2VsZi5zZWFyY2hTdWJtaXR0ZWQuZW1pdChzZWxmLl9zZWFyY2hfZWRpdC50ZXh0KCkpCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9wb3B1bGF0ZV9jb2xsZWN0aW9ucyhzZWxmKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIFBvcHVsYXRlIGNvbGxlY3Rpb24gc2VsZWN0b3IgKGRpc3BsYXktb25seSBmb3Igbm93KS4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2NvbWJvLmNsZWFyKCkKICAgICAgICBmb3Iga2luZCBpbiBDb2xsZWN0aW9uS2luZDoKICAgICAgICAgICAgc2VsZi5fY29sbGVjdGlvbl9jb21iby5hZGRJdGVtKAogICAgICAgICAgICAgICAga2luZC5uYW1lLnJlcGxhY2UoIl8iLCAiICIpLnRpdGxlKCksCiAgICAgICAgICAgICAgICBraW5kLAogICAgICAgICAgICApCgogICAgICAgICMg8J+UkiBDb2xsZWN0aW9uIHNlbGVjdGlvbiBpcyBkcml2ZW4gZWxzZXdoZXJlIChOYXZpZ2F0aW9uVHJlZSkKICAgICAgICBzZWxmLl9jb2xsZWN0aW9uX2NvbWJvLnNldEVuYWJsZWQoRmFsc2UpCgogICAgZGVmIF9wb3B1bGF0ZV9maWVsZHMoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgIFBvcHVsYXRlIHNlbWFudGljIGxvb2t1cCBmaWVsZHMuCgogICAgICAgIEZvciBub3c6CiAgICAgICAgLSBBbGlhcyBpcyB0aGUgb25seSBzdXBwb3J0ZWQgbG9va3VwIG1vZGUKICAgICAgICAtIE90aGVyIG1vZGVzIGFyZSBzaG93biBidXQgZGlzYWJsZWQKICAgICAgICAiIiIKICAgICAgICBzZWxmLl9maWVsZF9jb21iby5jbGVhcigpCiAgICAgICAgc2VsZi5fZmllbGRfY29tYm8uYWRkSXRlbSgiQWxpYXMiKQoKICAgICAgICAjIEZ1dHVyZSAobm90IHlldCBpbXBsZW1lbnRlZCkKICAgICAgICBzZWxmLl9maWVsZF9jb21iby5hZGRJdGVtKCJPU00gSUQiKQogICAgICAgIHNlbGYuX2ZpZWxkX2NvbWJvLmFkZEl0ZW0oIldpa2lkYXRhIikKCiAgICAgICAgc2VsZi5fZmllbGRfY29tYm8uc2V0Q3VycmVudEluZGV4KDApCiAgICAgICAgc2VsZi5fZmllbGRfY29tYm8uc2V0RW5hYmxlZChGYWxzZSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBzZXRfY29sbGVjdGlvbihzZWxmLCBraW5kOiBDb2xsZWN0aW9uS2luZCkgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBTZXQgdGhlIGN1cnJlbnQgY29sbGVjdGlvbiBzY29wZSAodmlzdWFsIG9ubHkpLgogICAgICAgICIiIgogICAgICAgIGluZGV4ID0gc2VsZi5fY29sbGVjdGlvbl9jb21iby5maW5kRGF0YShraW5kKQogICAgICAgIGlmIGluZGV4ID49IDA6CiAgICAgICAgICAgIHNlbGYuX2NvbGxlY3Rpb25fY29tYm8uc2V0Q3VycmVudEluZGV4KGluZGV4KQoKICAgIGRlZiBjbGVhcihzZWxmKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIENsZWFyIHRoZSBzZWFyY2ggaW5wdXQuCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQuY2xlYXIoKQoAAAAAAAAAAAUMAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAZQgAAAAAAABlCAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/widgets/navigation_tree.py",
			"settings":
			{
				"buffer_size": 2643,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					12,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAUwoAAAAAAAA+CQAAIyBzcmMvZGJlZGl0YzIvd2lkZ2V0cy9uYXZpZ2F0aW9uX3RyZWUucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0Q29yZSBpbXBvcnQgU2lnbmFsCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0IFFUcmVlV2lkZ2V0LCBRVHJlZVdpZGdldEl0ZW0KCmZyb20gZGJlZGl0YzIuZW51bXMgaW1wb3J0IENvbGxlY3Rpb25LaW5kCgoKY2xhc3MgTmF2aWdhdGlvblRyZWUoUVRyZWVXaWRnZXQpOgogICAgIiIiCiAgICBTZW1hbnRpYyBuYXZpZ2F0aW9uIHRyZWUgZm9yIHRoZSBlZGl0b3IuCgogICAgUHJlc2VudHMgY29uY2VwdHVhbCBncm91cGluZ3MgKEdhemV0dGVlciwgTGV4aWNvbiksCiAgICBub3QgZGF0YWJhc2UgdGFibGVzIG9yIHNjaGVtYSBlbGVtZW50cy4KICAgICIiIgoKICAgIGNvbGxlY3Rpb25TZWxlY3RlZCA9IFNpZ25hbChDb2xsZWN0aW9uS2luZCkKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFyZW50PU5vbmUpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhwYXJlbnQpCgogICAgICAgIHNlbGYuc2V0SGVhZGVySGlkZGVuKFRydWUpCgogICAgICAgIHNlbGYuX2l0ZW1fdG9fY29sbGVjdGlvbjogZGljdFtRVHJlZVdpZGdldEl0ZW0sIENvbGxlY3Rpb25LaW5kXSA9IHt9CgogICAgICAgIHNlbGYuX2J1aWxkX3RyZWUoKQogICAgICAgIHNlbGYuaXRlbVNlbGVjdGlvbkNoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9zZWxlY3Rpb25fY2hhbmdlZCkKCiAgICBkZWYgX2J1aWxkX3RyZWUoc2VsZikgLT4gTm9uZToKICAgICAgICAjIFJvb3QgaXRlbXMKICAgICAgICBnYXpldHRlZXJfcm9vdCA9IFFUcmVlV2lkZ2V0SXRlbShzZWxmLCBbIkdhemV0dGVlciJdKQogICAgICAgIGxleGljb25fcm9vdCA9IFFUcmVlV2lkZ2V0SXRlbShzZWxmLCBbIkxleGljb24iXSkKCiAgICAgICAgIyBHYXpldHRlZXIgY29sbGVjdGlvbnMKICAgICAgICBzZWxmLl9hZGRfY2hpbGQoZ2F6ZXR0ZWVyX3Jvb3QsICJMb2NhdGlvbnMiLCBDb2xsZWN0aW9uS2luZC5MT0NBVElPTlMpCiAgICAgICAgc2VsZi5fYWRkX2NoaWxkKGdhemV0dGVlcl9yb290LCAiUmVnaW9ucyIsIENvbGxlY3Rpb25LaW5kLlJFR0lPTlMpCiAgICAgICAgc2VsZi5fYWRkX2NoaWxkKGdhemV0dGVlcl9yb290LCAiR3JvdXBzIiwgQ29sbGVjdGlvbktpbmQuR1JPVVBTKQogICAgICAgIHNlbGYuX2FkZF9jaGlsZChnYXpldHRlZXJfcm9vdCwgIkRpcmVjdGlvbnMiLCBDb2xsZWN0aW9uS2luZC5ESVJFQ1RJT05TKQoKICAgICAgICAjIExleGljb24gY29sbGVjdGlvbnMKICAgICAgICBzZWxmLl9hZGRfY2hpbGQobGV4aWNvbl9yb290LCAiRXZlbnQgcGhyYXNlcyIsIENvbGxlY3Rpb25LaW5kLkVWRU5UX1BIUkFTRVMpCiAgICAgICAgc2VsZi5fYWRkX2NoaWxkKGxleGljb25fcm9vdCwgIkNvbnRleHQgcGhyYXNlcyIsIENvbGxlY3Rpb25LaW5kLkNPTlRFWFRfUEhSQVNFUykKCiAgICAgICAgc2VsZi5leHBhbmRBbGwoKQoKICAgIGRlZiBfYWRkX2NoaWxkKAogICAgICAgIHNlbGYsCiAgICAgICAgcGFyZW50OiBRVHJlZVdpZGdldEl0ZW0sCiAgICAgICAgbGFiZWw6IHN0ciwKICAgICAgICBjb2xsZWN0aW9uOiBDb2xsZWN0aW9uS2luZCwKICAgICkgLT4gTm9uZToKICAgICAgICBpdGVtID0gUVRyZWVXaWRnZXRJdGVtKHBhcmVudCwgW2xhYmVsXSkKICAgICAgICBzZWxmLl9pdGVtX3RvX2NvbGxlY3Rpb25baXRlbV0gPSBjb2xsZWN0aW9uCgogICAgZGVmIF9vbl9zZWxlY3Rpb25fY2hhbmdlZChzZWxmKSAtPiBOb25lOgogICAgICAgIHNlbGVjdGVkX2l0ZW1zID0gc2VsZi5zZWxlY3RlZEl0ZW1zKCkKICAgICAgICBpZiBub3Qgc2VsZWN0ZWRfaXRlbXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpdGVtID0gc2VsZWN0ZWRfaXRlbXNbMF0KICAgICAgICBjb2xsZWN0aW9uID0gc2VsZi5faXRlbV90b19jb2xsZWN0aW9uLmdldChpdGVtKQogICAgICAgIGlmIGNvbGxlY3Rpb24gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuY29sbGVjdGlvblNlbGVjdGVkLmVtaXQoY29sbGVjdGlvbikKCiAgICBkZWYgc2V0X2N1cnJlbnQoc2VsZiwgY29sbGVjdGlvbjogQ29sbGVjdGlvbktpbmQpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgUHJvZ3JhbW1hdGljYWxseSBzZWxlY3QgYSBjb2xsZWN0aW9uIGluIHRoZSB0cmVlLgogICAgICAgICIiIgogICAgICAgIGZvciBpdGVtLCBraW5kIGluIHNlbGYuX2l0ZW1fdG9fY29sbGVjdGlvbi5pdGVtcygpOgogICAgICAgICAgICBpZiBraW5kID09IGNvbGxlY3Rpb246CiAgICAgICAgICAgICAgICBzZWxmLnNldEN1cnJlbnRJdGVtKGl0ZW0pCiAgICAgICAgICAgICAgICBicmVhawo",
					"AQAAAAAAAAABAAAAAAAAAAAAAAA+CQAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABWCgAAIyBzcmMvZGJlZGl0YzIvd2lkZ2V0cy9uYXZpZ2F0aW9uX3RyZWUucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0Q29yZSBpbXBvcnQgU2lnbmFsCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0IFFUcmVlV2lkZ2V0LCBRVHJlZVdpZGdldEl0ZW0KCmZyb20gZGJlZGl0YzIuZW51bXMgaW1wb3J0IENvbGxlY3Rpb25LaW5kCgoKY2xhc3MgTmF2aWdhdGlvblRyZWUoUVRyZWVXaWRnZXQpOgogICAgIiIiCiAgICBTZW1hbnRpYyBuYXZpZ2F0aW9uIHRyZWUgZm9yIHRoZSBlZGl0b3IuCgogICAgUHJlc2VudHMgY29uY2VwdHVhbCBncm91cGluZ3MgKEdhemV0dGVlciwgTGV4aWNvbiksCiAgICBub3QgZGF0YWJhc2UgdGFibGVzIG9yIHNjaGVtYSBlbGVtZW50cy4KICAgICIiIgoKICAgIGNvbGxlY3Rpb25TZWxlY3RlZCA9IFNpZ25hbChDb2xsZWN0aW9uS2luZCkKCiAgICBkZWYgX19pbml0X18oc2VsZiwgcGFyZW50PU5vbmUpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXyhwYXJlbnQpCgogICAgICAgIHNlbGYuc2V0SGVhZGVySGlkZGVuKFRydWUpCgogICAgICAgIHNlbGYuX2l0ZW1fdG9fY29sbGVjdGlvbjogZGljdFtRVHJlZVdpZGdldEl0ZW0sIENvbGxlY3Rpb25LaW5kXSA9IHt9CgogICAgICAgIHNlbGYuX2J1aWxkX3RyZWUoKQogICAgICAgIHNlbGYuaXRlbVNlbGVjdGlvbkNoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9zZWxlY3Rpb25fY2hhbmdlZCkKCiAgICAgICAgIyDwn5S5IElNUE9SVEFOVDogc2VsZWN0IGRlZmF1bHQgY29sbGVjdGlvbgogICAgICAgIHNlbGYuX3NlbGVjdF9kZWZhdWx0KCkKCiAgICBkZWYgX2J1aWxkX3RyZWUoc2VsZikgLT4gTm9uZToKICAgICAgICAjIFJvb3QgaXRlbXMKICAgICAgICBnYXpldHRlZXJfcm9vdCA9IFFUcmVlV2lkZ2V0SXRlbShzZWxmLCBbIkdhemV0dGVlciJdKQogICAgICAgIGxleGljb25fcm9vdCA9IFFUcmVlV2lkZ2V0SXRlbShzZWxmLCBbIkxleGljb24iXSkKCiAgICAgICAgIyBHYXpldHRlZXIgY29sbGVjdGlvbnMKICAgICAgICBzZWxmLl9hZGRfY2hpbGQoZ2F6ZXR0ZWVyX3Jvb3QsICJMb2NhdGlvbnMiLCBDb2xsZWN0aW9uS2luZC5MT0NBVElPTlMpCiAgICAgICAgc2VsZi5fYWRkX2NoaWxkKGdhemV0dGVlcl9yb290LCAiUmVnaW9ucyIsIENvbGxlY3Rpb25LaW5kLlJFR0lPTlMpCiAgICAgICAgc2VsZi5fYWRkX2NoaWxkKGdhemV0dGVlcl9yb290LCAiR3JvdXBzIiwgQ29sbGVjdGlvbktpbmQuR1JPVVBTKQogICAgICAgIHNlbGYuX2FkZF9jaGlsZChnYXpldHRlZXJfcm9vdCwgIkRpcmVjdGlvbnMiLCBDb2xsZWN0aW9uS2luZC5ESVJFQ1RJT05TKQoKICAgICAgICAjIExleGljb24gY29sbGVjdGlvbnMKICAgICAgICBzZWxmLl9hZGRfY2hpbGQobGV4aWNvbl9yb290LCAiRXZlbnQgcGhyYXNlcyIsIENvbGxlY3Rpb25LaW5kLkVWRU5UX1BIUkFTRVMpCiAgICAgICAgc2VsZi5fYWRkX2NoaWxkKGxleGljb25fcm9vdCwgIkNvbnRleHQgcGhyYXNlcyIsIENvbGxlY3Rpb25LaW5kLkNPTlRFWFRfUEhSQVNFUykKCiAgICAgICAgc2VsZi5leHBhbmRBbGwoKQoKICAgIGRlZiBfYWRkX2NoaWxkKAogICAgICAgIHNlbGYsCiAgICAgICAgcGFyZW50OiBRVHJlZVdpZGdldEl0ZW0sCiAgICAgICAgbGFiZWw6IHN0ciwKICAgICAgICBjb2xsZWN0aW9uOiBDb2xsZWN0aW9uS2luZCwKICAgICkgLT4gTm9uZToKICAgICAgICBpdGVtID0gUVRyZWVXaWRnZXRJdGVtKHBhcmVudCwgW2xhYmVsXSkKICAgICAgICBzZWxmLl9pdGVtX3RvX2NvbGxlY3Rpb25baXRlbV0gPSBjb2xsZWN0aW9uCgogICAgZGVmIF9vbl9zZWxlY3Rpb25fY2hhbmdlZChzZWxmKSAtPiBOb25lOgogICAgICAgIHNlbGVjdGVkX2l0ZW1zID0gc2VsZi5zZWxlY3RlZEl0ZW1zKCkKICAgICAgICBpZiBub3Qgc2VsZWN0ZWRfaXRlbXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpdGVtID0gc2VsZWN0ZWRfaXRlbXNbMF0KICAgICAgICBjb2xsZWN0aW9uID0gc2VsZi5faXRlbV90b19jb2xsZWN0aW9uLmdldChpdGVtKQogICAgICAgIGlmIGNvbGxlY3Rpb24gaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHNlbGYuY29sbGVjdGlvblNlbGVjdGVkLmVtaXQoY29sbGVjdGlvbikKCiAgICBkZWYgX3NlbGVjdF9kZWZhdWx0KHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgU2VsZWN0IHRoZSBkZWZhdWx0IGNvbGxlY3Rpb24gb24gc3RhcnR1cC4KICAgICAgICAiIiIKICAgICAgICAjIERlZmF1bHQgdG8gTG9jYXRpb25zCiAgICAgICAgc2VsZi5zZXRfY3VycmVudChDb2xsZWN0aW9uS2luZC5MT0NBVElPTlMpCgogICAgZGVmIHNldF9jdXJyZW50KHNlbGYsIGNvbGxlY3Rpb246IENvbGxlY3Rpb25LaW5kKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIFByb2dyYW1tYXRpY2FsbHkgc2VsZWN0IGEgY29sbGVjdGlvbiBpbiB0aGUgdHJlZS4KICAgICAgICAiIiIKICAgICAgICBmb3IgaXRlbSwga2luZCBpbiBzZWxmLl9pdGVtX3RvX2NvbGxlY3Rpb24uaXRlbXMoKToKICAgICAgICAgICAgaWYga2luZCA9PSBjb2xsZWN0aW9uOgogICAgICAgICAgICAgICAgc2VsZi5zZXRDdXJyZW50SXRlbShpdGVtKQogICAgICAgICAgICAgICAgYnJlYWsKAAAAAAAAAABTCgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAUwoAAAAAAABTCgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/main_window.py",
			"settings":
			{
				"buffer_size": 1729,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					94,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAANiwAAAAAAAB/IgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0ICgKICAgIFFNYWluV2luZG93LAogICAgUVdpZGdldCwKICAgIFFMaXN0V2lkZ2V0LAogICAgUUxpc3RXaWRnZXRJdGVtLAogICAgUUxhYmVsLAogICAgUVZCb3hMYXlvdXQsCiAgICBRSEJveExheW91dCwKICAgIFFMaW5lRWRpdCwKICAgIFFQdXNoQnV0dG9uLAogICAgUUNvbWJvQm94LAogICAgUUZvcm1MYXlvdXQsCikKZnJvbSBQeVNpZGU2LlF0Q29yZSBpbXBvcnQgUXQKCmZyb20gc2l0cmVwYzIuY29uZmlnLnBhdGhzIGltcG9ydCBnYXpldHRlZXJfcGF0aAoKCmRlZiBub3JtYWxpemUodGV4dDogc3RyKSAtPiBzdHI6CiAgICByZXR1cm4gIiAiLmpvaW4odGV4dC5sb3dlcigpLnNwbGl0KCkpCgoKY2xhc3MgTWFpbldpbmRvdyhRTWFpbldpbmRvdyk6CiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKCiAgICAgICAgc2VsZi5zZXRXaW5kb3dUaXRsZSgiZGJlZGl0YzIg4oCUIGxvY2F0aW9uIGVkaXRvciIpCiAgICAgICAgc2VsZi5fZGJfcGF0aCA9IGdhemV0dGVlcl9wYXRoKCkKICAgICAgICBzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkOiBpbnQgfCBOb25lID0gTm9uZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTZWFyY2gKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIHNlbGYuX3NlYXJjaF9lZGl0ID0gUUxpbmVFZGl0KHNlbGYpCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQuc2V0UGxhY2Vob2xkZXJUZXh0KCJTZWFyY2jigKYiKQogICAgICAgIHNlbGYuX3NlYXJjaF9lZGl0LnRleHRDaGFuZ2VkLmNvbm5lY3Qoc2VsZi5fb25fc2VhcmNoX2NoYW5nZWQpCgogICAgICAgIHNlbGYuX2xvb2t1cF9tb2RlID0gUUNvbWJvQm94KHNlbGYpCiAgICAgICAgc2VsZi5fbG9va3VwX21vZGUuYWRkSXRlbXMoWyJhbGlhcyIsICJvc21faWQiLCAid2lraWRhdGEiXSkKICAgICAgICBzZWxmLl9sb29rdXBfbW9kZS5jdXJyZW50VGV4dENoYW5nZWQuY29ubmVjdCgKICAgICAgICAgICAgbGFtYmRhIF86IHNlbGYuX29uX3NlYXJjaF9jaGFuZ2VkKHNlbGYuX3NlYXJjaF9lZGl0LnRleHQoKSkKICAgICAgICApCgogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QgPSBRTGlzdFdpZGdldChzZWxmKQogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuaXRlbUNsaWNrZWQuY29ubmVjdChzZWxmLl9vbl9hbGlhc19jbGlja2VkKQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBEZXRhaWxzIGZvcm0KICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIHNlbGYuX2RldGFpbHNfd2lkZ2V0ID0gUVdpZGdldChzZWxmKQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0ID0gUVZCb3hMYXlvdXQoc2VsZi5fZGV0YWlsc193aWRnZXQpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuc2V0QWxpZ25tZW50KFF0LkFsaWduVG9wKQoKICAgICAgICBmb3JtID0gUUZvcm1MYXlvdXQoKQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0LmFkZExheW91dChmb3JtKQoKICAgICAgICBzZWxmLl9sYmxfbG9jYXRpb25faWQgPSBRTGFiZWwoIi0iKQogICAgICAgIHNlbGYuX2xibF9sYXQgPSBRTGFiZWwoIi0iKQogICAgICAgIHNlbGYuX2xibF9sb24gPSBRTGFiZWwoIi0iKQogICAgICAgIHNlbGYuX2xibF9yZWdpb24gPSBRTGFiZWwoIi0iKQoKICAgICAgICBzZWxmLl9lZGl0X25hbWUgPSBRTGluZUVkaXQoKQogICAgICAgIHNlbGYuX2VkaXRfcGxhY2UgPSBRTGluZUVkaXQoKQogICAgICAgIHNlbGYuX2VkaXRfd2lraWRhdGEgPSBRTGluZUVkaXQoKQoKICAgICAgICBmb3JtLmFkZFJvdygiTG9jYXRpb24gSUQ6Iiwgc2VsZi5fbGJsX2xvY2F0aW9uX2lkKQogICAgICAgIGZvcm0uYWRkUm93KCJMYXRpdHVkZToiLCBzZWxmLl9sYmxfbGF0KQogICAgICAgIGZvcm0uYWRkUm93KCJMb25naXR1ZGU6Iiwgc2VsZi5fbGJsX2xvbikKICAgICAgICBmb3JtLmFkZFJvdygiTmFtZToiLCBzZWxmLl9lZGl0X25hbWUpCiAgICAgICAgZm9ybS5hZGRSb3coIlBsYWNlOiIsIHNlbGYuX2VkaXRfcGxhY2UpCiAgICAgICAgZm9ybS5hZGRSb3coIldpa2lkYXRhOiIsIHNlbGYuX2VkaXRfd2lraWRhdGEpCiAgICAgICAgZm9ybS5hZGRSb3coIlJlZ2lvbjoiLCBzZWxmLl9sYmxfcmVnaW9uKQoKICAgICAgICBzZWxmLl9zYXZlX2J0biA9IFFQdXNoQnV0dG9uKCJTYXZlIGNoYW5nZXMiLCBzZWxmKQogICAgICAgIHNlbGYuX3NhdmVfYnRuLnNldEVuYWJsZWQoRmFsc2UpCiAgICAgICAgc2VsZi5fc2F2ZV9idG4uY2xpY2tlZC5jb25uZWN0KHNlbGYuX3NhdmVfbG9jYXRpb25fY2hhbmdlcykKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRXaWRnZXQoc2VsZi5fc2F2ZV9idG4pCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExheW91dAogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgbGVmdCA9IFFXaWRnZXQoc2VsZikKICAgICAgICBsZWZ0X2xheW91dCA9IFFWQm94TGF5b3V0KGxlZnQpCiAgICAgICAgbGVmdF9sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX3NlYXJjaF9lZGl0KQogICAgICAgIGxlZnRfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9sb29rdXBfbW9kZSkKICAgICAgICBsZWZ0X2xheW91dC5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfbGlzdCkKCiAgICAgICAgY2VudHJhbCA9IFFXaWRnZXQoc2VsZikKICAgICAgICBsYXlvdXQgPSBRSEJveExheW91dChjZW50cmFsKQogICAgICAgIGxheW91dC5hZGRXaWRnZXQobGVmdCwgMSkKICAgICAgICBsYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2RldGFpbHNfd2lkZ2V0LCAxKQogICAgICAgIHNlbGYuc2V0Q2VudHJhbFdpZGdldChjZW50cmFsKQoKICAgICAgICAjIEVuc3VyZSBzdGF0dXMgYmFyIGV4aXN0cwogICAgICAgIHNlbGYuc3RhdHVzQmFyKCkuc2hvd01lc3NhZ2UoIlJlYWR5IikKCiAgICAgICAgc2VsZi5fbG9hZF9ieV9hbGlhcygiIikKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlYXJjaCBsb2dpYwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfb25fc2VhcmNoX2NoYW5nZWQoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIG1vZGUgPSBzZWxmLl9sb29rdXBfbW9kZS5jdXJyZW50VGV4dCgpCiAgICAgICAgaWYgbW9kZSA9PSAiYWxpYXMiOgogICAgICAgICAgICBzZWxmLl9sb2FkX2J5X2FsaWFzKHRleHQpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5fbG9hZF9ieV9sb2NhdGlvbl9maWVsZChtb2RlLCB0ZXh0KQoKICAgIGRlZiBfbG9hZF9ieV9hbGlhcyhzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY29uLnJvd19mYWN0b3J5ID0gc3FsaXRlMy5Sb3cKICAgICAgICBjdXIgPSBjb24uY3Vyc29yKCkKCiAgICAgICAgaWYgbm90IHRleHQ6CiAgICAgICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAgICAgIlNFTEVDVCBsb2NhdGlvbl9pZCwgYWxpYXMgRlJPTSBsb2NhdGlvbl9hbGlhc2VzIE9SREVSIEJZIGFsaWFzIExJTUlUIDIwMDsiCiAgICAgICAgICAgICkKICAgICAgICBlbHNlOgogICAgICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgU0VMRUNUIGxvY2F0aW9uX2lkLCBhbGlhcwogICAgICAgICAgICAgICAgRlJPTSBsb2NhdGlvbl9hbGlhc2VzCiAgICAgICAgICAgICAgICBXSEVSRSBub3JtYWxpemVkIExJS0UgPwogICAgICAgICAgICAgICAgT1JERVIgQlkgYWxpYXMKICAgICAgICAgICAgICAgIExJTUlUIDIwMDsKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIChmIntub3JtYWxpemUodGV4dCl9JSIsKSwKICAgICAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19saXN0LmNsZWFyKCkKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICBpdGVtID0gUUxpc3RXaWRnZXRJdGVtKHJbImFsaWFzIl0pCiAgICAgICAgICAgICMgRm9yY2UgUHl0aG9uIGludCAoYXZvaWQgUVZhcmlhbnQgc3VycHJpc2VzKQogICAgICAgICAgICBpdGVtLnNldERhdGEoUXQuVXNlclJvbGUsIGludChyWyJsb2NhdGlvbl9pZCJdKSkKICAgICAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5hZGRJdGVtKGl0ZW0pCgogICAgZGVmIF9sb2FkX2J5X2xvY2F0aW9uX2ZpZWxkKHNlbGYsIGZpZWxkOiBzdHIsIHZhbHVlOiBzdHIpIC0+IE5vbmU6CiAgICAgICAgaWYgbm90IHZhbHVlOgogICAgICAgICAgICBzZWxmLl9hbGlhc19saXN0LmNsZWFyKCkKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICBmIiIiCiAgICAgICAgICAgIFNFTEVDVCBsYS5sb2NhdGlvbl9pZCwgbGEuYWxpYXMKICAgICAgICAgICAgRlJPTSBsb2NhdGlvbnMgbAogICAgICAgICAgICBKT0lOIGxvY2F0aW9uX2FsaWFzZXMgbGEgT04gbGEubG9jYXRpb25faWQgPSBsLmxvY2F0aW9uX2lkCiAgICAgICAgICAgIFdIRVJFIGwue2ZpZWxkfSA9ID8KICAgICAgICAgICAgT1JERVIgQlkgbGEuYWxpYXM7CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKHZhbHVlLCksCiAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19saXN0LmNsZWFyKCkKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICBpdGVtID0gUUxpc3RXaWRnZXRJdGVtKHJbImFsaWFzIl0pCiAgICAgICAgICAgIGl0ZW0uc2V0RGF0YShRdC5Vc2VyUm9sZSwgaW50KHJbImxvY2F0aW9uX2lkIl0pKQogICAgICAgICAgICBzZWxmLl9hbGlhc19saXN0LmFkZEl0ZW0oaXRlbSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlbGVjdGlvbgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfb25fYWxpYXNfY2xpY2tlZChzZWxmLCBpdGVtOiBRTGlzdFdpZGdldEl0ZW0pIC0+IE5vbmU6CiAgICAgICAgcmF3X2lkID0gaXRlbS5kYXRhKFF0LlVzZXJSb2xlKQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZCA9IGludChyYXdfaWQpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoZiJTZWxlY3RlZCBsb2NhdGlvbl9pZCBpcyBub3QgYW4gaW50OiB7cmF3X2lkIXJ9IikgZnJvbSBlCgogICAgICAgIHNlbGYuX2xvYWRfbG9jYXRpb24oKQogICAgICAgIHNlbGYuX3NhdmVfYnRuLnNldEVuYWJsZWQoVHJ1ZSkKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKGYiTG9hZGVkIGxvY2F0aW9uX2lkPXtzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkfSIpCgogICAgZGVmIF9sb2FkX2xvY2F0aW9uKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgc2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZCBpcyBOb25lOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY29uLnJvd19mYWN0b3J5ID0gc3FsaXRlMy5Sb3cKICAgICAgICBjdXIgPSBjb24uY3Vyc29yKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBTRUxFQ1QgbG9jYXRpb25faWQsIGxhdCwgbG9uLCBuYW1lLCBwbGFjZSwgd2lraWRhdGEKICAgICAgICAgICAgRlJPTSBsb2NhdGlvbnMKICAgICAgICAgICAgV0hFUkUgbG9jYXRpb25faWQgPSA/OwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgIChzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkLCksCiAgICAgICAgKQogICAgICAgIHJvdyA9IGN1ci5mZXRjaG9uZSgpCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgU0VMRUNUIHIubmFtZQogICAgICAgICAgICBGUk9NIGxvY2F0aW9uX3JlZ2lvbnMgbHIKICAgICAgICAgICAgSk9JTiByZWdpb25zIHIgT04gci5yZWdpb25faWQgPSBsci5yZWdpb25faWQKICAgICAgICAgICAgV0hFUkUgbHIubG9jYXRpb25faWQgPSA/CiAgICAgICAgICAgIExJTUlUIDE7CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgcmVnaW9uX3JvdyA9IGN1ci5mZXRjaG9uZSgpCgogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIGlmIG5vdCByb3c6CiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcihmImxvY2F0aW9ucyByb3cgbm90IGZvdW5kIGZvciBsb2NhdGlvbl9pZD17c2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZH0iKQoKICAgICAgICBzZWxmLl9sYmxfbG9jYXRpb25faWQuc2V0VGV4dChzdHIocm93WyJsb2NhdGlvbl9pZCJdKSkKICAgICAgICBzZWxmLl9sYmxfbGF0LnNldFRleHQoc3RyKHJvd1sibGF0Il0pKQogICAgICAgIHNlbGYuX2xibF9sb24uc2V0VGV4dChzdHIocm93WyJsb24iXSkpCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lLnNldFRleHQocm93WyJuYW1lIl0gb3IgIiIpCiAgICAgICAgc2VsZi5fZWRpdF9wbGFjZS5zZXRUZXh0KHJvd1sicGxhY2UiXSBvciAiIikKICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLnNldFRleHQocm93WyJ3aWtpZGF0YSJdIG9yICIiKQogICAgICAgIHNlbGYuX2xibF9yZWdpb24uc2V0VGV4dChyZWdpb25fcm93WyJuYW1lIl0gaWYgcmVnaW9uX3JvdyBlbHNlICItIikKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNhdmUKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX3NhdmVfbG9jYXRpb25fY2hhbmdlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJTYXZlIHJlcXVlc3RlZCB3aXRoIG5vIHNlbGVjdGVkIGxvY2F0aW9uIikKCiAgICAgICAgbmV3X25hbWUgPSBzZWxmLl9lZGl0X25hbWUudGV4dCgpLnN0cmlwKCkgb3IgTm9uZQogICAgICAgIG5ld19wbGFjZSA9IHNlbGYuX2VkaXRfcGxhY2UudGV4dCgpLnN0cmlwKCkgb3IgTm9uZQogICAgICAgIG5ld193aWtpZGF0YSA9IHNlbGYuX2VkaXRfd2lraWRhdGEudGV4dCgpLnN0cmlwKCkgb3IgTm9uZQoKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjdXIgPSBjb24uY3Vyc29yKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBVUERBVEUgbG9jYXRpb25zCiAgICAgICAgICAgIFNFVCBuYW1lID0gPywgcGxhY2UgPSA/LCB3aWtpZGF0YSA9ID8KICAgICAgICAgICAgV0hFUkUgbG9jYXRpb25faWQgPSA/OwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgIChuZXdfbmFtZSwgbmV3X3BsYWNlLCBuZXdfd2lraWRhdGEsIGludChzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkKSksCiAgICAgICAgKQoKICAgICAgICAjIEZBSUwgTE9VRExZOiBtdXN0IHRvdWNoIGV4YWN0bHkgb25lIHJvdy4KICAgICAgICAjIElmIHRoaXMgaXMgPjEsIHNvbWV0aGluZyBpcyBjYXRhc3Ryb3BoaWNhbGx5IHdyb25nIChvciB0cmlnZ2VycyBleGlzdCkuCiAgICAgICAgaWYgY3VyLnJvd2NvdW50ICE9IDE6CiAgICAgICAgICAgIGNvbi5yb2xsYmFjaygpCiAgICAgICAgICAgIGNvbi5jbG9zZSgpCiAgICAgICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigKICAgICAgICAgICAgICAgIGYiVW5leHBlY3RlZCBVUERBVEUgcm93Y291bnQ9e2N1ci5yb3djb3VudH0gZm9yIGxvY2F0aW9uX2lkPXtzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkfS4gIgogICAgICAgICAgICAgICAgIlJlZnVzaW5nIHRvIGNvbW1pdC4iCiAgICAgICAgICAgICkKCiAgICAgICAgY29uLmNvbW1pdCgpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgIyBGZWVkYmFjazogcmVsb2FkIGNhbm9uaWNhbCBEQiBzdGF0ZSwgdGhlbiBkZWZvY3VzIGVkaXRzCiAgICAgICAgc2VsZi5fbG9hZF9sb2NhdGlvbigpCiAgICAgICAgc2VsZi5fc2F2ZV9idG4uc2V0Rm9jdXMoUXQuT3RoZXJGb2N1c1JlYXNvbikgICMgZGVmb2N1cyB0ZXh0IGZpZWxkcwogICAgICAgIHNlbGYuc3RhdHVzQmFyKCkuc2hvd01lc3NhZ2UoZiJTYXZlZCBjaGFuZ2VzIGZvciBsb2NhdGlvbl9pZD17c2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZH0iKQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAAB7IgAAAAAAAAAAAAAAAPC/"
				],
				[
					95,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA8LAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0ICgKICAgIFFNYWluV2luZG93LAogICAgUVdpZGdldCwKICAgIFFMaXN0V2lkZ2V0LAogICAgUUxpc3RXaWRnZXRJdGVtLAogICAgUUxhYmVsLAogICAgUVZCb3hMYXlvdXQsCiAgICBRSEJveExheW91dCwKICAgIFFMaW5lRWRpdCwKICAgIFFQdXNoQnV0dG9uLAogICAgUUNvbWJvQm94LAogICAgUUZvcm1MYXlvdXQsCikKCmZyb20gUHlTaWRlNi5RdENvcmUgaW1wb3J0IFF0Cgpmcm9tIHNpdHJlcGMyLmNvbmZpZy5wYXRocyBpbXBvcnQgZ2F6ZXR0ZWVyX3BhdGgKCgpkZWYgbm9ybWFsaXplKHRleHQ6IHN0cikgLT4gc3RyOgogICAgcmV0dXJuICIgIi5qb2luKHRleHQubG93ZXIoKS5zcGxpdCgpKQoKCmNsYXNzIE1haW5XaW5kb3coUU1haW5XaW5kb3cpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgogICAgICAgIHNlbGYuc2V0V2luZG93VGl0bGUoImRiZWRpdGMyIOKAlCBhbGlhcyAmIGxvY2F0aW9uIGVkaXRvciIpCiAgICAgICAgc2VsZi5fZGJfcGF0aCA9IGdhemV0dGVlcl9wYXRoKCkKICAgICAgICBzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkOiBpbnQgfCBOb25lID0gTm9uZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTZWFyY2ggd2lkZ2V0cwogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQgPSBRTGluZUVkaXQoc2VsZikKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdC5zZXRQbGFjZWhvbGRlclRleHQoIlNlYXJjaOKApiIpCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQudGV4dENoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9zZWFyY2hfY2hhbmdlZCkKCiAgICAgICAgc2VsZi5fbG9va3VwX21vZGUgPSBRQ29tYm9Cb3goc2VsZikKICAgICAgICBzZWxmLl9sb29rdXBfbW9kZS5hZGRJdGVtcyhbImFsaWFzIiwgIm9zbV9pZCIsICJ3aWtpZGF0YSJdKQogICAgICAgIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0Q2hhbmdlZC5jb25uZWN0KAogICAgICAgICAgICBsYW1iZGEgXzogc2VsZi5fb25fc2VhcmNoX2NoYW5nZWQoc2VsZi5fc2VhcmNoX2VkaXQudGV4dCgpKQogICAgICAgICkKCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdCA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5pdGVtQ2xpY2tlZC5jb25uZWN0KHNlbGYuX29uX2FsaWFzX2NsaWNrZWQpCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIERldGFpbHMgZm9ybQogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fZGV0YWlsc193aWRnZXQgPSBRV2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQgPSBRVkJveExheW91dChzZWxmLl9kZXRhaWxzX3dpZGdldCkKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5zZXRBbGlnbm1lbnQoUXQuQWxpZ25Ub3ApCgogICAgICAgIGZvcm0gPSBRRm9ybUxheW91dCgpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkTGF5b3V0KGZvcm0pCgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZCA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX2xhdCA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX2xvbiA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX3JlZ2lvbiA9IFFMYWJlbCgiLSIpCgogICAgICAgIHNlbGYuX2VkaXRfbmFtZSA9IFFMaW5lRWRpdCgpCiAgICAgICAgc2VsZi5fZWRpdF9wbGFjZSA9IFFMaW5lRWRpdCgpCiAgICAgICAgc2VsZi5fZWRpdF93aWtpZGF0YSA9IFFMaW5lRWRpdCgpCgogICAgICAgIGZvcm0uYWRkUm93KCJMb2NhdGlvbiBJRDoiLCBzZWxmLl9sYmxfbG9jYXRpb25faWQpCiAgICAgICAgZm9ybS5hZGRSb3coIkxhdGl0dWRlOiIsIHNlbGYuX2xibF9sYXQpCiAgICAgICAgZm9ybS5hZGRSb3coIkxvbmdpdHVkZToiLCBzZWxmLl9sYmxfbG9uKQogICAgICAgIGZvcm0uYWRkUm93KCJOYW1lOiIsIHNlbGYuX2VkaXRfbmFtZSkKICAgICAgICBmb3JtLmFkZFJvdygiUGxhY2U6Iiwgc2VsZi5fZWRpdF9wbGFjZSkKICAgICAgICBmb3JtLmFkZFJvdygiV2lraWRhdGE6Iiwgc2VsZi5fZWRpdF93aWtpZGF0YSkKICAgICAgICBmb3JtLmFkZFJvdygiUmVnaW9uOiIsIHNlbGYuX2xibF9yZWdpb24pCgogICAgICAgIHNlbGYuX3NhdmVfYnRuID0gUVB1c2hCdXR0b24oIlNhdmUgbG9jYXRpb24gY2hhbmdlcyIsIHNlbGYpCiAgICAgICAgc2VsZi5fc2F2ZV9idG4uc2V0RW5hYmxlZChGYWxzZSkKICAgICAgICBzZWxmLl9zYXZlX2J0bi5jbGlja2VkLmNvbm5lY3Qoc2VsZi5fc2F2ZV9sb2NhdGlvbl9jaGFuZ2VzKQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9zYXZlX2J0bikKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgQWxpYXMgZWRpdG9yIGZvciBzZWxlY3RlZCBsb2NhdGlvbgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkV2lkZ2V0KFFMYWJlbCgiQWxpYXNlcyBmb3IgdGhpcyBsb2NhdGlvbjoiKSkKCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcyA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMpCgogICAgICAgIGFsaWFzX2NvbnRyb2xzID0gUUhCb3hMYXlvdXQoKQogICAgICAgIHNlbGYuX2FsaWFzX2lucHV0ID0gUUxpbmVFZGl0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfaW5wdXQuc2V0UGxhY2Vob2xkZXJUZXh0KCJBZGQgYWxpYXPigKYiKQogICAgICAgIHNlbGYuX2FsaWFzX2FkZF9idG4gPSBRUHVzaEJ1dHRvbigiQWRkIiwgc2VsZikKICAgICAgICBzZWxmLl9hbGlhc19yZW1vdmVfYnRuID0gUVB1c2hCdXR0b24oIlJlbW92ZSIsIHNlbGYpCgogICAgICAgIGFsaWFzX2NvbnRyb2xzLmFkZFdpZGdldChzZWxmLl9hbGlhc19pbnB1dCkKICAgICAgICBhbGlhc19jb250cm9scy5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfYWRkX2J0bikKICAgICAgICBhbGlhc19jb250cm9scy5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfcmVtb3ZlX2J0bikKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRMYXlvdXQoYWxpYXNfY29udHJvbHMpCgogICAgICAgIHNlbGYuX2FsaWFzX2FkZF9idG4uY2xpY2tlZC5jb25uZWN0KHNlbGYuX2FkZF9hbGlhcykKICAgICAgICBzZWxmLl9hbGlhc19yZW1vdmVfYnRuLmNsaWNrZWQuY29ubmVjdChzZWxmLl9yZW1vdmVfYWxpYXMpCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExheW91dCB3aXJpbmcKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGxlZnQgPSBRV2lkZ2V0KHNlbGYpCiAgICAgICAgbGVmdF9sYXlvdXQgPSBRVkJveExheW91dChsZWZ0KQogICAgICAgIGxlZnRfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9zZWFyY2hfZWRpdCkKICAgICAgICBsZWZ0X2xheW91dC5hZGRXaWRnZXQoc2VsZi5fbG9va3VwX21vZGUpCiAgICAgICAgbGVmdF9sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2FsaWFzX2xpc3QpCgogICAgICAgIGNlbnRyYWwgPSBRV2lkZ2V0KHNlbGYpCiAgICAgICAgbWFpbl9sYXlvdXQgPSBRSEJveExheW91dChjZW50cmFsKQogICAgICAgIG1haW5fbGF5b3V0LmFkZFdpZGdldChsZWZ0LCAxKQogICAgICAgIG1haW5fbGF5b3V0LmFkZFdpZGdldChzZWxmLl9kZXRhaWxzX3dpZGdldCwgMSkKICAgICAgICBzZWxmLnNldENlbnRyYWxXaWRnZXQoY2VudHJhbCkKCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZSgiUmVhZHkiKQoKICAgICAgICBzZWxmLl9sb2FkX2J5X2FsaWFzKCIiKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2VhcmNoIGxvZ2ljCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9vbl9zZWFyY2hfY2hhbmdlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgbW9kZSA9IHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0KCkKICAgICAgICBpZiBtb2RlID09ICJhbGlhcyI6CiAgICAgICAgICAgIHNlbGYuX2xvYWRfYnlfYWxpYXModGV4dCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9sb2FkX2J5X2xvY2F0aW9uX2ZpZWxkKG1vZGUsIHRleHQpCgogICAgZGVmIF9sb2FkX2J5X2FsaWFzKHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZToKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBpZiBub3QgdGV4dDoKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiU0VMRUNUIGxvY2F0aW9uX2lkLCBhbGlhcyBGUk9NIGxvY2F0aW9uX2FsaWFzZXMgT1JERVIgQlkgYWxpYXMgTElNSVQgMjAwOyIKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1QgbG9jYXRpb25faWQsIGFsaWFzCiAgICAgICAgICAgICAgICBGUk9NIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgIFdIRVJFIG5vcm1hbGl6ZWQgTElLRSA/CiAgICAgICAgICAgICAgICBPUkRFUiBCWSBhbGlhcwogICAgICAgICAgICAgICAgTElNSVQgMjAwOwogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKGYie25vcm1hbGl6ZSh0ZXh0KX0lIiwpLAogICAgICAgICAgICApCgogICAgICAgIHJvd3MgPSBjdXIuZmV0Y2hhbGwoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXIoKQogICAgICAgIGZvciByIGluIHJvd3M6CiAgICAgICAgICAgIGl0ZW0gPSBRTGlzdFdpZGdldEl0ZW0oclsiYWxpYXMiXSkKICAgICAgICAgICAgaXRlbS5zZXREYXRhKFF0LlVzZXJSb2xlLCBpbnQoclsibG9jYXRpb25faWQiXSkpCiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuYWRkSXRlbShpdGVtKQoKICAgIGRlZiBfbG9hZF9ieV9sb2NhdGlvbl9maWVsZChzZWxmLCBmaWVsZDogc3RyLCB2YWx1ZTogc3RyKSAtPiBOb25lOgogICAgICAgIGlmIG5vdCB2YWx1ZToKICAgICAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5jbGVhcigpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgZiIiIgogICAgICAgICAgICBTRUxFQ1QgbGEubG9jYXRpb25faWQsIGxhLmFsaWFzCiAgICAgICAgICAgIEZST00gbG9jYXRpb25zIGwKICAgICAgICAgICAgSk9JTiBsb2NhdGlvbl9hbGlhc2VzIGxhIE9OIGxhLmxvY2F0aW9uX2lkID0gbC5sb2NhdGlvbl9pZAogICAgICAgICAgICBXSEVSRSBsLntmaWVsZH0gPSA/CiAgICAgICAgICAgIE9SREVSIEJZIGxhLmFsaWFzOwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICh2YWx1ZSwpLAogICAgICAgICkKCiAgICAgICAgcm93cyA9IGN1ci5mZXRjaGFsbCgpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5jbGVhcigpCiAgICAgICAgZm9yIHIgaW4gcm93czoKICAgICAgICAgICAgaXRlbSA9IFFMaXN0V2lkZ2V0SXRlbShyWyJhbGlhcyJdKQogICAgICAgICAgICBpdGVtLnNldERhdGEoUXQuVXNlclJvbGUsIGludChyWyJsb2NhdGlvbl9pZCJdKSkKICAgICAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5hZGRJdGVtKGl0ZW0pCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTZWxlY3Rpb24gKyBkZXRhaWxzCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9vbl9hbGlhc19jbGlja2VkKHNlbGYsIGl0ZW06IFFMaXN0V2lkZ2V0SXRlbSkgLT4gTm9uZToKICAgICAgICBsb2NhdGlvbl9pZCA9IGl0ZW0uZGF0YShRdC5Vc2VyUm9sZSkKICAgICAgICBzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkID0gbG9jYXRpb25faWQKICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uKCkKICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXMoKQogICAgICAgIHNlbGYuX3NhdmVfYnRuLnNldEVuYWJsZWQoVHJ1ZSkKCiAgICBkZWYgX2xvYWRfbG9jYXRpb24oc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFNFTEVDVCBsb2NhdGlvbl9pZCwgbGF0LCBsb24sIG5hbWUsIHBsYWNlLCB3aWtpZGF0YQogICAgICAgICAgICBGUk9NIGxvY2F0aW9ucwogICAgICAgICAgICBXSEVSRSBsb2NhdGlvbl9pZCA9ID87CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgcm93ID0gY3VyLmZldGNob25lKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBTRUxFQ1Qgci5uYW1lCiAgICAgICAgICAgIEZST00gbG9jYXRpb25fcmVnaW9ucyBscgogICAgICAgICAgICBKT0lOIHJlZ2lvbnMgciBPTiByLnJlZ2lvbl9pZCA9IGxyLnJlZ2lvbl9pZAogICAgICAgICAgICBXSEVSRSBsci5sb2NhdGlvbl9pZCA9ID8KICAgICAgICAgICAgTElNSVQgMTsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAoc2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZCwpLAogICAgICAgICkKICAgICAgICByZWdpb25fcm93ID0gY3VyLmZldGNob25lKCkKCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgaWYgbm90IHJvdzoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgUG9wdWxhdGUgZm9ybQogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZC5zZXRUZXh0KHN0cihyb3dbImxvY2F0aW9uX2lkIl0pKQogICAgICAgIHNlbGYuX2xibF9sYXQuc2V0VGV4dChzdHIocm93WyJsYXQiXSkpCiAgICAgICAgc2VsZi5fbGJsX2xvbi5zZXRUZXh0KHN0cihyb3dbImxvbiJdKSkKICAgICAgICBzZWxmLl9lZGl0X25hbWUuc2V0VGV4dChyb3dbIm5hbWUiXSBvciAiIikKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLnNldFRleHQocm93WyJwbGFjZSJdIG9yICIiKQogICAgICAgIHNlbGYuX2VkaXRfd2lraWRhdGEuc2V0VGV4dChyb3dbIndpa2lkYXRhIl0gb3IgIiIpCiAgICAgICAgc2VsZi5fbGJsX3JlZ2lvbi5zZXRUZXh0KHJlZ2lvbl9yb3dbIm5hbWUiXSBpZiByZWdpb25fcm93IGVsc2UgIi0iKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgQWxpYXMgbGlzdCBmb3IgdGhpcyBsb2NhdGlvbgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfbG9hZF9sb2NhdGlvbl9hbGlhc2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5jbGVhcigpCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiU0VMRUNUIGFsaWFzIEZST00gbG9jYXRpb25fYWxpYXNlcyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gT1JERVIgQlkgYWxpYXM7IiwKICAgICAgICAgICAgKHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgZm9yIChhbGlhcywpIGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmFkZEl0ZW0oYWxpYXMpCgogICAgICAgIGNvbi5jbG9zZSgpCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBBbGlhcyBlZGl0aW5nCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9hZGRfYWxpYXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBub3Qgc2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZDoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGFsaWFzID0gc2VsZi5fYWxpYXNfaW5wdXQudGV4dCgpLnN0cmlwKCkKICAgICAgICBpZiBub3QgYWxpYXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjdXIgPSBjb24uY3Vyc29yKCkKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIElOU0VSVCBPUiBJR05PUkUgSU5UTyBsb2NhdGlvbl9hbGlhc2VzCiAgICAgICAgICAgICAgICAobG9jYXRpb25faWQsIGFsaWFzLCBub3JtYWxpemVkKQogICAgICAgICAgICBWQUxVRVMgKD8sID8sID8pOwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgIChzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkLCBhbGlhcywgbm9ybWFsaXplKGFsaWFzKSksCiAgICAgICAgKQogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2FsaWFzX2lucHV0LmNsZWFyKCkKICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXMoKQoKICAgIGRlZiBfcmVtb3ZlX2FsaWFzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgbm90IHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQ6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpdGVtcyA9IHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMuc2VsZWN0ZWRJdGVtcygpCiAgICAgICAgaWYgbm90IGl0ZW1zOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgYWxpYXMgPSBpdGVtc1swXS50ZXh0KCkKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBERUxFVEUgRlJPTSBsb2NhdGlvbl9hbGlhc2VzCiAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkID0gPwogICAgICAgICAgICAgIEFORCBub3JtYWxpemVkID0gPzsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAoc2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZCwgbm9ybWFsaXplKGFsaWFzKSksCiAgICAgICAgKQogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2xvYWRfbG9jYXRpb25fYWxpYXNlcygpCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTYXZlIGRldGFpbHMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX3NhdmVfbG9jYXRpb25fY2hhbmdlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIG5ld19uYW1lID0gc2VsZi5fZWRpdF9uYW1lLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUKICAgICAgICBuZXdfcGxhY2UgPSBzZWxmLl9lZGl0X3BsYWNlLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUKICAgICAgICBuZXdfd2lraWRhdGEgPSBzZWxmLl9lZGl0X3dpa2lkYXRhLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgVVBEQVRFIGxvY2F0aW9ucwogICAgICAgICAgICBTRVQgbmFtZSA9ID8sIHBsYWNlID0gPywgd2lraWRhdGEgPSA/CiAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkID0gPzsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAobmV3X25hbWUsIG5ld19wbGFjZSwgbmV3X3dpa2lkYXRhLCBzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkKSwKICAgICAgICApCgogICAgICAgIGlmIGN1ci5yb3djb3VudCAhPSAxOgogICAgICAgICAgICBjb24ucm9sbGJhY2soKQogICAgICAgICAgICBjb24uY2xvc2UoKQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoCiAgICAgICAgICAgICAgICBmIkZhaWxlZCB0byB1cGRhdGUgZXhhY3RseSBvbmUgcm93IGZvciBsb2NhdGlvbl9pZD17c2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZH0iCiAgICAgICAgICAgICkKCiAgICAgICAgY29uLmNvbW1pdCgpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgIyBSZWxvYWQgdG8gcmVmbGVjdCBjYW5vbmljYWwgc2F2ZWQgc3RhdGUKICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uKCkKCiAgICAgICAgIyBEZWZvY3VzIGVkaXRzCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lLmNsZWFyRm9jdXMoKQogICAgICAgIHNlbGYuX2VkaXRfcGxhY2UuY2xlYXJGb2N1cygpCiAgICAgICAgc2VsZi5fZWRpdF93aWtpZGF0YS5jbGVhckZvY3VzKCkKCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZSgKICAgICAgICAgICAgZiJTYXZlZCBkZXRhaWxzIGZvciBsb2NhdGlvbl9pZD17c2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZH0iCiAgICAgICAgKQoAAAAAAAAAADYsAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANiwAAAAAAAA2LAAAAAAAAAAAAAAAAPC/"
				],
				[
					102,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAHDIAAAAAAAA8LAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0ICgKICAgIFFNYWluV2luZG93LAogICAgUVdpZGdldCwKICAgIFFMaXN0V2lkZ2V0LAogICAgUUxpc3RXaWRnZXRJdGVtLAogICAgUUxhYmVsLAogICAgUVZCb3hMYXlvdXQsCiAgICBRSEJveExheW91dCwKICAgIFFMaW5lRWRpdCwKICAgIFFQdXNoQnV0dG9uLAogICAgUUNvbWJvQm94LAogICAgUUZvcm1MYXlvdXQsCikKCmZyb20gUHlTaWRlNi5RdENvcmUgaW1wb3J0IFF0Cgpmcm9tIHNpdHJlcGMyLmNvbmZpZy5wYXRocyBpbXBvcnQgZ2F6ZXR0ZWVyX3BhdGgKCgpkZWYgbm9ybWFsaXplKHRleHQ6IHN0cikgLT4gc3RyOgogICAgcmV0dXJuICIgIi5qb2luKHRleHQubG93ZXIoKS5zcGxpdCgpKQoKCmNsYXNzIE1haW5XaW5kb3coUU1haW5XaW5kb3cpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgogICAgICAgIHNlbGYuc2V0V2luZG93VGl0bGUoImRiZWRpdGMyIOKAlCBhbGlhcyAmIGxvY2F0aW9uIGVkaXRvciIpCiAgICAgICAgc2VsZi5fZGJfcGF0aCA9IGdhemV0dGVlcl9wYXRoKCkKICAgICAgICBzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkOiBpbnQgfCBOb25lID0gTm9uZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTZWFyY2ggd2lkZ2V0cwogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQgPSBRTGluZUVkaXQoc2VsZikKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdC5zZXRQbGFjZWhvbGRlclRleHQoIlNlYXJjaOKApiIpCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQudGV4dENoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9zZWFyY2hfY2hhbmdlZCkKCiAgICAgICAgc2VsZi5fbG9va3VwX21vZGUgPSBRQ29tYm9Cb3goc2VsZikKICAgICAgICBzZWxmLl9sb29rdXBfbW9kZS5hZGRJdGVtcyhbImFsaWFzIiwgIm9zbV9pZCIsICJ3aWtpZGF0YSJdKQogICAgICAgIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0Q2hhbmdlZC5jb25uZWN0KAogICAgICAgICAgICBsYW1iZGEgXzogc2VsZi5fb25fc2VhcmNoX2NoYW5nZWQoc2VsZi5fc2VhcmNoX2VkaXQudGV4dCgpKQogICAgICAgICkKCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdCA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5pdGVtQ2xpY2tlZC5jb25uZWN0KHNlbGYuX29uX2FsaWFzX2NsaWNrZWQpCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIERldGFpbHMgZm9ybQogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fZGV0YWlsc193aWRnZXQgPSBRV2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQgPSBRVkJveExheW91dChzZWxmLl9kZXRhaWxzX3dpZGdldCkKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5zZXRBbGlnbm1lbnQoUXQuQWxpZ25Ub3ApCgogICAgICAgIGZvcm0gPSBRRm9ybUxheW91dCgpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkTGF5b3V0KGZvcm0pCgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZCA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX2xhdCA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX2xvbiA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX3JlZ2lvbiA9IFFMYWJlbCgiLSIpCgogICAgICAgIHNlbGYuX2VkaXRfbmFtZSA9IFFMaW5lRWRpdCgpCiAgICAgICAgc2VsZi5fZWRpdF9wbGFjZSA9IFFMaW5lRWRpdCgpCiAgICAgICAgc2VsZi5fZWRpdF93aWtpZGF0YSA9IFFMaW5lRWRpdCgpCgogICAgICAgIGZvcm0uYWRkUm93KCJMb2NhdGlvbiBJRDoiLCBzZWxmLl9sYmxfbG9jYXRpb25faWQpCiAgICAgICAgZm9ybS5hZGRSb3coIkxhdGl0dWRlOiIsIHNlbGYuX2xibF9sYXQpCiAgICAgICAgZm9ybS5hZGRSb3coIkxvbmdpdHVkZToiLCBzZWxmLl9sYmxfbG9uKQogICAgICAgIGZvcm0uYWRkUm93KCJOYW1lOiIsIHNlbGYuX2VkaXRfbmFtZSkKICAgICAgICBmb3JtLmFkZFJvdygiUGxhY2U6Iiwgc2VsZi5fZWRpdF9wbGFjZSkKICAgICAgICBmb3JtLmFkZFJvdygiV2lraWRhdGE6Iiwgc2VsZi5fZWRpdF93aWtpZGF0YSkKICAgICAgICBmb3JtLmFkZFJvdygiUmVnaW9uOiIsIHNlbGYuX2xibF9yZWdpb24pCgogICAgICAgIHNlbGYuX3NhdmVfYnRuID0gUVB1c2hCdXR0b24oIlNhdmUgbG9jYXRpb24gY2hhbmdlcyIsIHNlbGYpCiAgICAgICAgc2VsZi5fc2F2ZV9idG4uc2V0RW5hYmxlZChGYWxzZSkKICAgICAgICBzZWxmLl9zYXZlX2J0bi5jbGlja2VkLmNvbm5lY3Qoc2VsZi5fc2F2ZV9sb2NhdGlvbl9jaGFuZ2VzKQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9zYXZlX2J0bikKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgQWxpYXMgZWRpdG9yIGZvciBzZWxlY3RlZCBsb2NhdGlvbgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkV2lkZ2V0KFFMYWJlbCgiQWxpYXNlcyBmb3IgdGhpcyBsb2NhdGlvbjoiKSkKCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcyA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMpCgogICAgICAgIGFsaWFzX2NvbnRyb2xzID0gUUhCb3hMYXlvdXQoKQogICAgICAgIHNlbGYuX2FsaWFzX2lucHV0ID0gUUxpbmVFZGl0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfaW5wdXQuc2V0UGxhY2Vob2xkZXJUZXh0KCJBZGQgYWxpYXPigKYiKQogICAgICAgIHNlbGYuX2FsaWFzX2FkZF9idG4gPSBRUHVzaEJ1dHRvbigiQWRkIiwgc2VsZikKICAgICAgICBzZWxmLl9hbGlhc19yZW1vdmVfYnRuID0gUVB1c2hCdXR0b24oIlJlbW92ZSIsIHNlbGYpCgogICAgICAgIGFsaWFzX2NvbnRyb2xzLmFkZFdpZGdldChzZWxmLl9hbGlhc19pbnB1dCkKICAgICAgICBhbGlhc19jb250cm9scy5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfYWRkX2J0bikKICAgICAgICBhbGlhc19jb250cm9scy5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfcmVtb3ZlX2J0bikKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRMYXlvdXQoYWxpYXNfY29udHJvbHMpCgogICAgICAgIHNlbGYuX2FsaWFzX2FkZF9idG4uY2xpY2tlZC5jb25uZWN0KHNlbGYuX2FkZF9hbGlhcykKICAgICAgICBzZWxmLl9hbGlhc19yZW1vdmVfYnRuLmNsaWNrZWQuY29ubmVjdChzZWxmLl9yZW1vdmVfYWxpYXMpCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExheW91dCB3aXJpbmcKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGxlZnQgPSBRV2lkZ2V0KHNlbGYpCiAgICAgICAgbGVmdF9sYXlvdXQgPSBRVkJveExheW91dChsZWZ0KQogICAgICAgIGxlZnRfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9zZWFyY2hfZWRpdCkKICAgICAgICBsZWZ0X2xheW91dC5hZGRXaWRnZXQoc2VsZi5fbG9va3VwX21vZGUpCiAgICAgICAgbGVmdF9sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2FsaWFzX2xpc3QpCgogICAgICAgIGNlbnRyYWwgPSBRV2lkZ2V0KHNlbGYpCiAgICAgICAgbWFpbl9sYXlvdXQgPSBRSEJveExheW91dChjZW50cmFsKQogICAgICAgIG1haW5fbGF5b3V0LmFkZFdpZGdldChsZWZ0LCAxKQogICAgICAgIG1haW5fbGF5b3V0LmFkZFdpZGdldChzZWxmLl9kZXRhaWxzX3dpZGdldCwgMSkKICAgICAgICBzZWxmLnNldENlbnRyYWxXaWRnZXQoY2VudHJhbCkKCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZSgiUmVhZHkiKQoKICAgICAgICBzZWxmLl9sb2FkX2J5X2FsaWFzKCIiKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2VhcmNoIGxvZ2ljCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9vbl9zZWFyY2hfY2hhbmdlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgbW9kZSA9IHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0KCkKICAgICAgICBpZiBtb2RlID09ICJhbGlhcyI6CiAgICAgICAgICAgIHNlbGYuX2xvYWRfYnlfYWxpYXModGV4dCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9sb2FkX2J5X2xvY2F0aW9uX2ZpZWxkKG1vZGUsIHRleHQpCgogICAgZGVmIF9sb2FkX2J5X2FsaWFzKHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZToKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBpZiBub3QgdGV4dDoKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiU0VMRUNUIGxvY2F0aW9uX2lkLCBhbGlhcyBGUk9NIGxvY2F0aW9uX2FsaWFzZXMgT1JERVIgQlkgYWxpYXMgTElNSVQgMjAwOyIKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1QgbG9jYXRpb25faWQsIGFsaWFzCiAgICAgICAgICAgICAgICBGUk9NIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgIFdIRVJFIG5vcm1hbGl6ZWQgTElLRSA/CiAgICAgICAgICAgICAgICBPUkRFUiBCWSBhbGlhcwogICAgICAgICAgICAgICAgTElNSVQgMjAwOwogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKGYie25vcm1hbGl6ZSh0ZXh0KX0lIiwpLAogICAgICAgICAgICApCgogICAgICAgIHJvd3MgPSBjdXIuZmV0Y2hhbGwoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXIoKQogICAgICAgIGZvciByIGluIHJvd3M6CiAgICAgICAgICAgIGl0ZW0gPSBRTGlzdFdpZGdldEl0ZW0oclsiYWxpYXMiXSkKICAgICAgICAgICAgaXRlbS5zZXREYXRhKFF0LlVzZXJSb2xlLCBpbnQoclsibG9jYXRpb25faWQiXSkpCiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuYWRkSXRlbShpdGVtKQoKICAgIGRlZiBfbG9hZF9ieV9sb2NhdGlvbl9maWVsZChzZWxmLCBmaWVsZDogc3RyLCB2YWx1ZTogc3RyKSAtPiBOb25lOgogICAgICAgIGlmIG5vdCB2YWx1ZToKICAgICAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5jbGVhcigpCiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgZiIiIgogICAgICAgICAgICBTRUxFQ1QgbGEubG9jYXRpb25faWQsIGxhLmFsaWFzCiAgICAgICAgICAgIEZST00gbG9jYXRpb25zIGwKICAgICAgICAgICAgSk9JTiBsb2NhdGlvbl9hbGlhc2VzIGxhIE9OIGxhLmxvY2F0aW9uX2lkID0gbC5sb2NhdGlvbl9pZAogICAgICAgICAgICBXSEVSRSBsLntmaWVsZH0gPSA/CiAgICAgICAgICAgIE9SREVSIEJZIGxhLmFsaWFzOwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICh2YWx1ZSwpLAogICAgICAgICkKCiAgICAgICAgcm93cyA9IGN1ci5mZXRjaGFsbCgpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5jbGVhcigpCiAgICAgICAgZm9yIHIgaW4gcm93czoKICAgICAgICAgICAgaXRlbSA9IFFMaXN0V2lkZ2V0SXRlbShyWyJhbGlhcyJdKQogICAgICAgICAgICBpdGVtLnNldERhdGEoUXQuVXNlclJvbGUsIGludChyWyJsb2NhdGlvbl9pZCJdKSkKICAgICAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5hZGRJdGVtKGl0ZW0pCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTZWxlY3Rpb24gKyBkZXRhaWxzCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9vbl9hbGlhc19jbGlja2VkKHNlbGYsIGl0ZW06IFFMaXN0V2lkZ2V0SXRlbSkgLT4gTm9uZToKICAgICAgICBsb2NhdGlvbl9pZCA9IGl0ZW0uZGF0YShRdC5Vc2VyUm9sZSkKICAgICAgICBzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkID0gbG9jYXRpb25faWQKICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uKCkKICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXMoKQogICAgICAgIHNlbGYuX3NhdmVfYnRuLnNldEVuYWJsZWQoVHJ1ZSkKCiAgICBkZWYgX2xvYWRfbG9jYXRpb24oc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkIGlzIE5vbmU6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFNFTEVDVCBsb2NhdGlvbl9pZCwgbGF0LCBsb24sIG5hbWUsIHBsYWNlLCB3aWtpZGF0YQogICAgICAgICAgICBGUk9NIGxvY2F0aW9ucwogICAgICAgICAgICBXSEVSRSBsb2NhdGlvbl9pZCA9ID87CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgcm93ID0gY3VyLmZldGNob25lKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBTRUxFQ1Qgci5uYW1lCiAgICAgICAgICAgIEZST00gbG9jYXRpb25fcmVnaW9ucyBscgogICAgICAgICAgICBKT0lOIHJlZ2lvbnMgciBPTiByLnJlZ2lvbl9pZCA9IGxyLnJlZ2lvbl9pZAogICAgICAgICAgICBXSEVSRSBsci5sb2NhdGlvbl9pZCA9ID8KICAgICAgICAgICAgTElNSVQgMTsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAoc2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZCwpLAogICAgICAgICkKICAgICAgICByZWdpb25fcm93ID0gY3VyLmZldGNob25lKCkKCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgaWYgbm90IHJvdzoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgUG9wdWxhdGUgZm9ybQogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZC5zZXRUZXh0KHN0cihyb3dbImxvY2F0aW9uX2lkIl0pKQogICAgICAgIHNlbGYuX2xibF9sYXQuc2V0VGV4dChzdHIocm93WyJsYXQiXSkpCiAgICAgICAgc2VsZi5fbGJsX2xvbi5zZXRUZXh0KHN0cihyb3dbImxvbiJdKSkKICAgICAgICBzZWxmLl9lZGl0X25hbWUuc2V0VGV4dChyb3dbIm5hbWUiXSBvciAiIikKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLnNldFRleHQocm93WyJwbGFjZSJdIG9yICIiKQogICAgICAgIHNlbGYuX2VkaXRfd2lraWRhdGEuc2V0VGV4dChyb3dbIndpa2lkYXRhIl0gb3IgIiIpCiAgICAgICAgc2VsZi5fbGJsX3JlZ2lvbi5zZXRUZXh0KHJlZ2lvbl9yb3dbIm5hbWUiXSBpZiByZWdpb25fcm93IGVsc2UgIi0iKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgQWxpYXMgbGlzdCBmb3IgdGhpcyBsb2NhdGlvbgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfbG9hZF9sb2NhdGlvbl9hbGlhc2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5jbGVhcigpCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiU0VMRUNUIGFsaWFzIEZST00gbG9jYXRpb25fYWxpYXNlcyBXSEVSRSBsb2NhdGlvbl9pZCA9ID8gT1JERVIgQlkgYWxpYXM7IiwKICAgICAgICAgICAgKHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgZm9yIChhbGlhcywpIGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmFkZEl0ZW0oYWxpYXMpCgogICAgICAgIGNvbi5jbG9zZSgpCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBBbGlhcyBlZGl0aW5nCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9hZGRfYWxpYXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBub3Qgc2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZDoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGFsaWFzID0gc2VsZi5fYWxpYXNfaW5wdXQudGV4dCgpLnN0cmlwKCkKICAgICAgICBpZiBub3QgYWxpYXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjdXIgPSBjb24uY3Vyc29yKCkKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIElOU0VSVCBPUiBJR05PUkUgSU5UTyBsb2NhdGlvbl9hbGlhc2VzCiAgICAgICAgICAgICAgICAobG9jYXRpb25faWQsIGFsaWFzLCBub3JtYWxpemVkKQogICAgICAgICAgICBWQUxVRVMgKD8sID8sID8pOwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgIChzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkLCBhbGlhcywgbm9ybWFsaXplKGFsaWFzKSksCiAgICAgICAgKQogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2FsaWFzX2lucHV0LmNsZWFyKCkKICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXMoKQoKICAgIGRlZiBfcmVtb3ZlX2FsaWFzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgbm90IHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQ6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBpdGVtcyA9IHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMuc2VsZWN0ZWRJdGVtcygpCiAgICAgICAgaWYgbm90IGl0ZW1zOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgYWxpYXMgPSBpdGVtc1swXS50ZXh0KCkKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBERUxFVEUgRlJPTSBsb2NhdGlvbl9hbGlhc2VzCiAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkID0gPwogICAgICAgICAgICAgIEFORCBub3JtYWxpemVkID0gPzsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAoc2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZCwgbm9ybWFsaXplKGFsaWFzKSksCiAgICAgICAgKQogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2xvYWRfbG9jYXRpb25fYWxpYXNlcygpCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTYXZlIGRldGFpbHMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX3NhdmVfbG9jYXRpb25fY2hhbmdlcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2N1cnJlbnRfbG9jYXRpb25faWQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIG5ld19uYW1lID0gc2VsZi5fZWRpdF9uYW1lLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUKICAgICAgICBuZXdfcGxhY2UgPSBzZWxmLl9lZGl0X3BsYWNlLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUKICAgICAgICBuZXdfd2lraWRhdGEgPSBzZWxmLl9lZGl0X3dpa2lkYXRhLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgVVBEQVRFIGxvY2F0aW9ucwogICAgICAgICAgICBTRVQgbmFtZSA9ID8sIHBsYWNlID0gPywgd2lraWRhdGEgPSA/CiAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkID0gPzsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAobmV3X25hbWUsIG5ld19wbGFjZSwgbmV3X3dpa2lkYXRhLCBzZWxmLl9jdXJyZW50X2xvY2F0aW9uX2lkKSwKICAgICAgICApCgogICAgICAgIGlmIGN1ci5yb3djb3VudCAhPSAxOgogICAgICAgICAgICBjb24ucm9sbGJhY2soKQogICAgICAgICAgICBjb24uY2xvc2UoKQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoCiAgICAgICAgICAgICAgICBmIkZhaWxlZCB0byB1cGRhdGUgZXhhY3RseSBvbmUgcm93IGZvciBsb2NhdGlvbl9pZD17c2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZH0iCiAgICAgICAgICAgICkKCiAgICAgICAgY29uLmNvbW1pdCgpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgIyBSZWxvYWQgdG8gcmVmbGVjdCBjYW5vbmljYWwgc2F2ZWQgc3RhdGUKICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uKCkKCiAgICAgICAgIyBEZWZvY3VzIGVkaXRzCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lLmNsZWFyRm9jdXMoKQogICAgICAgIHNlbGYuX2VkaXRfcGxhY2UuY2xlYXJGb2N1cygpCiAgICAgICAgc2VsZi5fZWRpdF93aWtpZGF0YS5jbGVhckZvY3VzKCkKCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZSgKICAgICAgICAgICAgZiJTYXZlZCBkZXRhaWxzIGZvciBsb2NhdGlvbl9pZD17c2VsZi5fY3VycmVudF9sb2NhdGlvbl9pZH0iCiAgICAgICAgKQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAAA2LAAAAAAAAAAAAAAAAPC/"
				],
				[
					103,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAiMgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSB0eXBpbmcgaW1wb3J0IFNldAoKZnJvbSBQeVNpZGU2LlF0V2lkZ2V0cyBpbXBvcnQgKAogICAgUU1haW5XaW5kb3csCiAgICBRV2lkZ2V0LAogICAgUUxpc3RXaWRnZXQsCiAgICBRTGlzdFdpZGdldEl0ZW0sCiAgICBRTGFiZWwsCiAgICBRVkJveExheW91dCwKICAgIFFIQm94TGF5b3V0LAogICAgUUxpbmVFZGl0LAogICAgUVB1c2hCdXR0b24sCiAgICBRQ29tYm9Cb3gsCiAgICBRRm9ybUxheW91dCwKKQpmcm9tIFB5U2lkZTYuUXRDb3JlIGltcG9ydCBRdAoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IGdhemV0dGVlcl9wYXRoCgoKZGVmIG5vcm1hbGl6ZSh0ZXh0OiBzdHIpIC0+IHN0cjoKICAgIHJldHVybiAiICIuam9pbih0ZXh0Lmxvd2VyKCkuc3BsaXQoKSkKCgpjbGFzcyBNYWluV2luZG93KFFNYWluV2luZG93KToKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQoKICAgICAgICBzZWxmLnNldFdpbmRvd1RpdGxlKCJkYmVkaXRjMiDigJQgYWxpYXMgJiBsb2NhdGlvbiBlZGl0b3IiKQogICAgICAgIHNlbGYuX2RiX3BhdGggPSBnYXpldHRlZXJfcGF0aCgpCgogICAgICAgICMgLS0tLSBzZWxlY3Rpb24gc3RhdGUgLS0tLQogICAgICAgIHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczogU2V0W2ludF0gPSBzZXQoKQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTZWFyY2ggd2lkZ2V0cwogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQgPSBRTGluZUVkaXQoc2VsZikKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdC5zZXRQbGFjZWhvbGRlclRleHQoIlNlYXJjaOKApiIpCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQudGV4dENoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9zZWFyY2hfY2hhbmdlZCkKCiAgICAgICAgc2VsZi5fbG9va3VwX21vZGUgPSBRQ29tYm9Cb3goc2VsZikKICAgICAgICBzZWxmLl9sb29rdXBfbW9kZS5hZGRJdGVtcyhbImFsaWFzIiwgIm9zbV9pZCIsICJ3aWtpZGF0YSJdKQogICAgICAgIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0Q2hhbmdlZC5jb25uZWN0KAogICAgICAgICAgICBsYW1iZGEgXzogc2VsZi5fb25fc2VhcmNoX2NoYW5nZWQoc2VsZi5fc2VhcmNoX2VkaXQudGV4dCgpKQogICAgICAgICkKCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdCA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5zZXRTZWxlY3Rpb25Nb2RlKFFMaXN0V2lkZ2V0LkV4dGVuZGVkU2VsZWN0aW9uKQogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuaXRlbVNlbGVjdGlvbkNoYW5nZWQuY29ubmVjdCgKICAgICAgICAgICAgc2VsZi5fb25fYWxpYXNfc2VsZWN0aW9uX2NoYW5nZWQKICAgICAgICApCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIERldGFpbHMgZm9ybQogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fZGV0YWlsc193aWRnZXQgPSBRV2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQgPSBRVkJveExheW91dChzZWxmLl9kZXRhaWxzX3dpZGdldCkKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5zZXRBbGlnbm1lbnQoUXQuQWxpZ25Ub3ApCgogICAgICAgIGZvcm0gPSBRRm9ybUxheW91dCgpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkTGF5b3V0KGZvcm0pCgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZCA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX2xhdCA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX2xvbiA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX3JlZ2lvbiA9IFFMYWJlbCgiLSIpCgogICAgICAgIHNlbGYuX2VkaXRfbmFtZSA9IFFMaW5lRWRpdCgpCiAgICAgICAgc2VsZi5fZWRpdF9wbGFjZSA9IFFMaW5lRWRpdCgpCiAgICAgICAgc2VsZi5fZWRpdF93aWtpZGF0YSA9IFFMaW5lRWRpdCgpCgogICAgICAgIGZvcm0uYWRkUm93KCJMb2NhdGlvbiBJRDoiLCBzZWxmLl9sYmxfbG9jYXRpb25faWQpCiAgICAgICAgZm9ybS5hZGRSb3coIkxhdGl0dWRlOiIsIHNlbGYuX2xibF9sYXQpCiAgICAgICAgZm9ybS5hZGRSb3coIkxvbmdpdHVkZToiLCBzZWxmLl9sYmxfbG9uKQogICAgICAgIGZvcm0uYWRkUm93KCJOYW1lOiIsIHNlbGYuX2VkaXRfbmFtZSkKICAgICAgICBmb3JtLmFkZFJvdygiUGxhY2U6Iiwgc2VsZi5fZWRpdF9wbGFjZSkKICAgICAgICBmb3JtLmFkZFJvdygiV2lraWRhdGE6Iiwgc2VsZi5fZWRpdF93aWtpZGF0YSkKICAgICAgICBmb3JtLmFkZFJvdygiUmVnaW9uOiIsIHNlbGYuX2xibF9yZWdpb24pCgogICAgICAgIHNlbGYuX3NhdmVfYnRuID0gUVB1c2hCdXR0b24oIlNhdmUgbG9jYXRpb24gY2hhbmdlcyIsIHNlbGYpCiAgICAgICAgc2VsZi5fc2F2ZV9idG4uY2xpY2tlZC5jb25uZWN0KHNlbGYuX3NhdmVfbG9jYXRpb25fY2hhbmdlcykKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRXaWRnZXQoc2VsZi5fc2F2ZV9idG4pCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIEFsaWFzIGVkaXRvciAoYWx3YXlzIGVuYWJsZWQpCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRXaWRnZXQoUUxhYmVsKCJBbGlhc2VzIGZvciBzZWxlY3RlZCBsb2NhdGlvbihzKToiKSkKCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcyA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMpCgogICAgICAgIGFsaWFzX2NvbnRyb2xzID0gUUhCb3hMYXlvdXQoKQogICAgICAgIHNlbGYuX2FsaWFzX2lucHV0ID0gUUxpbmVFZGl0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfaW5wdXQuc2V0UGxhY2Vob2xkZXJUZXh0KCJBZGQgYWxpYXPigKYiKQogICAgICAgIHNlbGYuX2FsaWFzX2FkZF9idG4gPSBRUHVzaEJ1dHRvbigiQWRkIiwgc2VsZikKICAgICAgICBzZWxmLl9hbGlhc19yZW1vdmVfYnRuID0gUVB1c2hCdXR0b24oIlJlbW92ZSIsIHNlbGYpCgogICAgICAgIGFsaWFzX2NvbnRyb2xzLmFkZFdpZGdldChzZWxmLl9hbGlhc19pbnB1dCkKICAgICAgICBhbGlhc19jb250cm9scy5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfYWRkX2J0bikKICAgICAgICBhbGlhc19jb250cm9scy5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfcmVtb3ZlX2J0bikKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRMYXlvdXQoYWxpYXNfY29udHJvbHMpCgogICAgICAgIHNlbGYuX2FsaWFzX2FkZF9idG4uY2xpY2tlZC5jb25uZWN0KHNlbGYuX2FkZF9hbGlhcykKICAgICAgICBzZWxmLl9hbGlhc19yZW1vdmVfYnRuLmNsaWNrZWQuY29ubmVjdChzZWxmLl9yZW1vdmVfYWxpYXMpCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExheW91dAogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgbGVmdCA9IFFXaWRnZXQoc2VsZikKICAgICAgICBsZWZ0X2xheW91dCA9IFFWQm94TGF5b3V0KGxlZnQpCiAgICAgICAgbGVmdF9sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX3NlYXJjaF9lZGl0KQogICAgICAgIGxlZnRfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9sb29rdXBfbW9kZSkKICAgICAgICBsZWZ0X2xheW91dC5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfbGlzdCkKCiAgICAgICAgY2VudHJhbCA9IFFXaWRnZXQoc2VsZikKICAgICAgICBtYWluX2xheW91dCA9IFFIQm94TGF5b3V0KGNlbnRyYWwpCiAgICAgICAgbWFpbl9sYXlvdXQuYWRkV2lkZ2V0KGxlZnQsIDEpCiAgICAgICAgbWFpbl9sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2RldGFpbHNfd2lkZ2V0LCAxKQogICAgICAgIHNlbGYuc2V0Q2VudHJhbFdpZGdldChjZW50cmFsKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKCJSZWFkeSIpCgogICAgICAgIHNlbGYuX3NldF9kZXRhaWxzX2VuYWJsZWQoRmFsc2UpCiAgICAgICAgc2VsZi5fbG9hZF9ieV9hbGlhcygiIikKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlYXJjaAogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfb25fc2VhcmNoX2NoYW5nZWQoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0KCkgPT0gImFsaWFzIjoKICAgICAgICAgICAgc2VsZi5fbG9hZF9ieV9hbGlhcyh0ZXh0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX2xvYWRfYnlfbG9jYXRpb25fZmllbGQoc2VsZi5fbG9va3VwX21vZGUuY3VycmVudFRleHQoKSwgdGV4dCkKCiAgICBkZWYgX2xvYWRfYnlfYWxpYXMoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGlmIHRleHQ6CiAgICAgICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1QgbG9jYXRpb25faWQsIGFsaWFzCiAgICAgICAgICAgICAgICBGUk9NIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgIFdIRVJFIG5vcm1hbGl6ZWQgTElLRSA/CiAgICAgICAgICAgICAgICBPUkRFUiBCWSBhbGlhcwogICAgICAgICAgICAgICAgTElNSVQgMjAwOwogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKGYie25vcm1hbGl6ZSh0ZXh0KX0lIiwpLAogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiU0VMRUNUIGxvY2F0aW9uX2lkLCBhbGlhcyBGUk9NIGxvY2F0aW9uX2FsaWFzZXMgT1JERVIgQlkgYWxpYXMgTElNSVQgMjAwOyIKICAgICAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19saXN0LmNsZWFyKCkKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICBpdGVtID0gUUxpc3RXaWRnZXRJdGVtKHJbImFsaWFzIl0pCiAgICAgICAgICAgIGl0ZW0uc2V0RGF0YShRdC5Vc2VyUm9sZSwgaW50KHJbImxvY2F0aW9uX2lkIl0pKQogICAgICAgICAgICBzZWxmLl9hbGlhc19saXN0LmFkZEl0ZW0oaXRlbSkKCiAgICBkZWYgX2xvYWRfYnlfbG9jYXRpb25fZmllbGQoc2VsZiwgZmllbGQ6IHN0ciwgdmFsdWU6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBub3QgdmFsdWU6CiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXIoKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY29uLnJvd19mYWN0b3J5ID0gc3FsaXRlMy5Sb3cKICAgICAgICBjdXIgPSBjb24uY3Vyc29yKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgIGYiIiIKICAgICAgICAgICAgU0VMRUNUIGxhLmxvY2F0aW9uX2lkLCBsYS5hbGlhcwogICAgICAgICAgICBGUk9NIGxvY2F0aW9ucyBsCiAgICAgICAgICAgIEpPSU4gbG9jYXRpb25fYWxpYXNlcyBsYSBPTiBsYS5sb2NhdGlvbl9pZCA9IGwubG9jYXRpb25faWQKICAgICAgICAgICAgV0hFUkUgbC57ZmllbGR9ID0gPwogICAgICAgICAgICBPUkRFUiBCWSBsYS5hbGlhczsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAodmFsdWUsKSwKICAgICAgICApCgogICAgICAgIHJvd3MgPSBjdXIuZmV0Y2hhbGwoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXIoKQogICAgICAgIGZvciByIGluIHJvd3M6CiAgICAgICAgICAgIGl0ZW0gPSBRTGlzdFdpZGdldEl0ZW0oclsiYWxpYXMiXSkKICAgICAgICAgICAgaXRlbS5zZXREYXRhKFF0LlVzZXJSb2xlLCBpbnQoclsibG9jYXRpb25faWQiXSkpCiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuYWRkSXRlbShpdGVtKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2VsZWN0aW9uIGhhbmRsaW5nCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9vbl9hbGlhc19zZWxlY3Rpb25fY2hhbmdlZChzZWxmKSAtPiBOb25lOgogICAgICAgIGl0ZW1zID0gc2VsZi5fYWxpYXNfbGlzdC5zZWxlY3RlZEl0ZW1zKCkKICAgICAgICBzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMgPSB7CiAgICAgICAgICAgIGludChpLmRhdGEoUXQuVXNlclJvbGUpKSBmb3IgaSBpbiBpdGVtcwogICAgICAgIH0KCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5jbGVhcigpCgogICAgICAgIGlmIGxlbihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpID09IDE6CiAgICAgICAgICAgIGxvY19pZCA9IG5leHQoaXRlcihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpKQogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uKGxvY19pZCkKICAgICAgICAgICAgc2VsZi5fbG9hZF9sb2NhdGlvbl9hbGlhc2VzKGxvY19pZCkKICAgICAgICAgICAgc2VsZi5fc2V0X2RldGFpbHNfZW5hYmxlZChUcnVlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX2NsZWFyX2xvY2F0aW9uX2RldGFpbHMoKQogICAgICAgICAgICBzZWxmLl9zZXRfZGV0YWlsc19lbmFibGVkKEZhbHNlKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKAogICAgICAgICAgICBmIntsZW4oc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKX0gbG9jYXRpb24ocykgc2VsZWN0ZWQiCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgTG9jYXRpb24gbG9hZGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfbG9hZF9sb2NhdGlvbihzZWxmLCBsb2NhdGlvbl9pZDogaW50KSAtPiBOb25lOgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgU0VMRUNUIGxvY2F0aW9uX2lkLCBsYXQsIGxvbiwgbmFtZSwgcGxhY2UsIHdpa2lkYXRhCiAgICAgICAgICAgIEZST00gbG9jYXRpb25zCiAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkID0gPzsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgcm93ID0gY3VyLmZldGNob25lKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBTRUxFQ1Qgci5uYW1lCiAgICAgICAgICAgIEZST00gbG9jYXRpb25fcmVnaW9ucyBscgogICAgICAgICAgICBKT0lOIHJlZ2lvbnMgciBPTiByLnJlZ2lvbl9pZCA9IGxyLnJlZ2lvbl9pZAogICAgICAgICAgICBXSEVSRSBsci5sb2NhdGlvbl9pZCA9ID8KICAgICAgICAgICAgTElNSVQgMTsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgcmVnaW9uX3JvdyA9IGN1ci5mZXRjaG9uZSgpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgaWYgbm90IHJvdzoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZC5zZXRUZXh0KHN0cihyb3dbImxvY2F0aW9uX2lkIl0pKQogICAgICAgIHNlbGYuX2xibF9sYXQuc2V0VGV4dChzdHIocm93WyJsYXQiXSkpCiAgICAgICAgc2VsZi5fbGJsX2xvbi5zZXRUZXh0KHN0cihyb3dbImxvbiJdKSkKICAgICAgICBzZWxmLl9lZGl0X25hbWUuc2V0VGV4dChyb3dbIm5hbWUiXSBvciAiIikKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLnNldFRleHQocm93WyJwbGFjZSJdIG9yICIiKQogICAgICAgIHNlbGYuX2VkaXRfd2lraWRhdGEuc2V0VGV4dChyb3dbIndpa2lkYXRhIl0gb3IgIiIpCiAgICAgICAgc2VsZi5fbGJsX3JlZ2lvbi5zZXRUZXh0KHJlZ2lvbl9yb3dbIm5hbWUiXSBpZiByZWdpb25fcm93IGVsc2UgIi0iKQoKICAgIGRlZiBfbG9hZF9sb2NhdGlvbl9hbGlhc2VzKHNlbGYsIGxvY2F0aW9uX2lkOiBpbnQpIC0+IE5vbmU6CiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICJTRUxFQ1QgYWxpYXMgRlJPTSBsb2NhdGlvbl9hbGlhc2VzIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBPUkRFUiBCWSBhbGlhczsiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgZm9yIChhbGlhcywpIGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmFkZEl0ZW0oYWxpYXMpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFsaWFzIGVkaXRpbmcgKG11bHRpLWxvY2F0aW9uIHNhZmUpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9hZGRfYWxpYXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBub3Qgc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgYWxpYXMgPSBzZWxmLl9hbGlhc19pbnB1dC50ZXh0KCkuc3RyaXAoKQogICAgICAgIGlmIG5vdCBhbGlhczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBmb3IgbG9jX2lkIGluIHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczoKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIElOU0VSVCBPUiBJR05PUkUgSU5UTyBsb2NhdGlvbl9hbGlhc2VzCiAgICAgICAgICAgICAgICAgICAgKGxvY2F0aW9uX2lkLCBhbGlhcywgbm9ybWFsaXplZCkKICAgICAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPyk7CiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICAobG9jX2lkLCBhbGlhcywgbm9ybWFsaXplKGFsaWFzKSksCiAgICAgICAgICAgICkKCiAgICAgICAgY29uLmNvbW1pdCgpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgc2VsZi5fYWxpYXNfaW5wdXQuY2xlYXIoKQoKICAgICAgICBpZiBsZW4oc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKSA9PSAxOgogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXMobmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKAogICAgICAgICAgICBmIkFsaWFzIGFkZGVkIHRvIHtsZW4oc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKX0gbG9jYXRpb24ocykiCiAgICAgICAgKQoKICAgIGRlZiBfcmVtb3ZlX2FsaWFzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgbm90IHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGl0ZW1zID0gc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5zZWxlY3RlZEl0ZW1zKCkKICAgICAgICBpZiBub3QgaXRlbXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBhbGlhcyA9IGl0ZW1zWzBdLnRleHQoKQogICAgICAgIG5vcm0gPSBub3JtYWxpemUoYWxpYXMpCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBmb3IgbG9jX2lkIGluIHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczoKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIERFTEVURSBGUk9NIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkID0gPwogICAgICAgICAgICAgICAgICBBTkQgbm9ybWFsaXplZCA9ID87CiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICAobG9jX2lkLCBub3JtKSwKICAgICAgICAgICAgKQoKICAgICAgICBjb24uY29tbWl0KCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBpZiBsZW4oc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKSA9PSAxOgogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXMobmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKAogICAgICAgICAgICBmIkFsaWFzIHJlbW92ZWQgZnJvbSB7bGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcyl9IGxvY2F0aW9uKHMpIgogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNhdmUgKHNpbmdsZS1sb2NhdGlvbiBvbmx5KQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfc2F2ZV9sb2NhdGlvbl9jaGFuZ2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgIT0gMToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGxvY2F0aW9uX2lkID0gbmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFVQREFURSBsb2NhdGlvbnMKICAgICAgICAgICAgU0VUIG5hbWUgPSA/LCBwbGFjZSA9ID8sIHdpa2lkYXRhID0gPwogICAgICAgICAgICBXSEVSRSBsb2NhdGlvbl9pZCA9ID87CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgc2VsZi5fZWRpdF9uYW1lLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCwKICAgICAgICAgICAgKSwKICAgICAgICApCgogICAgICAgIGlmIGN1ci5yb3djb3VudCAhPSAxOgogICAgICAgICAgICBjb24ucm9sbGJhY2soKQogICAgICAgICAgICBjb24uY2xvc2UoKQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkxvY2F0aW9uIHVwZGF0ZSBhZmZlY3RlZCB1bmV4cGVjdGVkIHJvdyBjb3VudCIpCgogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2xvYWRfbG9jYXRpb24obG9jYXRpb25faWQpCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZShmIlNhdmVkIGxvY2F0aW9uIHtsb2NhdGlvbl9pZH0iKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSGVscGVycwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfY2xlYXJfbG9jYXRpb25fZGV0YWlscyhzZWxmKSAtPiBOb25lOgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZC5zZXRUZXh0KCItIikKICAgICAgICBzZWxmLl9sYmxfbGF0LnNldFRleHQoIi0iKQogICAgICAgIHNlbGYuX2xibF9sb24uc2V0VGV4dCgiLSIpCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lLmNsZWFyKCkKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLmNsZWFyKCkKICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLmNsZWFyKCkKICAgICAgICBzZWxmLl9sYmxfcmVnaW9uLnNldFRleHQoIi0iKQoKICAgIGRlZiBfc2V0X2RldGFpbHNfZW5hYmxlZChzZWxmLCBlbmFibGVkOiBib29sKSAtPiBOb25lOgogICAgICAgIGZvciB3IGluICgKICAgICAgICAgICAgc2VsZi5fZWRpdF9uYW1lLAogICAgICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLAogICAgICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLAogICAgICAgICAgICBzZWxmLl9zYXZlX2J0biwKICAgICAgICApOgogICAgICAgICAgICB3LnNldEVuYWJsZWQoZW5hYmxlZCkKAAAAAAAAAAAcMgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHDIAAAAAAAAcMgAAAAAAAAAAAAAAAPC/"
				],
				[
					107,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAA8TwAAAAAAAAiMgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSB0eXBpbmcgaW1wb3J0IFNldAoKZnJvbSBQeVNpZGU2LlF0V2lkZ2V0cyBpbXBvcnQgKAogICAgUU1haW5XaW5kb3csCiAgICBRV2lkZ2V0LAogICAgUUxpc3RXaWRnZXQsCiAgICBRTGlzdFdpZGdldEl0ZW0sCiAgICBRTGFiZWwsCiAgICBRVkJveExheW91dCwKICAgIFFIQm94TGF5b3V0LAogICAgUUxpbmVFZGl0LAogICAgUVB1c2hCdXR0b24sCiAgICBRQ29tYm9Cb3gsCiAgICBRRm9ybUxheW91dCwKKQpmcm9tIFB5U2lkZTYuUXRDb3JlIGltcG9ydCBRdAoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IGdhemV0dGVlcl9wYXRoCgoKZGVmIG5vcm1hbGl6ZSh0ZXh0OiBzdHIpIC0+IHN0cjoKICAgIHJldHVybiAiICIuam9pbih0ZXh0Lmxvd2VyKCkuc3BsaXQoKSkKCgpjbGFzcyBNYWluV2luZG93KFFNYWluV2luZG93KToKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQoKICAgICAgICBzZWxmLnNldFdpbmRvd1RpdGxlKCJkYmVkaXRjMiDigJQgYWxpYXMgJiBsb2NhdGlvbiBlZGl0b3IiKQogICAgICAgIHNlbGYuX2RiX3BhdGggPSBnYXpldHRlZXJfcGF0aCgpCgogICAgICAgICMgLS0tLSBzZWxlY3Rpb24gc3RhdGUgLS0tLQogICAgICAgIHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczogU2V0W2ludF0gPSBzZXQoKQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTZWFyY2ggd2lkZ2V0cwogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQgPSBRTGluZUVkaXQoc2VsZikKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdC5zZXRQbGFjZWhvbGRlclRleHQoIlNlYXJjaOKApiIpCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQudGV4dENoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9zZWFyY2hfY2hhbmdlZCkKCiAgICAgICAgc2VsZi5fbG9va3VwX21vZGUgPSBRQ29tYm9Cb3goc2VsZikKICAgICAgICBzZWxmLl9sb29rdXBfbW9kZS5hZGRJdGVtcyhbImFsaWFzIiwgIm9zbV9pZCIsICJ3aWtpZGF0YSJdKQogICAgICAgIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0Q2hhbmdlZC5jb25uZWN0KAogICAgICAgICAgICBsYW1iZGEgXzogc2VsZi5fb25fc2VhcmNoX2NoYW5nZWQoc2VsZi5fc2VhcmNoX2VkaXQudGV4dCgpKQogICAgICAgICkKCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdCA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5zZXRTZWxlY3Rpb25Nb2RlKFFMaXN0V2lkZ2V0LkV4dGVuZGVkU2VsZWN0aW9uKQogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuaXRlbVNlbGVjdGlvbkNoYW5nZWQuY29ubmVjdCgKICAgICAgICAgICAgc2VsZi5fb25fYWxpYXNfc2VsZWN0aW9uX2NoYW5nZWQKICAgICAgICApCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIERldGFpbHMgZm9ybQogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fZGV0YWlsc193aWRnZXQgPSBRV2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQgPSBRVkJveExheW91dChzZWxmLl9kZXRhaWxzX3dpZGdldCkKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5zZXRBbGlnbm1lbnQoUXQuQWxpZ25Ub3ApCgogICAgICAgIGZvcm0gPSBRRm9ybUxheW91dCgpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkTGF5b3V0KGZvcm0pCgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZCA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX2xhdCA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX2xvbiA9IFFMYWJlbCgiLSIpCiAgICAgICAgc2VsZi5fbGJsX3JlZ2lvbiA9IFFMYWJlbCgiLSIpCgogICAgICAgIHNlbGYuX2VkaXRfbmFtZSA9IFFMaW5lRWRpdCgpCiAgICAgICAgc2VsZi5fZWRpdF9wbGFjZSA9IFFMaW5lRWRpdCgpCiAgICAgICAgc2VsZi5fZWRpdF93aWtpZGF0YSA9IFFMaW5lRWRpdCgpCgogICAgICAgIGZvcm0uYWRkUm93KCJMb2NhdGlvbiBJRDoiLCBzZWxmLl9sYmxfbG9jYXRpb25faWQpCiAgICAgICAgZm9ybS5hZGRSb3coIkxhdGl0dWRlOiIsIHNlbGYuX2xibF9sYXQpCiAgICAgICAgZm9ybS5hZGRSb3coIkxvbmdpdHVkZToiLCBzZWxmLl9sYmxfbG9uKQogICAgICAgIGZvcm0uYWRkUm93KCJOYW1lOiIsIHNlbGYuX2VkaXRfbmFtZSkKICAgICAgICBmb3JtLmFkZFJvdygiUGxhY2U6Iiwgc2VsZi5fZWRpdF9wbGFjZSkKICAgICAgICBmb3JtLmFkZFJvdygiV2lraWRhdGE6Iiwgc2VsZi5fZWRpdF93aWtpZGF0YSkKICAgICAgICBmb3JtLmFkZFJvdygiUmVnaW9uOiIsIHNlbGYuX2xibF9yZWdpb24pCgogICAgICAgIHNlbGYuX3NhdmVfYnRuID0gUVB1c2hCdXR0b24oIlNhdmUgbG9jYXRpb24gY2hhbmdlcyIsIHNlbGYpCiAgICAgICAgc2VsZi5fc2F2ZV9idG4uY2xpY2tlZC5jb25uZWN0KHNlbGYuX3NhdmVfbG9jYXRpb25fY2hhbmdlcykKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRXaWRnZXQoc2VsZi5fc2F2ZV9idG4pCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIEFsaWFzIGVkaXRvciAoYWx3YXlzIGVuYWJsZWQpCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRXaWRnZXQoUUxhYmVsKCJBbGlhc2VzIGZvciBzZWxlY3RlZCBsb2NhdGlvbihzKToiKSkKCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcyA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fZGV0YWlsc19sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMpCgogICAgICAgIGFsaWFzX2NvbnRyb2xzID0gUUhCb3hMYXlvdXQoKQogICAgICAgIHNlbGYuX2FsaWFzX2lucHV0ID0gUUxpbmVFZGl0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfaW5wdXQuc2V0UGxhY2Vob2xkZXJUZXh0KCJBZGQgYWxpYXPigKYiKQogICAgICAgIHNlbGYuX2FsaWFzX2FkZF9idG4gPSBRUHVzaEJ1dHRvbigiQWRkIiwgc2VsZikKICAgICAgICBzZWxmLl9hbGlhc19yZW1vdmVfYnRuID0gUVB1c2hCdXR0b24oIlJlbW92ZSIsIHNlbGYpCgogICAgICAgIGFsaWFzX2NvbnRyb2xzLmFkZFdpZGdldChzZWxmLl9hbGlhc19pbnB1dCkKICAgICAgICBhbGlhc19jb250cm9scy5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfYWRkX2J0bikKICAgICAgICBhbGlhc19jb250cm9scy5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfcmVtb3ZlX2J0bikKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRMYXlvdXQoYWxpYXNfY29udHJvbHMpCgogICAgICAgIHNlbGYuX2FsaWFzX2FkZF9idG4uY2xpY2tlZC5jb25uZWN0KHNlbGYuX2FkZF9hbGlhcykKICAgICAgICBzZWxmLl9hbGlhc19yZW1vdmVfYnRuLmNsaWNrZWQuY29ubmVjdChzZWxmLl9yZW1vdmVfYWxpYXMpCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExheW91dAogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgbGVmdCA9IFFXaWRnZXQoc2VsZikKICAgICAgICBsZWZ0X2xheW91dCA9IFFWQm94TGF5b3V0KGxlZnQpCiAgICAgICAgbGVmdF9sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX3NlYXJjaF9lZGl0KQogICAgICAgIGxlZnRfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9sb29rdXBfbW9kZSkKICAgICAgICBsZWZ0X2xheW91dC5hZGRXaWRnZXQoc2VsZi5fYWxpYXNfbGlzdCkKCiAgICAgICAgY2VudHJhbCA9IFFXaWRnZXQoc2VsZikKICAgICAgICBtYWluX2xheW91dCA9IFFIQm94TGF5b3V0KGNlbnRyYWwpCiAgICAgICAgbWFpbl9sYXlvdXQuYWRkV2lkZ2V0KGxlZnQsIDEpCiAgICAgICAgbWFpbl9sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2RldGFpbHNfd2lkZ2V0LCAxKQogICAgICAgIHNlbGYuc2V0Q2VudHJhbFdpZGdldChjZW50cmFsKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKCJSZWFkeSIpCgogICAgICAgIHNlbGYuX3NldF9kZXRhaWxzX2VuYWJsZWQoRmFsc2UpCiAgICAgICAgc2VsZi5fbG9hZF9ieV9hbGlhcygiIikKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlYXJjaAogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfb25fc2VhcmNoX2NoYW5nZWQoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIGlmIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0KCkgPT0gImFsaWFzIjoKICAgICAgICAgICAgc2VsZi5fbG9hZF9ieV9hbGlhcyh0ZXh0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX2xvYWRfYnlfbG9jYXRpb25fZmllbGQoc2VsZi5fbG9va3VwX21vZGUuY3VycmVudFRleHQoKSwgdGV4dCkKCiAgICBkZWYgX2xvYWRfYnlfYWxpYXMoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGlmIHRleHQ6CiAgICAgICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1QgbG9jYXRpb25faWQsIGFsaWFzCiAgICAgICAgICAgICAgICBGUk9NIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgIFdIRVJFIG5vcm1hbGl6ZWQgTElLRSA/CiAgICAgICAgICAgICAgICBPUkRFUiBCWSBhbGlhcwogICAgICAgICAgICAgICAgTElNSVQgMjAwOwogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKGYie25vcm1hbGl6ZSh0ZXh0KX0lIiwpLAogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiU0VMRUNUIGxvY2F0aW9uX2lkLCBhbGlhcyBGUk9NIGxvY2F0aW9uX2FsaWFzZXMgT1JERVIgQlkgYWxpYXMgTElNSVQgMjAwOyIKICAgICAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19saXN0LmNsZWFyKCkKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICBpdGVtID0gUUxpc3RXaWRnZXRJdGVtKHJbImFsaWFzIl0pCiAgICAgICAgICAgIGl0ZW0uc2V0RGF0YShRdC5Vc2VyUm9sZSwgaW50KHJbImxvY2F0aW9uX2lkIl0pKQogICAgICAgICAgICBzZWxmLl9hbGlhc19saXN0LmFkZEl0ZW0oaXRlbSkKCiAgICBkZWYgX2xvYWRfYnlfbG9jYXRpb25fZmllbGQoc2VsZiwgZmllbGQ6IHN0ciwgdmFsdWU6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBub3QgdmFsdWU6CiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXIoKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY29uLnJvd19mYWN0b3J5ID0gc3FsaXRlMy5Sb3cKICAgICAgICBjdXIgPSBjb24uY3Vyc29yKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgIGYiIiIKICAgICAgICAgICAgU0VMRUNUIGxhLmxvY2F0aW9uX2lkLCBsYS5hbGlhcwogICAgICAgICAgICBGUk9NIGxvY2F0aW9ucyBsCiAgICAgICAgICAgIEpPSU4gbG9jYXRpb25fYWxpYXNlcyBsYSBPTiBsYS5sb2NhdGlvbl9pZCA9IGwubG9jYXRpb25faWQKICAgICAgICAgICAgV0hFUkUgbC57ZmllbGR9ID0gPwogICAgICAgICAgICBPUkRFUiBCWSBsYS5hbGlhczsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAodmFsdWUsKSwKICAgICAgICApCgogICAgICAgIHJvd3MgPSBjdXIuZmV0Y2hhbGwoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXIoKQogICAgICAgIGZvciByIGluIHJvd3M6CiAgICAgICAgICAgIGl0ZW0gPSBRTGlzdFdpZGdldEl0ZW0oclsiYWxpYXMiXSkKICAgICAgICAgICAgaXRlbS5zZXREYXRhKFF0LlVzZXJSb2xlLCBpbnQoclsibG9jYXRpb25faWQiXSkpCiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuYWRkSXRlbShpdGVtKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2VsZWN0aW9uIGhhbmRsaW5nCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9vbl9hbGlhc19zZWxlY3Rpb25fY2hhbmdlZChzZWxmKSAtPiBOb25lOgogICAgICAgIGl0ZW1zID0gc2VsZi5fYWxpYXNfbGlzdC5zZWxlY3RlZEl0ZW1zKCkKICAgICAgICBzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMgPSB7CiAgICAgICAgICAgIGludChpLmRhdGEoUXQuVXNlclJvbGUpKSBmb3IgaSBpbiBpdGVtcwogICAgICAgIH0KCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5jbGVhcigpCgogICAgICAgIGlmIGxlbihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpID09IDE6CiAgICAgICAgICAgIGxvY19pZCA9IG5leHQoaXRlcihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpKQogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uKGxvY19pZCkKICAgICAgICAgICAgc2VsZi5fbG9hZF9sb2NhdGlvbl9hbGlhc2VzKGxvY19pZCkKICAgICAgICAgICAgc2VsZi5fc2V0X2RldGFpbHNfZW5hYmxlZChUcnVlKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX2NsZWFyX2xvY2F0aW9uX2RldGFpbHMoKQogICAgICAgICAgICBzZWxmLl9zZXRfZGV0YWlsc19lbmFibGVkKEZhbHNlKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKAogICAgICAgICAgICBmIntsZW4oc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKX0gbG9jYXRpb24ocykgc2VsZWN0ZWQiCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgTG9jYXRpb24gbG9hZGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfbG9hZF9sb2NhdGlvbihzZWxmLCBsb2NhdGlvbl9pZDogaW50KSAtPiBOb25lOgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgU0VMRUNUIGxvY2F0aW9uX2lkLCBsYXQsIGxvbiwgbmFtZSwgcGxhY2UsIHdpa2lkYXRhCiAgICAgICAgICAgIEZST00gbG9jYXRpb25zCiAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkID0gPzsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgcm93ID0gY3VyLmZldGNob25lKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBTRUxFQ1Qgci5uYW1lCiAgICAgICAgICAgIEZST00gbG9jYXRpb25fcmVnaW9ucyBscgogICAgICAgICAgICBKT0lOIHJlZ2lvbnMgciBPTiByLnJlZ2lvbl9pZCA9IGxyLnJlZ2lvbl9pZAogICAgICAgICAgICBXSEVSRSBsci5sb2NhdGlvbl9pZCA9ID8KICAgICAgICAgICAgTElNSVQgMTsKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgcmVnaW9uX3JvdyA9IGN1ci5mZXRjaG9uZSgpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgaWYgbm90IHJvdzoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZC5zZXRUZXh0KHN0cihyb3dbImxvY2F0aW9uX2lkIl0pKQogICAgICAgIHNlbGYuX2xibF9sYXQuc2V0VGV4dChzdHIocm93WyJsYXQiXSkpCiAgICAgICAgc2VsZi5fbGJsX2xvbi5zZXRUZXh0KHN0cihyb3dbImxvbiJdKSkKICAgICAgICBzZWxmLl9lZGl0X25hbWUuc2V0VGV4dChyb3dbIm5hbWUiXSBvciAiIikKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLnNldFRleHQocm93WyJwbGFjZSJdIG9yICIiKQogICAgICAgIHNlbGYuX2VkaXRfd2lraWRhdGEuc2V0VGV4dChyb3dbIndpa2lkYXRhIl0gb3IgIiIpCiAgICAgICAgc2VsZi5fbGJsX3JlZ2lvbi5zZXRUZXh0KHJlZ2lvbl9yb3dbIm5hbWUiXSBpZiByZWdpb25fcm93IGVsc2UgIi0iKQoKICAgIGRlZiBfbG9hZF9sb2NhdGlvbl9hbGlhc2VzKHNlbGYsIGxvY2F0aW9uX2lkOiBpbnQpIC0+IE5vbmU6CiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICJTRUxFQ1QgYWxpYXMgRlJPTSBsb2NhdGlvbl9hbGlhc2VzIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBPUkRFUiBCWSBhbGlhczsiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgZm9yIChhbGlhcywpIGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmFkZEl0ZW0oYWxpYXMpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFsaWFzIGVkaXRpbmcgKG11bHRpLWxvY2F0aW9uIHNhZmUpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9hZGRfYWxpYXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBub3Qgc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgYWxpYXMgPSBzZWxmLl9hbGlhc19pbnB1dC50ZXh0KCkuc3RyaXAoKQogICAgICAgIGlmIG5vdCBhbGlhczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBmb3IgbG9jX2lkIGluIHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczoKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIElOU0VSVCBPUiBJR05PUkUgSU5UTyBsb2NhdGlvbl9hbGlhc2VzCiAgICAgICAgICAgICAgICAgICAgKGxvY2F0aW9uX2lkLCBhbGlhcywgbm9ybWFsaXplZCkKICAgICAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPyk7CiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICAobG9jX2lkLCBhbGlhcywgbm9ybWFsaXplKGFsaWFzKSksCiAgICAgICAgICAgICkKCiAgICAgICAgY29uLmNvbW1pdCgpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICAgICAgc2VsZi5fYWxpYXNfaW5wdXQuY2xlYXIoKQoKICAgICAgICBpZiBsZW4oc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKSA9PSAxOgogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXMobmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKAogICAgICAgICAgICBmIkFsaWFzIGFkZGVkIHRvIHtsZW4oc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKX0gbG9jYXRpb24ocykiCiAgICAgICAgKQoKICAgIGRlZiBfcmVtb3ZlX2FsaWFzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgbm90IHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGl0ZW1zID0gc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5zZWxlY3RlZEl0ZW1zKCkKICAgICAgICBpZiBub3QgaXRlbXM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBhbGlhcyA9IGl0ZW1zWzBdLnRleHQoKQogICAgICAgIG5vcm0gPSBub3JtYWxpemUoYWxpYXMpCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBmb3IgbG9jX2lkIGluIHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczoKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIERFTEVURSBGUk9NIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkID0gPwogICAgICAgICAgICAgICAgICBBTkQgbm9ybWFsaXplZCA9ID87CiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICAobG9jX2lkLCBub3JtKSwKICAgICAgICAgICAgKQoKICAgICAgICBjb24uY29tbWl0KCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBpZiBsZW4oc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKSA9PSAxOgogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXMobmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKAogICAgICAgICAgICBmIkFsaWFzIHJlbW92ZWQgZnJvbSB7bGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcyl9IGxvY2F0aW9uKHMpIgogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNhdmUgKHNpbmdsZS1sb2NhdGlvbiBvbmx5KQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfc2F2ZV9sb2NhdGlvbl9jaGFuZ2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgIT0gMToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGxvY2F0aW9uX2lkID0gbmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFVQREFURSBsb2NhdGlvbnMKICAgICAgICAgICAgU0VUIG5hbWUgPSA/LCBwbGFjZSA9ID8sIHdpa2lkYXRhID0gPwogICAgICAgICAgICBXSEVSRSBsb2NhdGlvbl9pZCA9ID87CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgc2VsZi5fZWRpdF9uYW1lLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCwKICAgICAgICAgICAgKSwKICAgICAgICApCgogICAgICAgIGlmIGN1ci5yb3djb3VudCAhPSAxOgogICAgICAgICAgICBjb24ucm9sbGJhY2soKQogICAgICAgICAgICBjb24uY2xvc2UoKQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkxvY2F0aW9uIHVwZGF0ZSBhZmZlY3RlZCB1bmV4cGVjdGVkIHJvdyBjb3VudCIpCgogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2xvYWRfbG9jYXRpb24obG9jYXRpb25faWQpCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZShmIlNhdmVkIGxvY2F0aW9uIHtsb2NhdGlvbl9pZH0iKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSGVscGVycwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfY2xlYXJfbG9jYXRpb25fZGV0YWlscyhzZWxmKSAtPiBOb25lOgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZC5zZXRUZXh0KCItIikKICAgICAgICBzZWxmLl9sYmxfbGF0LnNldFRleHQoIi0iKQogICAgICAgIHNlbGYuX2xibF9sb24uc2V0VGV4dCgiLSIpCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lLmNsZWFyKCkKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLmNsZWFyKCkKICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLmNsZWFyKCkKICAgICAgICBzZWxmLl9sYmxfcmVnaW9uLnNldFRleHQoIi0iKQoKICAgIGRlZiBfc2V0X2RldGFpbHNfZW5hYmxlZChzZWxmLCBlbmFibGVkOiBib29sKSAtPiBOb25lOgogICAgICAgIGZvciB3IGluICgKICAgICAgICAgICAgc2VsZi5fZWRpdF9uYW1lLAogICAgICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLAogICAgICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLAogICAgICAgICAgICBzZWxmLl9zYXZlX2J0biwKICAgICAgICApOgogICAgICAgICAgICB3LnNldEVuYWJsZWQoZW5hYmxlZCkK",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAcMgAAAAAAAAAAAAAAAPC/"
				],
				[
					108,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD3PAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSB0eXBpbmcgaW1wb3J0IFNldAoKZnJvbSBQeVNpZGU2LlF0V2lkZ2V0cyBpbXBvcnQgKAogICAgUU1haW5XaW5kb3csCiAgICBRV2lkZ2V0LAogICAgUUxpc3RXaWRnZXQsCiAgICBRTGlzdFdpZGdldEl0ZW0sCiAgICBRTGFiZWwsCiAgICBRVkJveExheW91dCwKICAgIFFIQm94TGF5b3V0LAogICAgUUxpbmVFZGl0LAogICAgUVB1c2hCdXR0b24sCiAgICBRQ29tYm9Cb3gsCiAgICBRRm9ybUxheW91dCwKKQpmcm9tIFB5U2lkZTYuUXRDb3JlIGltcG9ydCBRdAoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IGdhemV0dGVlcl9wYXRoCgoKZGVmIG5vcm1hbGl6ZSh0ZXh0OiBzdHIpIC0+IHN0cjoKICAgIHJldHVybiAiICIuam9pbih0ZXh0Lmxvd2VyKCkuc3BsaXQoKSkKCgpjbGFzcyBNYWluV2luZG93KFFNYWluV2luZG93KToKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQoKICAgICAgICBzZWxmLnNldFdpbmRvd1RpdGxlKCJkYmVkaXRjMiDigJQgYWxpYXMgJiBsb2NhdGlvbiBlZGl0b3IiKQogICAgICAgIHNlbGYuX2RiX3BhdGggPSBnYXpldHRlZXJfcGF0aCgpCgogICAgICAgICMgLS0tLSBzZWxlY3Rpb24gc3RhdGUgLS0tLQogICAgICAgIHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczogU2V0W2ludF0gPSBzZXQoKQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTZWFyY2ggd2lkZ2V0cwogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQgPSBRTGluZUVkaXQoc2VsZikKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdC5zZXRQbGFjZWhvbGRlclRleHQoIlNlYXJjaOKApiIpCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQudGV4dENoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9zZWFyY2hfY2hhbmdlZCkKCiAgICAgICAgc2VsZi5fbG9va3VwX21vZGUgPSBRQ29tYm9Cb3goc2VsZikKICAgICAgICBzZWxmLl9sb29rdXBfbW9kZS5hZGRJdGVtcyhbImFsaWFzIiwgIm9zbV9pZCIsICJ3aWtpZGF0YSJdKQogICAgICAgIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0Q2hhbmdlZC5jb25uZWN0KAogICAgICAgICAgICBsYW1iZGEgXzogc2VsZi5fb25fc2VhcmNoX2NoYW5nZWQoc2VsZi5fc2VhcmNoX2VkaXQudGV4dCgpKQogICAgICAgICkKCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdCA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5zZXRTZWxlY3Rpb25Nb2RlKFFMaXN0V2lkZ2V0LkV4dGVuZGVkU2VsZWN0aW9uKQogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuaXRlbVNlbGVjdGlvbkNoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9hbGlhc19zZWxlY3Rpb25fY2hhbmdlZCkKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgRGV0YWlscyBmb3JtCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBzZWxmLl9kZXRhaWxzX3dpZGdldCA9IFFXaWRnZXQoc2VsZikKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dCA9IFFWQm94TGF5b3V0KHNlbGYuX2RldGFpbHNfd2lkZ2V0KQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0LnNldEFsaWdubWVudChRdC5BbGlnblRvcCkKCiAgICAgICAgZm9ybSA9IFFGb3JtTGF5b3V0KCkKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRMYXlvdXQoZm9ybSkKCiAgICAgICAgc2VsZi5fbGJsX2xvY2F0aW9uX2lkID0gUUxhYmVsKCItIikKICAgICAgICBzZWxmLl9sYmxfbGF0ID0gUUxhYmVsKCItIikKICAgICAgICBzZWxmLl9sYmxfbG9uID0gUUxhYmVsKCItIikKICAgICAgICBzZWxmLl9sYmxfcmVnaW9uID0gUUxhYmVsKCItIikKCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lID0gUUxpbmVFZGl0KCkKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlID0gUUxpbmVFZGl0KCkKICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhID0gUUxpbmVFZGl0KCkKCiAgICAgICAgZm9ybS5hZGRSb3coIkxvY2F0aW9uIElEOiIsIHNlbGYuX2xibF9sb2NhdGlvbl9pZCkKICAgICAgICBmb3JtLmFkZFJvdygiTGF0aXR1ZGU6Iiwgc2VsZi5fbGJsX2xhdCkKICAgICAgICBmb3JtLmFkZFJvdygiTG9uZ2l0dWRlOiIsIHNlbGYuX2xibF9sb24pCiAgICAgICAgZm9ybS5hZGRSb3coIk5hbWU6Iiwgc2VsZi5fZWRpdF9uYW1lKQogICAgICAgIGZvcm0uYWRkUm93KCJQbGFjZToiLCBzZWxmLl9lZGl0X3BsYWNlKQogICAgICAgIGZvcm0uYWRkUm93KCJXaWtpZGF0YToiLCBzZWxmLl9lZGl0X3dpa2lkYXRhKQogICAgICAgIGZvcm0uYWRkUm93KCJSZWdpb246Iiwgc2VsZi5fbGJsX3JlZ2lvbikKCiAgICAgICAgc2VsZi5fc2F2ZV9idG4gPSBRUHVzaEJ1dHRvbigiU2F2ZSBsb2NhdGlvbiBjaGFuZ2VzIiwgc2VsZikKICAgICAgICBzZWxmLl9zYXZlX2J0bi5jbGlja2VkLmNvbm5lY3Qoc2VsZi5fc2F2ZV9sb2NhdGlvbl9jaGFuZ2VzKQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9zYXZlX2J0bikKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgQWxpYXMgZWRpdG9yIChzaW5nbGUgKyBtdWx0aSBzZWxlY3QpCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRXaWRnZXQoUUxhYmVsKCJBbGlhc2VzIGZvciBzZWxlY3RlZCBsb2NhdGlvbihzKToiKSkKCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcyA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5zZXRTZWxlY3Rpb25Nb2RlKFFMaXN0V2lkZ2V0LlNpbmdsZVNlbGVjdGlvbikKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRXaWRnZXQoc2VsZi5fbG9jYXRpb25fYWxpYXNlcykKCiAgICAgICAgYWxpYXNfY29udHJvbHMgPSBRSEJveExheW91dCgpCiAgICAgICAgc2VsZi5fYWxpYXNfaW5wdXQgPSBRTGluZUVkaXQoc2VsZikKICAgICAgICBzZWxmLl9hbGlhc19pbnB1dC5zZXRQbGFjZWhvbGRlclRleHQoIkFkZCBhbGlhc+KApiIpCiAgICAgICAgc2VsZi5fYWxpYXNfYWRkX2J0biA9IFFQdXNoQnV0dG9uKCJBZGQiLCBzZWxmKQogICAgICAgIHNlbGYuX2FsaWFzX3JlbW92ZV9idG4gPSBRUHVzaEJ1dHRvbigiUmVtb3ZlIiwgc2VsZikKCiAgICAgICAgYWxpYXNfY29udHJvbHMuYWRkV2lkZ2V0KHNlbGYuX2FsaWFzX2lucHV0KQogICAgICAgIGFsaWFzX2NvbnRyb2xzLmFkZFdpZGdldChzZWxmLl9hbGlhc19hZGRfYnRuKQogICAgICAgIGFsaWFzX2NvbnRyb2xzLmFkZFdpZGdldChzZWxmLl9hbGlhc19yZW1vdmVfYnRuKQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0LmFkZExheW91dChhbGlhc19jb250cm9scykKCiAgICAgICAgc2VsZi5fYWxpYXNfYWRkX2J0bi5jbGlja2VkLmNvbm5lY3Qoc2VsZi5fYWRkX2FsaWFzKQogICAgICAgIHNlbGYuX2FsaWFzX3JlbW92ZV9idG4uY2xpY2tlZC5jb25uZWN0KHNlbGYuX3JlbW92ZV9hbGlhcykKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgTGF5b3V0CiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBsZWZ0ID0gUVdpZGdldChzZWxmKQogICAgICAgIGxlZnRfbGF5b3V0ID0gUVZCb3hMYXlvdXQobGVmdCkKICAgICAgICBsZWZ0X2xheW91dC5hZGRXaWRnZXQoc2VsZi5fc2VhcmNoX2VkaXQpCiAgICAgICAgbGVmdF9sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2xvb2t1cF9tb2RlKQogICAgICAgIGxlZnRfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9hbGlhc19saXN0KQoKICAgICAgICBjZW50cmFsID0gUVdpZGdldChzZWxmKQogICAgICAgIG1haW5fbGF5b3V0ID0gUUhCb3hMYXlvdXQoY2VudHJhbCkKICAgICAgICBtYWluX2xheW91dC5hZGRXaWRnZXQobGVmdCwgMSkKICAgICAgICBtYWluX2xheW91dC5hZGRXaWRnZXQoc2VsZi5fZGV0YWlsc193aWRnZXQsIDEpCiAgICAgICAgc2VsZi5zZXRDZW50cmFsV2lkZ2V0KGNlbnRyYWwpCgogICAgICAgIHNlbGYuc3RhdHVzQmFyKCkuc2hvd01lc3NhZ2UoIlJlYWR5IikKCiAgICAgICAgc2VsZi5fc2V0X2RldGFpbHNfZW5hYmxlZChGYWxzZSkKICAgICAgICBzZWxmLl9sb2FkX2J5X2FsaWFzKCIiKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2VhcmNoCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9vbl9zZWFyY2hfY2hhbmdlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgIyBDbGVhcmluZy9yZWZyZXNoaW5nIHNlYXJjaCByZXN1bHRzIHNob3VsZCBhbHNvIGNsZWFyIHNlbGVjdGlvbiBzdGF0ZQogICAgICAgICMgYmVjYXVzZSBzZWxlY3RlZCBpdGVtcyBtaWdodCBubyBsb25nZXIgZXhpc3QuCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5ibG9ja1NpZ25hbHMoVHJ1ZSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXJTZWxlY3Rpb24oKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuYmxvY2tTaWduYWxzKEZhbHNlKQoKICAgICAgICBzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMuY2xlYXIoKQogICAgICAgIHNlbGYuX2NsZWFyX2xvY2F0aW9uX2RldGFpbHMoKQogICAgICAgIHNlbGYuX3NldF9kZXRhaWxzX2VuYWJsZWQoRmFsc2UpCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5jbGVhcigpCgogICAgICAgIGlmIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0KCkgPT0gImFsaWFzIjoKICAgICAgICAgICAgc2VsZi5fbG9hZF9ieV9hbGlhcyh0ZXh0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX2xvYWRfYnlfbG9jYXRpb25fZmllbGQoc2VsZi5fbG9va3VwX21vZGUuY3VycmVudFRleHQoKSwgdGV4dCkKCiAgICBkZWYgX2xvYWRfYnlfYWxpYXMoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGlmIHRleHQ6CiAgICAgICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1QgbG9jYXRpb25faWQsIGFsaWFzCiAgICAgICAgICAgICAgICBGUk9NIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgIFdIRVJFIG5vcm1hbGl6ZWQgTElLRSA/CiAgICAgICAgICAgICAgICBPUkRFUiBCWSBhbGlhcwogICAgICAgICAgICAgICAgTElNSVQgMjAwOwogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKGYie25vcm1hbGl6ZSh0ZXh0KX0lIiwpLAogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiU0VMRUNUIGxvY2F0aW9uX2lkLCBhbGlhcyBGUk9NIGxvY2F0aW9uX2FsaWFzZXMgT1JERVIgQlkgYWxpYXMgTElNSVQgMjAwOyIKICAgICAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19saXN0LmNsZWFyKCkKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICBpdGVtID0gUUxpc3RXaWRnZXRJdGVtKHJbImFsaWFzIl0pCiAgICAgICAgICAgIGl0ZW0uc2V0RGF0YShRdC5Vc2VyUm9sZSwgaW50KHJbImxvY2F0aW9uX2lkIl0pKQogICAgICAgICAgICBzZWxmLl9hbGlhc19saXN0LmFkZEl0ZW0oaXRlbSkKCiAgICBkZWYgX2xvYWRfYnlfbG9jYXRpb25fZmllbGQoc2VsZiwgZmllbGQ6IHN0ciwgdmFsdWU6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBub3QgdmFsdWU6CiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXIoKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY29uLnJvd19mYWN0b3J5ID0gc3FsaXRlMy5Sb3cKICAgICAgICBjdXIgPSBjb24uY3Vyc29yKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgIGYiIiIKICAgICAgICAgICAgU0VMRUNUIGxhLmxvY2F0aW9uX2lkLCBsYS5hbGlhcwogICAgICAgICAgICBGUk9NIGxvY2F0aW9ucyBsCiAgICAgICAgICAgIEpPSU4gbG9jYXRpb25fYWxpYXNlcyBsYSBPTiBsYS5sb2NhdGlvbl9pZCA9IGwubG9jYXRpb25faWQKICAgICAgICAgICAgV0hFUkUgbC57ZmllbGR9ID0gPwogICAgICAgICAgICBPUkRFUiBCWSBsYS5hbGlhcwogICAgICAgICAgICBMSU1JVCAyMDA7CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKHZhbHVlLCksCiAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19saXN0LmNsZWFyKCkKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICBpdGVtID0gUUxpc3RXaWRnZXRJdGVtKHJbImFsaWFzIl0pCiAgICAgICAgICAgIGl0ZW0uc2V0RGF0YShRdC5Vc2VyUm9sZSwgaW50KHJbImxvY2F0aW9uX2lkIl0pKQogICAgICAgICAgICBzZWxmLl9hbGlhc19saXN0LmFkZEl0ZW0oaXRlbSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlbGVjdGlvbiBoYW5kbGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfb25fYWxpYXNfc2VsZWN0aW9uX2NoYW5nZWQoc2VsZikgLT4gTm9uZToKICAgICAgICBpdGVtcyA9IHNlbGYuX2FsaWFzX2xpc3Quc2VsZWN0ZWRJdGVtcygpCiAgICAgICAgc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzID0ge2ludChpLmRhdGEoUXQuVXNlclJvbGUpKSBmb3IgaSBpbiBpdGVtc30KCiAgICAgICAgc2VsZi5fcmVmcmVzaF9yaWdodF9wYW5lbCgpCgogICAgICAgIHNlbGYuc3RhdHVzQmFyKCkuc2hvd01lc3NhZ2UoZiJ7bGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcyl9IGxvY2F0aW9uKHMpIHNlbGVjdGVkIikKCiAgICBkZWYgX3JlZnJlc2hfcmlnaHRfcGFuZWwoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBSZWZyZXNoIGRldGFpbHMgKyBhbGlhcyBlZGl0b3IgYmFzZWQgb24gY3VycmVudCBzZWxlY3Rpb24uCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5jbGVhcigpCgogICAgICAgIGlmIGxlbihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpID09IDE6CiAgICAgICAgICAgIGxvY19pZCA9IG5leHQoaXRlcihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpKQogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uKGxvY19pZCkKICAgICAgICAgICAgc2VsZi5fc2V0X2RldGFpbHNfZW5hYmxlZChUcnVlKQogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXNfc2luZ2xlKGxvY19pZCkgICAjIGNsZWFycyArIHJlbG9hZHMKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgTXVsdGktc2VsZWN0IChvciBub25lKTogZGV0YWlscyBibGFuay9kaXNhYmxlZCwgYWxpYXMgZWRpdG9yIHNob3dzIENPTU1PTiBhbGlhc2VzCiAgICAgICAgc2VsZi5fY2xlYXJfbG9jYXRpb25fZGV0YWlscygpCiAgICAgICAgc2VsZi5fc2V0X2RldGFpbHNfZW5hYmxlZChGYWxzZSkKCiAgICAgICAgaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgPj0gMjoKICAgICAgICAgICAgc2VsZi5fbG9hZF9jb21tb25fYWxpYXNlc19mb3Jfc2VsZWN0aW9uKCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIExvY2F0aW9uIGxvYWRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2xvYWRfbG9jYXRpb24oc2VsZiwgbG9jYXRpb25faWQ6IGludCkgLT4gTm9uZToKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFNFTEVDVCBsb2NhdGlvbl9pZCwgbGF0LCBsb24sIG5hbWUsIHBsYWNlLCB3aWtpZGF0YQogICAgICAgICAgICBGUk9NIGxvY2F0aW9ucwogICAgICAgICAgICBXSEVSRSBsb2NhdGlvbl9pZCA9ID87CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKGxvY2F0aW9uX2lkLCksCiAgICAgICAgKQogICAgICAgIHJvdyA9IGN1ci5mZXRjaG9uZSgpCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgU0VMRUNUIHIubmFtZQogICAgICAgICAgICBGUk9NIGxvY2F0aW9uX3JlZ2lvbnMgbHIKICAgICAgICAgICAgSk9JTiByZWdpb25zIHIgT04gci5yZWdpb25faWQgPSBsci5yZWdpb25faWQKICAgICAgICAgICAgV0hFUkUgbHIubG9jYXRpb25faWQgPSA/CiAgICAgICAgICAgIExJTUlUIDE7CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKGxvY2F0aW9uX2lkLCksCiAgICAgICAgKQogICAgICAgIHJlZ2lvbl9yb3cgPSBjdXIuZmV0Y2hvbmUoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIGlmIG5vdCByb3c6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBzZWxmLl9sYmxfbG9jYXRpb25faWQuc2V0VGV4dChzdHIocm93WyJsb2NhdGlvbl9pZCJdKSkKICAgICAgICBzZWxmLl9sYmxfbGF0LnNldFRleHQoc3RyKHJvd1sibGF0Il0pKQogICAgICAgIHNlbGYuX2xibF9sb24uc2V0VGV4dChzdHIocm93WyJsb24iXSkpCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lLnNldFRleHQocm93WyJuYW1lIl0gb3IgIiIpCiAgICAgICAgc2VsZi5fZWRpdF9wbGFjZS5zZXRUZXh0KHJvd1sicGxhY2UiXSBvciAiIikKICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLnNldFRleHQocm93WyJ3aWtpZGF0YSJdIG9yICIiKQogICAgICAgIHNlbGYuX2xibF9yZWdpb24uc2V0VGV4dChyZWdpb25fcm93WyJuYW1lIl0gaWYgcmVnaW9uX3JvdyBlbHNlICItIikKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFsaWFzIGxpc3QgcG9wdWxhdGlvbgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfbG9hZF9sb2NhdGlvbl9hbGlhc2VzX3NpbmdsZShzZWxmLCBsb2NhdGlvbl9pZDogaW50KSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIExvYWQgQUxMIGFsaWFzZXMgZm9yIGEgc2luZ2xlIGxvY2F0aW9uLgogICAgICAgIEFsd2F5cyBjbGVhcnMgZmlyc3QgdG8gYXZvaWQgZHVwbGljYXRlcy4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmNsZWFyKCkKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICJTRUxFQ1QgYWxpYXMgRlJPTSBsb2NhdGlvbl9hbGlhc2VzIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBPUkRFUiBCWSBhbGlhczsiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgZm9yIChhbGlhcywpIGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmFkZEl0ZW0oYWxpYXMpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICBkZWYgX2xvYWRfY29tbW9uX2FsaWFzZXNfZm9yX3NlbGVjdGlvbihzZWxmKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIExvYWQgYWxpYXNlcyBDT01NT04gdG8gYWxsIHNlbGVjdGVkIGxvY2F0aW9ucy4KICAgICAgICBUaGlzIG1ha2VzIG11bHRpLXJlbW92ZSB3ZWxsLWRlZmluZWQgYW5kIHVzYWJsZS4KCiAgICAgICAgV2UgZGlzcGxheSBgbm9ybWFsaXplZGAgYmVjYXVzZSBpdCBpcyB0aGUgY2Fub25pY2FsIGtleSB1c2VkIGJ5IGRlbGV0aW9uIGxvZ2ljLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMuY2xlYXIoKQoKICAgICAgICBpZHMgPSBzb3J0ZWQoc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKQogICAgICAgIGlmIG5vdCBpZHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBwbGFjZWhvbGRlcnMgPSAiLCIuam9pbigiPyIgZm9yIF8gaW4gaWRzKQoKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICAjIFVzZSBub3JtYWxpemVkIGFzIHRoZSBpZGVudGl0eSBhY3Jvc3MgbG9jYXRpb25zCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgIGYiIiIKICAgICAgICAgICAgU0VMRUNUIG5vcm1hbGl6ZWQKICAgICAgICAgICAgRlJPTSBsb2NhdGlvbl9hbGlhc2VzCiAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkIElOICh7cGxhY2Vob2xkZXJzfSkKICAgICAgICAgICAgR1JPVVAgQlkgbm9ybWFsaXplZAogICAgICAgICAgICBIQVZJTkcgQ09VTlQoRElTVElOQ1QgbG9jYXRpb25faWQpID0gPwogICAgICAgICAgICBPUkRFUiBCWSBub3JtYWxpemVkOwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICgqaWRzLCBsZW4oaWRzKSksCiAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICAjIGRpc3BsYXkgbm9ybWFsaXplZCAoc3RhYmxlICsgbWF0Y2hlcyBkZWxldGlvbiBrZXkpCiAgICAgICAgICAgIHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMuYWRkSXRlbShyWyJub3JtYWxpemVkIl0pCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBBbGlhcyBlZGl0aW5nIChzaW5nbGUgKyBtdWx0aSkKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2FkZF9hbGlhcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIG5vdCBzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBhbGlhcyA9IHNlbGYuX2FsaWFzX2lucHV0LnRleHQoKS5zdHJpcCgpCiAgICAgICAgaWYgbm90IGFsaWFzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgbm9ybSA9IG5vcm1hbGl6ZShhbGlhcykKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGZvciBsb2NfaWQgaW4gc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzOgogICAgICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgSU5TRVJUIE9SIElHTk9SRSBJTlRPIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgICAgICAobG9jYXRpb25faWQsIGFsaWFzLCBub3JtYWxpemVkKQogICAgICAgICAgICAgICAgVkFMVUVTICg/LCA/LCA/KTsKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIChsb2NfaWQsIGFsaWFzLCBub3JtKSwKICAgICAgICAgICAgKQoKICAgICAgICBjb24uY29tbWl0KCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19pbnB1dC5jbGVhcigpCiAgICAgICAgc2VsZi5fcmVmcmVzaF9hbGlhc19lZGl0b3JfYWZ0ZXJfd3JpdGUoKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKGYiQWxpYXMgYWRkZWQgdG8ge2xlbihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpfSBsb2NhdGlvbihzKSIpCgogICAgZGVmIF9yZW1vdmVfYWxpYXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBub3Qgc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaXRlbXMgPSBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLnNlbGVjdGVkSXRlbXMoKQogICAgICAgIGlmIG5vdCBpdGVtczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgSU1QT1JUQU5UOgogICAgICAgICMgLSBJbiBzaW5nbGUtc2VsZWN0IG1vZGUsIGl0ZW1zIGFyZSByYXcgYWxpYXNlcyAtPiBub3JtYWxpemUgdGhlbS4KICAgICAgICAjIC0gSW4gbXVsdGktc2VsZWN0IG1vZGUsIGl0ZW1zIGFyZSBhbHJlYWR5IG5vcm1hbGl6ZWQuCiAgICAgICAgc2VsZWN0ZWRfdGV4dCA9IGl0ZW1zWzBdLnRleHQoKQogICAgICAgIG5vcm0gPSBub3JtYWxpemUoc2VsZWN0ZWRfdGV4dCkKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGZvciBsb2NfaWQgaW4gc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzOgogICAgICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgREVMRVRFIEZST00gbG9jYXRpb25fYWxpYXNlcwogICAgICAgICAgICAgICAgV0hFUkUgbG9jYXRpb25faWQgPSA/CiAgICAgICAgICAgICAgICAgIEFORCBub3JtYWxpemVkID0gPzsKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIChsb2NfaWQsIG5vcm0pLAogICAgICAgICAgICApCgogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX3JlZnJlc2hfYWxpYXNfZWRpdG9yX2FmdGVyX3dyaXRlKCkKCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZShmIkFsaWFzIHJlbW92ZWQgZnJvbSB7bGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcyl9IGxvY2F0aW9uKHMpIikKCiAgICBkZWYgX3JlZnJlc2hfYWxpYXNfZWRpdG9yX2FmdGVyX3dyaXRlKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgUmVmcmVzaCBhbGlhcyBsaXN0IHBhbmVsIHdpdGhvdXQgZHVwbGljYXRpbmcgVUkgaXRlbXMuCiAgICAgICAgIiIiCiAgICAgICAgaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgPT0gMToKICAgICAgICAgICAgbG9jX2lkID0gbmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpCiAgICAgICAgICAgIHNlbGYuX2xvYWRfbG9jYXRpb25fYWxpYXNlc19zaW5nbGUobG9jX2lkKQogICAgICAgIGVsaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgPj0gMjoKICAgICAgICAgICAgc2VsZi5fbG9hZF9jb21tb25fYWxpYXNlc19mb3Jfc2VsZWN0aW9uKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmNsZWFyKCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNhdmUgKHNpbmdsZS1sb2NhdGlvbiBvbmx5KQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfc2F2ZV9sb2NhdGlvbl9jaGFuZ2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgIT0gMToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGxvY2F0aW9uX2lkID0gbmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFVQREFURSBsb2NhdGlvbnMKICAgICAgICAgICAgU0VUIG5hbWUgPSA/LCBwbGFjZSA9ID8sIHdpa2lkYXRhID0gPwogICAgICAgICAgICBXSEVSRSBsb2NhdGlvbl9pZCA9ID87CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgc2VsZi5fZWRpdF9uYW1lLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCwKICAgICAgICAgICAgKSwKICAgICAgICApCgogICAgICAgIGlmIGN1ci5yb3djb3VudCAhPSAxOgogICAgICAgICAgICBjb24ucm9sbGJhY2soKQogICAgICAgICAgICBjb24uY2xvc2UoKQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkxvY2F0aW9uIHVwZGF0ZSBhZmZlY3RlZCB1bmV4cGVjdGVkIHJvdyBjb3VudCIpCgogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2xvYWRfbG9jYXRpb24obG9jYXRpb25faWQpCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZShmIlNhdmVkIGxvY2F0aW9uIHtsb2NhdGlvbl9pZH0iKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSGVscGVycwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfY2xlYXJfbG9jYXRpb25fZGV0YWlscyhzZWxmKSAtPiBOb25lOgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZC5zZXRUZXh0KCItIikKICAgICAgICBzZWxmLl9sYmxfbGF0LnNldFRleHQoIi0iKQogICAgICAgIHNlbGYuX2xibF9sb24uc2V0VGV4dCgiLSIpCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lLmNsZWFyKCkKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLmNsZWFyKCkKICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLmNsZWFyKCkKICAgICAgICBzZWxmLl9sYmxfcmVnaW9uLnNldFRleHQoIi0iKQoKICAgIGRlZiBfc2V0X2RldGFpbHNfZW5hYmxlZChzZWxmLCBlbmFibGVkOiBib29sKSAtPiBOb25lOgogICAgICAgIGZvciB3IGluIChzZWxmLl9lZGl0X25hbWUsIHNlbGYuX2VkaXRfcGxhY2UsIHNlbGYuX2VkaXRfd2lraWRhdGEsIHNlbGYuX3NhdmVfYnRuKToKICAgICAgICAgICAgdy5zZXRFbmFibGVkKGVuYWJsZWQpCgAAAAAAAAAA8TwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8TwAAAAAAADxPAAAAAAAAAAAAAAAAPC/"
				],
				[
					115,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAGAIAAAAAAAD3PAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSB0eXBpbmcgaW1wb3J0IFNldAoKZnJvbSBQeVNpZGU2LlF0V2lkZ2V0cyBpbXBvcnQgKAogICAgUU1haW5XaW5kb3csCiAgICBRV2lkZ2V0LAogICAgUUxpc3RXaWRnZXQsCiAgICBRTGlzdFdpZGdldEl0ZW0sCiAgICBRTGFiZWwsCiAgICBRVkJveExheW91dCwKICAgIFFIQm94TGF5b3V0LAogICAgUUxpbmVFZGl0LAogICAgUVB1c2hCdXR0b24sCiAgICBRQ29tYm9Cb3gsCiAgICBRRm9ybUxheW91dCwKKQpmcm9tIFB5U2lkZTYuUXRDb3JlIGltcG9ydCBRdAoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IGdhemV0dGVlcl9wYXRoCgoKZGVmIG5vcm1hbGl6ZSh0ZXh0OiBzdHIpIC0+IHN0cjoKICAgIHJldHVybiAiICIuam9pbih0ZXh0Lmxvd2VyKCkuc3BsaXQoKSkKCgpjbGFzcyBNYWluV2luZG93KFFNYWluV2luZG93KToKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQoKICAgICAgICBzZWxmLnNldFdpbmRvd1RpdGxlKCJkYmVkaXRjMiDigJQgYWxpYXMgJiBsb2NhdGlvbiBlZGl0b3IiKQogICAgICAgIHNlbGYuX2RiX3BhdGggPSBnYXpldHRlZXJfcGF0aCgpCgogICAgICAgICMgLS0tLSBzZWxlY3Rpb24gc3RhdGUgLS0tLQogICAgICAgIHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkczogU2V0W2ludF0gPSBzZXQoKQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTZWFyY2ggd2lkZ2V0cwogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQgPSBRTGluZUVkaXQoc2VsZikKICAgICAgICBzZWxmLl9zZWFyY2hfZWRpdC5zZXRQbGFjZWhvbGRlclRleHQoIlNlYXJjaOKApiIpCiAgICAgICAgc2VsZi5fc2VhcmNoX2VkaXQudGV4dENoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9zZWFyY2hfY2hhbmdlZCkKCiAgICAgICAgc2VsZi5fbG9va3VwX21vZGUgPSBRQ29tYm9Cb3goc2VsZikKICAgICAgICBzZWxmLl9sb29rdXBfbW9kZS5hZGRJdGVtcyhbImFsaWFzIiwgIm9zbV9pZCIsICJ3aWtpZGF0YSJdKQogICAgICAgIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0Q2hhbmdlZC5jb25uZWN0KAogICAgICAgICAgICBsYW1iZGEgXzogc2VsZi5fb25fc2VhcmNoX2NoYW5nZWQoc2VsZi5fc2VhcmNoX2VkaXQudGV4dCgpKQogICAgICAgICkKCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdCA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5zZXRTZWxlY3Rpb25Nb2RlKFFMaXN0V2lkZ2V0LkV4dGVuZGVkU2VsZWN0aW9uKQogICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuaXRlbVNlbGVjdGlvbkNoYW5nZWQuY29ubmVjdChzZWxmLl9vbl9hbGlhc19zZWxlY3Rpb25fY2hhbmdlZCkKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgRGV0YWlscyBmb3JtCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBzZWxmLl9kZXRhaWxzX3dpZGdldCA9IFFXaWRnZXQoc2VsZikKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dCA9IFFWQm94TGF5b3V0KHNlbGYuX2RldGFpbHNfd2lkZ2V0KQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0LnNldEFsaWdubWVudChRdC5BbGlnblRvcCkKCiAgICAgICAgZm9ybSA9IFFGb3JtTGF5b3V0KCkKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRMYXlvdXQoZm9ybSkKCiAgICAgICAgc2VsZi5fbGJsX2xvY2F0aW9uX2lkID0gUUxhYmVsKCItIikKICAgICAgICBzZWxmLl9sYmxfbGF0ID0gUUxhYmVsKCItIikKICAgICAgICBzZWxmLl9sYmxfbG9uID0gUUxhYmVsKCItIikKICAgICAgICBzZWxmLl9sYmxfcmVnaW9uID0gUUxhYmVsKCItIikKCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lID0gUUxpbmVFZGl0KCkKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlID0gUUxpbmVFZGl0KCkKICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhID0gUUxpbmVFZGl0KCkKCiAgICAgICAgZm9ybS5hZGRSb3coIkxvY2F0aW9uIElEOiIsIHNlbGYuX2xibF9sb2NhdGlvbl9pZCkKICAgICAgICBmb3JtLmFkZFJvdygiTGF0aXR1ZGU6Iiwgc2VsZi5fbGJsX2xhdCkKICAgICAgICBmb3JtLmFkZFJvdygiTG9uZ2l0dWRlOiIsIHNlbGYuX2xibF9sb24pCiAgICAgICAgZm9ybS5hZGRSb3coIk5hbWU6Iiwgc2VsZi5fZWRpdF9uYW1lKQogICAgICAgIGZvcm0uYWRkUm93KCJQbGFjZToiLCBzZWxmLl9lZGl0X3BsYWNlKQogICAgICAgIGZvcm0uYWRkUm93KCJXaWtpZGF0YToiLCBzZWxmLl9lZGl0X3dpa2lkYXRhKQogICAgICAgIGZvcm0uYWRkUm93KCJSZWdpb246Iiwgc2VsZi5fbGJsX3JlZ2lvbikKCiAgICAgICAgc2VsZi5fc2F2ZV9idG4gPSBRUHVzaEJ1dHRvbigiU2F2ZSBsb2NhdGlvbiBjaGFuZ2VzIiwgc2VsZikKICAgICAgICBzZWxmLl9zYXZlX2J0bi5jbGlja2VkLmNvbm5lY3Qoc2VsZi5fc2F2ZV9sb2NhdGlvbl9jaGFuZ2VzKQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9zYXZlX2J0bikKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgQWxpYXMgZWRpdG9yIChzaW5nbGUgKyBtdWx0aSBzZWxlY3QpCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRXaWRnZXQoUUxhYmVsKCJBbGlhc2VzIGZvciBzZWxlY3RlZCBsb2NhdGlvbihzKToiKSkKCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcyA9IFFMaXN0V2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5zZXRTZWxlY3Rpb25Nb2RlKFFMaXN0V2lkZ2V0LlNpbmdsZVNlbGVjdGlvbikKICAgICAgICBzZWxmLl9kZXRhaWxzX2xheW91dC5hZGRXaWRnZXQoc2VsZi5fbG9jYXRpb25fYWxpYXNlcykKCiAgICAgICAgYWxpYXNfY29udHJvbHMgPSBRSEJveExheW91dCgpCiAgICAgICAgc2VsZi5fYWxpYXNfaW5wdXQgPSBRTGluZUVkaXQoc2VsZikKICAgICAgICBzZWxmLl9hbGlhc19pbnB1dC5zZXRQbGFjZWhvbGRlclRleHQoIkFkZCBhbGlhc+KApiIpCiAgICAgICAgc2VsZi5fYWxpYXNfYWRkX2J0biA9IFFQdXNoQnV0dG9uKCJBZGQiLCBzZWxmKQogICAgICAgIHNlbGYuX2FsaWFzX3JlbW92ZV9idG4gPSBRUHVzaEJ1dHRvbigiUmVtb3ZlIiwgc2VsZikKCiAgICAgICAgYWxpYXNfY29udHJvbHMuYWRkV2lkZ2V0KHNlbGYuX2FsaWFzX2lucHV0KQogICAgICAgIGFsaWFzX2NvbnRyb2xzLmFkZFdpZGdldChzZWxmLl9hbGlhc19hZGRfYnRuKQogICAgICAgIGFsaWFzX2NvbnRyb2xzLmFkZFdpZGdldChzZWxmLl9hbGlhc19yZW1vdmVfYnRuKQogICAgICAgIHNlbGYuX2RldGFpbHNfbGF5b3V0LmFkZExheW91dChhbGlhc19jb250cm9scykKCiAgICAgICAgc2VsZi5fYWxpYXNfYWRkX2J0bi5jbGlja2VkLmNvbm5lY3Qoc2VsZi5fYWRkX2FsaWFzKQogICAgICAgIHNlbGYuX2FsaWFzX3JlbW92ZV9idG4uY2xpY2tlZC5jb25uZWN0KHNlbGYuX3JlbW92ZV9hbGlhcykKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgTGF5b3V0CiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBsZWZ0ID0gUVdpZGdldChzZWxmKQogICAgICAgIGxlZnRfbGF5b3V0ID0gUVZCb3hMYXlvdXQobGVmdCkKICAgICAgICBsZWZ0X2xheW91dC5hZGRXaWRnZXQoc2VsZi5fc2VhcmNoX2VkaXQpCiAgICAgICAgbGVmdF9sYXlvdXQuYWRkV2lkZ2V0KHNlbGYuX2xvb2t1cF9tb2RlKQogICAgICAgIGxlZnRfbGF5b3V0LmFkZFdpZGdldChzZWxmLl9hbGlhc19saXN0KQoKICAgICAgICBjZW50cmFsID0gUVdpZGdldChzZWxmKQogICAgICAgIG1haW5fbGF5b3V0ID0gUUhCb3hMYXlvdXQoY2VudHJhbCkKICAgICAgICBtYWluX2xheW91dC5hZGRXaWRnZXQobGVmdCwgMSkKICAgICAgICBtYWluX2xheW91dC5hZGRXaWRnZXQoc2VsZi5fZGV0YWlsc193aWRnZXQsIDEpCiAgICAgICAgc2VsZi5zZXRDZW50cmFsV2lkZ2V0KGNlbnRyYWwpCgogICAgICAgIHNlbGYuc3RhdHVzQmFyKCkuc2hvd01lc3NhZ2UoIlJlYWR5IikKCiAgICAgICAgc2VsZi5fc2V0X2RldGFpbHNfZW5hYmxlZChGYWxzZSkKICAgICAgICBzZWxmLl9sb2FkX2J5X2FsaWFzKCIiKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2VhcmNoCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9vbl9zZWFyY2hfY2hhbmdlZChzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgIyBDbGVhcmluZy9yZWZyZXNoaW5nIHNlYXJjaCByZXN1bHRzIHNob3VsZCBhbHNvIGNsZWFyIHNlbGVjdGlvbiBzdGF0ZQogICAgICAgICMgYmVjYXVzZSBzZWxlY3RlZCBpdGVtcyBtaWdodCBubyBsb25nZXIgZXhpc3QuCiAgICAgICAgc2VsZi5fYWxpYXNfbGlzdC5ibG9ja1NpZ25hbHMoVHJ1ZSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXJTZWxlY3Rpb24oKQogICAgICAgIGZpbmFsbHk6CiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuYmxvY2tTaWduYWxzKEZhbHNlKQoKICAgICAgICBzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMuY2xlYXIoKQogICAgICAgIHNlbGYuX2NsZWFyX2xvY2F0aW9uX2RldGFpbHMoKQogICAgICAgIHNlbGYuX3NldF9kZXRhaWxzX2VuYWJsZWQoRmFsc2UpCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5jbGVhcigpCgogICAgICAgIGlmIHNlbGYuX2xvb2t1cF9tb2RlLmN1cnJlbnRUZXh0KCkgPT0gImFsaWFzIjoKICAgICAgICAgICAgc2VsZi5fbG9hZF9ieV9hbGlhcyh0ZXh0KQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuX2xvYWRfYnlfbG9jYXRpb25fZmllbGQoc2VsZi5fbG9va3VwX21vZGUuY3VycmVudFRleHQoKSwgdGV4dCkKCiAgICBkZWYgX2xvYWRfYnlfYWxpYXMoc2VsZiwgdGV4dDogc3RyKSAtPiBOb25lOgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGlmIHRleHQ6CiAgICAgICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1QgbG9jYXRpb25faWQsIGFsaWFzCiAgICAgICAgICAgICAgICBGUk9NIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgIFdIRVJFIG5vcm1hbGl6ZWQgTElLRSA/CiAgICAgICAgICAgICAgICBPUkRFUiBCWSBhbGlhcwogICAgICAgICAgICAgICAgTElNSVQgMjAwOwogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKGYie25vcm1hbGl6ZSh0ZXh0KX0lIiwpLAogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiU0VMRUNUIGxvY2F0aW9uX2lkLCBhbGlhcyBGUk9NIGxvY2F0aW9uX2FsaWFzZXMgT1JERVIgQlkgYWxpYXMgTElNSVQgMjAwOyIKICAgICAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19saXN0LmNsZWFyKCkKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICBpdGVtID0gUUxpc3RXaWRnZXRJdGVtKHJbImFsaWFzIl0pCiAgICAgICAgICAgIGl0ZW0uc2V0RGF0YShRdC5Vc2VyUm9sZSwgaW50KHJbImxvY2F0aW9uX2lkIl0pKQogICAgICAgICAgICBzZWxmLl9hbGlhc19saXN0LmFkZEl0ZW0oaXRlbSkKCiAgICBkZWYgX2xvYWRfYnlfbG9jYXRpb25fZmllbGQoc2VsZiwgZmllbGQ6IHN0ciwgdmFsdWU6IHN0cikgLT4gTm9uZToKICAgICAgICBpZiBub3QgdmFsdWU6CiAgICAgICAgICAgIHNlbGYuX2FsaWFzX2xpc3QuY2xlYXIoKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY29uLnJvd19mYWN0b3J5ID0gc3FsaXRlMy5Sb3cKICAgICAgICBjdXIgPSBjb24uY3Vyc29yKCkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgIGYiIiIKICAgICAgICAgICAgU0VMRUNUIGxhLmxvY2F0aW9uX2lkLCBsYS5hbGlhcwogICAgICAgICAgICBGUk9NIGxvY2F0aW9ucyBsCiAgICAgICAgICAgIEpPSU4gbG9jYXRpb25fYWxpYXNlcyBsYSBPTiBsYS5sb2NhdGlvbl9pZCA9IGwubG9jYXRpb25faWQKICAgICAgICAgICAgV0hFUkUgbC57ZmllbGR9ID0gPwogICAgICAgICAgICBPUkRFUiBCWSBsYS5hbGlhcwogICAgICAgICAgICBMSU1JVCAyMDA7CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKHZhbHVlLCksCiAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19saXN0LmNsZWFyKCkKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICBpdGVtID0gUUxpc3RXaWRnZXRJdGVtKHJbImFsaWFzIl0pCiAgICAgICAgICAgIGl0ZW0uc2V0RGF0YShRdC5Vc2VyUm9sZSwgaW50KHJbImxvY2F0aW9uX2lkIl0pKQogICAgICAgICAgICBzZWxmLl9hbGlhc19saXN0LmFkZEl0ZW0oaXRlbSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlbGVjdGlvbiBoYW5kbGluZwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfb25fYWxpYXNfc2VsZWN0aW9uX2NoYW5nZWQoc2VsZikgLT4gTm9uZToKICAgICAgICBpdGVtcyA9IHNlbGYuX2FsaWFzX2xpc3Quc2VsZWN0ZWRJdGVtcygpCiAgICAgICAgc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzID0ge2ludChpLmRhdGEoUXQuVXNlclJvbGUpKSBmb3IgaSBpbiBpdGVtc30KCiAgICAgICAgc2VsZi5fcmVmcmVzaF9yaWdodF9wYW5lbCgpCgogICAgICAgIHNlbGYuc3RhdHVzQmFyKCkuc2hvd01lc3NhZ2UoZiJ7bGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcyl9IGxvY2F0aW9uKHMpIHNlbGVjdGVkIikKCiAgICBkZWYgX3JlZnJlc2hfcmlnaHRfcGFuZWwoc2VsZikgLT4gTm9uZToKICAgICAgICAiIiIKICAgICAgICBSZWZyZXNoIGRldGFpbHMgKyBhbGlhcyBlZGl0b3IgYmFzZWQgb24gY3VycmVudCBzZWxlY3Rpb24uCiAgICAgICAgIiIiCiAgICAgICAgc2VsZi5fbG9jYXRpb25fYWxpYXNlcy5jbGVhcigpCgogICAgICAgIGlmIGxlbihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpID09IDE6CiAgICAgICAgICAgIGxvY19pZCA9IG5leHQoaXRlcihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpKQogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uKGxvY19pZCkKICAgICAgICAgICAgc2VsZi5fc2V0X2RldGFpbHNfZW5hYmxlZChUcnVlKQogICAgICAgICAgICBzZWxmLl9sb2FkX2xvY2F0aW9uX2FsaWFzZXNfc2luZ2xlKGxvY19pZCkgICAjIGNsZWFycyArIHJlbG9hZHMKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgTXVsdGktc2VsZWN0IChvciBub25lKTogZGV0YWlscyBibGFuay9kaXNhYmxlZCwgYWxpYXMgZWRpdG9yIHNob3dzIENPTU1PTiBhbGlhc2VzCiAgICAgICAgc2VsZi5fY2xlYXJfbG9jYXRpb25fZGV0YWlscygpCiAgICAgICAgc2VsZi5fc2V0X2RldGFpbHNfZW5hYmxlZChGYWxzZSkKCiAgICAgICAgaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgPj0gMjoKICAgICAgICAgICAgc2VsZi5fbG9hZF9jb21tb25fYWxpYXNlc19mb3Jfc2VsZWN0aW9uKCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIExvY2F0aW9uIGxvYWRpbmcKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2xvYWRfbG9jYXRpb24oc2VsZiwgbG9jYXRpb25faWQ6IGludCkgLT4gTm9uZToKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFNFTEVDVCBsb2NhdGlvbl9pZCwgbGF0LCBsb24sIG5hbWUsIHBsYWNlLCB3aWtpZGF0YQogICAgICAgICAgICBGUk9NIGxvY2F0aW9ucwogICAgICAgICAgICBXSEVSRSBsb2NhdGlvbl9pZCA9ID87CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKGxvY2F0aW9uX2lkLCksCiAgICAgICAgKQogICAgICAgIHJvdyA9IGN1ci5mZXRjaG9uZSgpCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgU0VMRUNUIHIubmFtZQogICAgICAgICAgICBGUk9NIGxvY2F0aW9uX3JlZ2lvbnMgbHIKICAgICAgICAgICAgSk9JTiByZWdpb25zIHIgT04gci5yZWdpb25faWQgPSBsci5yZWdpb25faWQKICAgICAgICAgICAgV0hFUkUgbHIubG9jYXRpb25faWQgPSA/CiAgICAgICAgICAgIExJTUlUIDE7CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKGxvY2F0aW9uX2lkLCksCiAgICAgICAgKQogICAgICAgIHJlZ2lvbl9yb3cgPSBjdXIuZmV0Y2hvbmUoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIGlmIG5vdCByb3c6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBzZWxmLl9sYmxfbG9jYXRpb25faWQuc2V0VGV4dChzdHIocm93WyJsb2NhdGlvbl9pZCJdKSkKICAgICAgICBzZWxmLl9sYmxfbGF0LnNldFRleHQoc3RyKHJvd1sibGF0Il0pKQogICAgICAgIHNlbGYuX2xibF9sb24uc2V0VGV4dChzdHIocm93WyJsb24iXSkpCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lLnNldFRleHQocm93WyJuYW1lIl0gb3IgIiIpCiAgICAgICAgc2VsZi5fZWRpdF9wbGFjZS5zZXRUZXh0KHJvd1sicGxhY2UiXSBvciAiIikKICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLnNldFRleHQocm93WyJ3aWtpZGF0YSJdIG9yICIiKQogICAgICAgIHNlbGYuX2xibF9yZWdpb24uc2V0VGV4dChyZWdpb25fcm93WyJuYW1lIl0gaWYgcmVnaW9uX3JvdyBlbHNlICItIikKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFsaWFzIGxpc3QgcG9wdWxhdGlvbgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfbG9hZF9sb2NhdGlvbl9hbGlhc2VzX3NpbmdsZShzZWxmLCBsb2NhdGlvbl9pZDogaW50KSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIExvYWQgQUxMIGFsaWFzZXMgZm9yIGEgc2luZ2xlIGxvY2F0aW9uLgogICAgICAgIEFsd2F5cyBjbGVhcnMgZmlyc3QgdG8gYXZvaWQgZHVwbGljYXRlcy4KICAgICAgICAiIiIKICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmNsZWFyKCkKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICJTRUxFQ1QgYWxpYXMgRlJPTSBsb2NhdGlvbl9hbGlhc2VzIFdIRVJFIGxvY2F0aW9uX2lkID0gPyBPUkRFUiBCWSBhbGlhczsiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApCiAgICAgICAgZm9yIChhbGlhcywpIGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmFkZEl0ZW0oYWxpYXMpCiAgICAgICAgY29uLmNsb3NlKCkKCiAgICBkZWYgX2xvYWRfY29tbW9uX2FsaWFzZXNfZm9yX3NlbGVjdGlvbihzZWxmKSAtPiBOb25lOgogICAgICAgICIiIgogICAgICAgIExvYWQgYWxpYXNlcyBDT01NT04gdG8gYWxsIHNlbGVjdGVkIGxvY2F0aW9ucy4KICAgICAgICBUaGlzIG1ha2VzIG11bHRpLXJlbW92ZSB3ZWxsLWRlZmluZWQgYW5kIHVzYWJsZS4KCiAgICAgICAgV2UgZGlzcGxheSBgbm9ybWFsaXplZGAgYmVjYXVzZSBpdCBpcyB0aGUgY2Fub25pY2FsIGtleSB1c2VkIGJ5IGRlbGV0aW9uIGxvZ2ljLgogICAgICAgICIiIgogICAgICAgIHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMuY2xlYXIoKQoKICAgICAgICBpZHMgPSBzb3J0ZWQoc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzKQogICAgICAgIGlmIG5vdCBpZHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBwbGFjZWhvbGRlcnMgPSAiLCIuam9pbigiPyIgZm9yIF8gaW4gaWRzKQoKICAgICAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3Qoc2VsZi5fZGJfcGF0aCkKICAgICAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICAjIFVzZSBub3JtYWxpemVkIGFzIHRoZSBpZGVudGl0eSBhY3Jvc3MgbG9jYXRpb25zCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgIGYiIiIKICAgICAgICAgICAgU0VMRUNUIG5vcm1hbGl6ZWQKICAgICAgICAgICAgRlJPTSBsb2NhdGlvbl9hbGlhc2VzCiAgICAgICAgICAgIFdIRVJFIGxvY2F0aW9uX2lkIElOICh7cGxhY2Vob2xkZXJzfSkKICAgICAgICAgICAgR1JPVVAgQlkgbm9ybWFsaXplZAogICAgICAgICAgICBIQVZJTkcgQ09VTlQoRElTVElOQ1QgbG9jYXRpb25faWQpID0gPwogICAgICAgICAgICBPUkRFUiBCWSBub3JtYWxpemVkOwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICgqaWRzLCBsZW4oaWRzKSksCiAgICAgICAgKQoKICAgICAgICByb3dzID0gY3VyLmZldGNoYWxsKCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBmb3IgciBpbiByb3dzOgogICAgICAgICAgICAjIGRpc3BsYXkgbm9ybWFsaXplZCAoc3RhYmxlICsgbWF0Y2hlcyBkZWxldGlvbiBrZXkpCiAgICAgICAgICAgIHNlbGYuX2xvY2F0aW9uX2FsaWFzZXMuYWRkSXRlbShyWyJub3JtYWxpemVkIl0pCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBBbGlhcyBlZGl0aW5nIChzaW5nbGUgKyBtdWx0aSkKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX2FkZF9hbGlhcyhzZWxmKSAtPiBOb25lOgogICAgICAgIGlmIG5vdCBzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICAgICBhbGlhcyA9IHNlbGYuX2FsaWFzX2lucHV0LnRleHQoKS5zdHJpcCgpCiAgICAgICAgaWYgbm90IGFsaWFzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgbm9ybSA9IG5vcm1hbGl6ZShhbGlhcykKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGZvciBsb2NfaWQgaW4gc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzOgogICAgICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgSU5TRVJUIE9SIElHTk9SRSBJTlRPIGxvY2F0aW9uX2FsaWFzZXMKICAgICAgICAgICAgICAgICAgICAobG9jYXRpb25faWQsIGFsaWFzLCBub3JtYWxpemVkKQogICAgICAgICAgICAgICAgVkFMVUVTICg/LCA/LCA/KTsKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIChsb2NfaWQsIGFsaWFzLCBub3JtKSwKICAgICAgICAgICAgKQoKICAgICAgICBjb24uY29tbWl0KCkKICAgICAgICBjb24uY2xvc2UoKQoKICAgICAgICBzZWxmLl9hbGlhc19pbnB1dC5jbGVhcigpCiAgICAgICAgc2VsZi5fcmVmcmVzaF9hbGlhc19lZGl0b3JfYWZ0ZXJfd3JpdGUoKQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKGYiQWxpYXMgYWRkZWQgdG8ge2xlbihzZWxmLl9zZWxlY3RlZF9sb2NhdGlvbl9pZHMpfSBsb2NhdGlvbihzKSIpCgogICAgZGVmIF9yZW1vdmVfYWxpYXMoc2VsZikgLT4gTm9uZToKICAgICAgICBpZiBub3Qgc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzOgogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaXRlbXMgPSBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLnNlbGVjdGVkSXRlbXMoKQogICAgICAgIGlmIG5vdCBpdGVtczoKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgICMgSU1QT1JUQU5UOgogICAgICAgICMgLSBJbiBzaW5nbGUtc2VsZWN0IG1vZGUsIGl0ZW1zIGFyZSByYXcgYWxpYXNlcyAtPiBub3JtYWxpemUgdGhlbS4KICAgICAgICAjIC0gSW4gbXVsdGktc2VsZWN0IG1vZGUsIGl0ZW1zIGFyZSBhbHJlYWR5IG5vcm1hbGl6ZWQuCiAgICAgICAgc2VsZWN0ZWRfdGV4dCA9IGl0ZW1zWzBdLnRleHQoKQogICAgICAgIG5vcm0gPSBub3JtYWxpemUoc2VsZWN0ZWRfdGV4dCkKCiAgICAgICAgY29uID0gc3FsaXRlMy5jb25uZWN0KHNlbGYuX2RiX3BhdGgpCiAgICAgICAgY3VyID0gY29uLmN1cnNvcigpCgogICAgICAgIGZvciBsb2NfaWQgaW4gc2VsZi5fc2VsZWN0ZWRfbG9jYXRpb25faWRzOgogICAgICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgREVMRVRFIEZST00gbG9jYXRpb25fYWxpYXNlcwogICAgICAgICAgICAgICAgV0hFUkUgbG9jYXRpb25faWQgPSA/CiAgICAgICAgICAgICAgICAgIEFORCBub3JtYWxpemVkID0gPzsKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIChsb2NfaWQsIG5vcm0pLAogICAgICAgICAgICApCgogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX3JlZnJlc2hfYWxpYXNfZWRpdG9yX2FmdGVyX3dyaXRlKCkKCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZShmIkFsaWFzIHJlbW92ZWQgZnJvbSB7bGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcyl9IGxvY2F0aW9uKHMpIikKCiAgICBkZWYgX3JlZnJlc2hfYWxpYXNfZWRpdG9yX2FmdGVyX3dyaXRlKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgIiIiCiAgICAgICAgUmVmcmVzaCBhbGlhcyBsaXN0IHBhbmVsIHdpdGhvdXQgZHVwbGljYXRpbmcgVUkgaXRlbXMuCiAgICAgICAgIiIiCiAgICAgICAgaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgPT0gMToKICAgICAgICAgICAgbG9jX2lkID0gbmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpCiAgICAgICAgICAgIHNlbGYuX2xvYWRfbG9jYXRpb25fYWxpYXNlc19zaW5nbGUobG9jX2lkKQogICAgICAgIGVsaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgPj0gMjoKICAgICAgICAgICAgc2VsZi5fbG9hZF9jb21tb25fYWxpYXNlc19mb3Jfc2VsZWN0aW9uKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLl9sb2NhdGlvbl9hbGlhc2VzLmNsZWFyKCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNhdmUgKHNpbmdsZS1sb2NhdGlvbiBvbmx5KQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfc2F2ZV9sb2NhdGlvbl9jaGFuZ2VzKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgaWYgbGVuKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykgIT0gMToKICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGxvY2F0aW9uX2lkID0gbmV4dChpdGVyKHNlbGYuX3NlbGVjdGVkX2xvY2F0aW9uX2lkcykpCgogICAgICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChzZWxmLl9kYl9wYXRoKQogICAgICAgIGN1ciA9IGNvbi5jdXJzb3IoKQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFVQREFURSBsb2NhdGlvbnMKICAgICAgICAgICAgU0VUIG5hbWUgPSA/LCBwbGFjZSA9ID8sIHdpa2lkYXRhID0gPwogICAgICAgICAgICBXSEVSRSBsb2NhdGlvbl9pZCA9ID87CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgc2VsZi5fZWRpdF9uYW1lLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLnRleHQoKS5zdHJpcCgpIG9yIE5vbmUsCiAgICAgICAgICAgICAgICBsb2NhdGlvbl9pZCwKICAgICAgICAgICAgKSwKICAgICAgICApCgogICAgICAgIGlmIGN1ci5yb3djb3VudCAhPSAxOgogICAgICAgICAgICBjb24ucm9sbGJhY2soKQogICAgICAgICAgICBjb24uY2xvc2UoKQogICAgICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoIkxvY2F0aW9uIHVwZGF0ZSBhZmZlY3RlZCB1bmV4cGVjdGVkIHJvdyBjb3VudCIpCgogICAgICAgIGNvbi5jb21taXQoKQogICAgICAgIGNvbi5jbG9zZSgpCgogICAgICAgIHNlbGYuX2xvYWRfbG9jYXRpb24obG9jYXRpb25faWQpCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZShmIlNhdmVkIGxvY2F0aW9uIHtsb2NhdGlvbl9pZH0iKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSGVscGVycwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGRlZiBfY2xlYXJfbG9jYXRpb25fZGV0YWlscyhzZWxmKSAtPiBOb25lOgogICAgICAgIHNlbGYuX2xibF9sb2NhdGlvbl9pZC5zZXRUZXh0KCItIikKICAgICAgICBzZWxmLl9sYmxfbGF0LnNldFRleHQoIi0iKQogICAgICAgIHNlbGYuX2xibF9sb24uc2V0VGV4dCgiLSIpCiAgICAgICAgc2VsZi5fZWRpdF9uYW1lLmNsZWFyKCkKICAgICAgICBzZWxmLl9lZGl0X3BsYWNlLmNsZWFyKCkKICAgICAgICBzZWxmLl9lZGl0X3dpa2lkYXRhLmNsZWFyKCkKICAgICAgICBzZWxmLl9sYmxfcmVnaW9uLnNldFRleHQoIi0iKQoKICAgIGRlZiBfc2V0X2RldGFpbHNfZW5hYmxlZChzZWxmLCBlbmFibGVkOiBib29sKSAtPiBOb25lOgogICAgICAgIGZvciB3IGluIChzZWxmLl9lZGl0X25hbWUsIHNlbGYuX2VkaXRfcGxhY2UsIHNlbGYuX2VkaXRfd2lraWRhdGEsIHNlbGYuX3NhdmVfYnRuKToKICAgICAgICAgICAgdy5zZXRFbmFibGVkKGVuYWJsZWQpCg",
					"AQAAAAAAAAABAAAAAAAAAAAAAADxPAAAAAAAAAAAAAAAAPC/"
				],
				[
					116,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAYAgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0V2lkZ2V0cyBpbXBvcnQgUU1haW5XaW5kb3csIFFUYWJXaWRnZXQKCmZyb20gZGJlZGl0YzIud29ya3NwYWNlcy5nYXpldHRlZXJfd3MgaW1wb3J0IEdhemV0dGVlcldvcmtzcGFjZQoKCmNsYXNzIE1haW5XaW5kb3coUU1haW5XaW5kb3cpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgogICAgICAgIHNlbGYuc2V0V2luZG93VGl0bGUoImRiZWRpdGMyIikKCiAgICAgICAgc2VsZi5fdGFicyA9IFFUYWJXaWRnZXQoc2VsZikKICAgICAgICBzZWxmLnNldENlbnRyYWxXaWRnZXQoc2VsZi5fdGFicykKCiAgICAgICAgZ2F6ZXR0ZWVyID0gR2F6ZXR0ZWVyV29ya3NwYWNlKHNlbGYpCiAgICAgICAgZ2F6ZXR0ZWVyLnN0YXR1c01lc3NhZ2UuY29ubmVjdChzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKQoKICAgICAgICBzZWxmLl90YWJzLmFkZFRhYihnYXpldHRlZXIsICJHYXpldHRlZXIiKQoAAAAAAAAAABgCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAGAIAAAAAAAAYAgAAAAAAAAAAAAAAAPC/"
				],
				[
					119,
					9,
					"left_delete",
					null,
					"CQAAAHMAAAAAAAAAcwAAAAAAAAABAAAALnIAAAAAAAAAcgAAAAAAAAABAAAAc3EAAAAAAAAAcQAAAAAAAAABAAAAZXAAAAAAAAAAcAAAAAAAAAABAAAAY28AAAAAAAAAbwAAAAAAAAABAAAAYW4AAAAAAAAAbgAAAAAAAAABAAAAcG0AAAAAAAAAbQAAAAAAAAABAAAAc2wAAAAAAAAAbAAAAAAAAAABAAAAa2sAAAAAAAAAawAAAAAAAAABAAAAcg",
					"AQAAAAAAAAABAAAAdAAAAAAAAAB0AAAAAAAAAAAAAAAAAPC/"
				],
				[
					120,
					2,
					"left_delete",
					null,
					"AgAAAGoAAAAAAAAAagAAAAAAAAABAAAAb2kAAAAAAAAAaQAAAAAAAAABAAAAdw",
					"AQAAAAAAAAABAAAAawAAAAAAAABrAAAAAAAAAAAAAAAAAPC/"
				],
				[
					121,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAANAgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0V2lkZ2V0cyBpbXBvcnQgUU1haW5XaW5kb3csIFFUYWJXaWRnZXQKCmZyb20gZGJlZGl0YzIuZ2F6ZXR0ZWVyX3dzIGltcG9ydCBHYXpldHRlZXJXb3Jrc3BhY2UKCgpjbGFzcyBNYWluV2luZG93KFFNYWluV2luZG93KToKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQoKICAgICAgICBzZWxmLnNldFdpbmRvd1RpdGxlKCJkYmVkaXRjMiIpCgogICAgICAgIHNlbGYuX3RhYnMgPSBRVGFiV2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5zZXRDZW50cmFsV2lkZ2V0KHNlbGYuX3RhYnMpCgogICAgICAgIGdhemV0dGVlciA9IEdhemV0dGVlcldvcmtzcGFjZShzZWxmKQogICAgICAgIGdhemV0dGVlci5zdGF0dXNNZXNzYWdlLmNvbm5lY3Qoc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZSkKCiAgICAgICAgc2VsZi5fdGFicy5hZGRUYWIoZ2F6ZXR0ZWVyLCAiR2F6ZXR0ZWVyIikKAAAAAAAAAAANAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAaQAAAAAAAABpAAAAAAAAAAAAAAAAAPC/"
				],
				[
					127,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAA1wYAAAAAAAANAgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0V2lkZ2V0cyBpbXBvcnQgUU1haW5XaW5kb3csIFFUYWJXaWRnZXQKCmZyb20gZGJlZGl0YzIuZ2F6ZXR0ZWVyX3dzIGltcG9ydCBHYXpldHRlZXJXb3Jrc3BhY2UKCgpjbGFzcyBNYWluV2luZG93KFFNYWluV2luZG93KToKICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOgogICAgICAgIHN1cGVyKCkuX19pbml0X18oKQoKICAgICAgICBzZWxmLnNldFdpbmRvd1RpdGxlKCJkYmVkaXRjMiIpCgogICAgICAgIHNlbGYuX3RhYnMgPSBRVGFiV2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5zZXRDZW50cmFsV2lkZ2V0KHNlbGYuX3RhYnMpCgogICAgICAgIGdhemV0dGVlciA9IEdhemV0dGVlcldvcmtzcGFjZShzZWxmKQogICAgICAgIGdhemV0dGVlci5zdGF0dXNNZXNzYWdlLmNvbm5lY3Qoc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZSkKCiAgICAgICAgc2VsZi5fdGFicy5hZGRUYWIoZ2F6ZXR0ZWVyLCAiR2F6ZXR0ZWVyIikK",
					"AQAAAAAAAAABAAAAAAAAAAAAAAANAgAAAAAAAAAAAAAAAPC/"
				],
				[
					130,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADXBgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0V2lkZ2V0cyBpbXBvcnQgKAogICAgUU1haW5XaW5kb3csCiAgICBRVGFiV2lkZ2V0LAogICAgUVdpZGdldCwKICAgIFFWQm94TGF5b3V0LAopCgpmcm9tIGRiZWRpdGMyLndvcmtzcGFjZXMuZ2F6ZXR0ZWVyX3dzIGltcG9ydCBHYXpldHRlZXJXb3Jrc3BhY2UKZnJvbSBkYmVkaXRjMi53b3Jrc3BhY2VzLmxleGljb25fd3MgaW1wb3J0IExleGljb25Xb3Jrc3BhY2UKCgpjbGFzcyBNYWluV2luZG93KFFNYWluV2luZG93KToKICAgICIiIgogICAgTWFpbiBhcHBsaWNhdGlvbiB3aW5kb3cuCgogICAgUmVzcG9uc2liaWxpdGllczoKICAgIC0gT3duIGFwcGxpY2F0aW9uLWxldmVsIGxheW91dAogICAgLSBIb3N0IHdvcmtzcGFjZXMKICAgIC0gRGlzcGxheSBnbG9iYWwgc3RhdHVzIG1lc3NhZ2VzCgogICAgQ29udGFpbnMgTk8gZG9tYWluIGxvZ2ljLgogICAgIiIiCgogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygpCgogICAgICAgIHNlbGYuc2V0V2luZG93VGl0bGUoImRiZWRpdGMyIikKICAgICAgICBzZWxmLnJlc2l6ZSgxMjAwLCA4MDApCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIFdvcmtzcGFjZSB0YWJzCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBzZWxmLl90YWJzID0gUVRhYldpZGdldChzZWxmKQogICAgICAgIHNlbGYuc2V0Q2VudHJhbFdpZGdldChzZWxmLl90YWJzKQoKICAgICAgICAjIEdhemV0dGVlciB3b3Jrc3BhY2UKICAgICAgICBzZWxmLl9nYXpldHRlZXJfd3MgPSBHYXpldHRlZXJXb3Jrc3BhY2Uoc2VsZikKICAgICAgICBzZWxmLl9nYXpldHRlZXJfd3Muc3RhdHVzTWVzc2FnZS5jb25uZWN0KHNlbGYuX3Nob3dfc3RhdHVzKQoKICAgICAgICBzZWxmLl90YWJzLmFkZFRhYigKICAgICAgICAgICAgc2VsZi5fZ2F6ZXR0ZWVyX3dzLAogICAgICAgICAgICAiR2F6ZXR0ZWVyIiwKICAgICAgICApCgogICAgICAgICMgTGV4aWNvbiB3b3Jrc3BhY2UKICAgICAgICBzZWxmLl9sZXhpY29uX3dzID0gTGV4aWNvbldvcmtzcGFjZShzZWxmKQogICAgICAgIHNlbGYuX2xleGljb25fd3Muc3RhdHVzTWVzc2FnZS5jb25uZWN0KHNlbGYuX3Nob3dfc3RhdHVzKQoKICAgICAgICBzZWxmLl90YWJzLmFkZFRhYigKICAgICAgICAgICAgc2VsZi5fbGV4aWNvbl93cywKICAgICAgICAgICAgIkxleGljb24iLAogICAgICAgICkKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgU3RhdHVzIGJhcgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZSgiUmVhZHkiKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgU2hhcmVkIFVJIHNlcnZpY2VzCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZGVmIF9zaG93X3N0YXR1cyhzZWxmLCB0ZXh0OiBzdHIpIC0+IE5vbmU6CiAgICAgICAgc2VsZi5zdGF0dXNCYXIoKS5zaG93TWVzc2FnZSh0ZXh0KQoAAAAAAAAAANcGAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAwQUAAAAAAADBBQAAAAAAAAAAAAAAAPC/"
				],
				[
					133,
					2,
					"left_delete",
					null,
					"AgAAAJUAAAAAAAAAlQAAAAAAAAAKAAAAb3Jrc3BhY2VzLpQAAAAAAAAAlAAAAAAAAAABAAAAdw",
					"AQAAAAAAAAABAAAAnwAAAAAAAACVAAAAAAAAAAAAAAAAAPC/"
				],
				[
					136,
					1,
					"left_delete",
					null,
					"AQAAAMkAAAAAAAAAyQAAAAAAAAALAAAAd29ya3NwYWNlcy4",
					"AQAAAAAAAAABAAAA1AAAAAAAAADJAAAAAAAAAAAAAAAAAPC/"
				],
				[
					139,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADBBgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBQeVNpZGU2LlF0V2lkZ2V0cyBpbXBvcnQgKAogICAgUU1haW5XaW5kb3csCiAgICBRVGFiV2lkZ2V0LAogICAgUVdpZGdldCwKICAgIFFWQm94TGF5b3V0LAopCgpmcm9tIGRiZWRpdGMyLmdhemV0dGVlcl93cyBpbXBvcnQgR2F6ZXR0ZWVyV29ya3NwYWNlCmZyb20gZGJlZGl0YzIubGV4aWNvbl93cyBpbXBvcnQgTGV4aWNvbldvcmtzcGFjZQoKCmNsYXNzIE1haW5XaW5kb3coUU1haW5XaW5kb3cpOgogICAgIiIiCiAgICBNYWluIGFwcGxpY2F0aW9uIHdpbmRvdy4KCiAgICBSZXNwb25zaWJpbGl0aWVzOgogICAgLSBPd24gYXBwbGljYXRpb24tbGV2ZWwgbGF5b3V0CiAgICAtIEhvc3Qgd29ya3NwYWNlcwogICAgLSBEaXNwbGF5IGdsb2JhbCBzdGF0dXMgbWVzc2FnZXMKCiAgICBDb250YWlucyBOTyBkb21haW4gbG9naWMuCiAgICAiIiIKCiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKCiAgICAgICAgc2VsZi5zZXRXaW5kb3dUaXRsZSgiZGJlZGl0YzIiKQogICAgICAgIHNlbGYucmVzaXplKDEyMDAsIDgwMCkKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgV29ya3NwYWNlIHRhYnMKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIHNlbGYuX3RhYnMgPSBRVGFiV2lkZ2V0KHNlbGYpCiAgICAgICAgc2VsZi5zZXRDZW50cmFsV2lkZ2V0KHNlbGYuX3RhYnMpCgogICAgICAgICMgR2F6ZXR0ZWVyIHdvcmtzcGFjZQogICAgICAgIHNlbGYuX2dhemV0dGVlcl93cyA9IEdhemV0dGVlcldvcmtzcGFjZShzZWxmKQogICAgICAgIHNlbGYuX2dhemV0dGVlcl93cy5zdGF0dXNNZXNzYWdlLmNvbm5lY3Qoc2VsZi5fc2hvd19zdGF0dXMpCgogICAgICAgIHNlbGYuX3RhYnMuYWRkVGFiKAogICAgICAgICAgICBzZWxmLl9nYXpldHRlZXJfd3MsCiAgICAgICAgICAgICJHYXpldHRlZXIiLAogICAgICAgICkKCiAgICAgICAgIyBMZXhpY29uIHdvcmtzcGFjZQogICAgICAgIHNlbGYuX2xleGljb25fd3MgPSBMZXhpY29uV29ya3NwYWNlKHNlbGYpCiAgICAgICAgc2VsZi5fbGV4aWNvbl93cy5zdGF0dXNNZXNzYWdlLmNvbm5lY3Qoc2VsZi5fc2hvd19zdGF0dXMpCgogICAgICAgIHNlbGYuX3RhYnMuYWRkVGFiKAogICAgICAgICAgICBzZWxmLl9sZXhpY29uX3dzLAogICAgICAgICAgICAiTGV4aWNvbiIsCiAgICAgICAgKQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTdGF0dXMgYmFyCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKCJSZWFkeSIpCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTaGFyZWQgVUkgc2VydmljZXMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBkZWYgX3Nob3dfc3RhdHVzKHNlbGYsIHRleHQ6IHN0cikgLT4gTm9uZToKICAgICAgICBzZWxmLnN0YXR1c0JhcigpLnNob3dNZXNzYWdlKHRleHQpCgAAAAAAAAAAwQYAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAqAIAAAAAAACoAgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/lexicon_ws.py",
			"settings":
			{
				"buffer_size": 7177,
				"encoding": "UTF-8",
				"line_ending": "Unix",
				"name": "from __future__ import annotations"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAACRwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/config/paths.py",
			"settings":
			{
				"buffer_size": 3611,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					23,
					4,
					"left_delete",
					null,
					"BAAAAN8BAAAAAAAA3wEAAAAAAAABAAAAbt4BAAAAAAAA3gEAAAAAAAABAAAAb90BAAAAAAAA3QEAAAAAAAABAAAAc9wBAAAAAAAA3AEAAAAAAAABAAAAag",
					"AQAAAAAAAAABAAAA4AEAAAAAAADgAQAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"insert",
					{
						"characters": "db"
					},
					"AgAAANwBAAAAAAAA3QEAAAAAAAAAAAAA3QEAAAAAAADeAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3AEAAAAAAADcAQAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAbDgAAIyBzcmMvc2l0cmVwYzIvY29uZmlnL3BhdGhzLnB5CmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmZyb20gaW1wb3J0bGliLnJlc291cmNlcyBpbXBvcnQgZmlsZXMKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbAoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBDb25zdGFudHMKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCkRPVERJUl9OQU1FID0gIi5zaXRyZXBjMiIKU09VUkNFX0RJUiA9ICJzaXRyZXBjMiIKCiMgU2VlZCBmaWxlbmFtZXMgKHBhY2thZ2VkKQpTRUVEX0dBWkVUVEVFUl9EQiA9ICJzZWVkX2dhemV0dGVlci5kYiIKU0VFRF9MRVhJQ09OID0gInNlZWRfbGV4aWNvbi5kYiIKU0VFRF9TT1VSQ0VTID0gInNlZWRfc291cmNlcy5qc29ubCIKCiMgV29ya3NwYWNlIGZpbGVuYW1lcwpHQVpFVFRFRVJfREIgPSAiZ2F6ZXR0ZWVyLmRiIgpSRUNPUkRTX0RCID0gInJlY29yZHMuZGIiCkxFWElDT04gPSAibGV4aWNvbi5kYiIKU09VUkNFUyA9ICJzb3VyY2VzLmpzb25sIgoKIyBTY2hlbWEgZmlsZW5hbWVzClJFQ19TQ0hFTUFfSU5HRVNUID0gImluZ2VzdC5zcWwiClJFQ19TQ0hFTUFfTFNTID0gImxzcy5zcWwiCkdBWl9TQ0hFTUFfR0FaRVRURUVSID0gImdhemV0dGVlci5zcWwiCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJlcG8gLyB3b3Jrc3BhY2UgZGlzY292ZXJ5CiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgZmluZF9yZXBvX3Jvb3Qoc3RhcnQ6IE9wdGlvbmFsW1BhdGhdID0gTm9uZSkgLT4gUGF0aDoKICAgICIiIgogICAgTG9jYXRlIHRoZSBwcm9qZWN0IHJvb3QgYnkgd2Fsa2luZyB1cHdhcmQgdW50aWwgYSBgLnNpdHJlcGMyL2AgZGlyZWN0b3J5CiAgICBpcyBmb3VuZC4gVXNlZCBPTkxZIGFmdGVyIGluaXRpYWxpemF0aW9uLgogICAgIiIiCiAgICBzdGFydCA9IHN0YXJ0IG9yIFBhdGguY3dkKCkKICAgIHAgPSBzdGFydC5yZXNvbHZlKCkKCiAgICBmb3IgcGFyZW50IGluIFtwXSArIGxpc3QocC5wYXJlbnRzKToKICAgICAgICBpZiAocGFyZW50IC8gRE9URElSX05BTUUpLmlzX2RpcigpOgogICAgICAgICAgICByZXR1cm4gcGFyZW50CgogICAgcmFpc2UgUnVudGltZUVycm9yKAogICAgICAgIGYiTm8ge0RPVERJUl9OQU1FfS8gZGlyZWN0b3J5IGZvdW5kIHVwd2FyZCBmcm9tIHtzdGFydH0uICIKICAgICAgICAiUnVuIGBzaXRyZXBjMiBpbml0YCBmaXJzdC4iCiAgICApCgpkZWYgZG90X3BhdGgocm9vdDogT3B0aW9uYWxbUGF0aF0gPSBOb25lKSAtPiBQYXRoOgogICAgIiIiCiAgICBSZXR1cm4gdGhlIHdvcmtzcGFjZSBwYXRoLiBEdXJpbmcgaW5pdCwgYHJvb3RgIG11c3QgYmUgc3VwcGxpZWQuCiAgICAiIiIKICAgIGlmIHJvb3QgaXMgbm90IE5vbmU6CiAgICAgICAgcmV0dXJuIHJvb3QgLyBET1RESVJfTkFNRQogICAgcmV0dXJuIGZpbmRfcmVwb19yb290KCkgLyBET1RESVJfTkFNRQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBQYWNrYWdlZCByZWZlcmVuY2UgcGF0aHMKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBzZWVkX3JlZmVyZW5jZV9wYXRoKCkgLT4gUGF0aDoKICAgIHJldHVybiBQYXRoKGZpbGVzKFNPVVJDRV9ESVIpIC8gInJlZmVyZW5jZSIpCgpkZWYgc2NoZW1hX3Jvb3RfcGF0aCgpIC0+IFBhdGg6CiAgICByZXR1cm4gUGF0aChmaWxlcyhTT1VSQ0VfRElSKSAvICJzY2hlbWEiKQoKZGVmIHJlY19zY2hlbWFfcm9vdF9wYXRoKCkgLT4gUGF0aDoKICAgIHJldHVybiBzY2hlbWFfcm9vdF9wYXRoKCkgLyAicmVjb3JkcyIKCmRlZiBnYXpfc2NoZW1hX3Jvb3RfcGF0aCgpIC0+IFBhdGg6CiAgICByZXR1cm4gc2NoZW1hX3Jvb3RfcGF0aCgpIC8gImdhemV0dGVlciIKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgU2VlZCBmaWxlcwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIHNlZWRfbGV4aWNvbl9wYXRoKCkgLT4gUGF0aDoKICAgIHJldHVybiBzZWVkX3JlZmVyZW5jZV9wYXRoKCkgLyBTRUVEX0xFWElDT04KCmRlZiBzZWVkX3NvdXJjZXNfcGF0aCgpIC0+IFBhdGg6CiAgICByZXR1cm4gc2VlZF9yZWZlcmVuY2VfcGF0aCgpIC8gU0VFRF9TT1VSQ0VTCgpkZWYgc2VlZF9nYXpldHRlZXJfcGF0aCgpIC0+IFBhdGg6CiAgICByZXR1cm4gc2VlZF9yZWZlcmVuY2VfcGF0aCgpIC8gU0VFRF9HQVpFVFRFRVJfREIKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgV29ya3NwYWNlIGZpbGVzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgZ2F6ZXR0ZWVyX3BhdGgocm9vdDogT3B0aW9uYWxbUGF0aF0gPSBOb25lKSAtPiBQYXRoOgogICAgcmV0dXJuIGRvdF9wYXRoKHJvb3QpIC8gR0FaRVRURUVSX0RCCgpkZWYgcmVjb3Jkc19wYXRoKHJvb3Q6IE9wdGlvbmFsW1BhdGhdID0gTm9uZSkgLT4gUGF0aDoKICAgIHJldHVybiBkb3RfcGF0aChyb290KSAvIFJFQ09SRFNfREIKCmRlZiBsZXhpY29uX3BhdGgocm9vdDogT3B0aW9uYWxbUGF0aF0gPSBOb25lKSAtPiBQYXRoOgogICAgcmV0dXJuIGRvdF9wYXRoKHJvb3QpIC8gTEVYSUNPTgoKZGVmIHNvdXJjZXNfcGF0aChyb290OiBPcHRpb25hbFtQYXRoXSA9IE5vbmUpIC0+IFBhdGg6CiAgICByZXR1cm4gZG90X3BhdGgocm9vdCkgLyBTT1VSQ0VTCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFNjaGVtYSBmaWxlcwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIGluZ2VzdF9zY2hlbWFfcGF0aCgpIC0+IFBhdGg6CiAgICByZXR1cm4gcmVjX3NjaGVtYV9yb290X3BhdGgoKSAvIFJFQ19TQ0hFTUFfSU5HRVNUCgpkZWYgbHNzX3NjaGVtYV9wYXRoKCkgLT4gUGF0aDoKICAgIHJldHVybiByZWNfc2NoZW1hX3Jvb3RfcGF0aCgpIC8gUkVDX1NDSEVNQV9MU1MKCmRlZiBnYXpldHRlZXJfc2NoZW1hX3BhdGgoKSAtPiBQYXRoOgogICAgcmV0dXJuIGdhel9zY2hlbWFfcm9vdF9wYXRoKCkgLyBHQVpfU0NIRU1BX0dBWkVUVEVFUgoAAAAAAAAAABsOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3gEAAAAAAADeAQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/gazetteer_ws.py",
			"settings":
			{
				"buffer_size": 10866,
				"encoding": "UTF-8",
				"line_ending": "Unix",
				"name": "from __future__ import annotations"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAcioAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/app.py",
			"settings":
			{
				"buffer_size": 931,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					9,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAALAMAAAAAAABhAQAAIyBzcmMvZGJlZGl0YzIvYXBwLnB5CmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBzeXMKCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0IFFBcHBsaWNhdGlvbgoKZnJvbSBkYmVkaXRjMi5tYWluX3dpbmRvdyBpbXBvcnQgTWFpbldpbmRvdwoKCmRlZiBtYWluKCkgLT4gTm9uZToKICAgIGFwcCA9IFFBcHBsaWNhdGlvbihzeXMuYXJndikKCiAgICB3aW5kb3cgPSBNYWluV2luZG93KCkKICAgIHdpbmRvdy5yZXNpemUoMTIwMCwgODAwKQogICAgd2luZG93LnNob3coKQoKICAgIHN5cy5leGl0KGFwcC5leGVjKCkpCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oKQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAABhAQAAAAAAAAAAAAAAAPC/"
				],
				[
					10,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAsAwAAIyBzcmMvZGJlZGl0YzIvYXBwLnB5CmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBzeXMKCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0IFFBcHBsaWNhdGlvbgoKZnJvbSBkYmVkaXRjMi5tYWluX3dpbmRvdyBpbXBvcnQgTWFpbldpbmRvdwpmcm9tIGRiZWRpdGMyLmNvbnRyb2xsZXIuZWRpdG9yX2NvbnRyb2xsZXIgaW1wb3J0IEVkaXRvckNvbnRyb2xsZXIKCgpkZWYgbWFpbigpIC0+IE5vbmU6CiAgICBhcHAgPSBRQXBwbGljYXRpb24oc3lzLmFyZ3YpCgogICAgd2luZG93ID0gTWFpbldpbmRvdygpCiAgICB3aW5kb3cucmVzaXplKDEyMDAsIDgwMCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDT05UUk9MTEVSIFdJUklORyAoVEhJUyBXQVMgTUlTU0lORykKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBFZGl0b3JDb250cm9sbGVyKAogICAgICAgIG5hdmlnYXRpb249d2luZG93Ll9uYXZpZ2F0aW9uX3RyZWUsCiAgICAgICAgc2VhcmNoPXdpbmRvdy5fc2VhcmNoX3BhbmVsLAogICAgICAgIGVudHJ5X2xpc3Q9d2luZG93Ll9lbnRyeV9saXN0LAogICAgICAgIGRldGFpbHM9d2luZG93Ll9kZXRhaWxzX3N0YWNrLAogICAgICAgIHRvb2xiYXI9d2luZG93Ll90b29sYmFyLAogICAgKQoKICAgIHdpbmRvdy5zaG93KCkKICAgIHN5cy5leGl0KGFwcC5leGVjKCkpCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oKQoAAAAAAAAAACwDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALAMAAAAAAAAsAwAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"paste",
					null,
					"AQAAANgCAAAAAAAACAMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2AIAAAAAAADYAgAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"insert",
					{
						"characters": "\t\t"
					},
					"AgAAANgCAAAAAAAA3AIAAAAAAAAAAAAA3AIAAAAAAADgAgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2AIAAAAAAADYAgAAAAAAAAAAAAAAAPC/"
				],
				[
					21,
					1,
					"left_delete",
					null,
					"AQAAANwCAAAAAAAA3AIAAAAAAAAEAAAAICAgIA",
					"AQAAAAAAAAABAAAA4AIAAAAAAADgAgAAAAAAAAAAAAAAAPC/"
				],
				[
					22,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABgAwAAIyBzcmMvZGJlZGl0YzIvYXBwLnB5CmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBzeXMKCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0IFFBcHBsaWNhdGlvbgoKZnJvbSBkYmVkaXRjMi5tYWluX3dpbmRvdyBpbXBvcnQgTWFpbldpbmRvdwpmcm9tIGRiZWRpdGMyLmNvbnRyb2xsZXIuZWRpdG9yX2NvbnRyb2xsZXIgaW1wb3J0IEVkaXRvckNvbnRyb2xsZXIKCgpkZWYgbWFpbigpIC0+IE5vbmU6CiAgICBhcHAgPSBRQXBwbGljYXRpb24oc3lzLmFyZ3YpCgogICAgd2luZG93ID0gTWFpbldpbmRvdygpCiAgICB3aW5kb3cucmVzaXplKDEyMDAsIDgwMCkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDT05UUk9MTEVSIFdJUklORyAoVEhJUyBXQVMgTUlTU0lORykKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICBFZGl0b3JDb250cm9sbGVyKAogICAgICAgIG5hdmlnYXRpb249d2luZG93Ll9uYXZpZ2F0aW9uX3RyZWUsCiAgICAgICAgc2VhcmNoPXdpbmRvdy5fc2VhcmNoX3BhbmVsLAogICAgICAgIGVudHJ5X2xpc3Q9d2luZG93Ll9lbnRyeV9saXN0LAogICAgICAgIGRldGFpbHM9d2luZG93Ll9kZXRhaWxzX3N0YWNrLAogICAgICAgIHRvb2xiYXI9d2luZG93Ll90b29sYmFyLAogICAgKQogICAgd2luZG93LnNldF9jb2xsZWN0aW9uKENvbGxlY3Rpb25LaW5kLkxPQ0FUSU9OUykKCiAgICB3aW5kb3cuc2hvdygpCiAgICBzeXMuZXhpdChhcHAuZXhlYygpKQoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICBtYWluKCkKAAAAAAAAAABgAwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3AIAAAAAAADcAgAAAAAAAAAAAAAAAPC/"
				],
				[
					25,
					1,
					"insert",
					{
						"characters": "from"
					},
					"BAAAAOEAAAAAAAAA4gAAAAAAAAAAAAAA4gAAAAAAAADjAAAAAAAAAAAAAADjAAAAAAAAAOQAAAAAAAAAAAAAAOQAAAAAAAAA5QAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4QAAAAAAAADhAAAAAAAAAAAAAAAAAPC/"
				],
				[
					26,
					1,
					"insert",
					{
						"characters": " debeditc"
					},
					"CQAAAOUAAAAAAAAA5gAAAAAAAAAAAAAA5gAAAAAAAADnAAAAAAAAAAAAAADnAAAAAAAAAOgAAAAAAAAAAAAAAOgAAAAAAAAA6QAAAAAAAAAAAAAA6QAAAAAAAADqAAAAAAAAAAAAAADqAAAAAAAAAOsAAAAAAAAAAAAAAOsAAAAAAAAA7AAAAAAAAAAAAAAA7AAAAAAAAADtAAAAAAAAAAAAAADtAAAAAAAAAO4AAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5QAAAAAAAADlAAAAAAAAAAAAAAAAAPC/"
				],
				[
					27,
					5,
					"left_delete",
					null,
					"BQAAAO0AAAAAAAAA7QAAAAAAAAABAAAAY+wAAAAAAAAA7AAAAAAAAAABAAAAdOsAAAAAAAAA6wAAAAAAAAABAAAAaeoAAAAAAAAA6gAAAAAAAAABAAAAZOkAAAAAAAAA6QAAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAA7gAAAAAAAADuAAAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					2,
					"left_delete",
					null,
					"AgAAAOgAAAAAAAAA6AAAAAAAAAABAAAAYucAAAAAAAAA5wAAAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAA6QAAAAAAAADpAAAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"insert",
					{
						"characters": "beditc2."
					},
					"CAAAAOcAAAAAAAAA6AAAAAAAAAAAAAAA6AAAAAAAAADpAAAAAAAAAAAAAADpAAAAAAAAAOoAAAAAAAAAAAAAAOoAAAAAAAAA6wAAAAAAAAAAAAAA6wAAAAAAAADsAAAAAAAAAAAAAADsAAAAAAAAAO0AAAAAAAAAAAAAAO0AAAAAAAAA7gAAAAAAAAAAAAAA7gAAAAAAAADvAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5wAAAAAAAADnAAAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"insert",
					{
						"characters": "enju"
					},
					"BAAAAO8AAAAAAAAA8AAAAAAAAAAAAAAA8AAAAAAAAADxAAAAAAAAAAAAAADxAAAAAAAAAPIAAAAAAAAAAAAAAPIAAAAAAAAA8wAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7wAAAAAAAADvAAAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					2,
					"left_delete",
					null,
					"AgAAAPIAAAAAAAAA8gAAAAAAAAABAAAAdfEAAAAAAAAA8QAAAAAAAAABAAAAag",
					"AQAAAAAAAAABAAAA8wAAAAAAAADzAAAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"insert",
					{
						"characters": "ums"
					},
					"AwAAAPEAAAAAAAAA8gAAAAAAAAAAAAAA8gAAAAAAAADzAAAAAAAAAAAAAADzAAAAAAAAAPQAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8QAAAAAAAADxAAAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"insert",
					{
						"characters": " import"
					},
					"BwAAAPQAAAAAAAAA9QAAAAAAAAAAAAAA9QAAAAAAAAD2AAAAAAAAAAAAAAD2AAAAAAAAAPcAAAAAAAAAAAAAAPcAAAAAAAAA+AAAAAAAAAAAAAAA+AAAAAAAAAD5AAAAAAAAAAAAAAD5AAAAAAAAAPoAAAAAAAAAAAAAAPoAAAAAAAAA+wAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9AAAAAAAAAD0AAAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"insert",
					{
						"characters": " Cool"
					},
					"BQAAAPsAAAAAAAAA/AAAAAAAAAAAAAAA/AAAAAAAAAD9AAAAAAAAAAAAAAD9AAAAAAAAAP4AAAAAAAAAAAAAAP4AAAAAAAAA/wAAAAAAAAAAAAAA/wAAAAAAAAAAAQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+wAAAAAAAAD7AAAAAAAAAAAAAAAAAPC/"
				],
				[
					35,
					1,
					"insert_completion",
					{
						"completion": "CollectionKind",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "CollectionKind"
					},
					"AgAAAPwAAAAAAAAA/AAAAAAAAAAEAAAAQ29vbPwAAAAAAAAACgEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACJAwAAIyBzcmMvZGJlZGl0YzIvYXBwLnB5CmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBzeXMKCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0IFFBcHBsaWNhdGlvbgoKZnJvbSBkYmVkaXRjMi5tYWluX3dpbmRvdyBpbXBvcnQgTWFpbldpbmRvdwpmcm9tIGRiZWRpdGMyLmNvbnRyb2xsZXIuZWRpdG9yX2NvbnRyb2xsZXIgaW1wb3J0IEVkaXRvckNvbnRyb2xsZXIKZnJvbSBkYmVkaXRjMi5lbnVtcyBpbXBvcnQgQ29sbGVjdGlvbktpbmQKCmRlZiBtYWluKCkgLT4gTm9uZToKICAgIGFwcCA9IFFBcHBsaWNhdGlvbihzeXMuYXJndikKCiAgICB3aW5kb3cgPSBNYWluV2luZG93KCkKICAgIHdpbmRvdy5yZXNpemUoMTIwMCwgODAwKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIENPTlRST0xMRVIgV0lSSU5HIChUSElTIFdBUyBNSVNTSU5HKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIEVkaXRvckNvbnRyb2xsZXIoCiAgICAgICAgbmF2aWdhdGlvbj13aW5kb3cuX25hdmlnYXRpb25fdHJlZSwKICAgICAgICBzZWFyY2g9d2luZG93Ll9zZWFyY2hfcGFuZWwsCiAgICAgICAgZW50cnlfbGlzdD13aW5kb3cuX2VudHJ5X2xpc3QsCiAgICAgICAgZGV0YWlscz13aW5kb3cuX2RldGFpbHNfc3RhY2ssCiAgICAgICAgdG9vbGJhcj13aW5kb3cuX3Rvb2xiYXIsCiAgICApCiAgICB3aW5kb3cuc2V0X2NvbGxlY3Rpb24oQ29sbGVjdGlvbktpbmQuTE9DQVRJT05TKQoKICAgIHdpbmRvdy5zaG93KCkKICAgIHN5cy5leGl0KGFwcC5leGVjKCkpCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oKQoAAAAAAAAAAIkDAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACgEAAAAAAAAKAQAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "#"
					},
					"AQAAAAUDAAAAAAAABgMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABQMAAAAAAAAFAwAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAAYDAAAAAAAABwMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABgMAAAAAAAAGAwAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACLAwAAIyBzcmMvZGJlZGl0YzIvYXBwLnB5CmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBzeXMKCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0IFFBcHBsaWNhdGlvbgoKZnJvbSBkYmVkaXRjMi5tYWluX3dpbmRvdyBpbXBvcnQgTWFpbldpbmRvdwpmcm9tIGRiZWRpdGMyLmNvbnRyb2xsZXIuZWRpdG9yX2NvbnRyb2xsZXIgaW1wb3J0IEVkaXRvckNvbnRyb2xsZXIKZnJvbSBkYmVkaXRjMi5lbnVtcyBpbXBvcnQgQ29sbGVjdGlvbktpbmQKCmRlZiBtYWluKCkgLT4gTm9uZToKICAgIGFwcCA9IFFBcHBsaWNhdGlvbihzeXMuYXJndikKCiAgICB3aW5kb3cgPSBNYWluV2luZG93KCkKICAgIHdpbmRvdy5yZXNpemUoMTIwMCwgODAwKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIENPTlRST0xMRVIgV0lSSU5HIChUSElTIFdBUyBNSVNTSU5HKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIEVkaXRvckNvbnRyb2xsZXIoCiAgICAgICAgbmF2aWdhdGlvbj13aW5kb3cuX25hdmlnYXRpb25fdHJlZSwKICAgICAgICBzZWFyY2g9d2luZG93Ll9zZWFyY2hfcGFuZWwsCiAgICAgICAgZW50cnlfbGlzdD13aW5kb3cuX2VudHJ5X2xpc3QsCiAgICAgICAgZGV0YWlscz13aW5kb3cuX2RldGFpbHNfc3RhY2ssCiAgICAgICAgdG9vbGJhcj13aW5kb3cuX3Rvb2xiYXIsCiAgICApCiAgICAjIHdpbmRvdy5zZXRfY29sbGVjdGlvbihDb2xsZWN0aW9uS2luZC5MT0NBVElPTlMpCgogICAgd2luZG93LnNob3coKQogICAgc3lzLmV4aXQoYXBwLmV4ZWMoKSkKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigpCgAAAAAAAAAAiwMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAABwMAAAAAAAAHAwAAAAAAAAAAAAAAAPC/"
				],
				[
					47,
					1,
					"toggle_comment",
					{
						"block": false
					},
					"CgAAAP8CAAAAAAAAAQMAAAAAAAAAAAAA3gIAAAAAAADgAgAAAAAAAAAAAAC3AgAAAAAAALkCAAAAAAAAAAAAAJACAAAAAAAAkgIAAAAAAAAAAAAAawIAAAAAAABtAgAAAAAAAAAAAAA/AgAAAAAAAEECAAAAAAAAAAAAACkCAAAAAAAAKwIAAAAAAAAAAAAA6QEAAAAAAADrAQAAAAAAAAAAAAC+AQAAAAAAAMABAAAAAAAAAAAAAH4BAAAAAAAAgAEAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAMAAAAAAAB6AQAAAAAAAAAAAAAAAPC/"
				],
				[
					50,
					1,
					"toggle_comment",
					{
						"block": false
					},
					"AgAAAOEAAAAAAAAA4wAAAAAAAAAAAAAAngAAAAAAAACgAAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAACgEAAAAAAACfAAAAAAAAAAAAAAAAAPC/"
				],
				[
					51,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACjAwAAIyBzcmMvZGJlZGl0YzIvYXBwLnB5CmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBzeXMKCmZyb20gUHlTaWRlNi5RdFdpZGdldHMgaW1wb3J0IFFBcHBsaWNhdGlvbgoKZnJvbSBkYmVkaXRjMi5tYWluX3dpbmRvdyBpbXBvcnQgTWFpbldpbmRvdwojIGZyb20gZGJlZGl0YzIuY29udHJvbGxlci5lZGl0b3JfY29udHJvbGxlciBpbXBvcnQgRWRpdG9yQ29udHJvbGxlcgojIGZyb20gZGJlZGl0YzIuZW51bXMgaW1wb3J0IENvbGxlY3Rpb25LaW5kCgpkZWYgbWFpbigpIC0+IE5vbmU6CiAgICBhcHAgPSBRQXBwbGljYXRpb24oc3lzLmFyZ3YpCgogICAgd2luZG93ID0gTWFpbldpbmRvdygpCiAgICB3aW5kb3cucmVzaXplKDEyMDAsIDgwMCkKCiAgICAjICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjICMgQ09OVFJPTExFUiBXSVJJTkcgKFRISVMgV0FTIE1JU1NJTkcpCiAgICAjICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEVkaXRvckNvbnRyb2xsZXIoCiAgICAjICAgICBuYXZpZ2F0aW9uPXdpbmRvdy5fbmF2aWdhdGlvbl90cmVlLAogICAgIyAgICAgc2VhcmNoPXdpbmRvdy5fc2VhcmNoX3BhbmVsLAogICAgIyAgICAgZW50cnlfbGlzdD13aW5kb3cuX2VudHJ5X2xpc3QsCiAgICAjICAgICBkZXRhaWxzPXdpbmRvdy5fZGV0YWlsc19zdGFjaywKICAgICMgICAgIHRvb2xiYXI9d2luZG93Ll90b29sYmFyLAogICAgIyApCiAgICAjIHdpbmRvdy5zZXRfY29sbGVjdGlvbihDb2xsZWN0aW9uS2luZC5MT0NBVElPTlMpCgogICAgd2luZG93LnNob3coKQogICAgc3lzLmV4aXQoYXBwLmV4ZWMoKSkKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbigpCgAAAAAAAAAAowMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAADgEAAAAAAAChAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/services/gazetteer_alias_browser.py",
			"settings":
			{
				"buffer_size": 2125,
				"line_ending": "Unix",
				"name": "# src/dbeditc2/services/gazetteer_alias_browser.py"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAATQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABNCAAAIyBzcmMvZGJlZGl0YzIvc2VydmljZXMvZ2F6ZXR0ZWVyX2FsaWFzX2Jyb3dzZXIucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSB0eXBpbmcgaW1wb3J0IEl0ZXJhYmxlCgpmcm9tIHNpdHJlcGMyLmNvbmZpZy5wYXRocyBpbXBvcnQgZ2F6ZXR0ZWVyX3BhdGgKZnJvbSBkYmVkaXRjMi5lbnVtcyBpbXBvcnQgQ29sbGVjdGlvbktpbmQKZnJvbSBkYmVkaXRjMi5tb2RlbHMgaW1wb3J0IEVudHJ5U3VtbWFyeQoKCl9UQUJMRV9GT1JfS0lORCA9IHsKICAgIENvbGxlY3Rpb25LaW5kLkxPQ0FUSU9OUzogKCJsb2NhdGlvbl9hbGlhc2VzIiwgImxvY2F0aW9uX2lkIiwgImxvY2F0aW9ucyIpLAogICAgQ29sbGVjdGlvbktpbmQuUkVHSU9OUzogKCJyZWdpb25fYWxpYXNlcyIsICJyZWdpb25faWQiLCAicmVnaW9ucyIpLAogICAgQ29sbGVjdGlvbktpbmQuR1JPVVBTOiAoImdyb3VwX2FsaWFzZXMiLCAiZ3JvdXBfaWQiLCAiZ3JvdXBzIiksCiAgICBDb2xsZWN0aW9uS2luZC5ESVJFQ1RJT05TOiAoImRpcmVjdGlvbl9hbGlhc2VzIiwgImRpcmVjdGlvbl9pZCIsICJkaXJlY3Rpb25zIiksCn0KCgpkZWYgX2Nvbm4oKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246CiAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3QoZ2F6ZXR0ZWVyX3BhdGgoKSkKICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICBjb24uZXhlY3V0ZSgiUFJBR01BIGZvcmVpZ25fa2V5cyA9IE9OOyIpCiAgICByZXR1cm4gY29uCgoKZGVmIGxpc3RfYWxpYXNlcygKICAgICosCiAgICBraW5kOiBDb2xsZWN0aW9uS2luZCwKICAgIHNlYXJjaF90ZXh0OiBzdHIgfCBOb25lID0gTm9uZSwKKSAtPiBsaXN0W0VudHJ5U3VtbWFyeV06CiAgICAiIiIKICAgIExpc3QgYWxpYXNlcyBmb3IgYSBnYXpldHRlZXIgZW50aXR5IHR5cGUuCgogICAgLSBJZiBzZWFyY2hfdGV4dCBpcyBOb25lIG9yIGVtcHR5OiBsaXN0IEFMTCBhbGlhc2VzCiAgICAtIE90aGVyd2lzZTogZmlsdGVyIGJ5IG5vcm1hbGl6ZWQgTElLRSAldGV4dCUKCiAgICBGQUlMUyBMT1VETFkgaWYgc2NoZW1hIGV4cGVjdGF0aW9ucyBhcmUgdmlvbGF0ZWQuCiAgICAiIiIKICAgIGlmIGtpbmQgbm90IGluIF9UQUJMRV9GT1JfS0lORDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiQWxpYXMgbGlzdGluZyBub3Qgc3VwcG9ydGVkIGZvciB7a2luZH0iKQoKICAgIGFsaWFzX3RhYmxlLCBpZF9jb2wsIGVudGl0eV90YWJsZSA9IF9UQUJMRV9GT1JfS0lORFtraW5kXQoKICAgIHBhcmFtczogbGlzdFtzdHJdID0gW10KICAgIHdoZXJlID0gIiIKCiAgICBpZiBzZWFyY2hfdGV4dDoKICAgICAgICBub3JtID0gIiAiLmpvaW4oc2VhcmNoX3RleHQubG93ZXIoKS5zcGxpdCgpKQogICAgICAgIHdoZXJlID0gIldIRVJFIGEubm9ybWFsaXplZCBMSUtFID8iCiAgICAgICAgcGFyYW1zLmFwcGVuZChmIiV7bm9ybX0lIikKCiAgICBzcWwgPSBmIiIiCiAgICAgICAgU0VMRUNUCiAgICAgICAgICAgIGEuYWxpYXMsCiAgICAgICAgICAgIGEue2lkX2NvbH0gQVMgZW50aXR5X2lkLAogICAgICAgICAgICBlLm5hbWUgQVMgY2Fub25pY2FsX25hbWUKICAgICAgICBGUk9NIHthbGlhc190YWJsZX0gYQogICAgICAgIEpPSU4ge2VudGl0eV90YWJsZX0gZQogICAgICAgICAgT04gZS57aWRfY29sfSA9IGEue2lkX2NvbH0KICAgICAgICB7d2hlcmV9CiAgICAgICAgT1JERVIgQlkgYS5hbGlhcwogICAgIiIiCgogICAgd2l0aCBfY29ubigpIGFzIGNvbjoKICAgICAgICByb3dzID0gY29uLmV4ZWN1dGUoc3FsLCBwYXJhbXMpLmZldGNoYWxsKCkKCiAgICBpZiByb3dzIGlzIE5vbmU6CiAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJBbGlhcyBxdWVyeSBmYWlsZWQgdW5leHBlY3RlZGx5IikKCiAgICByZXR1cm4gWwogICAgICAgIEVudHJ5U3VtbWFyeSgKICAgICAgICAgICAgZW50cnlfaWQ9cm93WyJlbnRpdHlfaWQiXSwKICAgICAgICAgICAgZGlzcGxheV9uYW1lPXJvd1siYWxpYXMiXSwKICAgICAgICAgICAgc3VidGl0bGU9cm93WyJjYW5vbmljYWxfbmFtZSJdLAogICAgICAgICAgICBlZGl0YWJsZT1GYWxzZSwKICAgICAgICApCiAgICAgICAgZm9yIHJvdyBpbiByb3dzCiAgICBdCgAAAAAAAAAATQgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAIQUAAAAAAAAhBQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/services/gazetteer_search.py",
			"settings":
			{
				"buffer_size": 2619,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					9,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAOwoAAAAAAABeBQAAIyBzcmMvZGJlZGl0YzIvc2VydmljZXMvZ2F6ZXR0ZWVyX3NlYXJjaC5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGRiZWRpdGMyLmVudW1zIGltcG9ydCBDb2xsZWN0aW9uS2luZApmcm9tIGRiZWRpdGMyLm1vZGVscyBpbXBvcnQgRW50cnlTdW1tYXJ5Cgpmcm9tIHNpdHJlcGMyLmdhemV0dGVlci5hbGlhc19zZXJ2aWNlIGltcG9ydCBzZWFyY2hfZW50aXRpZXNfYnlfYWxpYXMKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIERvbWFpbiBtYXBwaW5nCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpfRE9NQUlOX0ZPUl9DT0xMRUNUSU9OOiBkaWN0W0NvbGxlY3Rpb25LaW5kLCBzdHJdID0gewogICAgQ29sbGVjdGlvbktpbmQuTE9DQVRJT05TOiAiTE9DQVRJT04iLAogICAgQ29sbGVjdGlvbktpbmQuUkVHSU9OUzogIlJFR0lPTiIsCiAgICBDb2xsZWN0aW9uS2luZC5HUk9VUFM6ICJHUk9VUCIsCiAgICBDb2xsZWN0aW9uS2luZC5ESVJFQ1RJT05TOiAiRElSRUNUSU9OIiwKfQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgUHVibGljIEFQSQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIHNlYXJjaF9lbnRpdGllcygKICAgICosCiAgICBjb2xsZWN0aW9uOiBDb2xsZWN0aW9uS2luZCwKICAgIHRleHQ6IHN0ciwKKSAtPiBsaXN0W0VudHJ5U3VtbWFyeV06CiAgICAiIiIKICAgIFNlYXJjaCBnYXpldHRlZXIgZW50aXRpZXMgYnkgYWxpYXMgcHJlZml4LgoKICAgIFJlYWQtb25seSB3cmFwcGVyIGFyb3VuZCBzaXRyZXBjMiBhbGlhc19zZXJ2aWNlLgogICAgIiIiCiAgICBkb21haW4gPSBfRE9NQUlOX0ZPUl9DT0xMRUNUSU9OLmdldChjb2xsZWN0aW9uKQogICAgaWYgZG9tYWluIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIFtdCgogICAgcmVzdWx0cyA9IHNlYXJjaF9lbnRpdGllc19ieV9hbGlhcygKICAgICAgICBkb21haW49ZG9tYWluLAogICAgICAgIHNlYXJjaF90ZXh0PXRleHQsCiAgICApCgogICAgcmV0dXJuIFsKICAgICAgICBFbnRyeVN1bW1hcnkoCiAgICAgICAgICAgIGVudHJ5X2lkPXJvd1siZW50aXR5X2lkIl0sCiAgICAgICAgICAgIGRpc3BsYXlfbmFtZT1yb3dbImNhbm9uaWNhbF9uYW1lIl0sCiAgICAgICAgICAgIGVkaXRhYmxlPUZhbHNlLAogICAgICAgICkKICAgICAgICBmb3Igcm93IGluIHJlc3VsdHMKICAgIF0K",
					"AQAAAAAAAAABAAAAAAAAAAAAAABeBQAAAAAAAAAAAAAAAPC/"
				],
				[
					10,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA9CgAAIyBzcmMvZGJlZGl0YzIvc2VydmljZXMvZ2F6ZXR0ZWVyX3NlYXJjaC5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgppbXBvcnQgc3FsaXRlMwoKZnJvbSBkYmVkaXRjMi5lbnVtcyBpbXBvcnQgQ29sbGVjdGlvbktpbmQKZnJvbSBkYmVkaXRjMi5tb2RlbHMgaW1wb3J0IEVudHJ5U3VtbWFyeQpmcm9tIHNpdHJlcGMyLmNvbmZpZy5wYXRocyBpbXBvcnQgZ2F6ZXR0ZWVyX3BhdGgKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIERvbWFpbiBtYXBwaW5nIChlbnRpdHkg4oaSIGFsaWFzIHRhYmxlKQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKX0RPTUFJTl9GT1JfQ09MTEVDVElPTjogZGljdFtDb2xsZWN0aW9uS2luZCwgdHVwbGVbc3RyLCBzdHJdXSA9IHsKICAgIENvbGxlY3Rpb25LaW5kLkxPQ0FUSU9OUzogKCJsb2NhdGlvbl9hbGlhc2VzIiwgImxvY2F0aW9uX2lkIiksCiAgICBDb2xsZWN0aW9uS2luZC5SRUdJT05TOiAoInJlZ2lvbl9hbGlhc2VzIiwgInJlZ2lvbl9pZCIpLAogICAgQ29sbGVjdGlvbktpbmQuR1JPVVBTOiAoImdyb3VwX2FsaWFzZXMiLCAiZ3JvdXBfaWQiKSwKICAgIENvbGxlY3Rpb25LaW5kLkRJUkVDVElPTlM6ICgiZGlyZWN0aW9uX2FsaWFzZXMiLCAiZGlyZWN0aW9uX2lkIiksCn0KCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEludGVybmFsIGhlbHBlcnMKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfY29ubigpIC0+IHNxbGl0ZTMuQ29ubmVjdGlvbjoKICAgIGNvbiA9IHNxbGl0ZTMuY29ubmVjdChnYXpldHRlZXJfcGF0aCgpKQogICAgY29uLnJvd19mYWN0b3J5ID0gc3FsaXRlMy5Sb3cKICAgIGNvbi5leGVjdXRlKCJQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047IikKICAgIHJldHVybiBjb24KCgpkZWYgX25vcm1hbGl6ZSh0ZXh0OiBzdHIpIC0+IHN0cjoKICAgIHJldHVybiAiICIuam9pbih0ZXh0Lmxvd2VyKCkuc3BsaXQoKSkKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFB1YmxpYyBBUEkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBzZWFyY2hfZW50aXRpZXMoCiAgICAqLAogICAgY29sbGVjdGlvbjogQ29sbGVjdGlvbktpbmQsCiAgICB0ZXh0OiBzdHIsCikgLT4gbGlzdFtFbnRyeVN1bW1hcnldOgogICAgIiIiCiAgICBTZWFyY2ggZ2F6ZXR0ZWVyIGFsaWFzZXMgZm9yIHRoZSBnaXZlbiBjb2xsZWN0aW9uLgoKICAgIEJlaGF2aW9yOgogICAgLSBRdWVyaWVzIHRoZSBhcHByb3ByaWF0ZSAqX2FsaWFzZXMgdGFibGUKICAgIC0gTWF0Y2hlcyBhZ2FpbnN0IG5vcm1hbGl6ZWQgYWxpYXMgdGV4dAogICAgLSBSZXR1cm5zIG9uZSBFbnRyeVN1bW1hcnkgcGVyIGFsaWFzCiAgICAtIGVudHJ5X2lkIGlzIHRoZSBjYW5vbmljYWwgZW50aXR5IGlkIChlLmcuIGxvY2F0aW9uX2lkKQogICAgLSBkaXNwbGF5X25hbWUgaXMgdGhlIGFsaWFzIHRleHQgaXRzZWxmCgogICAgRkFJTFMgTE9VRExZIGlmIGNvbGxlY3Rpb24gaXMgdW5zdXBwb3J0ZWQuCiAgICAiIiIKICAgIG1hcHBpbmcgPSBfRE9NQUlOX0ZPUl9DT0xMRUNUSU9OLmdldChjb2xsZWN0aW9uKQogICAgaWYgbWFwcGluZyBpcyBOb25lOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgIGYic2VhcmNoX2VudGl0aWVzKCkgZG9lcyBub3Qgc3VwcG9ydCBjb2xsZWN0aW9uOiB7Y29sbGVjdGlvbn0iCiAgICAgICAgKQoKICAgIGFsaWFzX3RhYmxlLCBpZF9jb2wgPSBtYXBwaW5nCgogICAgbm9ybSA9IF9ub3JtYWxpemUodGV4dCkKICAgIGxpa2UgPSBmIntub3JtfSUiCgogICAgc3FsID0gZiIiIgogICAgICAgIFNFTEVDVAogICAgICAgICAgICBhbGlhcywKICAgICAgICAgICAge2lkX2NvbH0gQVMgZW50aXR5X2lkCiAgICAgICAgRlJPTSB7YWxpYXNfdGFibGV9CiAgICAgICAgV0hFUkUgbm9ybWFsaXplZCBMSUtFID8KICAgICAgICBPUkRFUiBCWSBhbGlhcwogICAgIiIiCgogICAgd2l0aCBfY29ubigpIGFzIGNvbjoKICAgICAgICByb3dzID0gY29uLmV4ZWN1dGUoc3FsLCAobGlrZSwpKS5mZXRjaGFsbCgpCgogICAgaWYgcm93cyBpcyBOb25lOgogICAgICAgIHJhaXNlIFJ1bnRpbWVFcnJvcigKICAgICAgICAgICAgZiJBbGlhcyBzZWFyY2ggZmFpbGVkIHVuZXhwZWN0ZWRseSBmb3Ige2NvbGxlY3Rpb259IgogICAgICAgICkKCiAgICByZXR1cm4gWwogICAgICAgIEVudHJ5U3VtbWFyeSgKICAgICAgICAgICAgZW50cnlfaWQ9cm93WyJlbnRpdHlfaWQiXSwKICAgICAgICAgICAgZGlzcGxheV9uYW1lPXJvd1siYWxpYXMiXSwKICAgICAgICAgICAgZWRpdGFibGU9RmFsc2UsCiAgICAgICAgKQogICAgICAgIGZvciByb3cgaW4gcm93cwogICAgXQoAAAAAAAAAADsKAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOwoAAAAAAAA7CgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/dbeditc2/services/gazetteer_read.py",
			"settings":
			{
				"buffer_size": 3034,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAA2gsAAAAAAABBGwAAIyBzcmMvZGJlZGl0YzIvc2VydmljZXMvZ2F6ZXR0ZWVyX3JlYWQucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSB0eXBpbmcgaW1wb3J0IEl0ZXJhYmxlCgpmcm9tIHNpdHJlcGMyLmNvbmZpZy5wYXRocyBpbXBvcnQgZ2F6ZXR0ZWVyX3BhdGgKCmZyb20gZGJlZGl0YzIuZW51bXMgaW1wb3J0IENvbGxlY3Rpb25LaW5kCmZyb20gZGJlZGl0YzIubW9kZWxzIGltcG9ydCBFbnRyeVN1bW1hcnksIEdhemV0dGVlckVudGl0eVZpZXdNb2RlbApmcm9tIHNpdHJlcGMyLmdhemV0dGVlci5hbGlhc19zZXJ2aWNlIGltcG9ydCBsb2FkX2FsaWFzZXNfZm9yX2VudGl0aWVzCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBDb25uZWN0aW9uCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX2Nvbm4oKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246CiAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3QoZ2F6ZXR0ZWVyX3BhdGgoKSkKICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICBjb24uZXhlY3V0ZSgiUFJBR01BIGZvcmVpZ25fa2V5cyA9IE9OOyIpCiAgICByZXR1cm4gY29uCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBDb2xsZWN0aW9uIGxpc3RpbmcKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBsaXN0X2VudGl0aWVzKGtpbmQ6IENvbGxlY3Rpb25LaW5kKSAtPiBsaXN0W0VudHJ5U3VtbWFyeV06CiAgICAiIiIKICAgIExpc3QgZW50aXRpZXMgZm9yIHRoZSBnaXZlbiBnYXpldHRlZXIgY29sbGVjdGlvbi4KCiAgICBSZWFkLW9ubHkuIE1pbmltYWwgZmllbGRzIG9ubHkuCiAgICAiIiIKICAgIHRhYmxlLCBpZF9jb2wsIG5hbWVfY29sID0gX3RhYmxlX2luZm8oa2luZCkKCiAgICB3aXRoIF9jb25uKCkgYXMgY29uOgogICAgICAgIHJvd3MgPSBjb24uZXhlY3V0ZSgKICAgICAgICAgICAgZiIiIgogICAgICAgICAgICBTRUxFQ1Qge2lkX2NvbH0gQVMgZW50aXR5X2lkLCB7bmFtZV9jb2x9IEFTIG5hbWUKICAgICAgICAgICAgRlJPTSB7dGFibGV9CiAgICAgICAgICAgIE9SREVSIEJZIG5hbWUKICAgICAgICAgICAgIiIiCiAgICAgICAgKS5mZXRjaGFsbCgpCgogICAgcmV0dXJuIFsKICAgICAgICBFbnRyeVN1bW1hcnkoCiAgICAgICAgICAgIGVudHJ5X2lkPXJvd1siZW50aXR5X2lkIl0sCiAgICAgICAgICAgIGRpc3BsYXlfbmFtZT1yb3dbIm5hbWUiXSwKICAgICAgICAgICAgZWRpdGFibGU9RmFsc2UsICAjIGVkaXRhYmlsaXR5IGhhbmRsZWQgbGF0ZXIKICAgICAgICApCiAgICAgICAgZm9yIHJvdyBpbiByb3dzCiAgICBdCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBFbnRpdHkgZGV0YWlsIGxvYWRpbmcKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBsb2FkX2VudGl0eShraW5kOiBDb2xsZWN0aW9uS2luZCwgZW50aXR5X2lkOiBpbnQpIC0+IEdhemV0dGVlckVudGl0eVZpZXdNb2RlbDoKICAgICIiIgogICAgTG9hZCBmdWxsIHJlYWQtb25seSBkZXRhaWxzIGZvciBhIHNpbmdsZSBnYXpldHRlZXIgZW50aXR5LgogICAgIiIiCiAgICBpZiBraW5kID09IENvbGxlY3Rpb25LaW5kLkxPQ0FUSU9OUzoKICAgICAgICByZXR1cm4gX2xvYWRfbG9jYXRpb24oZW50aXR5X2lkKQogICAgaWYga2luZCA9PSBDb2xsZWN0aW9uS2luZC5SRUdJT05TOgogICAgICAgIHJldHVybiBfbG9hZF9yZWdpb24oZW50aXR5X2lkKQogICAgaWYga2luZCA9PSBDb2xsZWN0aW9uS2luZC5HUk9VUFM6CiAgICAgICAgcmV0dXJuIF9sb2FkX2dyb3VwKGVudGl0eV9pZCkKICAgIGlmIGtpbmQgPT0gQ29sbGVjdGlvbktpbmQuRElSRUNUSU9OUzoKICAgICAgICByZXR1cm4gX2xvYWRfZGlyZWN0aW9uKGVudGl0eV9pZCkKCiAgICByYWlzZSBWYWx1ZUVycm9yKGYiVW5zdXBwb3J0ZWQgY29sbGVjdGlvbiBraW5kOiB7a2luZH0iKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTG9jYXRpb24KIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfbG9hZF9sb2NhdGlvbihsb2NhdGlvbl9pZDogaW50KSAtPiBHYXpldHRlZXJFbnRpdHlWaWV3TW9kZWw6CiAgICB3aXRoIF9jb25uKCkgYXMgY29uOgogICAgICAgIHJvdyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgU0VMRUNUIG5hbWUsIGxhdCwgbG9uLCBwbGFjZSwgd2lraWRhdGEKICAgICAgICAgICAgRlJPTSBsb2NhdGlvbnMKICAgICAgICAgICAgV0hFUkUgbG9jYXRpb25faWQgPSA/CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKGxvY2F0aW9uX2lkLCksCiAgICAgICAgKS5mZXRjaG9uZSgpCgogICAgICAgIGlmIHJvdyBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBLZXlFcnJvcihmIkxvY2F0aW9uIG5vdCBmb3VuZDoge2xvY2F0aW9uX2lkfSIpCgogICAgICAgIHJlZ2lvbnMgPSBjb24uZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFNFTEVDVCByLm5hbWUKICAgICAgICAgICAgRlJPTSBsb2NhdGlvbl9yZWdpb25zIGxyCiAgICAgICAgICAgIEpPSU4gcmVnaW9ucyByIE9OIHIucmVnaW9uX2lkID0gbHIucmVnaW9uX2lkCiAgICAgICAgICAgIFdIRVJFIGxyLmxvY2F0aW9uX2lkID0gPwogICAgICAgICAgICBPUkRFUiBCWSByLm5hbWUKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApLmZldGNoYWxsKCkKCiAgICAgICAgZ3JvdXBzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBTRUxFQ1QgZy5uYW1lCiAgICAgICAgICAgIEZST00gbG9jYXRpb25fZ3JvdXBzIGxnCiAgICAgICAgICAgIEpPSU4gZ3JvdXBzIGcgT04gZy5ncm91cF9pZCA9IGxnLmdyb3VwX2lkCiAgICAgICAgICAgIFdIRVJFIGxnLmxvY2F0aW9uX2lkID0gPwogICAgICAgICAgICBPUkRFUiBCWSBnLm5hbWUKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAobG9jYXRpb25faWQsKSwKICAgICAgICApLmZldGNoYWxsKCkKCiAgICBhbGlhc2VzID0gbG9hZF9hbGlhc2VzX2Zvcl9lbnRpdGllcygKICAgICAgICBkb21haW49IkxPQ0FUSU9OIiwKICAgICAgICBlbnRpdHlfaWRzPVtsb2NhdGlvbl9pZF0sCiAgICApCgogICAgcmV0dXJuIEdhemV0dGVlckVudGl0eVZpZXdNb2RlbCgKICAgICAgICB0aXRsZT1yb3dbIm5hbWUiXSwKICAgICAgICBpc19yZWFkX29ubHk9VHJ1ZSwKICAgICAgICBuYW1lPXJvd1sibmFtZSJdLAogICAgICAgIGxhdGl0dWRlPXJvd1sibGF0Il0sCiAgICAgICAgbG9uZ2l0dWRlPXJvd1sibG9uIl0sCiAgICAgICAgcGxhY2VfdHlwZT1yb3dbInBsYWNlIl0sCiAgICAgICAgd2lraWRhdGFfaWQ9cm93WyJ3aWtpZGF0YSJdLAogICAgICAgIGFsaWFzZXM9YWxpYXNlcywKICAgICAgICByZWdpb25zPVtyWyJuYW1lIl0gZm9yIHIgaW4gcmVnaW9uc10sCiAgICAgICAgZ3JvdXBzPVtnWyJuYW1lIl0gZm9yIGcgaW4gZ3JvdXBzXSwKICAgICkKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJlZ2lvbgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIF9sb2FkX3JlZ2lvbihyZWdpb25faWQ6IGludCkgLT4gR2F6ZXR0ZWVyRW50aXR5Vmlld01vZGVsOgogICAgd2l0aCBfY29ubigpIGFzIGNvbjoKICAgICAgICByb3cgPSBjb24uZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIFNFTEVDVCBuYW1lLCB3aWtpZGF0YQogICAgICAgICAgICBGUk9NIHJlZ2lvbnMKICAgICAgICAgICAgV0hFUkUgcmVnaW9uX2lkID0gPwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgIChyZWdpb25faWQsKSwKICAgICAgICApLmZldGNob25lKCkKCiAgICAgICAgaWYgcm93IGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGYiUmVnaW9uIG5vdCBmb3VuZDoge3JlZ2lvbl9pZH0iKQoKICAgIGFsaWFzZXMgPSBsb2FkX2FsaWFzZXNfZm9yX2VudGl0aWVzKAogICAgICAgIGRvbWFpbj0iUkVHSU9OIiwKICAgICAgICBlbnRpdHlfaWRzPVtyZWdpb25faWRdLAogICAgKQoKICAgIHJldHVybiBHYXpldHRlZXJFbnRpdHlWaWV3TW9kZWwoCiAgICAgICAgdGl0bGU9cm93WyJuYW1lIl0sCiAgICAgICAgaXNfcmVhZF9vbmx5PVRydWUsCiAgICAgICAgbmFtZT1yb3dbIm5hbWUiXSwKICAgICAgICB3aWtpZGF0YV9pZD1yb3dbIndpa2lkYXRhIl0sCiAgICAgICAgYWxpYXNlcz1hbGlhc2VzLAogICAgICAgIHJlZ2lvbnM9W10sCiAgICAgICAgZ3JvdXBzPVtdLAogICAgKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgR3JvdXAKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfbG9hZF9ncm91cChncm91cF9pZDogaW50KSAtPiBHYXpldHRlZXJFbnRpdHlWaWV3TW9kZWw6CiAgICB3aXRoIF9jb25uKCkgYXMgY29uOgogICAgICAgIHJvdyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgU0VMRUNUIG5hbWUKICAgICAgICAgICAgRlJPTSBncm91cHMKICAgICAgICAgICAgV0hFUkUgZ3JvdXBfaWQgPSA/CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKGdyb3VwX2lkLCksCiAgICAgICAgKS5mZXRjaG9uZSgpCgogICAgICAgIGlmIHJvdyBpcyBOb25lOgogICAgICAgICAgICByYWlzZSBLZXlFcnJvcihmIkdyb3VwIG5vdCBmb3VuZDoge2dyb3VwX2lkfSIpCgogICAgYWxpYXNlcyA9IGxvYWRfYWxpYXNlc19mb3JfZW50aXRpZXMoCiAgICAgICAgZG9tYWluPSJHUk9VUCIsCiAgICAgICAgZW50aXR5X2lkcz1bZ3JvdXBfaWRdLAogICAgKQoKICAgIHJldHVybiBHYXpldHRlZXJFbnRpdHlWaWV3TW9kZWwoCiAgICAgICAgdGl0bGU9cm93WyJuYW1lIl0sCiAgICAgICAgaXNfcmVhZF9vbmx5PVRydWUsCiAgICAgICAgbmFtZT1yb3dbIm5hbWUiXSwKICAgICAgICBhbGlhc2VzPWFsaWFzZXMsCiAgICAgICAgcmVnaW9ucz1bXSwKICAgICAgICBncm91cHM9W10sCiAgICApCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBEaXJlY3Rpb24KIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfbG9hZF9kaXJlY3Rpb24oZGlyZWN0aW9uX2lkOiBpbnQpIC0+IEdhemV0dGVlckVudGl0eVZpZXdNb2RlbDoKICAgIHdpdGggX2Nvbm4oKSBhcyBjb246CiAgICAgICAgcm93ID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBTRUxFQ1QgbmFtZQogICAgICAgICAgICBGUk9NIGRpcmVjdGlvbnMKICAgICAgICAgICAgV0hFUkUgZGlyZWN0aW9uX2lkID0gPwogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgIChkaXJlY3Rpb25faWQsKSwKICAgICAgICApLmZldGNob25lKCkKCiAgICAgICAgaWYgcm93IGlzIE5vbmU6CiAgICAgICAgICAgIHJhaXNlIEtleUVycm9yKGYiRGlyZWN0aW9uIG5vdCBmb3VuZDoge2RpcmVjdGlvbl9pZH0iKQoKICAgIGFsaWFzZXMgPSBsb2FkX2FsaWFzZXNfZm9yX2VudGl0aWVzKAogICAgICAgIGRvbWFpbj0iRElSRUNUSU9OIiwKICAgICAgICBlbnRpdHlfaWRzPVtkaXJlY3Rpb25faWRdLAogICAgKQoKICAgIHJldHVybiBHYXpldHRlZXJFbnRpdHlWaWV3TW9kZWwoCiAgICAgICAgdGl0bGU9cm93WyJuYW1lIl0sCiAgICAgICAgaXNfcmVhZF9vbmx5PVRydWUsCiAgICAgICAgbmFtZT1yb3dbIm5hbWUiXSwKICAgICAgICBhbGlhc2VzPWFsaWFzZXMsCiAgICAgICAgcmVnaW9ucz1bXSwKICAgICAgICBncm91cHM9W10sCiAgICApCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIZWxwZXJzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX3RhYmxlX2luZm8oa2luZDogQ29sbGVjdGlvbktpbmQpIC0+IHR1cGxlW3N0ciwgc3RyLCBzdHJdOgogICAgaWYga2luZCA9PSBDb2xsZWN0aW9uS2luZC5MT0NBVElPTlM6CiAgICAgICAgcmV0dXJuICJsb2NhdGlvbnMiLCAibG9jYXRpb25faWQiLCAibmFtZSIKICAgIGlmIGtpbmQgPT0gQ29sbGVjdGlvbktpbmQuUkVHSU9OUzoKICAgICAgICByZXR1cm4gInJlZ2lvbnMiLCAicmVnaW9uX2lkIiwgIm5hbWUiCiAgICBpZiBraW5kID09IENvbGxlY3Rpb25LaW5kLkdST1VQUzoKICAgICAgICByZXR1cm4gImdyb3VwcyIsICJncm91cF9pZCIsICJuYW1lIgogICAgaWYga2luZCA9PSBDb2xsZWN0aW9uS2luZC5ESVJFQ1RJT05TOgogICAgICAgIHJldHVybiAiZGlyZWN0aW9ucyIsICJkaXJlY3Rpb25faWQiLCAibmFtZSIKCiAgICByYWlzZSBWYWx1ZUVycm9yKGYiVW5zdXBwb3J0ZWQgY29sbGVjdGlvbiBraW5kOiB7a2luZH0iKQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAABBGwAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADaCwAAIyBzcmMvZGJlZGl0YzIvc2VydmljZXMvZ2F6ZXR0ZWVyX3JlYWQucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKCmZyb20gZGJlZGl0YzIuZW51bXMgaW1wb3J0IENvbGxlY3Rpb25LaW5kCmZyb20gZGJlZGl0YzIubW9kZWxzIGltcG9ydCBHYXpldHRlZXJFbnRpdHlWaWV3TW9kZWwKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IGdhemV0dGVlcl9wYXRoCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIZWxwZXJzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX2Nvbm4oKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246CiAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3QoZ2F6ZXR0ZWVyX3BhdGgoKSkKICAgIGNvbi5yb3dfZmFjdG9yeSA9IHNxbGl0ZTMuUm93CiAgICBjb24uZXhlY3V0ZSgiUFJBR01BIGZvcmVpZ25fa2V5cyA9IE9OOyIpCiAgICByZXR1cm4gY29uCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBQdWJsaWMgQVBJCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgbG9hZF9lbnRpdHkoCiAgICBjb2xsZWN0aW9uOiBDb2xsZWN0aW9uS2luZCwKICAgIGVudGl0eV9pZDogaW50LAopIC0+IEdhemV0dGVlckVudGl0eVZpZXdNb2RlbDoKICAgICIiIgogICAgTG9hZCBhIGdhemV0dGVlciBlbnRpdHkgYW5kIGFsbCByZWxhdGVkIGFsaWFzL2dyb3VwL3JlZ2lvbiBkYXRhLgoKICAgIEVudGl0eSBpZGVudGl0eSBpcyByZXNvbHZlZCBGSVJTVCwgYWxsIHNlbWFudGljIGRhdGEgaXMgam9pbmVkIFNFQ09ORC4KICAgICIiIgogICAgaWYgY29sbGVjdGlvbiAhPSBDb2xsZWN0aW9uS2luZC5MT0NBVElPTlM6CiAgICAgICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvcigKICAgICAgICAgICAgIk9ubHkgTE9DQVRJT04gZW50aXRpZXMgYXJlIHN1cHBvcnRlZCBhdCB0aGlzIHN0YWdlIgogICAgICAgICkKCiAgICB3aXRoIF9jb25uKCkgYXMgY29uOgogICAgICAgICMgLS0tIGNvcmUgbG9jYXRpb24gLS0tCiAgICAgICAgbG9jID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBTRUxFQ1QgbG9jYXRpb25faWQsIGxhdCwgbG9uLCBuYW1lLCBwbGFjZSwgd2lraWRhdGEKICAgICAgICAgICAgRlJPTSBsb2NhdGlvbnMKICAgICAgICAgICAgV0hFUkUgbG9jYXRpb25faWQgPSA/CiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKGVudGl0eV9pZCwpLAogICAgICAgICkuZmV0Y2hvbmUoKQoKICAgICAgICBpZiBsb2MgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgS2V5RXJyb3IoZiJMb2NhdGlvbiBub3QgZm91bmQ6IHtlbnRpdHlfaWR9IikKCiAgICAgICAgIyAtLS0gYWxpYXNlcyAtLS0KICAgICAgICBhbGlhc2VzID0gWwogICAgICAgICAgICByWyJhbGlhcyJdCiAgICAgICAgICAgIGZvciByIGluIGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1QgYWxpYXMKICAgICAgICAgICAgICAgIEZST00gbG9jYXRpb25fYWxpYXNlcwogICAgICAgICAgICAgICAgV0hFUkUgbG9jYXRpb25faWQgPSA/CiAgICAgICAgICAgICAgICBPUkRFUiBCWSBhbGlhcwogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKGVudGl0eV9pZCwpLAogICAgICAgICAgICApCiAgICAgICAgXQoKICAgICAgICAjIC0tLSByZWdpb25zIC0tLQogICAgICAgIHJlZ2lvbnMgPSBbCiAgICAgICAgICAgIHJbIm5hbWUiXQogICAgICAgICAgICBmb3IgciBpbiBjb24uZXhlY3V0ZSgKICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgU0VMRUNUIHIubmFtZQogICAgICAgICAgICAgICAgRlJPTSBsb2NhdGlvbl9yZWdpb25zIGxyCiAgICAgICAgICAgICAgICBKT0lOIHJlZ2lvbnMgciBPTiByLnJlZ2lvbl9pZCA9IGxyLnJlZ2lvbl9pZAogICAgICAgICAgICAgICAgV0hFUkUgbHIubG9jYXRpb25faWQgPSA/CiAgICAgICAgICAgICAgICBPUkRFUiBCWSByLm5hbWUKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIChlbnRpdHlfaWQsKSwKICAgICAgICAgICAgKQogICAgICAgIF0KCiAgICAgICAgIyAtLS0gZ3JvdXBzIC0tLQogICAgICAgIGdyb3VwcyA9IFsKICAgICAgICAgICAgZ1sibmFtZSJdCiAgICAgICAgICAgIGZvciBnIGluIGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1QgZy5uYW1lCiAgICAgICAgICAgICAgICBGUk9NIGxvY2F0aW9uX2dyb3VwcyBsZwogICAgICAgICAgICAgICAgSk9JTiBncm91cHMgZyBPTiBnLmdyb3VwX2lkID0gbGcuZ3JvdXBfaWQKICAgICAgICAgICAgICAgIFdIRVJFIGxnLmxvY2F0aW9uX2lkID0gPwogICAgICAgICAgICAgICAgT1JERVIgQlkgZy5uYW1lCiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICAoZW50aXR5X2lkLCksCiAgICAgICAgICAgICkKICAgICAgICBdCgogICAgcmV0dXJuIEdhemV0dGVlckVudGl0eVZpZXdNb2RlbCgKICAgICAgICBlbnRpdHlfaWQ9bG9jWyJsb2NhdGlvbl9pZCJdLAogICAgICAgIG5hbWU9bG9jWyJuYW1lIl0sCiAgICAgICAgbGF0aXR1ZGU9bG9jWyJsYXQiXSwKICAgICAgICBsb25naXR1ZGU9bG9jWyJsb24iXSwKICAgICAgICBwbGFjZV90eXBlPWxvY1sicGxhY2UiXSwKICAgICAgICB3aWtpZGF0YV9pZD1sb2NbIndpa2lkYXRhIl0sCiAgICAgICAgYWxpYXNlcz1hbGlhc2VzLAogICAgICAgIHJlZ2lvbnM9cmVnaW9ucywKICAgICAgICBncm91cHM9Z3JvdXBzLAogICAgICAgIGlzX3JlYWRfb25seT1UcnVlLCAgIyBlZGl0aW5nIGNvbnRyb2xsZWQgYXQgaGlnaGVyIGxldmVsCiAgICApCgAAAAAAAAAA2gsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2gsAAAAAAADaCwAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"console":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/Volumes/bladerunner/Projects/sitrepc2",
		"/Volumes/bladerunner/Projects/sitrepc2/.sitrepc2",
		"/Volumes/bladerunner/Projects/sitrepc2/data",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial",
		"/Volumes/bladerunner/Projects/sitrepc2/src",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/controller",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/services",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/details",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/config",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/controller",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/gazetteer",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/lexicon",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/util"
	],
	"file_history":
	[
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/main_window.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/gazetteer_alias_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/details/empty_state_view.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/models.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/enums.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/app_toolbar.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/services/lexicon_read.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/controller/editor_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/details/gazetteer_details_view.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/navigation_tree.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/details/lexicon_phrase_builder_view.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/models/entity_ruler.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/services/gazetteer_read.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/entry_list_view.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/search_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/app.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/main_window.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/entry_details_stack.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/services/gazetteer_search.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/main_window.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/extract_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/persist.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/lss_scoping.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/init_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/lexicon/lexicon.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/config/paths.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/events.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/phrases.py",
		"/Users/bladerunner/Projects/telex/telex.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/viewer/document_html_viewer.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/highlight_toolbar.py",
		"/Users/bladerunner/Projects/telex/seed_sources.jsonl",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/ingest_record_picker_dialog.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/document_summary_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/alias_service.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/app.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/attribute_inspector.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/source_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/translate.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/fetch_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/telegram.py",
		"/Users/bladerunner/Projects/mod-mymap/data/spatial/op_groups.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/facebook.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/twitter.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/http.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/nlp/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/controller/document_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/aliasedit.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/main_window.py",
		"/Volumes/bladerunner/Projects/sitrepc2/pyproject.toml",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/model_validator_dialog.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/entity_ruler_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/seed_lexicon.json",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/app.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/controller/document_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/io/ruler_io.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/highlight_toolbar.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/document_summary_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/attribute_inspector.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/menus.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/viewer/document_viewer.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/io/csv_loader.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/io/json_loader.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/io/text_loader.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ruler_io.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/entity_ruler.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/document_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/pipeline.py",
		"/Users/bladerunner/Projects/sitrepc2.bak/src/sitrepc2/frontline/loc_amk.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/osm_ingest.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/extract_lss.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ingest/loaders.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ingest/ingest_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/records/ingest.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/records/lss.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/main.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/dom/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ingest/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/README.md",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/db/schema.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/add_admin4.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/enrich_admin4.py",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial/regions.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_serialization.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/db/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_nodes.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/io.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/index.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/aliases.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/ruler.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/group_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/locale_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_direction_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/init_db.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/db_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/typedefs.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_group_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_locale_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_region_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/schema.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/direction_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/config/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/db/core.py",
		"/Volumes/bladerunner/Projects/sitrepc2/data/schema.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/region_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_regions.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/spatial/clustering.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/spatial/direction_axis.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/resolution.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/typedefs.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/sectioning.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/event_locations.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/context/candidate_narrowing.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/exonyms.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/events/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial/ua_settlements.csv",
		"/Volumes/bladerunner/Projects/warreport_ua_settlement_aliases/cid_encoding.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/update_direction_aliases.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/add_aliases.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/normalize_aliases.py",
		"/Volumes/bladerunner/Projects/warreport_ua_settlement_aliases/warreport_ua_settlement_aliases.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial/ua_settlements.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/nlp/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_summary.py"
	],
	"find":
	{
		"height": 38.0
	},
	"find_in_files":
	{
		"height": 119.0,
		"where_history":
		[
			"/Volumes/bladerunner/Projects/sitrepc2",
			"<open folders>"
		]
	},
	"find_state":
	{
		"case_sensitive": false,
		"find_history":
		[
			"json",
			"lexicon.json",
			"lexicon.db",
			"osm_id",
			"def _alias_input",
			"def alias_input",
			"alias_input",
			"set_entity",
			"build_lss_events",
			"def build",
			"extract_callback",
			"role_candidate",
			"role_",
			"overlap",
			"word matches",
			"word_matches",
			"compute",
			"build_",
			"phrases",
			"from phrases",
			"like = ",
			"strip",
			"strip()",
			"text =",
			"root",
			"current_root",
			"copied",
			"war_lexicon.json",
			"war_lexicon.jsonl",
			"menu",
			"meta",
			"osmium.",
			"on_open_dom",
			"def load_posts",
			"def _load_sources",
			"on_extract_clicked",
			"extract_button",
			"print",
			"if not _matches",
			"#if not _matches_phrase_filter(text_orig):\n    #continue",
			"if not _matches_phrase_filter(text_orig):\n    continue",
			"if not _pass",
			"if not",
			"load_dotenv",
			"direction",
			"id ",
			"direction",
			"region_osm",
			", ",
			"region",
			"from sitrepc2.nlp.",
			"search",
			"decode",
			"Chervona Sloboda",
			"Sloboda",
			"Q33345",
			"27212295",
			"Q33345",
			"Severodonetsk",
			"Q33349",
			"orikhiv",
			"orikhov",
			"590847913708267500",
			"myrne",
			"petrovskoye",
			"makiyivka",
			"",
			"lusychansk",
			"lusichansk",
			"lusychansk",
			"makiivka",
			"makiyivka",
			"Opytne",
			"Q4391252",
			"Q4391253",
			"Q4391252",
			"q4325070",
			"Q4325070",
			"novoprokopovka",
			"Q4125689",
			"vornivka",
			"voroni",
			"voroneve",
			"",
			"stativka",
			"Q4183525",
			"Q4183527",
			"Q4183525",
			"zah",
			"Q4188906",
			"",
			"zahirdne",
			"zahirne",
			"",
			"Nevske",
			"Menivka",
			"^.menivka",
			"mine",
			"mini",
			"Q4290695",
			"Min",
			"min",
			"minevka",
			"minivka",
			"miniivka",
			"minevka",
			"miniivka",
			"Q4210539",
			"Q521105",
			"orichiv",
			"orekhov",
			"orekhiv",
			"orekhiv,",
			"orikhiv,",
			"orikhiv",
			"orekhiv",
			"orekhov",
			"orekhov,",
			"orokhiv,",
			"orekhiv,",
			"orikhiv,",
			"Pliashivka",
			"Q4366022",
			"q4210161",
			"Q4210161",
			"verkhnia tokmachka",
			"oblast",
			""
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
			",",
			"from sitrepc2.lss",
			"region",
			"register_search_phrases",
			"events",
			"Event",
			"Location",
			"EventMatch",
			"WordMatch",
			"GAZ_GROUPS",
			"",
			"Location",
			"EventMatch",
			"LocaleCandidate",
			"List"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": false,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 0,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_name": "",
							"incomplete_sync": null,
							"syntax": "Packages/Text/Plain text.tmLanguage"
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 11,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "src/dbeditc2/controller/editor_controller.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6238,
						"regions":
						{
						},
						"selection":
						[
							[
								6238,
								6238
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2007.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "src/dbeditc2/widgets/search_panel.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3077,
						"regions":
						{
						},
						"selection":
						[
							[
								2149,
								2149
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 915.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "src/dbeditc2/widgets/navigation_tree.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2643,
						"regions":
						{
						},
						"selection":
						[
							[
								2643,
								2643
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 536.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "src/dbeditc2/main_window.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1729,
						"regions":
						{
						},
						"selection":
						[
							[
								680,
								680
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "src/dbeditc2/lexicon_ws.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7177,
						"regions":
						{
						},
						"selection":
						[
							[
								6611,
								6611
							]
						],
						"settings":
						{
							"auto_name": "from __future__ import annotations",
							"incomplete_sync": null,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "src/sitrepc2/config/paths.py",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3611,
						"regions":
						{
						},
						"selection":
						[
							[
								509,
								513
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "src/dbeditc2/gazetteer_ws.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 10866,
						"regions":
						{
						},
						"selection":
						[
							[
								10866,
								10866
							]
						],
						"settings":
						{
							"auto_name": "from __future__ import annotations",
							"incomplete_sync": null,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 4480.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "src/dbeditc2/app.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 931,
						"regions":
						{
						},
						"selection":
						[
							[
								270,
								161
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "src/dbeditc2/services/gazetteer_alias_browser.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2125,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								2125
							]
						],
						"settings":
						{
							"auto_name": "# src/dbeditc2/services/gazetteer_alias_browser.py",
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 480.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "src/dbeditc2/services/gazetteer_search.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2619,
						"regions":
						{
						},
						"selection":
						[
							[
								2619,
								2619
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 690.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 11,
					"file": "src/dbeditc2/services/gazetteer_read.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3034,
						"regions":
						{
						},
						"selection":
						[
							[
								2362,
								2362
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 900.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 23.0
	},
	"input":
	{
		"height": 44.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.SFTP":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"output.find_results":
	{
		"height": 160.0,
		"history":
		[
		]
	},
	"pinned_build_system": "",
	"project": "sitrepc2.sublime-project",
	"replace":
	{
		"height": 42.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"utils/units/unit_str.py"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 255.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 592.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": false,
	"show_open_files": true,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 205.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
