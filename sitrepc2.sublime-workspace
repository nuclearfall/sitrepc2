{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"region",
				"region_names"
			],
			[
				"defa",
				"default_aliases_field"
			],
			[
				"TRA",
				"TRAINING_HASHTAGS"
			],
			[
				"norn",
				"normalize_location_key"
			],
			[
				"Pr",
				"ProximityAnchor"
			],
			[
				"candidat",
				"locale_candidates"
			],
			[
				"Resol",
				"ResolvedLocation"
			],
			[
				"Ev",
				"EventMention"
			],
			[
				"serai",
				"serialize_resolved"
			],
			[
				"rnd",
				"rndr_ctx_changed"
			],
			[
				"phy",
				"phys_ctx_changed"
			],
			[
				"edpi_",
				"edpi_ctx_changed"
			],
			[
				"prope",
				"property\tNew Property"
			],
			[
				"Cano",
				"CANONICAL"
			],
			[
				"__",
				"__setattr__"
			],
			[
				"imp",
				"imprecise_str"
			],
			[
				"g",
				"geometryChanged"
			],
			[
				"geom",
				"geometryAboutToChange"
			],
			[
				"para",
				"params_kwargs"
			],
			[
				"_fiel",
				"_fields_by_key"
			],
			[
				"proe",
				"property_line_edit"
			],
			[
				"pre",
				"property_line_edit"
			],
			[
				"Proper",
				"property\tNew Property"
			],
			[
				"Ty",
				"TYPE_CHECKING"
			],
			[
				"prop",
				"propertyCommitted"
			],
			[
				"pro",
				"property\tNew Property"
			],
			[
				"U",
				"UnitStrGeometryField"
			],
			[
				"propert",
				"property\tNew Property"
			],
			[
				"Unit",
				"UnitStrGeometry"
			],
			[
				"TYP",
				"TYPE_CHECKING"
			],
			[
				"new_rec",
				"new_rect_y"
			],
			[
				"ele",
				"elem_modview"
			],
			[
				"geome",
				"geometryChanged"
			],
			[
				"proepr",
				"property\tNew Property"
			],
			[
				"opu",
				"populate_pages_with_csv"
			],
			[
				"appl",
				"_apply_base_hints"
			],
			[
				"proper",
				"property\tNew Property"
			],
			[
				"bor",
				"border_width"
			],
			[
				"_ds",
				"_display_dpi"
			],
			[
				"proep",
				"property\tNew Property"
			],
			[
				"setMax",
				"setMaximumWidth"
			],
			[
				"DEF",
				"DEFAULT_INCREMENTS"
			],
			[
				"geomet",
				"geometry_with_px_pos"
			],
			[
				"uni",
				"unit_str_geometry_field"
			],
			[
				"Uni",
				"UnitStrGeometryField"
			],
			[
				"_geom",
				"unit_str_geometry_field"
			],
			[
				"QGraph",
				"QGraphicsObject"
			],
			[
				"bll",
				"bleed_field"
			],
			[
				"corn",
				"corners_field"
			],
			[
				"_bor",
				"_border_color"
			],
			[
				"_obr",
				"_border_color"
			],
			[
				"bord",
				"border_color"
			],
			[
				"QPAIN",
				"QPainterPathStroker"
			],
			[
				"_has_",
				"_has_csv_content"
			],
			[
				"c",
				"component_template"
			],
			[
				"compon",
				"component_template"
			],
			[
				"ov",
				"_overset_hit_rect"
			],
			[
				"ove",
				"overset_hit_rect"
			],
			[
				"lai",
				"laid_out_h"
			],
			[
				"lad",
				"laid_out_w"
			],
			[
				"is_",
				"is_overset_expanded"
			],
			[
				"_is",
				"_is_overset_expanded"
			],
			[
				"_over",
				"_overset_hit_rect"
			],
			[
				"with",
				"geometry_with_px_pos"
			],
			[
				"Al",
				"AlignLeft"
			],
			[
				"Align",
				"AlignHCenter"
			],
			[
				"font",
				"last_font_new_default"
			],
			[
				"remove_t",
				"remove_template_by_pid"
			],
			[
				"bleed",
				"bleed_label"
			],
			[
				"UnitS",
				"UnitStrGeometry"
			],
			[
				"Compon",
				"ComponentTemplate"
			],
			[
				"req",
				"required_next"
			],
			[
				"ComponentTem",
				"ComponentTemplateView"
			],
			[
				"remove_temp",
				"remove_template_from_all_tabs"
			],
			[
				"upd",
				"updateGrid"
			],
			[
				"_pa",
				"_pagination_policy"
			],
			[
				"paginat",
				"pagination_policy"
			],
			[
				"pag",
				"pagination_policy"
			],
			[
				"Clon",
				"CloneComponentToSlotsCommand"
			],
			[
				"pagina",
				"pagination_policy"
			],
			[
				"white",
				"whitespace_in_units"
			],
			[
				"set",
				"setParentItem"
			],
			[
				"Com",
				"ComponentElement"
			],
			[
				"parse",
				"parse_dimension"
			],
			[
				"unre",
				"unreg_target"
			],
			[
				"prot",
				"proto_registry"
			],
			[
				"temp",
				"template_updated"
			],
			[
				"resize_s",
				"resize_start_item_pos"
			],
			[
				"UnitSt",
				"UnitStrGeometry"
			],
			[
				"_dragging_star",
				"_dragging_start_geom"
			],
			[
				"resize_st",
				"resize_start_item_geometry"
			],
			[
				"_dra",
				"_dragging_start_geom"
			],
			[
				"starting",
				"starting_drag_item"
			],
			[
				"elem",
				"elment_changed"
			],
			[
				"unit_st",
				"unit_str_geometry"
			],
			[
				"obje",
				"object_registered"
			],
			[
				"globa",
				"global_get_by_prefix"
			],
			[
				"ori",
				"orientation_changed"
			],
			[
				"_a",
				"_applyOrientation"
			],
			[
				"PAGE",
				"PAGE_SIZES"
			],
			[
				"_regis",
				"_ensure_registered"
			],
			[
				"sele",
				"selected_element"
			],
			[
				"get_all_",
				"get_global_by_type"
			],
			[
				"_handl",
				"_handle_property_change"
			],
			[
				"selec",
				"selected_element"
			],
			[
				"conf",
				"conform_geometry_pos"
			],
			[
				"conform",
				"conform_geometry_rect"
			],
			[
				"conform_geom",
				"conform_geometry_rect"
			],
			[
				"_mar",
				"_margin_top"
			],
			[
				"pagination",
				"pagination_policy"
			],
			[
				"compone",
				"component_template"
			],
			[
				"cand",
				"candidate_item"
			],
			[
				"flag",
				"display_flag_changed"
			],
			[
				"curre",
				"currentItem"
			],
			[
				"get_page",
				"get_page_rect_px"
			],
			[
				"_marg",
				"_margin_right"
			],
			[
				"Resiz",
				"ResizeAndMoveElementCommand"
			],
			[
				"Resize",
				"ResizeTemplateCommand"
			],
			[
				"Change",
				"ChangeGeometryCommand"
			],
			[
				"QGraphcisS",
				"QGraphicsSceneDragDropEvent"
			],
			[
				"_current",
				"_current_template"
			],
			[
				"on",
				"object_name_changed"
			],
			[
				"setM",
				"setMinimumWidth"
			],
			[
				"setMini",
				"setMinimumWidth"
			],
			[
				"C",
				"ComponentTemplate"
			],
			[
				"_al",
				"_alt_drag_first_pass"
			],
			[
				"resize_star",
				"resize_start_scene_pos"
			],
			[
				"eleme",
				"element_changed"
			]
		]
	},
	"buffers":
	[
		{
			"file": "src/sitrepc2/lss/lss_scoping.py",
			"settings":
			{
				"buffer_size": 13371,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAWy4AAAAAAAAsLQAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0Cgpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jLCBTcGFuCgpmcm9tIHNpdHJlcGMyLmxzcy50eXBlZGVmcyBpbXBvcnQgRXZlbnRNYXRjaCwgUGhyYXNlTWF0Y2gKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIExTUyBEQVRBIENPTlRSQUNUUyAoU1RSVUNUVVJBTCwgQ0FOT05JQ0FMKQojCiMgSU1QT1JUQU5UIElOVkFSSUFOVFM6CiMgLSBSb2xlQ2FuZGlkYXRlcyBhcmUgc2VtYW50aWMgb25seSAoQUNUT1IgLyBBQ1RJT04pCiMgLSBMb2NhdGlvbnMgYXJlIE5FVkVSIHJvbGUgY2FuZGlkYXRlcwojIC0gTG9jYXRpb25zIGV4aXN0IG9ubHkgYXMgTG9jYXRpb25JdGVtcyBpbnNpZGUgTG9jYXRpb25TZXJpZXMKIyAtIHNlcmllc19pZCBhbmQgaXRlbV9pZCBhcmUgT1JESU5BTFMgTE9DQUwgVE8gQSBTSU5HTEUgRVZFTlQKIyAgICh0aGV5IGFyZSBOT1QgZGF0YWJhc2UgSURzOyBwZXJzaXN0ZW5jZSBtdXN0IHJlbWFwIHRoZW0pCiMgLSBDb250ZXh0IGlzIGF0dGFjaGVkIGF0IHRoZSBMT1dFU1QgREVGRU5TSUJMRSBTVFJVQ1RVUkFMIExFVkVMCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpAZGF0YWNsYXNzKGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKQpjbGFzcyBMU1NSb2xlQ2FuZGlkYXRlOgogICAgcm9sZV9raW5kOiBzdHIgICAgICAgICAgICAgICAgICMgQUNUT1IgLyBBQ1RJT04KICAgIHRleHQ6IHN0cgogICAgc3RhcnRfdG9rZW46IGludAogICAgZW5kX3Rva2VuOiBpbnQKICAgIG1hdGNoX3R5cGU6IHN0cgogICAgbmVnYXRlZDogYm9vbAogICAgdW5jZXJ0YWluOiBib29sCiAgICBpbnZvbHZlc19jb3JlZmVyZW5jZTogYm9vbAogICAgc2ltaWxhcml0eTogZmxvYXQKICAgIGV4cGxhbmF0aW9uOiBzdHIKCgpAZGF0YWNsYXNzKGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKQpjbGFzcyBMU1NMb2NhdGlvbkl0ZW06CiAgICBpdGVtX2lkOiBpbnQgICAgICAgICAgICAgICAgICAjIG9yZGluYWwsIGxvY2FsIHRvIGV2ZW50CiAgICB0ZXh0OiBzdHIKICAgIHN0YXJ0X3Rva2VuOiBpbnQKICAgIGVuZF90b2tlbjogaW50CgoKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSkKY2xhc3MgTFNTTG9jYXRpb25TZXJpZXM6CiAgICBzZXJpZXNfaWQ6IGludCAgICAgICAgICAgICAgICAjIG9yZGluYWwsIGxvY2FsIHRvIGV2ZW50CiAgICBpdGVtczogbGlzdFtMU1NMb2NhdGlvbkl0ZW1dCiAgICBzdGFydF90b2tlbjogaW50CiAgICBlbmRfdG9rZW46IGludAoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUsIHNsb3RzPVRydWUpCmNsYXNzIExTU0NvbnRleHRIaW50OgogICAgY3R4X2tpbmQ6IHN0ciAgICAgICAgICAgICAgICAgIyBSRUdJT04gLyBHUk9VUCAvIERJUkVDVElPTgogICAgdGV4dDogc3RyCiAgICBzdGFydF90b2tlbjogaW50CiAgICBlbmRfdG9rZW46IGludAogICAgc2NvcGU6IHN0ciAgICAgICAgICAgICAgICAgICAgIyBMT0NBVElPTiAvIFNFUklFUyAvIEVWRU5UIC8gU0VDVElPTiAvIFBPU1QKICAgIHRhcmdldF9pZDogaW50IHwgTm9uZSAgICAgICAgICMgaXRlbV9pZCAvIHNlcmllc19pZCAvIGV2ZW50X2lkIC8gc2VjdGlvbl9pZCAvIE5vbmUKICAgIHNvdXJjZTogc3RyICAgICAgICAgICAgICAgICAgICMgR0FaRVRURUVSCgoKU0VSSUVTX0pPSU5fVE9LRU5TID0geyIsIiwgImFuZCIsICJvciIsICImIn0KCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFRPUC1MRVZFTCBBUEkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBzcGFuc19ieV9sYWJlbChkb2MsIGxhYmVsLCBncm91cDogc3RyID0gTm9uZSk6CiAgICBzb3VyY2UgPSBkb2MuZW50cyBpZiBncm91cCBpcyBOb25lIGVsc2UgZG9jLnNwYW5zLmdldChncm91cCwgW10pCiAgICByZXR1cm4gW3NwYW4gZm9yIHNwYW4gaW4gc291cmNlIGlmIHNwYW4ubGFiZWxfID09IGxhYmVsXQoKCmRlZiBsc3Nfc2NvcGVfZXZlbnQoCiAgICAqLAogICAgZG9jOiBEb2MsCiAgICBldmVudDogRXZlbnRNYXRjaCwKICAgIGV2ZW50X29yZGluYWw6IGludCwKICAgIHNlY3Rpb25faWQ6IGludCB8IE5vbmUgPSBOb25lLAopIC0+IHR1cGxlWwogICAgbGlzdFtMU1NSb2xlQ2FuZGlkYXRlXSwKICAgIGxpc3RbTFNTTG9jYXRpb25TZXJpZXNdLAogICAgbGlzdFtMU1NDb250ZXh0SGludF0sCl06CiAgICAiIiIKICAgIFBlcmZvcm0gU1RSVUNUVVJBTCBzY29waW5nIGZvciBhIHNpbmdsZSBIb2xtZXMgZXZlbnQuCiAgICAiIiIKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgRVZFTlQgV0lORE9XIChzZW50ZW5jZS1ib3VuZGVkKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgc2VudCA9IGRvY1tldmVudC5kb2Nfc3RhcnRfdG9rZW5faW5kZXhdLnNlbnQKICAgIGV2ZW50X3N0YXJ0ID0gc2VudC5zdGFydAogICAgZXZlbnRfZW5kID0gc2VudC5lbmQKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUk9MRSBDQU5ESURBVEVTIChIT0xNRVMtREVSSVZFRCBPTkxZKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgcm9sZV9jYW5kaWRhdGVzOiBsaXN0W0xTU1JvbGVDYW5kaWRhdGVdID0gW10KCiAgICBmb3Igd20gaW4gZXZlbnQuaXRlcl9jb250ZW50X3dvcmRzKCk6CiAgICAgICAgcmsgPSBfaW5mZXJfcm9sZV9raW5kX2Zyb21fcGF0dGVybl9lbGVtZW50KHdtKQogICAgICAgIGlmIHJrIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIHJvbGVfY2FuZGlkYXRlcy5hcHBlbmQoCiAgICAgICAgICAgIExTU1JvbGVDYW5kaWRhdGUoCiAgICAgICAgICAgICAgICByb2xlX2tpbmQ9cmssCiAgICAgICAgICAgICAgICB0ZXh0PXdtLmRvY3VtZW50X3BocmFzZSBvciB3bS5kb2N1bWVudF93b3JkLAogICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49d20uZmlyc3RfZG9jdW1lbnRfdG9rZW5faW5kZXgsCiAgICAgICAgICAgICAgICBlbmRfdG9rZW49d20ubGFzdF9kb2N1bWVudF90b2tlbl9pbmRleCArIDEsCiAgICAgICAgICAgICAgICBtYXRjaF90eXBlPXdtLm1hdGNoX3R5cGUsCiAgICAgICAgICAgICAgICBuZWdhdGVkPXdtLm5lZ2F0ZWQsCiAgICAgICAgICAgICAgICB1bmNlcnRhaW49d20udW5jZXJ0YWluLAogICAgICAgICAgICAgICAgaW52b2x2ZXNfY29yZWZlcmVuY2U9d20uaW52b2x2ZXNfY29yZWZlcmVuY2UsCiAgICAgICAgICAgICAgICBzaW1pbGFyaXR5PXdtLnNpbWlsYXJpdHksCiAgICAgICAgICAgICAgICBleHBsYW5hdGlvbj13bS5leHBsYW5hdGlvbiwKICAgICAgICAgICAgKQogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgTE9DQVRJT04g4oaSIExPQ0FUSU9OIFNFUklFUyArIElURU1TIChFVkVOVC1MT0NBTCkKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGxvY19lbnRzID0gWwogICAgICAgIGUgZm9yIGUgaW4gZG9jLmVudHMKICAgICAgICBpZiBlLmxhYmVsXyA9PSAiTE9DQVRJT04iCiAgICAgICAgYW5kIF9zcGFuc19vdmVybGFwKGUuc3RhcnQsIGUuZW5kLCBldmVudF9zdGFydCwgZXZlbnRfZW5kKQogICAgXQoKICAgIGxvY19lbnRzLnNvcnQoa2V5PWxhbWJkYSBlOiBlLnN0YXJ0KQoKICAgIGxvY2F0aW9uX3NlcmllczogbGlzdFtMU1NMb2NhdGlvblNlcmllc10gPSBbXQogICAgY3VycmVudF9pdGVtczogbGlzdFtMU1NMb2NhdGlvbkl0ZW1dID0gW10KCiAgICBzZXJpZXNfaWQgPSAwCiAgICBpdGVtX2lkID0gMAoKICAgIGZvciBlbnQgaW4gbG9jX2VudHM6CiAgICAgICAgaXRlbSA9IExTU0xvY2F0aW9uSXRlbSgKICAgICAgICAgICAgaXRlbV9pZD1pdGVtX2lkLAogICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICBzdGFydF90b2tlbj1lbnQuc3RhcnQsCiAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICkKICAgICAgICBpdGVtX2lkICs9IDEKCiAgICAgICAgaWYgbm90IGN1cnJlbnRfaXRlbXM6CiAgICAgICAgICAgIGN1cnJlbnRfaXRlbXMgPSBbaXRlbV0KICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgZ2FwID0gZG9jW2N1cnJlbnRfaXRlbXNbLTFdLmVuZF90b2tlbiA6IGl0ZW0uc3RhcnRfdG9rZW5dCiAgICAgICAgaWYgYW55KHRvay50ZXh0Lmxvd2VyKCkgaW4gU0VSSUVTX0pPSU5fVE9LRU5TIGZvciB0b2sgaW4gZ2FwKToKICAgICAgICAgICAgY3VycmVudF9pdGVtcy5hcHBlbmQoaXRlbSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBsb2NhdGlvbl9zZXJpZXMuYXBwZW5kKAogICAgICAgICAgICAgICAgTFNTTG9jYXRpb25TZXJpZXMoCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzX2lkPXNlcmllc19pZCwKICAgICAgICAgICAgICAgICAgICBpdGVtcz1jdXJyZW50X2l0ZW1zLAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWN1cnJlbnRfaXRlbXNbMF0uc3RhcnRfdG9rZW4sCiAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWN1cnJlbnRfaXRlbXNbLTFdLmVuZF90b2tlbiwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgICAgICBzZXJpZXNfaWQgKz0gMQogICAgICAgICAgICBjdXJyZW50X2l0ZW1zID0gW2l0ZW1dCgogICAgaWYgY3VycmVudF9pdGVtczoKICAgICAgICBsb2NhdGlvbl9zZXJpZXMuYXBwZW5kKAogICAgICAgICAgICBMU1NMb2NhdGlvblNlcmllcygKICAgICAgICAgICAgICAgIHNlcmllc19pZD1zZXJpZXNfaWQsCiAgICAgICAgICAgICAgICBpdGVtcz1jdXJyZW50X2l0ZW1zLAogICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49Y3VycmVudF9pdGVtc1swXS5zdGFydF90b2tlbiwKICAgICAgICAgICAgICAgIGVuZF90b2tlbj1jdXJyZW50X2l0ZW1zWy0xXS5lbmRfdG9rZW4sCiAgICAgICAgICAgICkKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIENPTlRFWFQgSElOVFMgKEZVTEwgU1RSVUNUVVJBTCBMQVRUSUNFKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgY29udGV4dF9oaW50czogbGlzdFtMU1NDb250ZXh0SGludF0gPSBbXQoKICAgIGZvciBlbnQgaW4gZG9jLmVudHM6CiAgICAgICAgaWYgZW50LmxhYmVsXyBub3QgaW4geyJSRUdJT04iLCAiR1JPVVAiLCAiRElSRUNUSU9OIn06CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGF0dGFjaGVkID0gRmFsc2UKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExPQ0FUSU9OLUxFVkVMIChjb250YWluZWQtaW4taXRlbSkKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBmb3Igc2VyaWVzIGluIGxvY2F0aW9uX3NlcmllczoKICAgICAgICAgICAgZm9yIGl0ZW0gaW4gc2VyaWVzLml0ZW1zOgogICAgICAgICAgICAgICAgaWYgZW50LnN0YXJ0ID49IGl0ZW0uc3RhcnRfdG9rZW4gYW5kIGVudC5lbmQgPD0gaXRlbS5lbmRfdG9rZW46CiAgICAgICAgICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgIExTU0NvbnRleHRIaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9ZW50LmxhYmVsXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1lbnQuc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlPSJMT0NBVElPTiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQ9aXRlbS5pdGVtX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGF0dGFjaGVkID0gVHJ1ZQoKICAgICAgICBpZiBhdHRhY2hlZDoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExPQ0FUSU9OLUxFVkVMIChyZXRyb2FjdGl2ZSBzZXJpZXMgcXVhbGlmaWVyKQogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGF0dGFjaGVkID0gX2FwcGx5X3JldHJvYWN0aXZlX3Nlcmllc19xdWFsaWZpZXIoCiAgICAgICAgICAgIGRvYz1kb2MsCiAgICAgICAgICAgIGxvY2F0aW9uX3Nlcmllcz1sb2NhdGlvbl9zZXJpZXMsCiAgICAgICAgICAgIGN0eF9lbnQ9ZW50LAogICAgICAgICAgICBjb250ZXh0X2hpbnRzPWNvbnRleHRfaGludHMsCiAgICAgICAgKQogICAgICAgIGlmIGF0dGFjaGVkOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgU0VSSUVTLUxFVkVMCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgZm9yIHNlcmllcyBpbiBsb2NhdGlvbl9zZXJpZXM6CiAgICAgICAgICAgIGlmIF9zcGFuc19vdmVybGFwKGVudC5zdGFydCwgZW50LmVuZCwgc2VyaWVzLnN0YXJ0X3Rva2VuLCBzZXJpZXMuZW5kX3Rva2VuKToKICAgICAgICAgICAgICAgIGNvbnRleHRfaGludHMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIExTU0NvbnRleHRIaW50KAogICAgICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1lbnQuc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgICAgICBzY29wZT0iU0VSSUVTIiwKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPXNlcmllcy5zZXJpZXNfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZT0iR0FaRVRURUVSIiwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBhdHRhY2hlZCA9IFRydWUKCiAgICAgICAgaWYgYXR0YWNoZWQ6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBFVkVOVC1MRVZFTAogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGlmIF9zcGFuc19vdmVybGFwKGVudC5zdGFydCwgZW50LmVuZCwgZXZlbnRfc3RhcnQsIGV2ZW50X2VuZCk6CiAgICAgICAgICAgIGNvbnRleHRfaGludHMuYXBwZW5kKAogICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9ZW50LmxhYmVsXywKICAgICAgICAgICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICAgICAgICAgICAgICBzY29wZT0iRVZFTlQiLAogICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1ldmVudF9vcmRpbmFsLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZT0iR0FaRVRURUVSIiwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgU0VDVElPTiAvIFBPU1QgRkFMTEJBQ0sKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBpZiBzZWN0aW9uX2lkIGlzIG5vdCBOb25lOgogICAgICAgICAgICBjb250ZXh0X2hpbnRzLmFwcGVuZCgKICAgICAgICAgICAgICAgIExTU0NvbnRleHRIaW50KAogICAgICAgICAgICAgICAgICAgIGN0eF9raW5kPWVudC5sYWJlbF8sCiAgICAgICAgICAgICAgICAgICAgdGV4dD1lbnQudGV4dCwKICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1lbnQuc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWVudC5lbmQsCiAgICAgICAgICAgICAgICAgICAgc2NvcGU9IlNFQ1RJT04iLAogICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1zZWN0aW9uX2lkLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZT0iR0FaRVRURUVSIiwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbnRleHRfaGludHMuYXBwZW5kKAogICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9ZW50LmxhYmVsXywKICAgICAgICAgICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICAgICAgICAgICAgICBzY29wZT0iUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPU5vbmUsCiAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCgogICAgcmV0dXJuIHJvbGVfY2FuZGlkYXRlcywgbG9jYXRpb25fc2VyaWVzLCBjb250ZXh0X2hpbnRzCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIRUxQRVJTCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX3NwYW5zX292ZXJsYXAoYTE6IGludCwgYTI6IGludCwgYjE6IGludCwgYjI6IGludCkgLT4gYm9vbDoKICAgIHJldHVybiBub3QgKGEyIDw9IGIxIG9yIGIyIDw9IGExKQoKCmRlZiBfaW5mZXJfcm9sZV9raW5kX2Zyb21fcGF0dGVybl9lbGVtZW50KHdtOiBQaHJhc2VNYXRjaCkgLT4gc3RyIHwgTm9uZToKICAgIG10ID0gKHdtLm1hdGNoX3R5cGUgb3IgIiIpLmxvd2VyKCkKCiAgICBpZiBtdCBpbiB7InN1YmplY3QiLCAiYWN0b3IiLCAib2JqZWN0IiwgImRvYmoiLCAicG9zc2Vzc29yIn06CiAgICAgICAgcmV0dXJuICJBQ1RPUiIKCiAgICBpZiBtdCBpbiB7InZlcmIiLCAiYWN0aW9uIn06CiAgICAgICAgcmV0dXJuICJBQ1RJT04iCgogICAgcmV0dXJuIE5vbmUKCgpkZWYgX2FwcGx5X3JldHJvYWN0aXZlX3Nlcmllc19xdWFsaWZpZXIoCiAgICAqLAogICAgZG9jOiBEb2MsCiAgICBsb2NhdGlvbl9zZXJpZXM6IGxpc3RbTFNTTG9jYXRpb25TZXJpZXNdLAogICAgY3R4X2VudDogU3BhbiwKICAgIGNvbnRleHRfaGludHM6IGxpc3RbTFNTQ29udGV4dEhpbnRdLAopIC0+IGJvb2w6CiAgICAiIiIKICAgIEFwcGx5IHRyYWlsaW5nIFJFR0lPTi9HUk9VUC9ESVJFQ1RJT04gcXVhbGlmaWVycyByZXRyb2FjdGl2ZWx5CiAgICB0byBhbGwgcHJpb3IgaXRlbXMgaW4gYSBsb2NhdGlvbiBzZXJpZXMgdW50aWwgb3ZlcnJpZGRlbi4KICAgICIiIgoKICAgIGtpbmQgPSBjdHhfZW50LmxhYmVsXwogICAgY3R4X3N0YXJ0ID0gY3R4X2VudC5zdGFydAogICAgY3R4X2VuZCA9IGN0eF9lbnQuZW5kCgogICAgZm9yIHNlcmllcyBpbiBsb2NhdGlvbl9zZXJpZXM6CiAgICAgICAgaXRlbXMgPSBzZXJpZXMuaXRlbXMKICAgICAgICBpZiBub3QgaXRlbXM6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgTXVzdCBvY2N1ciBhZnRlciBhdCBsZWFzdCBvbmUgaXRlbQogICAgICAgIGxhc3RfaXRlbV9iZWZvcmUgPSBOb25lCiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpdC5lbmRfdG9rZW4gPD0gY3R4X3N0YXJ0OgogICAgICAgICAgICAgICAgbGFzdF9pdGVtX2JlZm9yZSA9IGl0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICBpZiBsYXN0X2l0ZW1fYmVmb3JlIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgTm8gaW50ZXJ2ZW5pbmcgTE9DQVRJT04gb3V0c2lkZSB0aGUgc2VyaWVzCiAgICAgICAgc2VyaWVzX3N0YXJ0cyA9IHtpdC5zdGFydF90b2tlbiBmb3IgaXQgaW4gaXRlbXN9CiAgICAgICAgZm9yIGVudCBpbiBkb2MuZW50czoKICAgICAgICAgICAgaWYgZW50LmxhYmVsXyAhPSAiTE9DQVRJT04iOgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgaWYgbGFzdF9pdGVtX2JlZm9yZS5lbmRfdG9rZW4gPD0gZW50LnN0YXJ0IDwgY3R4X3N0YXJ0OgogICAgICAgICAgICAgICAgaWYgZW50LnN0YXJ0IG5vdCBpbiBzZXJpZXNfc3RhcnRzOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICAgICAjIEFwcGx5IHRvIGFsbCBwcmlvciBpdGVtcyBpbiBzZXJpZXMKICAgICAgICBmb3IgaXQgaW4gaXRlbXM6CiAgICAgICAgICAgIGlmIGl0LmVuZF90b2tlbiA8PSBjdHhfc3RhcnQ6CiAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9a2luZCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1jdHhfZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWN0eF9zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWN0eF9lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlPSJMT0NBVElPTiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1pdC5pdGVtX2lkLAogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQoKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIHJldHVybiBGYWxzZQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAqLQAAAAAAAAAAAAAAAPC/"
				],
				[
					13,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABbLgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0Cgpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jLCBTcGFuCgpmcm9tIHNpdHJlcGMyLmxzcy50eXBlZGVmcyBpbXBvcnQgRXZlbnRNYXRjaCwgUGhyYXNlTWF0Y2gKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIExTUyBEQVRBIENPTlRSQUNUUyAoU1RSVUNUVVJBTCwgQ0FOT05JQ0FMKQojCiMgSU1QT1JUQU5UIElOVkFSSUFOVFM6CiMgLSBSb2xlQ2FuZGlkYXRlcyBhcmUgc2VtYW50aWMgb25seSAoQUNUT1IgLyBBQ1RJT04pCiMgLSBMb2NhdGlvbnMgYXJlIE5FVkVSIHJvbGUgY2FuZGlkYXRlcwojIC0gTG9jYXRpb25zIGV4aXN0IG9ubHkgYXMgTG9jYXRpb25JdGVtcyBpbnNpZGUgTG9jYXRpb25TZXJpZXMKIyAtIHNlcmllc19pZCBhbmQgaXRlbV9pZCBhcmUgT1JESU5BTFMgTE9DQUwgVE8gQSBTSU5HTEUgRVZFTlQKIyAtIENvbnRleHQgaXMgYXR0YWNoZWQgYXQgdGhlIExPV0VTVCBERUZFTlNJQkxFIFNUUlVDVFVSQUwgTEVWRUwKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCkBkYXRhY2xhc3MoZnJvemVuPVRydWUsIHNsb3RzPVRydWUpCmNsYXNzIExTU1JvbGVDYW5kaWRhdGU6CiAgICByb2xlX2tpbmQ6IHN0ciAgICAgICAgICAgICAgICAgIyBBQ1RPUiAvIEFDVElPTgogICAgdGV4dDogc3RyCiAgICBzdGFydF90b2tlbjogaW50CiAgICBlbmRfdG9rZW46IGludAogICAgbWF0Y2hfdHlwZTogc3RyCiAgICBuZWdhdGVkOiBib29sCiAgICB1bmNlcnRhaW46IGJvb2wKICAgIGludm9sdmVzX2NvcmVmZXJlbmNlOiBib29sCiAgICBzaW1pbGFyaXR5OiBmbG9hdAogICAgZXhwbGFuYXRpb246IHN0cgoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUsIHNsb3RzPVRydWUpCmNsYXNzIExTU0xvY2F0aW9uSXRlbToKICAgIGl0ZW1faWQ6IGludCAgICAgICAgICAgICAgICAgICMgb3JkaW5hbCwgbG9jYWwgdG8gZXZlbnQKICAgIHRleHQ6IHN0cgogICAgc3RhcnRfdG9rZW46IGludAogICAgZW5kX3Rva2VuOiBpbnQKCgpAZGF0YWNsYXNzKGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKQpjbGFzcyBMU1NMb2NhdGlvblNlcmllczoKICAgIHNlcmllc19pZDogaW50ICAgICAgICAgICAgICAgICMgb3JkaW5hbCwgbG9jYWwgdG8gZXZlbnQKICAgIGl0ZW1zOiBsaXN0W0xTU0xvY2F0aW9uSXRlbV0KICAgIHN0YXJ0X3Rva2VuOiBpbnQKICAgIGVuZF90b2tlbjogaW50CgoKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSkKY2xhc3MgTFNTQ29udGV4dEhpbnQ6CiAgICBjdHhfa2luZDogc3RyICAgICAgICAgICAgICAgICAjIFJFR0lPTiAvIEdST1VQIC8gRElSRUNUSU9OCiAgICB0ZXh0OiBzdHIKICAgIHN0YXJ0X3Rva2VuOiBpbnQKICAgIGVuZF90b2tlbjogaW50CiAgICBzY29wZTogc3RyICAgICAgICAgICAgICAgICAgICAjIExPQ0FUSU9OIC8gU0VSSUVTIC8gRVZFTlQgLyBTRUNUSU9OIC8gUE9TVAogICAgdGFyZ2V0X2lkOiBpbnQgfCBOb25lICAgICAgICAgIyBpdGVtX2lkIC8gc2VyaWVzX2lkIC8gZXZlbnRfaWQgLyBzZWN0aW9uX2lkIC8gTm9uZQogICAgc291cmNlOiBzdHIgICAgICAgICAgICAgICAgICAgIyBHQVpFVFRFRVIKCgpTRVJJRVNfSk9JTl9UT0tFTlMgPSB7IiwiLCAiYW5kIiwgIm9yIiwgIiYifQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgVE9QLUxFVkVMIEFQSQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIHNwYW5zX2J5X2xhYmVsKGRvYywgbGFiZWwsIGdyb3VwOiBzdHIgPSBOb25lKToKICAgIHNvdXJjZSA9IGRvYy5lbnRzIGlmIGdyb3VwIGlzIE5vbmUgZWxzZSBkb2Muc3BhbnMuZ2V0KGdyb3VwLCBbXSkKICAgIHJldHVybiBbc3BhbiBmb3Igc3BhbiBpbiBzb3VyY2UgaWYgc3Bhbi5sYWJlbF8gPT0gbGFiZWxdCgoKZGVmIGxzc19zY29wZV9ldmVudCgKICAgICosCiAgICBkb2M6IERvYywKICAgIGV2ZW50OiBFdmVudE1hdGNoLAogICAgZXZlbnRfb3JkaW5hbDogaW50LAogICAgc2VjdGlvbl9pZDogaW50IHwgTm9uZSA9IE5vbmUsCikgLT4gdHVwbGVbCiAgICBsaXN0W0xTU1JvbGVDYW5kaWRhdGVdLAogICAgbGlzdFtMU1NMb2NhdGlvblNlcmllc10sCiAgICBsaXN0W0xTU0NvbnRleHRIaW50XSwKXToKICAgICIiIgogICAgUGVyZm9ybSBTVFJVQ1RVUkFMIHNjb3BpbmcgZm9yIGEgc2luZ2xlIEhvbG1lcyBldmVudC4KICAgICIiIgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBFVkVOVCBXSU5ET1cgKHNlbnRlbmNlLWJvdW5kZWQpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBzZW50ID0gZG9jW2V2ZW50LmRvY19zdGFydF90b2tlbl9pbmRleF0uc2VudAogICAgZXZlbnRfc3RhcnQgPSBzZW50LnN0YXJ0CiAgICBldmVudF9lbmQgPSBzZW50LmVuZAoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBST0xFIENBTkRJREFURVMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHJvbGVfY2FuZGlkYXRlczogbGlzdFtMU1NSb2xlQ2FuZGlkYXRlXSA9IFtdCgogICAgZm9yIHdtIGluIGV2ZW50Lml0ZXJfY29udGVudF93b3JkcygpOgogICAgICAgIHJrID0gX2luZmVyX3JvbGVfa2luZF9mcm9tX3BhdHRlcm5fZWxlbWVudCh3bSkKICAgICAgICBpZiByayBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICByb2xlX2NhbmRpZGF0ZXMuYXBwZW5kKAogICAgICAgICAgICBMU1NSb2xlQ2FuZGlkYXRlKAogICAgICAgICAgICAgICAgcm9sZV9raW5kPXJrLAogICAgICAgICAgICAgICAgdGV4dD13bS5kb2N1bWVudF9waHJhc2Ugb3Igd20uZG9jdW1lbnRfd29yZCwKICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPXdtLmZpcnN0X2RvY3VtZW50X3Rva2VuX2luZGV4LAogICAgICAgICAgICAgICAgZW5kX3Rva2VuPXdtLmxhc3RfZG9jdW1lbnRfdG9rZW5faW5kZXggKyAxLAogICAgICAgICAgICAgICAgbWF0Y2hfdHlwZT13bS5tYXRjaF90eXBlLAogICAgICAgICAgICAgICAgbmVnYXRlZD13bS5uZWdhdGVkLAogICAgICAgICAgICAgICAgdW5jZXJ0YWluPXdtLnVuY2VydGFpbiwKICAgICAgICAgICAgICAgIGludm9sdmVzX2NvcmVmZXJlbmNlPXdtLmludm9sdmVzX2NvcmVmZXJlbmNlLAogICAgICAgICAgICAgICAgc2ltaWxhcml0eT13bS5zaW1pbGFyaXR5LAogICAgICAgICAgICAgICAgZXhwbGFuYXRpb249d20uZXhwbGFuYXRpb24sCiAgICAgICAgICAgICkKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIExPQ0FUSU9OIFNFUklFUyAoRVZFTlQtTE9DQUwpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBsb2NfZW50cyA9IFsKICAgICAgICBlIGZvciBlIGluIGRvYy5lbnRzCiAgICAgICAgaWYgZS5sYWJlbF8gPT0gIkxPQ0FUSU9OIgogICAgICAgIGFuZCBfc3BhbnNfb3ZlcmxhcChlLnN0YXJ0LCBlLmVuZCwgZXZlbnRfc3RhcnQsIGV2ZW50X2VuZCkKICAgIF0KCiAgICBsb2NfZW50cy5zb3J0KGtleT1sYW1iZGEgZTogZS5zdGFydCkKCiAgICBsb2NhdGlvbl9zZXJpZXM6IGxpc3RbTFNTTG9jYXRpb25TZXJpZXNdID0gW10KICAgIGN1cnJlbnRfaXRlbXM6IGxpc3RbTFNTTG9jYXRpb25JdGVtXSA9IFtdCgogICAgc2VyaWVzX2lkID0gMAogICAgaXRlbV9pZCA9IDAKCiAgICBmb3IgZW50IGluIGxvY19lbnRzOgogICAgICAgIGl0ZW0gPSBMU1NMb2NhdGlvbkl0ZW0oCiAgICAgICAgICAgIGl0ZW1faWQ9aXRlbV9pZCwKICAgICAgICAgICAgdGV4dD1lbnQudGV4dCwKICAgICAgICAgICAgc3RhcnRfdG9rZW49ZW50LnN0YXJ0LAogICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICApCiAgICAgICAgaXRlbV9pZCArPSAxCgogICAgICAgIGlmIG5vdCBjdXJyZW50X2l0ZW1zOgogICAgICAgICAgICBjdXJyZW50X2l0ZW1zID0gW2l0ZW1dCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGdhcCA9IGRvY1tjdXJyZW50X2l0ZW1zWy0xXS5lbmRfdG9rZW4gOiBpdGVtLnN0YXJ0X3Rva2VuXQogICAgICAgIGlmIGFueSh0b2sudGV4dC5sb3dlcigpIGluIFNFUklFU19KT0lOX1RPS0VOUyBmb3IgdG9rIGluIGdhcCk6CiAgICAgICAgICAgIGN1cnJlbnRfaXRlbXMuYXBwZW5kKGl0ZW0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9jYXRpb25fc2VyaWVzLmFwcGVuZCgKICAgICAgICAgICAgICAgIExTU0xvY2F0aW9uU2VyaWVzKAogICAgICAgICAgICAgICAgICAgIHNlcmllc19pZD1zZXJpZXNfaWQsCiAgICAgICAgICAgICAgICAgICAgaXRlbXM9Y3VycmVudF9pdGVtcywKICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1jdXJyZW50X2l0ZW1zWzBdLnN0YXJ0X3Rva2VuLAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1jdXJyZW50X2l0ZW1zWy0xXS5lbmRfdG9rZW4sCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VyaWVzX2lkICs9IDEKICAgICAgICAgICAgY3VycmVudF9pdGVtcyA9IFtpdGVtXQoKICAgIGlmIGN1cnJlbnRfaXRlbXM6CiAgICAgICAgbG9jYXRpb25fc2VyaWVzLmFwcGVuZCgKICAgICAgICAgICAgTFNTTG9jYXRpb25TZXJpZXMoCiAgICAgICAgICAgICAgICBzZXJpZXNfaWQ9c2VyaWVzX2lkLAogICAgICAgICAgICAgICAgaXRlbXM9Y3VycmVudF9pdGVtcywKICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWN1cnJlbnRfaXRlbXNbMF0uc3RhcnRfdG9rZW4sCiAgICAgICAgICAgICAgICBlbmRfdG9rZW49Y3VycmVudF9pdGVtc1stMV0uZW5kX3Rva2VuLAogICAgICAgICAgICApCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDT05URVhUIEhJTlRTCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBjb250ZXh0X2hpbnRzOiBsaXN0W0xTU0NvbnRleHRIaW50XSA9IFtdCgogICAgZm9yIGVudCBpbiBkb2MuZW50czoKICAgICAgICBpZiBlbnQubGFiZWxfIG5vdCBpbiB7IlJFR0lPTiIsICJHUk9VUCIsICJESVJFQ1RJT04ifToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgYXR0YWNoZWQgPSBGYWxzZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgTE9DQVRJT04gKGNvbnRhaW5lZC1pbi1pdGVtKQogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGZvciBzZXJpZXMgaW4gbG9jYXRpb25fc2VyaWVzOgogICAgICAgICAgICBmb3IgaXRlbSBpbiBzZXJpZXMuaXRlbXM6CiAgICAgICAgICAgICAgICBpZiBlbnQuc3RhcnQgPj0gaXRlbS5zdGFydF90b2tlbiBhbmQgZW50LmVuZCA8PSBpdGVtLmVuZF90b2tlbjoKICAgICAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1lbnQudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGU9IkxPQ0FUSU9OIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1pdGVtLml0ZW1faWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgYXR0YWNoZWQgPSBUcnVlCgogICAgICAgIGlmIGF0dGFjaGVkOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgTE9DQVRJT04gKHJldHJvYWN0aXZlIHNlcmllcyBxdWFsaWZpZXIpCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgYXR0YWNoZWQgPSBfYXBwbHlfcmV0cm9hY3RpdmVfc2VyaWVzX3F1YWxpZmllcigKICAgICAgICAgICAgZG9jPWRvYywKICAgICAgICAgICAgbG9jYXRpb25fc2VyaWVzPWxvY2F0aW9uX3NlcmllcywKICAgICAgICAgICAgY3R4X2VudD1lbnQsCiAgICAgICAgICAgIGNvbnRleHRfaGludHM9Y29udGV4dF9oaW50cywKICAgICAgICApCiAgICAgICAgaWYgYXR0YWNoZWQ6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTRVJJRVMKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBmb3Igc2VyaWVzIGluIGxvY2F0aW9uX3NlcmllczoKICAgICAgICAgICAgaWYgX3NwYW5zX292ZXJsYXAoZW50LnN0YXJ0LCBlbnQuZW5kLCBzZXJpZXMuc3RhcnRfdG9rZW4sIHNlcmllcy5lbmRfdG9rZW4pOgogICAgICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eF9raW5kPWVudC5sYWJlbF8sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWVudC5lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlPSJTRVJJRVMiLAogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQ9c2VyaWVzLnNlcmllc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGF0dGFjaGVkID0gVHJ1ZQoKICAgICAgICBpZiBhdHRhY2hlZDoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIEVWRU5UCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgaWYgX3NwYW5zX292ZXJsYXAoZW50LnN0YXJ0LCBlbnQuZW5kLCBldmVudF9zdGFydCwgZXZlbnRfZW5kKToKICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49ZW50LnN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgIHNjb3BlPSJFVkVOVCIsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPWV2ZW50X29yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTRUNUSU9OIC8gUE9TVAogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGlmIHNlY3Rpb25faWQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGNvbnRleHRfaGludHMuYXBwZW5kKAogICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9ZW50LmxhYmVsXywKICAgICAgICAgICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICAgICAgICAgICAgICBzY29wZT0iU0VDVElPTiIsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPXNlY3Rpb25faWQsCiAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49ZW50LnN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgIHNjb3BlPSJQT1NUIiwKICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQ9Tm9uZSwKICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKCiAgICByZXR1cm4gcm9sZV9jYW5kaWRhdGVzLCBsb2NhdGlvbl9zZXJpZXMsIGNvbnRleHRfaGludHMKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEhFTFBFUlMKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfc3BhbnNfb3ZlcmxhcChhMTogaW50LCBhMjogaW50LCBiMTogaW50LCBiMjogaW50KSAtPiBib29sOgogICAgcmV0dXJuIG5vdCAoYTIgPD0gYjEgb3IgYjIgPD0gYTEpCgoKZGVmIF9pbmZlcl9yb2xlX2tpbmRfZnJvbV9wYXR0ZXJuX2VsZW1lbnQod206IFBocmFzZU1hdGNoKSAtPiBzdHIgfCBOb25lOgogICAgbXQgPSAod20ubWF0Y2hfdHlwZSBvciAiIikubG93ZXIoKQoKICAgIGlmIG10IGluIHsic3ViamVjdCIsICJhY3RvciIsICJvYmplY3QiLCAiZG9iaiIsICJwb3NzZXNzb3IifToKICAgICAgICByZXR1cm4gIkFDVE9SIgoKICAgIGlmIG10IGluIHsidmVyYiIsICJhY3Rpb24ifToKICAgICAgICByZXR1cm4gIkFDVElPTiIKCiAgICByZXR1cm4gTm9uZQoKCmRlZiBfYXBwbHlfcmV0cm9hY3RpdmVfc2VyaWVzX3F1YWxpZmllcigKICAgICosCiAgICBkb2M6IERvYywKICAgIGxvY2F0aW9uX3NlcmllczogbGlzdFtMU1NMb2NhdGlvblNlcmllc10sCiAgICBjdHhfZW50OiBTcGFuLAogICAgY29udGV4dF9oaW50czogbGlzdFtMU1NDb250ZXh0SGludF0sCikgLT4gYm9vbDoKICAgICIiIgogICAgUmV0cm9hY3RpdmUgUkVHSU9OL0dST1VQL0RJUkVDVElPTiBxdWFsaWZpZXJzIHBhcnRpdGlvbiBhIGxvY2F0aW9uIHNlcmllcy4KICAgIEVhY2ggYXBwbGllcyBvbmx5IHRvIGl0ZW1zIHNpbmNlIHRoZSBwcmV2aW91cyBxdWFsaWZpZXIgb2YgdGhlIHNhbWUga2luZC4KICAgICIiIgoKICAgIGtpbmQgPSBjdHhfZW50LmxhYmVsXwogICAgY3R4X3N0YXJ0ID0gY3R4X2VudC5zdGFydAogICAgY3R4X2VuZCA9IGN0eF9lbnQuZW5kCgogICAgZm9yIHNlcmllcyBpbiBsb2NhdGlvbl9zZXJpZXM6CiAgICAgICAgaXRlbXMgPSBzZXJpZXMuaXRlbXMKICAgICAgICBpZiBub3QgaXRlbXM6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgTXVzdCBvY2N1ciBhZnRlciBhdCBsZWFzdCBvbmUgaXRlbQogICAgICAgIGxhc3RfaXRlbV9iZWZvcmUgPSBOb25lCiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpdC5lbmRfdG9rZW4gPD0gY3R4X3N0YXJ0OgogICAgICAgICAgICAgICAgbGFzdF9pdGVtX2JlZm9yZSA9IGl0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICBpZiBsYXN0X2l0ZW1fYmVmb3JlIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgQmxvY2sgaWYgYW5vdGhlciBMT0NBVElPTiBpbnRlcnZlbmVzIG91dHNpZGUgdGhlIHNlcmllcwogICAgICAgIHNlcmllc19zdGFydHMgPSB7aXQuc3RhcnRfdG9rZW4gZm9yIGl0IGluIGl0ZW1zfQogICAgICAgIGZvciBlbnQgaW4gZG9jLmVudHM6CiAgICAgICAgICAgIGlmIGVudC5sYWJlbF8gIT0gIkxPQ0FUSU9OIjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGxhc3RfaXRlbV9iZWZvcmUuZW5kX3Rva2VuIDw9IGVudC5zdGFydCA8IGN0eF9zdGFydDoKICAgICAgICAgICAgICAgIGlmIGVudC5zdGFydCBub3QgaW4gc2VyaWVzX3N0YXJ0czoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgIyBGaW5kIGN1dG9mZiBmcm9tIHByaW9yIHNhbWUta2luZCBxdWFsaWZpZXJzCiAgICAgICAgY3V0b2ZmID0gc2VyaWVzLnN0YXJ0X3Rva2VuCiAgICAgICAgZm9yIGNoIGluIGNvbnRleHRfaGludHM6CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGNoLmN0eF9raW5kID09IGtpbmQKICAgICAgICAgICAgICAgIGFuZCBjaC5zY29wZSA9PSAiTE9DQVRJT04iCiAgICAgICAgICAgICAgICBhbmQgY2guc3RhcnRfdG9rZW4gPCBjdHhfc3RhcnQKICAgICAgICAgICAgICAgIGFuZCBhbnkoaXQuaXRlbV9pZCA9PSBjaC50YXJnZXRfaWQgZm9yIGl0IGluIGl0ZW1zKQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgY3V0b2ZmID0gbWF4KGN1dG9mZiwgY2guc3RhcnRfdG9rZW4pCgogICAgICAgICMgQXBwbHkgdG8gaXRlbXMgc2luY2UgY3V0b2ZmCiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpdC5zdGFydF90b2tlbiA+PSBjdXRvZmYgYW5kIGl0LmVuZF90b2tlbiA8PSBjdHhfc3RhcnQ6CiAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9a2luZCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1jdHhfZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWN0eF9zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWN0eF9lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlPSJMT0NBVElPTiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1pdC5pdGVtX2lkLAogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQoKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIHJldHVybiBGYWxzZQoAAAAAAAAAAFsuAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdQgAAAAAAAB1CAAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABbLgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0Cgpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jLCBTcGFuCgpmcm9tIHNpdHJlcGMyLmxzcy50eXBlZGVmcyBpbXBvcnQgRXZlbnRNYXRjaCwgUGhyYXNlTWF0Y2gKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIExTUyBEQVRBIENPTlRSQUNUUyAoU1RSVUNUVVJBTCwgQ0FOT05JQ0FMKQojCiMgSU1QT1JUQU5UIElOVkFSSUFOVFM6CiMgLSBSb2xlQ2FuZGlkYXRlcyBhcmUgc2VtYW50aWMgb25seSAoQUNUT1IgLyBBQ1RJT04pCiMgLSBMb2NhdGlvbnMgYXJlIE5FVkVSIHJvbGUgY2FuZGlkYXRlcwojIC0gTG9jYXRpb25zIGV4aXN0IG9ubHkgYXMgTG9jYXRpb25JdGVtcyBpbnNpZGUgTG9jYXRpb25TZXJpZXMKIyAtIHNlcmllc19pZCBhbmQgaXRlbV9pZCBhcmUgT1JESU5BTFMgTE9DQUwgVE8gQSBTSU5HTEUgRVZFTlQKIyAtIENvbnRleHQgaXMgYXR0YWNoZWQgYXQgdGhlIExPV0VTVCBERUZFTlNJQkxFIFNUUlVDVFVSQUwgTEVWRUwKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCkBkYXRhY2xhc3MoZnJvemVuPVRydWUsIHNsb3RzPVRydWUpCmNsYXNzIExTU1JvbGVDYW5kaWRhdGU6CiAgICByb2xlX2tpbmQ6IHN0ciAgICAgICAgICAgICAgICAgIyBBQ1RPUiAvIEFDVElPTgogICAgdGV4dDogc3RyCiAgICBzdGFydF90b2tlbjogaW50CiAgICBlbmRfdG9rZW46IGludAogICAgbWF0Y2hfdHlwZTogc3RyCiAgICBuZWdhdGVkOiBib29sCiAgICB1bmNlcnRhaW46IGJvb2wKICAgIGludm9sdmVzX2NvcmVmZXJlbmNlOiBib29sCiAgICBzaW1pbGFyaXR5OiBmbG9hdAogICAgZXhwbGFuYXRpb246IHN0cgoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUsIHNsb3RzPVRydWUpCmNsYXNzIExTU0xvY2F0aW9uSXRlbToKICAgIGl0ZW1faWQ6IGludCAgICAgICAgICAgICAgICAgICMgb3JkaW5hbCwgbG9jYWwgdG8gZXZlbnQKICAgIHRleHQ6IHN0cgogICAgc3RhcnRfdG9rZW46IGludAogICAgZW5kX3Rva2VuOiBpbnQKCgpAZGF0YWNsYXNzKGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKQpjbGFzcyBMU1NMb2NhdGlvblNlcmllczoKICAgIHNlcmllc19pZDogaW50ICAgICAgICAgICAgICAgICMgb3JkaW5hbCwgbG9jYWwgdG8gZXZlbnQKICAgIGl0ZW1zOiBsaXN0W0xTU0xvY2F0aW9uSXRlbV0KICAgIHN0YXJ0X3Rva2VuOiBpbnQKICAgIGVuZF90b2tlbjogaW50CgoKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSkKY2xhc3MgTFNTQ29udGV4dEhpbnQ6CiAgICBjdHhfa2luZDogc3RyICAgICAgICAgICAgICAgICAjIFJFR0lPTiAvIEdST1VQIC8gRElSRUNUSU9OCiAgICB0ZXh0OiBzdHIKICAgIHN0YXJ0X3Rva2VuOiBpbnQKICAgIGVuZF90b2tlbjogaW50CiAgICBzY29wZTogc3RyICAgICAgICAgICAgICAgICAgICAjIExPQ0FUSU9OIC8gU0VSSUVTIC8gRVZFTlQgLyBTRUNUSU9OIC8gUE9TVAogICAgdGFyZ2V0X2lkOiBpbnQgfCBOb25lICAgICAgICAgIyBpdGVtX2lkIC8gc2VyaWVzX2lkIC8gZXZlbnRfaWQgLyBzZWN0aW9uX2lkIC8gTm9uZQogICAgc291cmNlOiBzdHIgICAgICAgICAgICAgICAgICAgIyBHQVpFVFRFRVIKCgpTRVJJRVNfSk9JTl9UT0tFTlMgPSB7IiwiLCAiYW5kIiwgIm9yIiwgIiYifQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgVE9QLUxFVkVMIEFQSQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIHNwYW5zX2J5X2xhYmVsKGRvYywgbGFiZWwsIGdyb3VwOiBzdHIgPSBOb25lKToKICAgIHNvdXJjZSA9IGRvYy5lbnRzIGlmIGdyb3VwIGlzIE5vbmUgZWxzZSBkb2Muc3BhbnMuZ2V0KGdyb3VwLCBbXSkKICAgIHJldHVybiBbc3BhbiBmb3Igc3BhbiBpbiBzb3VyY2UgaWYgc3Bhbi5sYWJlbF8gPT0gbGFiZWxdCgoKZGVmIGxzc19zY29wZV9ldmVudCgKICAgICosCiAgICBkb2M6IERvYywKICAgIGV2ZW50OiBFdmVudE1hdGNoLAogICAgZXZlbnRfb3JkaW5hbDogaW50LAogICAgc2VjdGlvbl9pZDogaW50IHwgTm9uZSA9IE5vbmUsCikgLT4gdHVwbGVbCiAgICBsaXN0W0xTU1JvbGVDYW5kaWRhdGVdLAogICAgbGlzdFtMU1NMb2NhdGlvblNlcmllc10sCiAgICBsaXN0W0xTU0NvbnRleHRIaW50XSwKXToKICAgICIiIgogICAgUGVyZm9ybSBTVFJVQ1RVUkFMIHNjb3BpbmcgZm9yIGEgc2luZ2xlIEhvbG1lcyBldmVudC4KICAgICIiIgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBFVkVOVCBXSU5ET1cgKHNlbnRlbmNlLWJvdW5kZWQpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBzZW50ID0gZG9jW2V2ZW50LmRvY19zdGFydF90b2tlbl9pbmRleF0uc2VudAogICAgZXZlbnRfc3RhcnQgPSBzZW50LnN0YXJ0CiAgICBldmVudF9lbmQgPSBzZW50LmVuZAoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBST0xFIENBTkRJREFURVMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHJvbGVfY2FuZGlkYXRlczogbGlzdFtMU1NSb2xlQ2FuZGlkYXRlXSA9IFtdCgogICAgZm9yIHdtIGluIGV2ZW50Lml0ZXJfY29udGVudF93b3JkcygpOgogICAgICAgIHJrID0gX2luZmVyX3JvbGVfa2luZF9mcm9tX3BhdHRlcm5fZWxlbWVudCh3bSkKICAgICAgICBpZiByayBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICByb2xlX2NhbmRpZGF0ZXMuYXBwZW5kKAogICAgICAgICAgICBMU1NSb2xlQ2FuZGlkYXRlKAogICAgICAgICAgICAgICAgcm9sZV9raW5kPXJrLAogICAgICAgICAgICAgICAgdGV4dD13bS5kb2N1bWVudF9waHJhc2Ugb3Igd20uZG9jdW1lbnRfd29yZCwKICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPXdtLmZpcnN0X2RvY3VtZW50X3Rva2VuX2luZGV4LAogICAgICAgICAgICAgICAgZW5kX3Rva2VuPXdtLmxhc3RfZG9jdW1lbnRfdG9rZW5faW5kZXggKyAxLAogICAgICAgICAgICAgICAgbWF0Y2hfdHlwZT13bS5tYXRjaF90eXBlLAogICAgICAgICAgICAgICAgbmVnYXRlZD13bS5uZWdhdGVkLAogICAgICAgICAgICAgICAgdW5jZXJ0YWluPXdtLnVuY2VydGFpbiwKICAgICAgICAgICAgICAgIGludm9sdmVzX2NvcmVmZXJlbmNlPXdtLmludm9sdmVzX2NvcmVmZXJlbmNlLAogICAgICAgICAgICAgICAgc2ltaWxhcml0eT13bS5zaW1pbGFyaXR5LAogICAgICAgICAgICAgICAgZXhwbGFuYXRpb249d20uZXhwbGFuYXRpb24sCiAgICAgICAgICAgICkKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIExPQ0FUSU9OIFNFUklFUyAoRVZFTlQtTE9DQUwpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBsb2NfZW50cyA9IFsKICAgICAgICBlIGZvciBlIGluIGRvYy5lbnRzCiAgICAgICAgaWYgZS5sYWJlbF8gPT0gIkxPQ0FUSU9OIgogICAgICAgIGFuZCBfc3BhbnNfb3ZlcmxhcChlLnN0YXJ0LCBlLmVuZCwgZXZlbnRfc3RhcnQsIGV2ZW50X2VuZCkKICAgIF0KCiAgICBsb2NfZW50cy5zb3J0KGtleT1sYW1iZGEgZTogZS5zdGFydCkKCiAgICBsb2NhdGlvbl9zZXJpZXM6IGxpc3RbTFNTTG9jYXRpb25TZXJpZXNdID0gW10KICAgIGN1cnJlbnRfaXRlbXM6IGxpc3RbTFNTTG9jYXRpb25JdGVtXSA9IFtdCgogICAgc2VyaWVzX2lkID0gMAogICAgaXRlbV9pZCA9IDAKCiAgICBmb3IgZW50IGluIGxvY19lbnRzOgogICAgICAgIGl0ZW0gPSBMU1NMb2NhdGlvbkl0ZW0oCiAgICAgICAgICAgIGl0ZW1faWQ9aXRlbV9pZCwKICAgICAgICAgICAgdGV4dD1lbnQudGV4dCwKICAgICAgICAgICAgc3RhcnRfdG9rZW49ZW50LnN0YXJ0LAogICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICApCiAgICAgICAgaXRlbV9pZCArPSAxCgogICAgICAgIGlmIG5vdCBjdXJyZW50X2l0ZW1zOgogICAgICAgICAgICBjdXJyZW50X2l0ZW1zID0gW2l0ZW1dCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGdhcCA9IGRvY1tjdXJyZW50X2l0ZW1zWy0xXS5lbmRfdG9rZW4gOiBpdGVtLnN0YXJ0X3Rva2VuXQogICAgICAgIGlmIGFueSh0b2sudGV4dC5sb3dlcigpIGluIFNFUklFU19KT0lOX1RPS0VOUyBmb3IgdG9rIGluIGdhcCk6CiAgICAgICAgICAgIGN1cnJlbnRfaXRlbXMuYXBwZW5kKGl0ZW0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9jYXRpb25fc2VyaWVzLmFwcGVuZCgKICAgICAgICAgICAgICAgIExTU0xvY2F0aW9uU2VyaWVzKAogICAgICAgICAgICAgICAgICAgIHNlcmllc19pZD1zZXJpZXNfaWQsCiAgICAgICAgICAgICAgICAgICAgaXRlbXM9Y3VycmVudF9pdGVtcywKICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1jdXJyZW50X2l0ZW1zWzBdLnN0YXJ0X3Rva2VuLAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1jdXJyZW50X2l0ZW1zWy0xXS5lbmRfdG9rZW4sCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VyaWVzX2lkICs9IDEKICAgICAgICAgICAgY3VycmVudF9pdGVtcyA9IFtpdGVtXQoKICAgIGlmIGN1cnJlbnRfaXRlbXM6CiAgICAgICAgbG9jYXRpb25fc2VyaWVzLmFwcGVuZCgKICAgICAgICAgICAgTFNTTG9jYXRpb25TZXJpZXMoCiAgICAgICAgICAgICAgICBzZXJpZXNfaWQ9c2VyaWVzX2lkLAogICAgICAgICAgICAgICAgaXRlbXM9Y3VycmVudF9pdGVtcywKICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWN1cnJlbnRfaXRlbXNbMF0uc3RhcnRfdG9rZW4sCiAgICAgICAgICAgICAgICBlbmRfdG9rZW49Y3VycmVudF9pdGVtc1stMV0uZW5kX3Rva2VuLAogICAgICAgICAgICApCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDT05URVhUIEhJTlRTCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBjb250ZXh0X2hpbnRzOiBsaXN0W0xTU0NvbnRleHRIaW50XSA9IFtdCgogICAgZm9yIGVudCBpbiBkb2MuZW50czoKICAgICAgICBpZiBlbnQubGFiZWxfIG5vdCBpbiB7IlJFR0lPTiIsICJHUk9VUCIsICJESVJFQ1RJT04ifToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgYXR0YWNoZWQgPSBGYWxzZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgTE9DQVRJT04gKGNvbnRhaW5lZC1pbi1pdGVtKQogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGZvciBzZXJpZXMgaW4gbG9jYXRpb25fc2VyaWVzOgogICAgICAgICAgICBmb3IgaXRlbSBpbiBzZXJpZXMuaXRlbXM6CiAgICAgICAgICAgICAgICBpZiBlbnQuc3RhcnQgPj0gaXRlbS5zdGFydF90b2tlbiBhbmQgZW50LmVuZCA8PSBpdGVtLmVuZF90b2tlbjoKICAgICAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1lbnQudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGU9IkxPQ0FUSU9OIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1pdGVtLml0ZW1faWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgYXR0YWNoZWQgPSBUcnVlCgogICAgICAgIGlmIGF0dGFjaGVkOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgTE9DQVRJT04gKHJldHJvYWN0aXZlIHNlcmllcyBxdWFsaWZpZXIpCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgYXR0YWNoZWQgPSBfYXBwbHlfcmV0cm9hY3RpdmVfc2VyaWVzX3F1YWxpZmllcigKICAgICAgICAgICAgZG9jPWRvYywKICAgICAgICAgICAgbG9jYXRpb25fc2VyaWVzPWxvY2F0aW9uX3NlcmllcywKICAgICAgICAgICAgY3R4X2VudD1lbnQsCiAgICAgICAgICAgIGNvbnRleHRfaGludHM9Y29udGV4dF9oaW50cywKICAgICAgICApCiAgICAgICAgaWYgYXR0YWNoZWQ6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTRVJJRVMKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBmb3Igc2VyaWVzIGluIGxvY2F0aW9uX3NlcmllczoKICAgICAgICAgICAgaWYgX3NwYW5zX292ZXJsYXAoZW50LnN0YXJ0LCBlbnQuZW5kLCBzZXJpZXMuc3RhcnRfdG9rZW4sIHNlcmllcy5lbmRfdG9rZW4pOgogICAgICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eF9raW5kPWVudC5sYWJlbF8sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWVudC5lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlPSJTRVJJRVMiLAogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQ9c2VyaWVzLnNlcmllc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGF0dGFjaGVkID0gVHJ1ZQoKICAgICAgICBpZiBhdHRhY2hlZDoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIEVWRU5UCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgaWYgX3NwYW5zX292ZXJsYXAoZW50LnN0YXJ0LCBlbnQuZW5kLCBldmVudF9zdGFydCwgZXZlbnRfZW5kKToKICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49ZW50LnN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgIHNjb3BlPSJFVkVOVCIsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPWV2ZW50X29yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTRUNUSU9OIC8gUE9TVAogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGlmIHNlY3Rpb25faWQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGNvbnRleHRfaGludHMuYXBwZW5kKAogICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9ZW50LmxhYmVsXywKICAgICAgICAgICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICAgICAgICAgICAgICBzY29wZT0iU0VDVElPTiIsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPXNlY3Rpb25faWQsCiAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49ZW50LnN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgIHNjb3BlPSJQT1NUIiwKICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQ9Tm9uZSwKICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKCiAgICByZXR1cm4gcm9sZV9jYW5kaWRhdGVzLCBsb2NhdGlvbl9zZXJpZXMsIGNvbnRleHRfaGludHMKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEhFTFBFUlMKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfc3BhbnNfb3ZlcmxhcChhMTogaW50LCBhMjogaW50LCBiMTogaW50LCBiMjogaW50KSAtPiBib29sOgogICAgcmV0dXJuIG5vdCAoYTIgPD0gYjEgb3IgYjIgPD0gYTEpCgoKZGVmIF9pbmZlcl9yb2xlX2tpbmRfZnJvbV9wYXR0ZXJuX2VsZW1lbnQod206IFBocmFzZU1hdGNoKSAtPiBzdHIgfCBOb25lOgogICAgbXQgPSAod20ubWF0Y2hfdHlwZSBvciAiIikubG93ZXIoKQoKICAgIGlmIG10IGluIHsic3ViamVjdCIsICJhY3RvciIsICJvYmplY3QiLCAiZG9iaiIsICJwb3NzZXNzb3IifToKICAgICAgICByZXR1cm4gIkFDVE9SIgoKICAgIGlmIG10IGluIHsidmVyYiIsICJhY3Rpb24ifToKICAgICAgICByZXR1cm4gIkFDVElPTiIKCiAgICByZXR1cm4gTm9uZQoKCmRlZiBfYXBwbHlfcmV0cm9hY3RpdmVfc2VyaWVzX3F1YWxpZmllcigKICAgICosCiAgICBkb2M6IERvYywKICAgIGxvY2F0aW9uX3NlcmllczogbGlzdFtMU1NMb2NhdGlvblNlcmllc10sCiAgICBjdHhfZW50OiBTcGFuLAogICAgY29udGV4dF9oaW50czogbGlzdFtMU1NDb250ZXh0SGludF0sCikgLT4gYm9vbDoKICAgICIiIgogICAgUmV0cm9hY3RpdmUgUkVHSU9OL0dST1VQL0RJUkVDVElPTiBxdWFsaWZpZXJzIHBhcnRpdGlvbiBhIGxvY2F0aW9uIHNlcmllcy4KICAgIEVhY2ggYXBwbGllcyBvbmx5IHRvIGl0ZW1zIHNpbmNlIHRoZSBwcmV2aW91cyBxdWFsaWZpZXIgb2YgdGhlIHNhbWUga2luZC4KICAgICIiIgoKICAgIGtpbmQgPSBjdHhfZW50LmxhYmVsXwogICAgY3R4X3N0YXJ0ID0gY3R4X2VudC5zdGFydAogICAgY3R4X2VuZCA9IGN0eF9lbnQuZW5kCgogICAgZm9yIHNlcmllcyBpbiBsb2NhdGlvbl9zZXJpZXM6CiAgICAgICAgaXRlbXMgPSBzZXJpZXMuaXRlbXMKICAgICAgICBpZiBub3QgaXRlbXM6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgTXVzdCBvY2N1ciBhZnRlciBhdCBsZWFzdCBvbmUgaXRlbQogICAgICAgIGxhc3RfaXRlbV9iZWZvcmUgPSBOb25lCiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpdC5lbmRfdG9rZW4gPD0gY3R4X3N0YXJ0OgogICAgICAgICAgICAgICAgbGFzdF9pdGVtX2JlZm9yZSA9IGl0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICBpZiBsYXN0X2l0ZW1fYmVmb3JlIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgQmxvY2sgaWYgYW5vdGhlciBMT0NBVElPTiBpbnRlcnZlbmVzIG91dHNpZGUgdGhlIHNlcmllcwogICAgICAgIHNlcmllc19zdGFydHMgPSB7aXQuc3RhcnRfdG9rZW4gZm9yIGl0IGluIGl0ZW1zfQogICAgICAgIGZvciBlbnQgaW4gZG9jLmVudHM6CiAgICAgICAgICAgIGlmIGVudC5sYWJlbF8gIT0gIkxPQ0FUSU9OIjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGxhc3RfaXRlbV9iZWZvcmUuZW5kX3Rva2VuIDw9IGVudC5zdGFydCA8IGN0eF9zdGFydDoKICAgICAgICAgICAgICAgIGlmIGVudC5zdGFydCBub3QgaW4gc2VyaWVzX3N0YXJ0czoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgIyBGaW5kIGN1dG9mZiBmcm9tIHByaW9yIHNhbWUta2luZCBxdWFsaWZpZXJzCiAgICAgICAgY3V0b2ZmID0gc2VyaWVzLnN0YXJ0X3Rva2VuCiAgICAgICAgZm9yIGNoIGluIGNvbnRleHRfaGludHM6CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGNoLmN0eF9raW5kID09IGtpbmQKICAgICAgICAgICAgICAgIGFuZCBjaC5zY29wZSA9PSAiTE9DQVRJT04iCiAgICAgICAgICAgICAgICBhbmQgY2guc3RhcnRfdG9rZW4gPCBjdHhfc3RhcnQKICAgICAgICAgICAgICAgIGFuZCBhbnkoaXQuaXRlbV9pZCA9PSBjaC50YXJnZXRfaWQgZm9yIGl0IGluIGl0ZW1zKQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgY3V0b2ZmID0gbWF4KGN1dG9mZiwgY2guc3RhcnRfdG9rZW4pCgogICAgICAgICMgQXBwbHkgdG8gaXRlbXMgc2luY2UgY3V0b2ZmCiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpdC5zdGFydF90b2tlbiA+PSBjdXRvZmYgYW5kIGl0LmVuZF90b2tlbiA8PSBjdHhfc3RhcnQ6CiAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9a2luZCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1jdHhfZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWN0eF9zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWN0eF9lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlPSJMT0NBVElPTiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1pdC5pdGVtX2lkLAogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQoKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIHJldHVybiBGYWxzZQoAAAAAAAAAAFsuAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALQ0AAAAAAAAtDQAAAAAAAAAAAAAAAPC/"
				],
				[
					56,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAOzQAAAAAAABbLgAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0Cgpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jLCBTcGFuCgpmcm9tIHNpdHJlcGMyLmxzcy50eXBlZGVmcyBpbXBvcnQgRXZlbnRNYXRjaCwgUGhyYXNlTWF0Y2gKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIExTUyBEQVRBIENPTlRSQUNUUyAoU1RSVUNUVVJBTCwgQ0FOT05JQ0FMKQojCiMgSU1QT1JUQU5UIElOVkFSSUFOVFM6CiMgLSBSb2xlQ2FuZGlkYXRlcyBhcmUgc2VtYW50aWMgb25seSAoQUNUT1IgLyBBQ1RJT04pCiMgLSBMb2NhdGlvbnMgYXJlIE5FVkVSIHJvbGUgY2FuZGlkYXRlcwojIC0gTG9jYXRpb25zIGV4aXN0IG9ubHkgYXMgTG9jYXRpb25JdGVtcyBpbnNpZGUgTG9jYXRpb25TZXJpZXMKIyAtIHNlcmllc19pZCBhbmQgaXRlbV9pZCBhcmUgT1JESU5BTFMgTE9DQUwgVE8gQSBTSU5HTEUgRVZFTlQKIyAtIENvbnRleHQgaXMgYXR0YWNoZWQgYXQgdGhlIExPV0VTVCBERUZFTlNJQkxFIFNUUlVDVFVSQUwgTEVWRUwKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCkBkYXRhY2xhc3MoZnJvemVuPVRydWUsIHNsb3RzPVRydWUpCmNsYXNzIExTU1JvbGVDYW5kaWRhdGU6CiAgICByb2xlX2tpbmQ6IHN0ciAgICAgICAgICAgICAgICAgIyBBQ1RPUiAvIEFDVElPTgogICAgdGV4dDogc3RyCiAgICBzdGFydF90b2tlbjogaW50CiAgICBlbmRfdG9rZW46IGludAogICAgbWF0Y2hfdHlwZTogc3RyCiAgICBuZWdhdGVkOiBib29sCiAgICB1bmNlcnRhaW46IGJvb2wKICAgIGludm9sdmVzX2NvcmVmZXJlbmNlOiBib29sCiAgICBzaW1pbGFyaXR5OiBmbG9hdAogICAgZXhwbGFuYXRpb246IHN0cgoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUsIHNsb3RzPVRydWUpCmNsYXNzIExTU0xvY2F0aW9uSXRlbToKICAgIGl0ZW1faWQ6IGludCAgICAgICAgICAgICAgICAgICMgb3JkaW5hbCwgbG9jYWwgdG8gZXZlbnQKICAgIHRleHQ6IHN0cgogICAgc3RhcnRfdG9rZW46IGludAogICAgZW5kX3Rva2VuOiBpbnQKCgpAZGF0YWNsYXNzKGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKQpjbGFzcyBMU1NMb2NhdGlvblNlcmllczoKICAgIHNlcmllc19pZDogaW50ICAgICAgICAgICAgICAgICMgb3JkaW5hbCwgbG9jYWwgdG8gZXZlbnQKICAgIGl0ZW1zOiBsaXN0W0xTU0xvY2F0aW9uSXRlbV0KICAgIHN0YXJ0X3Rva2VuOiBpbnQKICAgIGVuZF90b2tlbjogaW50CgoKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSkKY2xhc3MgTFNTQ29udGV4dEhpbnQ6CiAgICBjdHhfa2luZDogc3RyICAgICAgICAgICAgICAgICAjIFJFR0lPTiAvIEdST1VQIC8gRElSRUNUSU9OCiAgICB0ZXh0OiBzdHIKICAgIHN0YXJ0X3Rva2VuOiBpbnQKICAgIGVuZF90b2tlbjogaW50CiAgICBzY29wZTogc3RyICAgICAgICAgICAgICAgICAgICAjIExPQ0FUSU9OIC8gU0VSSUVTIC8gRVZFTlQgLyBTRUNUSU9OIC8gUE9TVAogICAgdGFyZ2V0X2lkOiBpbnQgfCBOb25lICAgICAgICAgIyBpdGVtX2lkIC8gc2VyaWVzX2lkIC8gZXZlbnRfaWQgLyBzZWN0aW9uX2lkIC8gTm9uZQogICAgc291cmNlOiBzdHIgICAgICAgICAgICAgICAgICAgIyBHQVpFVFRFRVIKCgpTRVJJRVNfSk9JTl9UT0tFTlMgPSB7IiwiLCAiYW5kIiwgIm9yIiwgIiYifQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgVE9QLUxFVkVMIEFQSQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIHNwYW5zX2J5X2xhYmVsKGRvYywgbGFiZWwsIGdyb3VwOiBzdHIgPSBOb25lKToKICAgIHNvdXJjZSA9IGRvYy5lbnRzIGlmIGdyb3VwIGlzIE5vbmUgZWxzZSBkb2Muc3BhbnMuZ2V0KGdyb3VwLCBbXSkKICAgIHJldHVybiBbc3BhbiBmb3Igc3BhbiBpbiBzb3VyY2UgaWYgc3Bhbi5sYWJlbF8gPT0gbGFiZWxdCgoKZGVmIGxzc19zY29wZV9ldmVudCgKICAgICosCiAgICBkb2M6IERvYywKICAgIGV2ZW50OiBFdmVudE1hdGNoLAogICAgZXZlbnRfb3JkaW5hbDogaW50LAogICAgc2VjdGlvbl9pZDogaW50IHwgTm9uZSA9IE5vbmUsCikgLT4gdHVwbGVbCiAgICBsaXN0W0xTU1JvbGVDYW5kaWRhdGVdLAogICAgbGlzdFtMU1NMb2NhdGlvblNlcmllc10sCiAgICBsaXN0W0xTU0NvbnRleHRIaW50XSwKXToKICAgICIiIgogICAgUGVyZm9ybSBTVFJVQ1RVUkFMIHNjb3BpbmcgZm9yIGEgc2luZ2xlIEhvbG1lcyBldmVudC4KICAgICIiIgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBFVkVOVCBXSU5ET1cgKHNlbnRlbmNlLWJvdW5kZWQpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBzZW50ID0gZG9jW2V2ZW50LmRvY19zdGFydF90b2tlbl9pbmRleF0uc2VudAogICAgZXZlbnRfc3RhcnQgPSBzZW50LnN0YXJ0CiAgICBldmVudF9lbmQgPSBzZW50LmVuZAoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBST0xFIENBTkRJREFURVMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHJvbGVfY2FuZGlkYXRlczogbGlzdFtMU1NSb2xlQ2FuZGlkYXRlXSA9IFtdCgogICAgZm9yIHdtIGluIGV2ZW50Lml0ZXJfY29udGVudF93b3JkcygpOgogICAgICAgIHJrID0gX2luZmVyX3JvbGVfa2luZF9mcm9tX3BhdHRlcm5fZWxlbWVudCh3bSkKICAgICAgICBpZiByayBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICByb2xlX2NhbmRpZGF0ZXMuYXBwZW5kKAogICAgICAgICAgICBMU1NSb2xlQ2FuZGlkYXRlKAogICAgICAgICAgICAgICAgcm9sZV9raW5kPXJrLAogICAgICAgICAgICAgICAgdGV4dD13bS5kb2N1bWVudF9waHJhc2Ugb3Igd20uZG9jdW1lbnRfd29yZCwKICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPXdtLmZpcnN0X2RvY3VtZW50X3Rva2VuX2luZGV4LAogICAgICAgICAgICAgICAgZW5kX3Rva2VuPXdtLmxhc3RfZG9jdW1lbnRfdG9rZW5faW5kZXggKyAxLAogICAgICAgICAgICAgICAgbWF0Y2hfdHlwZT13bS5tYXRjaF90eXBlLAogICAgICAgICAgICAgICAgbmVnYXRlZD13bS5uZWdhdGVkLAogICAgICAgICAgICAgICAgdW5jZXJ0YWluPXdtLnVuY2VydGFpbiwKICAgICAgICAgICAgICAgIGludm9sdmVzX2NvcmVmZXJlbmNlPXdtLmludm9sdmVzX2NvcmVmZXJlbmNlLAogICAgICAgICAgICAgICAgc2ltaWxhcml0eT13bS5zaW1pbGFyaXR5LAogICAgICAgICAgICAgICAgZXhwbGFuYXRpb249d20uZXhwbGFuYXRpb24sCiAgICAgICAgICAgICkKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIExPQ0FUSU9OIFNFUklFUyAoRVZFTlQtTE9DQUwpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBsb2NfZW50cyA9IFsKICAgICAgICBlIGZvciBlIGluIGRvYy5lbnRzCiAgICAgICAgaWYgZS5sYWJlbF8gPT0gIkxPQ0FUSU9OIgogICAgICAgIGFuZCBfc3BhbnNfb3ZlcmxhcChlLnN0YXJ0LCBlLmVuZCwgZXZlbnRfc3RhcnQsIGV2ZW50X2VuZCkKICAgIF0KCiAgICBsb2NfZW50cy5zb3J0KGtleT1sYW1iZGEgZTogZS5zdGFydCkKCiAgICBsb2NhdGlvbl9zZXJpZXM6IGxpc3RbTFNTTG9jYXRpb25TZXJpZXNdID0gW10KICAgIGN1cnJlbnRfaXRlbXM6IGxpc3RbTFNTTG9jYXRpb25JdGVtXSA9IFtdCgogICAgc2VyaWVzX2lkID0gMAogICAgaXRlbV9pZCA9IDAKCiAgICBmb3IgZW50IGluIGxvY19lbnRzOgogICAgICAgIGl0ZW0gPSBMU1NMb2NhdGlvbkl0ZW0oCiAgICAgICAgICAgIGl0ZW1faWQ9aXRlbV9pZCwKICAgICAgICAgICAgdGV4dD1lbnQudGV4dCwKICAgICAgICAgICAgc3RhcnRfdG9rZW49ZW50LnN0YXJ0LAogICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICApCiAgICAgICAgaXRlbV9pZCArPSAxCgogICAgICAgIGlmIG5vdCBjdXJyZW50X2l0ZW1zOgogICAgICAgICAgICBjdXJyZW50X2l0ZW1zID0gW2l0ZW1dCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGdhcCA9IGRvY1tjdXJyZW50X2l0ZW1zWy0xXS5lbmRfdG9rZW4gOiBpdGVtLnN0YXJ0X3Rva2VuXQogICAgICAgIGlmIGFueSh0b2sudGV4dC5sb3dlcigpIGluIFNFUklFU19KT0lOX1RPS0VOUyBmb3IgdG9rIGluIGdhcCk6CiAgICAgICAgICAgIGN1cnJlbnRfaXRlbXMuYXBwZW5kKGl0ZW0pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbG9jYXRpb25fc2VyaWVzLmFwcGVuZCgKICAgICAgICAgICAgICAgIExTU0xvY2F0aW9uU2VyaWVzKAogICAgICAgICAgICAgICAgICAgIHNlcmllc19pZD1zZXJpZXNfaWQsCiAgICAgICAgICAgICAgICAgICAgaXRlbXM9Y3VycmVudF9pdGVtcywKICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1jdXJyZW50X2l0ZW1zWzBdLnN0YXJ0X3Rva2VuLAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1jdXJyZW50X2l0ZW1zWy0xXS5lbmRfdG9rZW4sCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VyaWVzX2lkICs9IDEKICAgICAgICAgICAgY3VycmVudF9pdGVtcyA9IFtpdGVtXQoKICAgIGlmIGN1cnJlbnRfaXRlbXM6CiAgICAgICAgbG9jYXRpb25fc2VyaWVzLmFwcGVuZCgKICAgICAgICAgICAgTFNTTG9jYXRpb25TZXJpZXMoCiAgICAgICAgICAgICAgICBzZXJpZXNfaWQ9c2VyaWVzX2lkLAogICAgICAgICAgICAgICAgaXRlbXM9Y3VycmVudF9pdGVtcywKICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWN1cnJlbnRfaXRlbXNbMF0uc3RhcnRfdG9rZW4sCiAgICAgICAgICAgICAgICBlbmRfdG9rZW49Y3VycmVudF9pdGVtc1stMV0uZW5kX3Rva2VuLAogICAgICAgICAgICApCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBDT05URVhUIEhJTlRTCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBjb250ZXh0X2hpbnRzOiBsaXN0W0xTU0NvbnRleHRIaW50XSA9IFtdCgogICAgZm9yIGVudCBpbiBkb2MuZW50czoKICAgICAgICBpZiBlbnQubGFiZWxfIG5vdCBpbiB7IlJFR0lPTiIsICJHUk9VUCIsICJESVJFQ1RJT04ifToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgYXR0YWNoZWQgPSBGYWxzZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgTE9DQVRJT04gKGNvbnRhaW5lZC1pbi1pdGVtKQogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGZvciBzZXJpZXMgaW4gbG9jYXRpb25fc2VyaWVzOgogICAgICAgICAgICBmb3IgaXRlbSBpbiBzZXJpZXMuaXRlbXM6CiAgICAgICAgICAgICAgICBpZiBlbnQuc3RhcnQgPj0gaXRlbS5zdGFydF90b2tlbiBhbmQgZW50LmVuZCA8PSBpdGVtLmVuZF90b2tlbjoKICAgICAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1lbnQudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGU9IkxPQ0FUSU9OIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1pdGVtLml0ZW1faWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgYXR0YWNoZWQgPSBUcnVlCgogICAgICAgIGlmIGF0dGFjaGVkOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgTE9DQVRJT04gKHJldHJvYWN0aXZlIHNlcmllcyBxdWFsaWZpZXIpCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgYXR0YWNoZWQgPSBfYXBwbHlfcmV0cm9hY3RpdmVfc2VyaWVzX3F1YWxpZmllcigKICAgICAgICAgICAgZG9jPWRvYywKICAgICAgICAgICAgbG9jYXRpb25fc2VyaWVzPWxvY2F0aW9uX3NlcmllcywKICAgICAgICAgICAgY3R4X2VudD1lbnQsCiAgICAgICAgICAgIGNvbnRleHRfaGludHM9Y29udGV4dF9oaW50cywKICAgICAgICApCiAgICAgICAgaWYgYXR0YWNoZWQ6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTRVJJRVMKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBmb3Igc2VyaWVzIGluIGxvY2F0aW9uX3NlcmllczoKICAgICAgICAgICAgaWYgX3NwYW5zX292ZXJsYXAoZW50LnN0YXJ0LCBlbnQuZW5kLCBzZXJpZXMuc3RhcnRfdG9rZW4sIHNlcmllcy5lbmRfdG9rZW4pOgogICAgICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eF9raW5kPWVudC5sYWJlbF8sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWVudC5lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlPSJTRVJJRVMiLAogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQ9c2VyaWVzLnNlcmllc19pZCwKICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGF0dGFjaGVkID0gVHJ1ZQoKICAgICAgICBpZiBhdHRhY2hlZDoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIEVWRU5UCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgaWYgX3NwYW5zX292ZXJsYXAoZW50LnN0YXJ0LCBlbnQuZW5kLCBldmVudF9zdGFydCwgZXZlbnRfZW5kKToKICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49ZW50LnN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgIHNjb3BlPSJFVkVOVCIsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPWV2ZW50X29yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTRUNUSU9OIC8gUE9TVAogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGlmIHNlY3Rpb25faWQgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGNvbnRleHRfaGludHMuYXBwZW5kKAogICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9ZW50LmxhYmVsXywKICAgICAgICAgICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICAgICAgICAgICAgICBzY29wZT0iU0VDVElPTiIsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPXNlY3Rpb25faWQsCiAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49ZW50LnN0YXJ0LAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgIHNjb3BlPSJQT1NUIiwKICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQ9Tm9uZSwKICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKCiAgICByZXR1cm4gcm9sZV9jYW5kaWRhdGVzLCBsb2NhdGlvbl9zZXJpZXMsIGNvbnRleHRfaGludHMKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEhFTFBFUlMKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfc3BhbnNfb3ZlcmxhcChhMTogaW50LCBhMjogaW50LCBiMTogaW50LCBiMjogaW50KSAtPiBib29sOgogICAgcmV0dXJuIG5vdCAoYTIgPD0gYjEgb3IgYjIgPD0gYTEpCgoKZGVmIF9pbmZlcl9yb2xlX2tpbmRfZnJvbV9wYXR0ZXJuX2VsZW1lbnQod206IFBocmFzZU1hdGNoKSAtPiBzdHIgfCBOb25lOgogICAgbXQgPSAod20ubWF0Y2hfdHlwZSBvciAiIikubG93ZXIoKQoKICAgIGlmIG10IGluIHsic3ViamVjdCIsICJhY3RvciIsICJvYmplY3QiLCAiZG9iaiIsICJwb3NzZXNzb3IifToKICAgICAgICByZXR1cm4gIkFDVE9SIgoKICAgIGlmIG10IGluIHsidmVyYiIsICJhY3Rpb24ifToKICAgICAgICByZXR1cm4gIkFDVElPTiIKCiAgICByZXR1cm4gTm9uZQoKCmRlZiBfYXBwbHlfcmV0cm9hY3RpdmVfc2VyaWVzX3F1YWxpZmllcigKICAgICosCiAgICBkb2M6IERvYywKICAgIGxvY2F0aW9uX3NlcmllczogbGlzdFtMU1NMb2NhdGlvblNlcmllc10sCiAgICBjdHhfZW50OiBTcGFuLAogICAgY29udGV4dF9oaW50czogbGlzdFtMU1NDb250ZXh0SGludF0sCikgLT4gYm9vbDoKICAgICIiIgogICAgUmV0cm9hY3RpdmUgUkVHSU9OL0dST1VQL0RJUkVDVElPTiBxdWFsaWZpZXJzIHBhcnRpdGlvbiBhIGxvY2F0aW9uIHNlcmllcy4KICAgIEVhY2ggYXBwbGllcyBvbmx5IHRvIGl0ZW1zIHNpbmNlIHRoZSBwcmV2aW91cyBxdWFsaWZpZXIgb2YgdGhlIHNhbWUga2luZC4KICAgICIiIgoKICAgIGtpbmQgPSBjdHhfZW50LmxhYmVsXwogICAgY3R4X3N0YXJ0ID0gY3R4X2VudC5zdGFydAogICAgY3R4X2VuZCA9IGN0eF9lbnQuZW5kCgogICAgZm9yIHNlcmllcyBpbiBsb2NhdGlvbl9zZXJpZXM6CiAgICAgICAgaXRlbXMgPSBzZXJpZXMuaXRlbXMKICAgICAgICBpZiBub3QgaXRlbXM6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgTXVzdCBvY2N1ciBhZnRlciBhdCBsZWFzdCBvbmUgaXRlbQogICAgICAgIGxhc3RfaXRlbV9iZWZvcmUgPSBOb25lCiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpdC5lbmRfdG9rZW4gPD0gY3R4X3N0YXJ0OgogICAgICAgICAgICAgICAgbGFzdF9pdGVtX2JlZm9yZSA9IGl0CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBicmVhawoKICAgICAgICBpZiBsYXN0X2l0ZW1fYmVmb3JlIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgQmxvY2sgaWYgYW5vdGhlciBMT0NBVElPTiBpbnRlcnZlbmVzIG91dHNpZGUgdGhlIHNlcmllcwogICAgICAgIHNlcmllc19zdGFydHMgPSB7aXQuc3RhcnRfdG9rZW4gZm9yIGl0IGluIGl0ZW1zfQogICAgICAgIGZvciBlbnQgaW4gZG9jLmVudHM6CiAgICAgICAgICAgIGlmIGVudC5sYWJlbF8gIT0gIkxPQ0FUSU9OIjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIGxhc3RfaXRlbV9iZWZvcmUuZW5kX3Rva2VuIDw9IGVudC5zdGFydCA8IGN0eF9zdGFydDoKICAgICAgICAgICAgICAgIGlmIGVudC5zdGFydCBub3QgaW4gc2VyaWVzX3N0YXJ0czoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAgICAgIyBGaW5kIGN1dG9mZiBmcm9tIHByaW9yIHNhbWUta2luZCBxdWFsaWZpZXJzCiAgICAgICAgY3V0b2ZmID0gc2VyaWVzLnN0YXJ0X3Rva2VuCiAgICAgICAgZm9yIGNoIGluIGNvbnRleHRfaGludHM6CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIGNoLmN0eF9raW5kID09IGtpbmQKICAgICAgICAgICAgICAgIGFuZCBjaC5zY29wZSA9PSAiTE9DQVRJT04iCiAgICAgICAgICAgICAgICBhbmQgY2guc3RhcnRfdG9rZW4gPCBjdHhfc3RhcnQKICAgICAgICAgICAgICAgIGFuZCBhbnkoaXQuaXRlbV9pZCA9PSBjaC50YXJnZXRfaWQgZm9yIGl0IGluIGl0ZW1zKQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgY3V0b2ZmID0gbWF4KGN1dG9mZiwgY2guc3RhcnRfdG9rZW4pCgogICAgICAgICMgQXBwbHkgdG8gaXRlbXMgc2luY2UgY3V0b2ZmCiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpdC5zdGFydF90b2tlbiA+PSBjdXRvZmYgYW5kIGl0LmVuZF90b2tlbiA8PSBjdHhfc3RhcnQ6CiAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzLmFwcGVuZCgKICAgICAgICAgICAgICAgICAgICBMU1NDb250ZXh0SGludCgKICAgICAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9a2luZCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1jdHhfZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWN0eF9zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWN0eF9lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlPSJMT0NBVElPTiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1pdC5pdGVtX2lkLAogICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U9IkdBWkVUVEVFUiIsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQoKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIHJldHVybiBGYWxzZQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAABbLgAAAAAAAAAAAAAAAPC/"
				],
				[
					59,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA7NAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0LCBPcHRpb25hbAoKZnJvbSBzcGFjeS50b2tlbnMgaW1wb3J0IERvYywgU3BhbgoKZnJvbSBzaXRyZXBjMi5sc3MudHlwZWRlZnMgaW1wb3J0IEV2ZW50TWF0Y2gsIFBocmFzZU1hdGNoCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBMU1MgREFUQSBDT05UUkFDVFMgKFNUUlVDVFVSQUwsIENBTk9OSUNBTCkKIwojIElNUE9SVEFOVCBJTlZBUklBTlRTOgojIC0gUm9sZUNhbmRpZGF0ZXMgYXJlIHNlbWFudGljIG9ubHkgKEFDVE9SIC8gQUNUSU9OKQojIC0gTG9jYXRpb25zIGFyZSBORVZFUiByb2xlIGNhbmRpZGF0ZXMKIyAtIExvY2F0aW9ucyBleGlzdCBvbmx5IGFzIExvY2F0aW9uSXRlbXMgaW5zaWRlIExvY2F0aW9uU2VyaWVzCiMgLSBzZXJpZXNfaWQgYW5kIGl0ZW1faWQgYXJlIE9SRElOQUxTIExPQ0FMIFRPIEEgU0lOR0xFIEVWRU5UCiMgLSBDb250ZXh0IGlzIGF0dGFjaGVkIGF0IHRoZSBMT1dFU1QgREVGRU5TSUJMRSBTVFJVQ1RVUkFMIExFVkVMCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpAZGF0YWNsYXNzKGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKQpjbGFzcyBMU1NSb2xlQ2FuZGlkYXRlOgogICAgcm9sZV9raW5kOiBzdHIgICAgICAgICAgICAgICAgICMgQUNUT1IgLyBBQ1RJT04KICAgIHRleHQ6IHN0cgogICAgc3RhcnRfdG9rZW46IGludAogICAgZW5kX3Rva2VuOiBpbnQKICAgIG1hdGNoX3R5cGU6IHN0cgogICAgbmVnYXRlZDogYm9vbAogICAgdW5jZXJ0YWluOiBib29sCiAgICBpbnZvbHZlc19jb3JlZmVyZW5jZTogYm9vbAogICAgc2ltaWxhcml0eTogZmxvYXQKICAgIGV4cGxhbmF0aW9uOiBzdHIKCgpAZGF0YWNsYXNzKGZyb3plbj1UcnVlLCBzbG90cz1UcnVlKQpjbGFzcyBMU1NMb2NhdGlvbkl0ZW06CiAgICBpdGVtX2lkOiBpbnQgICAgICAgICAgICAgICAgICAjIG9yZGluYWwsIGxvY2FsIHRvIGV2ZW50CiAgICB0ZXh0OiBzdHIKICAgIHN0YXJ0X3Rva2VuOiBpbnQKICAgIGVuZF90b2tlbjogaW50CgoKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSwgc2xvdHM9VHJ1ZSkKY2xhc3MgTFNTTG9jYXRpb25TZXJpZXM6CiAgICBzZXJpZXNfaWQ6IGludCAgICAgICAgICAgICAgICAjIG9yZGluYWwsIGxvY2FsIHRvIGV2ZW50CiAgICBpdGVtczogbGlzdFtMU1NMb2NhdGlvbkl0ZW1dCiAgICBzdGFydF90b2tlbjogaW50CiAgICBlbmRfdG9rZW46IGludAoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUsIHNsb3RzPVRydWUpCmNsYXNzIExTU0NvbnRleHRIaW50OgogICAgY3R4X2tpbmQ6IHN0ciAgICAgICAgICAgICAgICAgIyBSRUdJT04gLyBHUk9VUCAvIERJUkVDVElPTiAvIGV0YwogICAgdGV4dDogc3RyCiAgICBzdGFydF90b2tlbjogT3B0aW9uYWxbaW50XQogICAgZW5kX3Rva2VuOiBPcHRpb25hbFtpbnRdCiAgICBzY29wZTogc3RyICAgICAgICAgICAgICAgICAgICAjIExPQ0FUSU9OIC8gU0VSSUVTIC8gRVZFTlQgLyBTRUNUSU9OIC8gUE9TVAogICAgdGFyZ2V0X2lkOiBPcHRpb25hbFtpbnRdICAgICAgIyBpdGVtX2lkIC8gc2VyaWVzX2lkIC8gZXZlbnRfaWQgLyBzZWN0aW9uX2lkIC8gTm9uZQogICAgc291cmNlOiBzdHIgICAgICAgICAgICAgICAgICAgIyBHQVpFVFRFRVIgfCBIT0xNRVMgfCBTWU5USEVUSUMKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFERElUSVZFIEFQSSAoU0FGRSkKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBAY2xhc3NtZXRob2QKICAgIGRlZiBmcm9tX2hvbG1lc19tYXRjaCgKICAgICAgICBjbHMsCiAgICAgICAgKiwKICAgICAgICByYXc6IGRpY3QsCiAgICAgICAgZG9jOiBEb2MsCiAgICApIC0+ICJMU1NDb250ZXh0SGludCI6CiAgICAgICAgIiIiCiAgICAgICAgQ29uc3RydWN0IGEgQ09OVEVYVCBoaW50IGRpcmVjdGx5IGZyb20gYSBIb2xtZXMgQ09OVEVYVDoqIG1hdGNoLgoKICAgICAgICBUaGlzIG1ldGhvZCBpcyBBRERJVElWRToKICAgICAgICAtIE5vIGV4aXN0aW5nIGNhbGxlcnMgYXJlIGFmZmVjdGVkCiAgICAgICAgLSBVc2VkIG9ubHkgYnkgdGhlIHBpcGVsaW5lCiAgICAgICAgLSBTY29wZSBkZWZhdWx0cyB0byBQT1NUOyBjb250ZXh0dWFsaXplKCkgd2lsbCByZWZpbmUKICAgICAgICAiIiIKCiAgICAgICAgbGFiZWwgPSByYXcuZ2V0KCJzZWFyY2hfcGhyYXNlX2xhYmVsIiwgIiIpCiAgICAgICAgYXNzZXJ0IGxhYmVsLnN0YXJ0c3dpdGgoIkNPTlRFWFQ6IiksIGxhYmVsCgogICAgICAgIHRva2VuX2FsaWdubWVudHMgPSByYXcuZ2V0KCJ3b3JkX21hdGNoZXMiKSBvciBbXQogICAgICAgIHN0YXJ0czogbGlzdFtpbnRdID0gW10KICAgICAgICBlbmRzOiBsaXN0W2ludF0gPSBbXQoKICAgICAgICBmb3IgdG0gaW4gdG9rZW5fYWxpZ25tZW50czoKICAgICAgICAgICAgc3RhcnQgPSB0bS5nZXQoImRvY3VtZW50X3Rva2VuX2luZGV4IikKICAgICAgICAgICAgbGVuZ3RoID0gdG0uZ2V0KCJkb2N1bWVudF90b2tlbl9sZW5ndGgiLCAxKQogICAgICAgICAgICBpZiBzdGFydCBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIHN0YXJ0cy5hcHBlbmQoc3RhcnQpCiAgICAgICAgICAgICAgICBlbmRzLmFwcGVuZChzdGFydCArIGxlbmd0aCkKCiAgICAgICAgaWYgc3RhcnRzOgogICAgICAgICAgICBzdGFydF90b2tlbiA9IG1pbihzdGFydHMpCiAgICAgICAgICAgIGVuZF90b2tlbiA9IG1heChlbmRzKQogICAgICAgICAgICB0ZXh0ID0gZG9jW3N0YXJ0X3Rva2VuOmVuZF90b2tlbl0udGV4dAogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHN0YXJ0X3Rva2VuID0gTm9uZQogICAgICAgICAgICBlbmRfdG9rZW4gPSBOb25lCiAgICAgICAgICAgIHRleHQgPSByYXcuZ2V0KCJzZWFyY2hfcGhyYXNlX3RleHQiLCAiIikgb3IgIiIKCiAgICAgICAgcmV0dXJuIGNscygKICAgICAgICAgICAgY3R4X2tpbmQ9bGFiZWxbbGVuKCJDT05URVhUOiIpOl0sCiAgICAgICAgICAgIHRleHQ9dGV4dCwKICAgICAgICAgICAgc3RhcnRfdG9rZW49c3RhcnRfdG9rZW4sCiAgICAgICAgICAgIGVuZF90b2tlbj1lbmRfdG9rZW4sCiAgICAgICAgICAgIHNjb3BlPSJQT1NUIiwKICAgICAgICAgICAgdGFyZ2V0X2lkPU5vbmUsCiAgICAgICAgICAgIHNvdXJjZT0iSE9MTUVTIiwKICAgICAgICApCgoKU0VSSUVTX0pPSU5fVE9LRU5TID0geyIsIiwgImFuZCIsICJvciIsICImIn0KCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFRPUC1MRVZFTCBBUEkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBzcGFuc19ieV9sYWJlbChkb2MsIGxhYmVsLCBncm91cDogc3RyID0gTm9uZSk6CiAgICBzb3VyY2UgPSBkb2MuZW50cyBpZiBncm91cCBpcyBOb25lIGVsc2UgZG9jLnNwYW5zLmdldChncm91cCwgW10pCiAgICByZXR1cm4gW3NwYW4gZm9yIHNwYW4gaW4gc291cmNlIGlmIHNwYW4ubGFiZWxfID09IGxhYmVsXQoKCmRlZiBsc3Nfc2NvcGVfZXZlbnQoCiAgICAqLAogICAgZG9jOiBEb2MsCiAgICBldmVudDogRXZlbnRNYXRjaCwKICAgIGV2ZW50X29yZGluYWw6IGludCwKICAgIHNlY3Rpb25faWQ6IGludCB8IE5vbmUgPSBOb25lLAopIC0+IHR1cGxlWwogICAgbGlzdFtMU1NSb2xlQ2FuZGlkYXRlXSwKICAgIGxpc3RbTFNTTG9jYXRpb25TZXJpZXNdLAogICAgbGlzdFtMU1NDb250ZXh0SGludF0sCl06CiAgICAiIiIKICAgIFBlcmZvcm0gU1RSVUNUVVJBTCBzY29waW5nIGZvciBhIHNpbmdsZSBIb2xtZXMgZXZlbnQuCiAgICAiIiIKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgRVZFTlQgV0lORE9XIChzZW50ZW5jZS1ib3VuZGVkKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgc2VudCA9IGRvY1tldmVudC5kb2Nfc3RhcnRfdG9rZW5faW5kZXhdLnNlbnQKICAgIGV2ZW50X3N0YXJ0ID0gc2VudC5zdGFydAogICAgZXZlbnRfZW5kID0gc2VudC5lbmQKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUk9MRSBDQU5ESURBVEVTCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICByb2xlX2NhbmRpZGF0ZXM6IGxpc3RbTFNTUm9sZUNhbmRpZGF0ZV0gPSBbXQoKICAgIGZvciB3bSBpbiBldmVudC5pdGVyX2NvbnRlbnRfd29yZHMoKToKICAgICAgICByayA9IF9pbmZlcl9yb2xlX2tpbmRfZnJvbV9wYXR0ZXJuX2VsZW1lbnQod20pCiAgICAgICAgaWYgcmsgaXMgTm9uZToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgcm9sZV9jYW5kaWRhdGVzLmFwcGVuZCgKICAgICAgICAgICAgTFNTUm9sZUNhbmRpZGF0ZSgKICAgICAgICAgICAgICAgIHJvbGVfa2luZD1yaywKICAgICAgICAgICAgICAgIHRleHQ9d20uZG9jdW1lbnRfcGhyYXNlIG9yIHdtLmRvY3VtZW50X3dvcmQsCiAgICAgICAgICAgICAgICBzdGFydF90b2tlbj13bS5maXJzdF9kb2N1bWVudF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgIGVuZF90b2tlbj13bS5sYXN0X2RvY3VtZW50X3Rva2VuX2luZGV4ICsgMSwKICAgICAgICAgICAgICAgIG1hdGNoX3R5cGU9d20ubWF0Y2hfdHlwZSwKICAgICAgICAgICAgICAgIG5lZ2F0ZWQ9d20ubmVnYXRlZCwKICAgICAgICAgICAgICAgIHVuY2VydGFpbj13bS51bmNlcnRhaW4sCiAgICAgICAgICAgICAgICBpbnZvbHZlc19jb3JlZmVyZW5jZT13bS5pbnZvbHZlc19jb3JlZmVyZW5jZSwKICAgICAgICAgICAgICAgIHNpbWlsYXJpdHk9d20uc2ltaWxhcml0eSwKICAgICAgICAgICAgICAgIGV4cGxhbmF0aW9uPXdtLmV4cGxhbmF0aW9uLAogICAgICAgICAgICApCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBMT0NBVElPTiBTRVJJRVMgKEVWRU5ULUxPQ0FMKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgbG9jX2VudHMgPSBbCiAgICAgICAgZSBmb3IgZSBpbiBkb2MuZW50cwogICAgICAgIGlmIGUubGFiZWxfID09ICJMT0NBVElPTiIKICAgICAgICBhbmQgX3NwYW5zX292ZXJsYXAoZS5zdGFydCwgZS5lbmQsIGV2ZW50X3N0YXJ0LCBldmVudF9lbmQpCiAgICBdCgogICAgbG9jX2VudHMuc29ydChrZXk9bGFtYmRhIGU6IGUuc3RhcnQpCgogICAgbG9jYXRpb25fc2VyaWVzOiBsaXN0W0xTU0xvY2F0aW9uU2VyaWVzXSA9IFtdCiAgICBjdXJyZW50X2l0ZW1zOiBsaXN0W0xTU0xvY2F0aW9uSXRlbV0gPSBbXQoKICAgIHNlcmllc19pZCA9IDAKICAgIGl0ZW1faWQgPSAwCgogICAgZm9yIGVudCBpbiBsb2NfZW50czoKICAgICAgICBpdGVtID0gTFNTTG9jYXRpb25JdGVtKAogICAgICAgICAgICBpdGVtX2lkPWl0ZW1faWQsCiAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgZW5kX3Rva2VuPWVudC5lbmQsCiAgICAgICAgKQogICAgICAgIGl0ZW1faWQgKz0gMQoKICAgICAgICBpZiBub3QgY3VycmVudF9pdGVtczoKICAgICAgICAgICAgY3VycmVudF9pdGVtcyA9IFtpdGVtXQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBnYXAgPSBkb2NbY3VycmVudF9pdGVtc1stMV0uZW5kX3Rva2VuIDogaXRlbS5zdGFydF90b2tlbl0KICAgICAgICBpZiBhbnkodG9rLnRleHQubG93ZXIoKSBpbiBTRVJJRVNfSk9JTl9UT0tFTlMgZm9yIHRvayBpbiBnYXApOgogICAgICAgICAgICBjdXJyZW50X2l0ZW1zLmFwcGVuZChpdGVtKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGxvY2F0aW9uX3Nlcmllcy5hcHBlbmQoCiAgICAgICAgICAgICAgICBMU1NMb2NhdGlvblNlcmllcygKICAgICAgICAgICAgICAgICAgICBzZXJpZXNfaWQ9c2VyaWVzX2lkLAogICAgICAgICAgICAgICAgICAgIGl0ZW1zPWN1cnJlbnRfaXRlbXMsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49Y3VycmVudF9pdGVtc1swXS5zdGFydF90b2tlbiwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49Y3VycmVudF9pdGVtc1stMV0uZW5kX3Rva2VuLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCiAgICAgICAgICAgIHNlcmllc19pZCArPSAxCiAgICAgICAgICAgIGN1cnJlbnRfaXRlbXMgPSBbaXRlbV0KCiAgICBpZiBjdXJyZW50X2l0ZW1zOgogICAgICAgIGxvY2F0aW9uX3Nlcmllcy5hcHBlbmQoCiAgICAgICAgICAgIExTU0xvY2F0aW9uU2VyaWVzKAogICAgICAgICAgICAgICAgc2VyaWVzX2lkPXNlcmllc19pZCwKICAgICAgICAgICAgICAgIGl0ZW1zPWN1cnJlbnRfaXRlbXMsCiAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1jdXJyZW50X2l0ZW1zWzBdLnN0YXJ0X3Rva2VuLAogICAgICAgICAgICAgICAgZW5kX3Rva2VuPWN1cnJlbnRfaXRlbXNbLTFdLmVuZF90b2tlbiwKICAgICAgICAgICAgKQogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgQ09OVEVYVCBISU5UUyAoR0FaRVRURUVSLUJBU0VEKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgY29udGV4dF9oaW50czogbGlzdFtMU1NDb250ZXh0SGludF0gPSBbXQoKICAgIGZvciBlbnQgaW4gZG9jLmVudHM6CiAgICAgICAgaWYgZW50LmxhYmVsXyBub3QgaW4geyJSRUdJT04iLCAiR1JPVVAiLCAiRElSRUNUSU9OIn06CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGF0dGFjaGVkID0gRmFsc2UKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExPQ0FUSU9OIChjb250YWluZWQtaW4taXRlbSkKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBmb3Igc2VyaWVzIGluIGxvY2F0aW9uX3NlcmllczoKICAgICAgICAgICAgZm9yIGl0ZW0gaW4gc2VyaWVzLml0ZW1zOgogICAgICAgICAgICAgICAgaWYgZW50LnN0YXJ0ID49IGl0ZW0uc3RhcnRfdG9rZW4gYW5kIGVudC5lbmQgPD0gaXRlbS5lbmRfdG9rZW46CiAgICAgICAgICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgIExTU0NvbnRleHRIaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9ZW50LmxhYmVsXywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9ZW50LnRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1lbnQuc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlPSJMT0NBVElPTiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQ9aXRlbS5pdGVtX2lkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGF0dGFjaGVkID0gVHJ1ZQoKICAgICAgICBpZiBhdHRhY2hlZDoKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExPQ0FUSU9OIChyZXRyb2FjdGl2ZSBzZXJpZXMgcXVhbGlmaWVyKQogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGF0dGFjaGVkID0gX2FwcGx5X3JldHJvYWN0aXZlX3Nlcmllc19xdWFsaWZpZXIoCiAgICAgICAgICAgIGRvYz1kb2MsCiAgICAgICAgICAgIGxvY2F0aW9uX3Nlcmllcz1sb2NhdGlvbl9zZXJpZXMsCiAgICAgICAgICAgIGN0eF9lbnQ9ZW50LAogICAgICAgICAgICBjb250ZXh0X2hpbnRzPWNvbnRleHRfaGludHMsCiAgICAgICAgKQogICAgICAgIGlmIGF0dGFjaGVkOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgU0VSSUVTCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgZm9yIHNlcmllcyBpbiBsb2NhdGlvbl9zZXJpZXM6CiAgICAgICAgICAgIGlmIF9zcGFuc19vdmVybGFwKGVudC5zdGFydCwgZW50LmVuZCwgc2VyaWVzLnN0YXJ0X3Rva2VuLCBzZXJpZXMuZW5kX3Rva2VuKToKICAgICAgICAgICAgICAgIGNvbnRleHRfaGludHMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIExTU0NvbnRleHRIaW50KAogICAgICAgICAgICAgICAgICAgICAgICBjdHhfa2luZD1lbnQubGFiZWxfLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1lbnQuc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1lbnQuZW5kLAogICAgICAgICAgICAgICAgICAgICAgICBzY29wZT0iU0VSSUVTIiwKICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPXNlcmllcy5zZXJpZXNfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZT0iR0FaRVRURUVSIiwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBhdHRhY2hlZCA9IFRydWUKCiAgICAgICAgaWYgYXR0YWNoZWQ6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBFVkVOVAogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGlmIF9zcGFuc19vdmVybGFwKGVudC5zdGFydCwgZW50LmVuZCwgZXZlbnRfc3RhcnQsIGV2ZW50X2VuZCk6CiAgICAgICAgICAgIGNvbnRleHRfaGludHMuYXBwZW5kKAogICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9ZW50LmxhYmVsXywKICAgICAgICAgICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICAgICAgICAgICAgICBzY29wZT0iRVZFTlQiLAogICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1ldmVudF9vcmRpbmFsLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZT0iR0FaRVRURUVSIiwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgU0VDVElPTiAvIFBPU1QKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBpZiBzZWN0aW9uX2lkIGlzIG5vdCBOb25lOgogICAgICAgICAgICBjb250ZXh0X2hpbnRzLmFwcGVuZCgKICAgICAgICAgICAgICAgIExTU0NvbnRleHRIaW50KAogICAgICAgICAgICAgICAgICAgIGN0eF9raW5kPWVudC5sYWJlbF8sCiAgICAgICAgICAgICAgICAgICAgdGV4dD1lbnQudGV4dCwKICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1lbnQuc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWVudC5lbmQsCiAgICAgICAgICAgICAgICAgICAgc2NvcGU9IlNFQ1RJT04iLAogICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZD1zZWN0aW9uX2lkLAogICAgICAgICAgICAgICAgICAgIHNvdXJjZT0iR0FaRVRURUVSIiwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbnRleHRfaGludHMuYXBwZW5kKAogICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgY3R4X2tpbmQ9ZW50LmxhYmVsXywKICAgICAgICAgICAgICAgICAgICB0ZXh0PWVudC50ZXh0LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWVudC5zdGFydCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZW50LmVuZCwKICAgICAgICAgICAgICAgICAgICBzY29wZT0iUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0X2lkPU5vbmUsCiAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCgogICAgcmV0dXJuIHJvbGVfY2FuZGlkYXRlcywgbG9jYXRpb25fc2VyaWVzLCBjb250ZXh0X2hpbnRzCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIRUxQRVJTCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX3NwYW5zX292ZXJsYXAoYTE6IGludCwgYTI6IGludCwgYjE6IGludCwgYjI6IGludCkgLT4gYm9vbDoKICAgIHJldHVybiBub3QgKGEyIDw9IGIxIG9yIGIyIDw9IGExKQoKCmRlZiBfaW5mZXJfcm9sZV9raW5kX2Zyb21fcGF0dGVybl9lbGVtZW50KHdtOiBQaHJhc2VNYXRjaCkgLT4gc3RyIHwgTm9uZToKICAgIG10ID0gKHdtLm1hdGNoX3R5cGUgb3IgIiIpLmxvd2VyKCkKCiAgICBpZiBtdCBpbiB7InN1YmplY3QiLCAiYWN0b3IiLCAib2JqZWN0IiwgImRvYmoiLCAicG9zc2Vzc29yIn06CiAgICAgICAgcmV0dXJuICJBQ1RPUiIKCiAgICBpZiBtdCBpbiB7InZlcmIiLCAiYWN0aW9uIn06CiAgICAgICAgcmV0dXJuICJBQ1RJT04iCgogICAgcmV0dXJuIE5vbmUKCgpkZWYgX2FwcGx5X3JldHJvYWN0aXZlX3Nlcmllc19xdWFsaWZpZXIoCiAgICAqLAogICAgZG9jOiBEb2MsCiAgICBsb2NhdGlvbl9zZXJpZXM6IGxpc3RbTFNTTG9jYXRpb25TZXJpZXNdLAogICAgY3R4X2VudDogU3BhbiwKICAgIGNvbnRleHRfaGludHM6IGxpc3RbTFNTQ29udGV4dEhpbnRdLAopIC0+IGJvb2w6CiAgICAiIiIKICAgIFJldHJvYWN0aXZlIFJFR0lPTi9HUk9VUC9ESVJFQ1RJT04gcXVhbGlmaWVycyBwYXJ0aXRpb24gYSBsb2NhdGlvbiBzZXJpZXMuCiAgICBFYWNoIGFwcGxpZXMgb25seSB0byBpdGVtcyBzaW5jZSB0aGUgcHJldmlvdXMgcXVhbGlmaWVyIG9mIHRoZSBzYW1lIGtpbmQuCiAgICAiIiIKCiAgICBraW5kID0gY3R4X2VudC5sYWJlbF8KICAgIGN0eF9zdGFydCA9IGN0eF9lbnQuc3RhcnQKICAgIGN0eF9lbmQgPSBjdHhfZW50LmVuZAoKICAgIGZvciBzZXJpZXMgaW4gbG9jYXRpb25fc2VyaWVzOgogICAgICAgIGl0ZW1zID0gc2VyaWVzLml0ZW1zCiAgICAgICAgaWYgbm90IGl0ZW1zOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBsYXN0X2l0ZW1fYmVmb3JlID0gTm9uZQogICAgICAgIGZvciBpdCBpbiBpdGVtczoKICAgICAgICAgICAgaWYgaXQuZW5kX3Rva2VuIDw9IGN0eF9zdGFydDoKICAgICAgICAgICAgICAgIGxhc3RfaXRlbV9iZWZvcmUgPSBpdAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgYnJlYWsKCiAgICAgICAgaWYgbGFzdF9pdGVtX2JlZm9yZSBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBzZXJpZXNfc3RhcnRzID0ge2l0LnN0YXJ0X3Rva2VuIGZvciBpdCBpbiBpdGVtc30KICAgICAgICBmb3IgZW50IGluIGRvYy5lbnRzOgogICAgICAgICAgICBpZiBlbnQubGFiZWxfICE9ICJMT0NBVElPTiI6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBsYXN0X2l0ZW1fYmVmb3JlLmVuZF90b2tlbiA8PSBlbnQuc3RhcnQgPCBjdHhfc3RhcnQ6CiAgICAgICAgICAgICAgICBpZiBlbnQuc3RhcnQgbm90IGluIHNlcmllc19zdGFydHM6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgICAgIGN1dG9mZiA9IHNlcmllcy5zdGFydF90b2tlbgogICAgICAgIGZvciBjaCBpbiBjb250ZXh0X2hpbnRzOgogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICBjaC5jdHhfa2luZCA9PSBraW5kCiAgICAgICAgICAgICAgICBhbmQgY2guc2NvcGUgPT0gIkxPQ0FUSU9OIgogICAgICAgICAgICAgICAgYW5kIGNoLnN0YXJ0X3Rva2VuIGlzIG5vdCBOb25lCiAgICAgICAgICAgICAgICBhbmQgY2guc3RhcnRfdG9rZW4gPCBjdHhfc3RhcnQKICAgICAgICAgICAgICAgIGFuZCBhbnkoaXQuaXRlbV9pZCA9PSBjaC50YXJnZXRfaWQgZm9yIGl0IGluIGl0ZW1zKQogICAgICAgICAgICApOgogICAgICAgICAgICAgICAgY3V0b2ZmID0gbWF4KGN1dG9mZiwgY2guc3RhcnRfdG9rZW4pCgogICAgICAgIGZvciBpdCBpbiBpdGVtczoKICAgICAgICAgICAgaWYgaXQuc3RhcnRfdG9rZW4gPj0gY3V0b2ZmIGFuZCBpdC5lbmRfdG9rZW4gPD0gY3R4X3N0YXJ0OgogICAgICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgTFNTQ29udGV4dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eF9raW5kPWtpbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9Y3R4X2VudC50ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1jdHhfc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1jdHhfZW5kLAogICAgICAgICAgICAgICAgICAgICAgICBzY29wZT0iTE9DQVRJT04iLAogICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQ9aXQuaXRlbV9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlPSJHQVpFVFRFRVIiLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKCiAgICAgICAgcmV0dXJuIFRydWUKCiAgICByZXR1cm4gRmFsc2UKAAAAAAAAAAA7NAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2zEAAAAAAADbMQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/lss/pipeline.py",
			"settings":
			{
				"buffer_size": 9780,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAApCQAAAAAAAAPJAAAIyBzcmMvc2l0cmVwYzIvbHNzL3BpcGVsaW5lLnB5Cgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZWZhdWx0ZGljdApmcm9tIHR5cGluZyBpbXBvcnQgU2VxdWVuY2UsIE9wdGlvbmFsCgppbXBvcnQgc3FsaXRlMwpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jCmZyb20gaG9sbWVzX2V4dHJhY3RvciBpbXBvcnQgTWFuYWdlcgoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKZnJvbSBzaXRyZXBjMi5sc3MuYm9vdHN0cmFwIGltcG9ydCBidWlsZF9tYW5hZ2VyCmZyb20gc2l0cmVwYzIubHNzLnBocmFzZXMgaW1wb3J0IHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzCmZyb20gc2l0cmVwYzIubHNzLnJ1bGVyIGltcG9ydCBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiCmZyb20gc2l0cmVwYzIubHNzLnNlY3Rpb25pbmcgaW1wb3J0IHNwbGl0X2ludG9fc2VjdGlvbnMKZnJvbSBzaXRyZXBjMi5sc3MuZXZlbnRzIGltcG9ydCAoCiAgICBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoLAogICAgYnVpbGRfbHNzX2V2ZW50cywKKQpmcm9tIHNpdHJlcGMyLmxzcy5wZXJzaXN0IGltcG9ydCAoCiAgICBjcmVhdGVfbHNzX3J1biwKICAgIGNvbXBsZXRlX2xzc19ydW4sCiAgICBwZXJzaXN0X3NlY3Rpb24sCiAgICBwZXJzaXN0X2V2ZW50LAogICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZSwKICAgIHBlcnNpc3RfbG9jYXRpb25fc2VyaWVzLAogICAgcGVyc2lzdF9jb250ZXh0X2hpbnQsCikKZnJvbSBzaXRyZXBjMi5sc3MudHlwZWRlZnMgaW1wb3J0IEV2ZW50TWF0Y2gKZnJvbSBzaXRyZXBjMi5sc3MuY29udGV4dHVhbGl6ZSBpbXBvcnQgY29udGV4dHVhbGl6ZQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTkxQIElOSVRJQUxJWkFUSU9OCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgYnVpbGRfaG9sbWVzX2FuZF9ubHAoKSAtPiBNYW5hZ2VyOgogICAgbWFuYWdlciA9IGJ1aWxkX21hbmFnZXIoKQogICAgbWFuYWdlci5ubHAgPSBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiKG1hbmFnZXIubmxwKQogICAgcmVnaXN0ZXJfc2VhcmNoX3BocmFzZXMobWFuYWdlcikKICAgIHJldHVybiBtYW5hZ2VyCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBMU1MgUElQRUxJTkUKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBydW5fbHNzX3BpcGVsaW5lKAogICAgaW5nZXN0X3Bvc3RzOiBTZXF1ZW5jZVtkaWN0XSwKICAgICosCiAgICBtYW5hZ2VyOiBPcHRpb25hbFtNYW5hZ2VyXSA9IE5vbmUsCiAgICBiYXRjaF9zaXplOiBpbnQgPSA4LAogICAgbWluX3NpbWlsYXJpdHk6IGZsb2F0ID0gMC4wLAogICAgcmVwcm9jZXNzOiBib29sID0gRmFsc2UsCiAgICBrZWVwX25vbnNwYXRpYWw6IGJvb2wgPSBGYWxzZSwKKSAtPiBOb25lOgogICAgaWYgbm90IGluZ2VzdF9wb3N0czoKICAgICAgICByZXR1cm4KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSW5jcmVtZW50YWwgZXhlY3V0aW9uIGd1YXJkCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBpZiBub3QgcmVwcm9jZXNzOgogICAgICAgIGluZ2VzdF9pZHMgPSBbcFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHNdCgogICAgICAgIHdpdGggc3FsaXRlMy5jb25uZWN0KHJlY29yZHNfZGJfcGF0aCgpKSBhcyBjb246CiAgICAgICAgICAgIGNvbi5leGVjdXRlKCJQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047IikKICAgICAgICAgICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgZiIiIgogICAgICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIGluZ2VzdF9wb3N0X2lkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgQU5EIGluZ2VzdF9wb3N0X2lkIElOICh7IiwiLmpvaW4oIj8iIGZvciBfIGluIGluZ2VzdF9pZHMpfSkKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIGluZ2VzdF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICBjb21wbGV0ZWRfaWRzID0ge3Jvd1swXSBmb3Igcm93IGluIHJvd3N9CiAgICAgICAgaW5nZXN0X3Bvc3RzID0gW3AgZm9yIHAgaW4gaW5nZXN0X3Bvc3RzIGlmIHBbImlkIl0gbm90IGluIGNvbXBsZXRlZF9pZHNdCgogICAgICAgIGlmIG5vdCBpbmdlc3RfcG9zdHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBOTFAgLyBIb2xtZXMgc2V0dXAKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGlmIG1hbmFnZXIgaXMgTm9uZToKICAgICAgICBtYW5hZ2VyID0gYnVpbGRfaG9sbWVzX2FuZF9ubHAoKQoKICAgIG5scCA9IG1hbmFnZXIubmxwCgogICAgZG9jczogZGljdFtpbnQsIERvY10gPSB7fQogICAgZm9yIHBpZCwgZG9jIGluIHppcCgKICAgICAgICAocFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHMpLAogICAgICAgIG5scC5waXBlKChwWyJ0ZXh0Il0gZm9yIHAgaW4gaW5nZXN0X3Bvc3RzKSwgYmF0Y2hfc2l6ZT1iYXRjaF9zaXplKSwKICAgICk6CiAgICAgICAgZG9jc1twaWRdID0gZG9jCgogICAgbWFuYWdlci5yZWdpc3Rlcl9zZXJpYWxpemVkX2RvY3VtZW50cygKICAgICAgICB7c3RyKHBpZCk6IGRvYy50b19ieXRlcygpIGZvciBwaWQsIGRvYyBpbiBkb2NzLml0ZW1zKCl9CiAgICApCgogICAgcmF3X21hdGNoZXMgPSBtYW5hZ2VyLm1hdGNoKCkKICAgIG1hdGNoZXNfYnlfcG9zdDogZGljdFtpbnQsIGxpc3RbZGljdF1dID0gZGVmYXVsdGRpY3QobGlzdCkKCiAgICBmb3IgbSBpbiByYXdfbWF0Y2hlczoKICAgICAgICBsYWJlbCA9IG0uZ2V0KCJkb2N1bWVudCIpIG9yIG0uZ2V0KCJkb2N1bWVudF9sYWJlbCIpCiAgICAgICAgaWYgbGFiZWwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1hdGNoZXNfYnlfcG9zdFtpbnQobGFiZWwpXS5hcHBlbmQobSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUGVyLXBvc3QgZXhlY3V0aW9uCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBmb3IgcG9zdCBpbiBpbmdlc3RfcG9zdHM6CiAgICAgICAgaW5nZXN0X3Bvc3RfaWQgPSBwb3N0WyJpZCJdCiAgICAgICAgZG9jID0gZG9jcy5nZXQoaW5nZXN0X3Bvc3RfaWQpCiAgICAgICAgaWYgZG9jIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxzc19ydW5faWQ6IE9wdGlvbmFsW2ludF0gPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgbHNzX3J1bl9pZCA9IGNyZWF0ZV9sc3NfcnVuKAogICAgICAgICAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgICAgICAgICBlbmdpbmU9ImhvbG1lcyIsCiAgICAgICAgICAgICAgICBtb2RlbD1ubHAubWV0YS5nZXQoIm5hbWUiKSwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgQnVpbGQgRXZlbnRNYXRjaCBvYmplY3RzCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgZXZlbnRfbWF0Y2hlczogbGlzdFtFdmVudE1hdGNoXSA9IFtdCgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgcmF3IGluIGVudW1lcmF0ZShtYXRjaGVzX2J5X3Bvc3QuZ2V0KGluZ2VzdF9wb3N0X2lkLCBbXSkpOgogICAgICAgICAgICAgICAgc2ltaWxhcml0eSA9IGZsb2F0KHJhdy5nZXQoIm92ZXJhbGxfc2ltaWxhcml0eV9tZWFzdXJlIiwgMS4wKSkKICAgICAgICAgICAgICAgIGlmIHNpbWlsYXJpdHkgPCBtaW5fc2ltaWxhcml0eToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQgPSBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoKHJhdykKICAgICAgICAgICAgICAgIHRleHQgPSByYXcuZ2V0KCJzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50Iikgb3IgZG9jW3N0YXJ0OmVuZF0udGV4dAoKICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIEV2ZW50TWF0Y2goCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2lkPWYie2luZ2VzdF9wb3N0X2lkfTp7b3JkaW5hbH0iLAogICAgICAgICAgICAgICAgICAgICAgICBwb3N0X2lkPXN0cihpbmdlc3RfcG9zdF9pZCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXJhdy5nZXQoImxhYmVsIiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfcGhyYXNlX3RleHQ9cmF3LmdldCgic2VhcmNoX3BocmFzZV90ZXh0IiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50PXRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJhbGxfc2ltaWxhcml0eT1zaW1pbGFyaXR5LAogICAgICAgICAgICAgICAgICAgICAgICBuZWdhdGVkPWJvb2wocmF3LmdldCgibmVnYXRlZCIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ib29sKHJhdy5nZXQoInVuY2VydGFpbiIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGludm9sdmVzX2NvcmVmZXJlbmNlPWJvb2wocmF3LmdldCgiaW52b2x2ZXNfY29yZWZlcmVuY2UiLCBGYWxzZSkpLAogICAgICAgICAgICAgICAgICAgICAgICBkb2Nfc3RhcnRfdG9rZW5faW5kZXg9c3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY19lbmRfdG9rZW5faW5kZXg9ZW5kLAogICAgICAgICAgICAgICAgICAgICAgICByYXdfbWF0Y2g9cmF3LCAgIyBwcm92ZW5hbmNlIG9ubHkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBTdHJ1Y3R1cmFsIHNjb3BpbmcgKyB2YWxpZGF0aW9uCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgbHNzX2V2ZW50cywgcmVqZWN0ZWRfbm9uc3BhdGlhbCA9IGJ1aWxkX2xzc19ldmVudHMoCiAgICAgICAgICAgICAgICBkb2M9ZG9jLAogICAgICAgICAgICAgICAgZXZlbnRfbWF0Y2hlcz1ldmVudF9tYXRjaGVzLAogICAgICAgICAgICAgICAgY29sbGVjdF9ub25zcGF0aWFsPWtlZXBfbm9uc3BhdGlhbCwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyBJZiB0aGUgcG9zdCBwcm9kdWNlcyBubyB2YWxpZCBldmVudHMg4oaSIHNraXAgZW50aXJlbHkKICAgICAgICAgICAgaWYgbm90IGxzc19ldmVudHM6CiAgICAgICAgICAgICAgICBjb21wbGV0ZV9sc3NfcnVuKGxzc19ydW5faWQpCiAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgU2VjdGlvbnMgKHBlcnNpc3QgT05MWSBpZiB1c2VkKQogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIHNlY3Rpb25zID0gc3BsaXRfaW50b19zZWN0aW9ucyhwb3N0WyJ0ZXh0Il0pCiAgICAgICAgICAgIHNlY3Rpb25faWRfYnlfb3JkaW5hbDogZGljdFtpbnQsIGludF0gPSB7fQoKICAgICAgICAgICAgIyBDdXJyZW50IGludmFyaWFudDogYWxsIGV2ZW50cyBpbiBzZWN0aW9uIDAKICAgICAgICAgICAgdXNlZF9zZWN0aW9uX29yZGluYWxzID0gezB9CgogICAgICAgICAgICBmb3Igc2VjIGluIHNlY3Rpb25zOgogICAgICAgICAgICAgICAgaWYgc2VjLm9yZGluYWwgbm90IGluIHVzZWRfc2VjdGlvbl9vcmRpbmFsczoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHNlY3Rpb25faWRfYnlfb3JkaW5hbFtzZWMub3JkaW5hbF0gPSBwZXJzaXN0X3NlY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgICAgIHRleHQ9c2VjLnRleHQsCiAgICAgICAgICAgICAgICAgICAgb3JkaW5hbD1zZWMub3JkaW5hbCwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIENvbnRleHR1YWxpemF0aW9uIChNQU5EQVRPUlkpCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgc2VjdGlvbl9vcmRpbmFscyA9IHNvcnRlZChzZWN0aW9uX2lkX2J5X29yZGluYWwua2V5cygpKQogICAgICAgICAgICBldmVudF9vcmRpbmFsc19ieV9zZWN0aW9uID0gezA6IGxpc3QocmFuZ2UobGVuKGxzc19ldmVudHMpKSl9CgogICAgICAgICAgICBmb3IgaWR4LCAoZXZlbnQsIHJvbGVzLCBzZXJpZXNfbGlzdCwgaGludHMpIGluIGVudW1lcmF0ZShsc3NfZXZlbnRzKToKICAgICAgICAgICAgICAgIGxzc19ldmVudHNbaWR4XSA9ICgKICAgICAgICAgICAgICAgICAgICBldmVudCwKICAgICAgICAgICAgICAgICAgICByb2xlcywKICAgICAgICAgICAgICAgICAgICBzZXJpZXNfbGlzdCwKICAgICAgICAgICAgICAgICAgICBjb250ZXh0dWFsaXplKAogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzPWhpbnRzLAogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uX29yZGluYWxzPXNlY3Rpb25fb3JkaW5hbHMsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X29yZGluYWxzX2J5X3NlY3Rpb249ZXZlbnRfb3JkaW5hbHNfYnlfc2VjdGlvbiwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgUGVyc2lzdGVuY2UKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIGhpbnRzKSBpbiBlbnVtZXJhdGUobHNzX2V2ZW50cyk6CiAgICAgICAgICAgICAgICBzZWN0aW9uX2lkID0gc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmdldCgwKQoKICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZCA9IHBlcnNpc3RfZXZlbnQoCiAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgICAgIHNlY3Rpb25faWQ9c2VjdGlvbl9pZCwKICAgICAgICAgICAgICAgICAgICBldmVudF91aWQ9ZXZlbnQuZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw9ZXZlbnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3BocmFzZT1ldmVudC5zZWFyY2hfcGhyYXNlX3RleHQsCiAgICAgICAgICAgICAgICAgICAgdGV4dD1ldmVudC5zZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWV2ZW50LmRvY19zdGFydF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZXZlbnQuZG9jX2VuZF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBvcmRpbmFsPW9yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcml0eT1ldmVudC5vdmVyYWxsX3NpbWlsYXJpdHksCiAgICAgICAgICAgICAgICAgICAgbmVnYXRlZD1ldmVudC5uZWdhdGVkLAogICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ldmVudC51bmNlcnRhaW4sCiAgICAgICAgICAgICAgICAgICAgaW52b2x2ZXNfY29yZWZlcmVuY2U9ZXZlbnQuaW52b2x2ZXNfY29yZWZlcmVuY2UsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgZm9yIHJjIGluIHJvbGVzOgogICAgICAgICAgICAgICAgICAgIHBlcnNpc3Rfcm9sZV9jYW5kaWRhdGUobHNzX2V2ZW50X2lkPWxzc19ldmVudF9pZCwgcmM9cmMpCgogICAgICAgICAgICAgICAgc2VyaWVzX2lkX21hcCA9IHt9CiAgICAgICAgICAgICAgICBpdGVtX2lkX21hcCA9IHt9CgogICAgICAgICAgICAgICAgZm9yIHNlcmllcyBpbiBzZXJpZXNfbGlzdDoKICAgICAgICAgICAgICAgICAgICBtYXBwaW5nID0gcGVyc2lzdF9sb2NhdGlvbl9zZXJpZXMoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZD1sc3NfZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcz1zZXJpZXMsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHNlcmllc19pZF9tYXBbc2VyaWVzLnNlcmllc19pZF0gPSBsaXN0KG1hcHBpbmcudmFsdWVzKCkpWzBdCiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZF9tYXAudXBkYXRlKG1hcHBpbmcpCgogICAgICAgICAgICAgICAgZm9yIGhpbnQgaW4gaGludHM6CiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdF9jb250ZXh0X2hpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgaGludD1oaW50LAogICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXNfaWRfbWFwPXNlcmllc19pZF9tYXAsCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1faWRfbWFwPWl0ZW1faWRfbWFwLAogICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgIGNvbXBsZXRlX2xzc19ydW4obHNzX3J1bl9pZCkKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcmFpc2UK",
					"AQAAAAAAAAABAAAAAAAAAAAAAAANJAAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACkJAAAIyBzcmMvc2l0cmVwYzIvbHNzL3BpcGVsaW5lLnB5Cgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZWZhdWx0ZGljdApmcm9tIHR5cGluZyBpbXBvcnQgU2VxdWVuY2UsIE9wdGlvbmFsCgppbXBvcnQgc3FsaXRlMwpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jCmZyb20gaG9sbWVzX2V4dHJhY3RvciBpbXBvcnQgTWFuYWdlcgoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKZnJvbSBzaXRyZXBjMi5sc3MuYm9vdHN0cmFwIGltcG9ydCBidWlsZF9tYW5hZ2VyCmZyb20gc2l0cmVwYzIubHNzLnBocmFzZXMgaW1wb3J0IHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzCmZyb20gc2l0cmVwYzIubHNzLnJ1bGVyIGltcG9ydCBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiCmZyb20gc2l0cmVwYzIubHNzLnNlY3Rpb25pbmcgaW1wb3J0IHNwbGl0X2ludG9fc2VjdGlvbnMKZnJvbSBzaXRyZXBjMi5sc3MuZXZlbnRzIGltcG9ydCAoCiAgICBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoLAogICAgYnVpbGRfbHNzX2V2ZW50cywKKQpmcm9tIHNpdHJlcGMyLmxzcy5wZXJzaXN0IGltcG9ydCAoCiAgICBjcmVhdGVfbHNzX3J1biwKICAgIGNvbXBsZXRlX2xzc19ydW4sCiAgICBwZXJzaXN0X3NlY3Rpb24sCiAgICBwZXJzaXN0X2V2ZW50LAogICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZSwKICAgIHBlcnNpc3RfbG9jYXRpb25fc2VyaWVzLAogICAgcGVyc2lzdF9jb250ZXh0X2hpbnQsCikKZnJvbSBzaXRyZXBjMi5sc3MudHlwZWRlZnMgaW1wb3J0IEV2ZW50TWF0Y2gKZnJvbSBzaXRyZXBjMi5sc3MuY29udGV4dHVhbGl6ZSBpbXBvcnQgY29udGV4dHVhbGl6ZQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTkxQIElOSVRJQUxJWkFUSU9OCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgYnVpbGRfaG9sbWVzX2FuZF9ubHAoKSAtPiBNYW5hZ2VyOgogICAgbWFuYWdlciA9IGJ1aWxkX21hbmFnZXIoKQogICAgbWFuYWdlci5ubHAgPSBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiKG1hbmFnZXIubmxwKQogICAgcmVnaXN0ZXJfc2VhcmNoX3BocmFzZXMobWFuYWdlcikKICAgIHJldHVybiBtYW5hZ2VyCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBMU1MgUElQRUxJTkUKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBydW5fbHNzX3BpcGVsaW5lKAogICAgaW5nZXN0X3Bvc3RzOiBTZXF1ZW5jZVtkaWN0XSwKICAgICosCiAgICBtYW5hZ2VyOiBPcHRpb25hbFtNYW5hZ2VyXSA9IE5vbmUsCiAgICBiYXRjaF9zaXplOiBpbnQgPSA4LAogICAgbWluX3NpbWlsYXJpdHk6IGZsb2F0ID0gMC4wLAogICAgcmVwcm9jZXNzOiBib29sID0gRmFsc2UsCiAgICBrZWVwX25vbnNwYXRpYWw6IGJvb2wgPSBGYWxzZSwKKSAtPiBOb25lOgogICAgaWYgbm90IGluZ2VzdF9wb3N0czoKICAgICAgICByZXR1cm4KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSW5jcmVtZW50YWwgZXhlY3V0aW9uIGd1YXJkCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBpZiBub3QgcmVwcm9jZXNzOgogICAgICAgIGluZ2VzdF9pZHMgPSBbcFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHNdCgogICAgICAgIHdpdGggc3FsaXRlMy5jb25uZWN0KHJlY29yZHNfZGJfcGF0aCgpKSBhcyBjb246CiAgICAgICAgICAgIGNvbi5leGVjdXRlKCJQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047IikKICAgICAgICAgICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgZiIiIgogICAgICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIGluZ2VzdF9wb3N0X2lkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgQU5EIGluZ2VzdF9wb3N0X2lkIElOICh7IiwiLmpvaW4oIj8iIGZvciBfIGluIGluZ2VzdF9pZHMpfSkKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIGluZ2VzdF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICBjb21wbGV0ZWRfaWRzID0ge3Jvd1swXSBmb3Igcm93IGluIHJvd3N9CiAgICAgICAgaW5nZXN0X3Bvc3RzID0gW3AgZm9yIHAgaW4gaW5nZXN0X3Bvc3RzIGlmIHBbImlkIl0gbm90IGluIGNvbXBsZXRlZF9pZHNdCgogICAgICAgIGlmIG5vdCBpbmdlc3RfcG9zdHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBOTFAgLyBIb2xtZXMgc2V0dXAKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGlmIG1hbmFnZXIgaXMgTm9uZToKICAgICAgICBtYW5hZ2VyID0gYnVpbGRfaG9sbWVzX2FuZF9ubHAoKQoKICAgIG5scCA9IG1hbmFnZXIubmxwCgogICAgZG9jczogZGljdFtpbnQsIERvY10gPSB7fQogICAgZm9yIHBpZCwgZG9jIGluIHppcCgKICAgICAgICAocFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHMpLAogICAgICAgIG5scC5waXBlKChwWyJ0ZXh0Il0gZm9yIHAgaW4gaW5nZXN0X3Bvc3RzKSwgYmF0Y2hfc2l6ZT1iYXRjaF9zaXplKSwKICAgICk6CiAgICAgICAgZG9jc1twaWRdID0gZG9jCgogICAgbWFuYWdlci5yZWdpc3Rlcl9zZXJpYWxpemVkX2RvY3VtZW50cygKICAgICAgICB7c3RyKHBpZCk6IGRvYy50b19ieXRlcygpIGZvciBwaWQsIGRvYyBpbiBkb2NzLml0ZW1zKCl9CiAgICApCgogICAgcmF3X21hdGNoZXMgPSBtYW5hZ2VyLm1hdGNoKCkKICAgIG1hdGNoZXNfYnlfcG9zdDogZGljdFtpbnQsIGxpc3RbZGljdF1dID0gZGVmYXVsdGRpY3QobGlzdCkKCiAgICBmb3IgbSBpbiByYXdfbWF0Y2hlczoKICAgICAgICBsYWJlbCA9IG0uZ2V0KCJkb2N1bWVudCIpIG9yIG0uZ2V0KCJkb2N1bWVudF9sYWJlbCIpCiAgICAgICAgaWYgbGFiZWwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1hdGNoZXNfYnlfcG9zdFtpbnQobGFiZWwpXS5hcHBlbmQobSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUGVyLXBvc3QgZXhlY3V0aW9uCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBmb3IgcG9zdCBpbiBpbmdlc3RfcG9zdHM6CiAgICAgICAgaW5nZXN0X3Bvc3RfaWQgPSBwb3N0WyJpZCJdCiAgICAgICAgZG9jID0gZG9jcy5nZXQoaW5nZXN0X3Bvc3RfaWQpCiAgICAgICAgaWYgZG9jIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxzc19ydW5faWQ6IE9wdGlvbmFsW2ludF0gPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgbHNzX3J1bl9pZCA9IGNyZWF0ZV9sc3NfcnVuKAogICAgICAgICAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgICAgICAgICBlbmdpbmU9ImhvbG1lcyIsCiAgICAgICAgICAgICAgICBtb2RlbD1ubHAubWV0YS5nZXQoIm5hbWUiKSwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgQnVpbGQgRXZlbnRNYXRjaCBvYmplY3RzCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgZXZlbnRfbWF0Y2hlczogbGlzdFtFdmVudE1hdGNoXSA9IFtdCgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgcmF3IGluIGVudW1lcmF0ZShtYXRjaGVzX2J5X3Bvc3QuZ2V0KGluZ2VzdF9wb3N0X2lkLCBbXSkpOgogICAgICAgICAgICAgICAgc2ltaWxhcml0eSA9IGZsb2F0KHJhdy5nZXQoIm92ZXJhbGxfc2ltaWxhcml0eV9tZWFzdXJlIiwgMS4wKSkKICAgICAgICAgICAgICAgIGlmIHNpbWlsYXJpdHkgPCBtaW5fc2ltaWxhcml0eToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQgPSBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoKHJhdykKICAgICAgICAgICAgICAgIHRleHQgPSByYXcuZ2V0KCJzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50Iikgb3IgZG9jW3N0YXJ0OmVuZF0udGV4dAoKICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIEV2ZW50TWF0Y2goCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2lkPWYie2luZ2VzdF9wb3N0X2lkfTp7b3JkaW5hbH0iLAogICAgICAgICAgICAgICAgICAgICAgICBwb3N0X2lkPXN0cihpbmdlc3RfcG9zdF9pZCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXJhdy5nZXQoImxhYmVsIiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfcGhyYXNlX3RleHQ9cmF3LmdldCgic2VhcmNoX3BocmFzZV90ZXh0IiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50PXRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJhbGxfc2ltaWxhcml0eT1zaW1pbGFyaXR5LAogICAgICAgICAgICAgICAgICAgICAgICBuZWdhdGVkPWJvb2wocmF3LmdldCgibmVnYXRlZCIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ib29sKHJhdy5nZXQoInVuY2VydGFpbiIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGludm9sdmVzX2NvcmVmZXJlbmNlPWJvb2wocmF3LmdldCgiaW52b2x2ZXNfY29yZWZlcmVuY2UiLCBGYWxzZSkpLAogICAgICAgICAgICAgICAgICAgICAgICBkb2Nfc3RhcnRfdG9rZW5faW5kZXg9c3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY19lbmRfdG9rZW5faW5kZXg9ZW5kLAogICAgICAgICAgICAgICAgICAgICAgICByYXdfbWF0Y2g9cmF3LAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFN0cnVjdHVyYWwgc2NvcGluZyArIHZhbGlkYXRpb24KICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBsc3NfZXZlbnRzLCByZWplY3RlZF9ub25zcGF0aWFsID0gYnVpbGRfbHNzX2V2ZW50cygKICAgICAgICAgICAgICAgIGRvYz1kb2MsCiAgICAgICAgICAgICAgICBldmVudF9tYXRjaGVzPWV2ZW50X21hdGNoZXMsCiAgICAgICAgICAgICAgICBjb2xsZWN0X25vbnNwYXRpYWw9a2VlcF9ub25zcGF0aWFsLAogICAgICAgICAgICApCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBTZWN0aW9ucyAocGVyc2lzdCByZWdhcmRsZXNzIG9mIGV2ZW50cykKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBzZWN0aW9ucyA9IHNwbGl0X2ludG9fc2VjdGlvbnMocG9zdFsidGV4dCJdKQogICAgICAgICAgICBzZWN0aW9uX2lkX2J5X29yZGluYWw6IGRpY3RbaW50LCBpbnRdID0ge30KCiAgICAgICAgICAgIHVzZWRfc2VjdGlvbl9vcmRpbmFscyA9IHswfQoKICAgICAgICAgICAgZm9yIHNlYyBpbiBzZWN0aW9uczoKICAgICAgICAgICAgICAgIGlmIHNlYy5vcmRpbmFsIG5vdCBpbiB1c2VkX3NlY3Rpb25fb3JkaW5hbHM6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBzZWN0aW9uX2lkX2J5X29yZGluYWxbc2VjLm9yZGluYWxdID0gcGVyc2lzdF9zZWN0aW9uKAogICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICBpbmdlc3RfcG9zdF9pZD1pbmdlc3RfcG9zdF9pZCwKICAgICAgICAgICAgICAgICAgICB0ZXh0PXNlYy50ZXh0LAogICAgICAgICAgICAgICAgICAgIG9yZGluYWw9c2VjLm9yZGluYWwsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAjIElmIG5vIHZhbGlkIGV2ZW50cywgY29tcGxldGUgcnVuIGJ1dCBETyBOT1Qgc2tpcCBwZXJzaXN0ZW5jZSBlbnRpcmVseQogICAgICAgICAgICBpZiBub3QgbHNzX2V2ZW50czoKICAgICAgICAgICAgICAgIGNvbXBsZXRlX2xzc19ydW4obHNzX3J1bl9pZCkKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBDb250ZXh0dWFsaXphdGlvbgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIHNlY3Rpb25fb3JkaW5hbHMgPSBzb3J0ZWQoc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmtleXMoKSkKICAgICAgICAgICAgZXZlbnRfb3JkaW5hbHNfYnlfc2VjdGlvbiA9IHswOiBsaXN0KHJhbmdlKGxlbihsc3NfZXZlbnRzKSkpfQoKICAgICAgICAgICAgZm9yIGlkeCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIGhpbnRzKSBpbiBlbnVtZXJhdGUobHNzX2V2ZW50cyk6CiAgICAgICAgICAgICAgICBsc3NfZXZlbnRzW2lkeF0gPSAoCiAgICAgICAgICAgICAgICAgICAgZXZlbnQsCiAgICAgICAgICAgICAgICAgICAgcm9sZXMsCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzX2xpc3QsCiAgICAgICAgICAgICAgICAgICAgY29udGV4dHVhbGl6ZSgKICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dF9oaW50cz1oaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbl9vcmRpbmFscz1zZWN0aW9uX29yZGluYWxzLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudF9vcmRpbmFsc19ieV9zZWN0aW9uPWV2ZW50X29yZGluYWxzX2J5X3NlY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFBlcnNpc3RlbmNlCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgZXZlbnRfaWRfbWFwOiBkaWN0W2ludCwgaW50XSA9IHt9CgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIGhpbnRzKSBpbiBlbnVtZXJhdGUobHNzX2V2ZW50cyk6CiAgICAgICAgICAgICAgICBzZWN0aW9uX2lkID0gc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmdldCgwKQoKICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZCA9IHBlcnNpc3RfZXZlbnQoCiAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgICAgIHNlY3Rpb25faWQ9c2VjdGlvbl9pZCwKICAgICAgICAgICAgICAgICAgICBldmVudF91aWQ9ZXZlbnQuZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw9ZXZlbnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3BocmFzZT1ldmVudC5zZWFyY2hfcGhyYXNlX3RleHQsCiAgICAgICAgICAgICAgICAgICAgdGV4dD1ldmVudC5zZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWV2ZW50LmRvY19zdGFydF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZXZlbnQuZG9jX2VuZF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBvcmRpbmFsPW9yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcml0eT1ldmVudC5vdmVyYWxsX3NpbWlsYXJpdHksCiAgICAgICAgICAgICAgICAgICAgbmVnYXRlZD1ldmVudC5uZWdhdGVkLAogICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ldmVudC51bmNlcnRhaW4sCiAgICAgICAgICAgICAgICAgICAgaW52b2x2ZXNfY29yZWZlcmVuY2U9ZXZlbnQuaW52b2x2ZXNfY29yZWZlcmVuY2UsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgZXZlbnRfaWRfbWFwW29yZGluYWxdID0gbHNzX2V2ZW50X2lkCgogICAgICAgICAgICAgICAgZm9yIHJjIGluIHJvbGVzOgogICAgICAgICAgICAgICAgICAgIHBlcnNpc3Rfcm9sZV9jYW5kaWRhdGUobHNzX2V2ZW50X2lkPWxzc19ldmVudF9pZCwgcmM9cmMpCgogICAgICAgICAgICAgICAgc2VyaWVzX2lkX21hcCA9IHt9CiAgICAgICAgICAgICAgICBpdGVtX2lkX21hcCA9IHt9CgogICAgICAgICAgICAgICAgZm9yIHNlcmllcyBpbiBzZXJpZXNfbGlzdDoKICAgICAgICAgICAgICAgICAgICBtYXBwaW5nID0gcGVyc2lzdF9sb2NhdGlvbl9zZXJpZXMoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZD1sc3NfZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcz1zZXJpZXMsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHNlcmllc19pZF9tYXBbc2VyaWVzLnNlcmllc19pZF0gPSBsaXN0KG1hcHBpbmcudmFsdWVzKCkpWzBdCiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZF9tYXAudXBkYXRlKG1hcHBpbmcpCgogICAgICAgICAgICAgICAgZm9yIGhpbnQgaW4gaGludHM6CiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdF9jb250ZXh0X2hpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgaGludD1oaW50LAogICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXNfaWRfbWFwPXNlcmllc19pZF9tYXAsCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1faWRfbWFwPWl0ZW1faWRfbWFwLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudF9pZF9tYXA9ZXZlbnRfaWRfbWFwLAogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uX2lkX21hcD1zZWN0aW9uX2lkX2J5X29yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgY29tcGxldGVfbHNzX3J1bihsc3NfcnVuX2lkKQoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByYWlzZQoAAAAAAAAAAKQkAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApCQAAAAAAACkJAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACkJAAAIyBzcmMvc2l0cmVwYzIvbHNzL3BpcGVsaW5lLnB5Cgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZWZhdWx0ZGljdApmcm9tIHR5cGluZyBpbXBvcnQgU2VxdWVuY2UsIE9wdGlvbmFsCgppbXBvcnQgc3FsaXRlMwpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jCmZyb20gaG9sbWVzX2V4dHJhY3RvciBpbXBvcnQgTWFuYWdlcgoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKZnJvbSBzaXRyZXBjMi5sc3MuYm9vdHN0cmFwIGltcG9ydCBidWlsZF9tYW5hZ2VyCmZyb20gc2l0cmVwYzIubHNzLnBocmFzZXMgaW1wb3J0IHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzCmZyb20gc2l0cmVwYzIubHNzLnJ1bGVyIGltcG9ydCBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiCmZyb20gc2l0cmVwYzIubHNzLnNlY3Rpb25pbmcgaW1wb3J0IHNwbGl0X2ludG9fc2VjdGlvbnMKZnJvbSBzaXRyZXBjMi5sc3MuZXZlbnRzIGltcG9ydCAoCiAgICBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoLAogICAgYnVpbGRfbHNzX2V2ZW50cywKKQpmcm9tIHNpdHJlcGMyLmxzcy5wZXJzaXN0IGltcG9ydCAoCiAgICBjcmVhdGVfbHNzX3J1biwKICAgIGNvbXBsZXRlX2xzc19ydW4sCiAgICBwZXJzaXN0X3NlY3Rpb24sCiAgICBwZXJzaXN0X2V2ZW50LAogICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZSwKICAgIHBlcnNpc3RfbG9jYXRpb25fc2VyaWVzLAogICAgcGVyc2lzdF9jb250ZXh0X2hpbnQsCikKZnJvbSBzaXRyZXBjMi5sc3MudHlwZWRlZnMgaW1wb3J0IEV2ZW50TWF0Y2gKZnJvbSBzaXRyZXBjMi5sc3MuY29udGV4dHVhbGl6ZSBpbXBvcnQgY29udGV4dHVhbGl6ZQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTkxQIElOSVRJQUxJWkFUSU9OCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgYnVpbGRfaG9sbWVzX2FuZF9ubHAoKSAtPiBNYW5hZ2VyOgogICAgbWFuYWdlciA9IGJ1aWxkX21hbmFnZXIoKQogICAgbWFuYWdlci5ubHAgPSBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiKG1hbmFnZXIubmxwKQogICAgcmVnaXN0ZXJfc2VhcmNoX3BocmFzZXMobWFuYWdlcikKICAgIHJldHVybiBtYW5hZ2VyCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBMU1MgUElQRUxJTkUKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBydW5fbHNzX3BpcGVsaW5lKAogICAgaW5nZXN0X3Bvc3RzOiBTZXF1ZW5jZVtkaWN0XSwKICAgICosCiAgICBtYW5hZ2VyOiBPcHRpb25hbFtNYW5hZ2VyXSA9IE5vbmUsCiAgICBiYXRjaF9zaXplOiBpbnQgPSA4LAogICAgbWluX3NpbWlsYXJpdHk6IGZsb2F0ID0gMC4wLAogICAgcmVwcm9jZXNzOiBib29sID0gRmFsc2UsCiAgICBrZWVwX25vbnNwYXRpYWw6IGJvb2wgPSBGYWxzZSwKKSAtPiBOb25lOgogICAgaWYgbm90IGluZ2VzdF9wb3N0czoKICAgICAgICByZXR1cm4KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSW5jcmVtZW50YWwgZXhlY3V0aW9uIGd1YXJkCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBpZiBub3QgcmVwcm9jZXNzOgogICAgICAgIGluZ2VzdF9pZHMgPSBbcFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHNdCgogICAgICAgIHdpdGggc3FsaXRlMy5jb25uZWN0KHJlY29yZHNfZGJfcGF0aCgpKSBhcyBjb246CiAgICAgICAgICAgIGNvbi5leGVjdXRlKCJQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047IikKICAgICAgICAgICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgZiIiIgogICAgICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIGluZ2VzdF9wb3N0X2lkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgQU5EIGluZ2VzdF9wb3N0X2lkIElOICh7IiwiLmpvaW4oIj8iIGZvciBfIGluIGluZ2VzdF9pZHMpfSkKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIGluZ2VzdF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICBjb21wbGV0ZWRfaWRzID0ge3Jvd1swXSBmb3Igcm93IGluIHJvd3N9CiAgICAgICAgaW5nZXN0X3Bvc3RzID0gW3AgZm9yIHAgaW4gaW5nZXN0X3Bvc3RzIGlmIHBbImlkIl0gbm90IGluIGNvbXBsZXRlZF9pZHNdCgogICAgICAgIGlmIG5vdCBpbmdlc3RfcG9zdHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBOTFAgLyBIb2xtZXMgc2V0dXAKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGlmIG1hbmFnZXIgaXMgTm9uZToKICAgICAgICBtYW5hZ2VyID0gYnVpbGRfaG9sbWVzX2FuZF9ubHAoKQoKICAgIG5scCA9IG1hbmFnZXIubmxwCgogICAgZG9jczogZGljdFtpbnQsIERvY10gPSB7fQogICAgZm9yIHBpZCwgZG9jIGluIHppcCgKICAgICAgICAocFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHMpLAogICAgICAgIG5scC5waXBlKChwWyJ0ZXh0Il0gZm9yIHAgaW4gaW5nZXN0X3Bvc3RzKSwgYmF0Y2hfc2l6ZT1iYXRjaF9zaXplKSwKICAgICk6CiAgICAgICAgZG9jc1twaWRdID0gZG9jCgogICAgbWFuYWdlci5yZWdpc3Rlcl9zZXJpYWxpemVkX2RvY3VtZW50cygKICAgICAgICB7c3RyKHBpZCk6IGRvYy50b19ieXRlcygpIGZvciBwaWQsIGRvYyBpbiBkb2NzLml0ZW1zKCl9CiAgICApCgogICAgcmF3X21hdGNoZXMgPSBtYW5hZ2VyLm1hdGNoKCkKICAgIG1hdGNoZXNfYnlfcG9zdDogZGljdFtpbnQsIGxpc3RbZGljdF1dID0gZGVmYXVsdGRpY3QobGlzdCkKCiAgICBmb3IgbSBpbiByYXdfbWF0Y2hlczoKICAgICAgICBsYWJlbCA9IG0uZ2V0KCJkb2N1bWVudCIpIG9yIG0uZ2V0KCJkb2N1bWVudF9sYWJlbCIpCiAgICAgICAgaWYgbGFiZWwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1hdGNoZXNfYnlfcG9zdFtpbnQobGFiZWwpXS5hcHBlbmQobSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUGVyLXBvc3QgZXhlY3V0aW9uCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBmb3IgcG9zdCBpbiBpbmdlc3RfcG9zdHM6CiAgICAgICAgaW5nZXN0X3Bvc3RfaWQgPSBwb3N0WyJpZCJdCiAgICAgICAgZG9jID0gZG9jcy5nZXQoaW5nZXN0X3Bvc3RfaWQpCiAgICAgICAgaWYgZG9jIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxzc19ydW5faWQ6IE9wdGlvbmFsW2ludF0gPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgbHNzX3J1bl9pZCA9IGNyZWF0ZV9sc3NfcnVuKAogICAgICAgICAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgICAgICAgICBlbmdpbmU9ImhvbG1lcyIsCiAgICAgICAgICAgICAgICBtb2RlbD1ubHAubWV0YS5nZXQoIm5hbWUiKSwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgQnVpbGQgRXZlbnRNYXRjaCBvYmplY3RzCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgZXZlbnRfbWF0Y2hlczogbGlzdFtFdmVudE1hdGNoXSA9IFtdCgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgcmF3IGluIGVudW1lcmF0ZShtYXRjaGVzX2J5X3Bvc3QuZ2V0KGluZ2VzdF9wb3N0X2lkLCBbXSkpOgogICAgICAgICAgICAgICAgc2ltaWxhcml0eSA9IGZsb2F0KHJhdy5nZXQoIm92ZXJhbGxfc2ltaWxhcml0eV9tZWFzdXJlIiwgMS4wKSkKICAgICAgICAgICAgICAgIGlmIHNpbWlsYXJpdHkgPCBtaW5fc2ltaWxhcml0eToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQgPSBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoKHJhdykKICAgICAgICAgICAgICAgIHRleHQgPSByYXcuZ2V0KCJzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50Iikgb3IgZG9jW3N0YXJ0OmVuZF0udGV4dAoKICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIEV2ZW50TWF0Y2goCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2lkPWYie2luZ2VzdF9wb3N0X2lkfTp7b3JkaW5hbH0iLAogICAgICAgICAgICAgICAgICAgICAgICBwb3N0X2lkPXN0cihpbmdlc3RfcG9zdF9pZCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXJhdy5nZXQoImxhYmVsIiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfcGhyYXNlX3RleHQ9cmF3LmdldCgic2VhcmNoX3BocmFzZV90ZXh0IiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50PXRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJhbGxfc2ltaWxhcml0eT1zaW1pbGFyaXR5LAogICAgICAgICAgICAgICAgICAgICAgICBuZWdhdGVkPWJvb2wocmF3LmdldCgibmVnYXRlZCIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ib29sKHJhdy5nZXQoInVuY2VydGFpbiIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGludm9sdmVzX2NvcmVmZXJlbmNlPWJvb2wocmF3LmdldCgiaW52b2x2ZXNfY29yZWZlcmVuY2UiLCBGYWxzZSkpLAogICAgICAgICAgICAgICAgICAgICAgICBkb2Nfc3RhcnRfdG9rZW5faW5kZXg9c3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY19lbmRfdG9rZW5faW5kZXg9ZW5kLAogICAgICAgICAgICAgICAgICAgICAgICByYXdfbWF0Y2g9cmF3LAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFN0cnVjdHVyYWwgc2NvcGluZyArIHZhbGlkYXRpb24KICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBsc3NfZXZlbnRzLCByZWplY3RlZF9ub25zcGF0aWFsID0gYnVpbGRfbHNzX2V2ZW50cygKICAgICAgICAgICAgICAgIGRvYz1kb2MsCiAgICAgICAgICAgICAgICBldmVudF9tYXRjaGVzPWV2ZW50X21hdGNoZXMsCiAgICAgICAgICAgICAgICBjb2xsZWN0X25vbnNwYXRpYWw9a2VlcF9ub25zcGF0aWFsLAogICAgICAgICAgICApCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBTZWN0aW9ucyAocGVyc2lzdCByZWdhcmRsZXNzIG9mIGV2ZW50cykKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBzZWN0aW9ucyA9IHNwbGl0X2ludG9fc2VjdGlvbnMocG9zdFsidGV4dCJdKQogICAgICAgICAgICBzZWN0aW9uX2lkX2J5X29yZGluYWw6IGRpY3RbaW50LCBpbnRdID0ge30KCiAgICAgICAgICAgIHVzZWRfc2VjdGlvbl9vcmRpbmFscyA9IHswfQoKICAgICAgICAgICAgZm9yIHNlYyBpbiBzZWN0aW9uczoKICAgICAgICAgICAgICAgIGlmIHNlYy5vcmRpbmFsIG5vdCBpbiB1c2VkX3NlY3Rpb25fb3JkaW5hbHM6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBzZWN0aW9uX2lkX2J5X29yZGluYWxbc2VjLm9yZGluYWxdID0gcGVyc2lzdF9zZWN0aW9uKAogICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICBpbmdlc3RfcG9zdF9pZD1pbmdlc3RfcG9zdF9pZCwKICAgICAgICAgICAgICAgICAgICB0ZXh0PXNlYy50ZXh0LAogICAgICAgICAgICAgICAgICAgIG9yZGluYWw9c2VjLm9yZGluYWwsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAjIElmIG5vIHZhbGlkIGV2ZW50cywgY29tcGxldGUgcnVuIGJ1dCBETyBOT1Qgc2tpcCBwZXJzaXN0ZW5jZSBlbnRpcmVseQogICAgICAgICAgICBpZiBub3QgbHNzX2V2ZW50czoKICAgICAgICAgICAgICAgIGNvbXBsZXRlX2xzc19ydW4obHNzX3J1bl9pZCkKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBDb250ZXh0dWFsaXphdGlvbgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIHNlY3Rpb25fb3JkaW5hbHMgPSBzb3J0ZWQoc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmtleXMoKSkKICAgICAgICAgICAgZXZlbnRfb3JkaW5hbHNfYnlfc2VjdGlvbiA9IHswOiBsaXN0KHJhbmdlKGxlbihsc3NfZXZlbnRzKSkpfQoKICAgICAgICAgICAgZm9yIGlkeCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIGhpbnRzKSBpbiBlbnVtZXJhdGUobHNzX2V2ZW50cyk6CiAgICAgICAgICAgICAgICBsc3NfZXZlbnRzW2lkeF0gPSAoCiAgICAgICAgICAgICAgICAgICAgZXZlbnQsCiAgICAgICAgICAgICAgICAgICAgcm9sZXMsCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzX2xpc3QsCiAgICAgICAgICAgICAgICAgICAgY29udGV4dHVhbGl6ZSgKICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dF9oaW50cz1oaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbl9vcmRpbmFscz1zZWN0aW9uX29yZGluYWxzLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudF9vcmRpbmFsc19ieV9zZWN0aW9uPWV2ZW50X29yZGluYWxzX2J5X3NlY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFBlcnNpc3RlbmNlCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgZXZlbnRfaWRfbWFwOiBkaWN0W2ludCwgaW50XSA9IHt9CgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIGhpbnRzKSBpbiBlbnVtZXJhdGUobHNzX2V2ZW50cyk6CiAgICAgICAgICAgICAgICBzZWN0aW9uX2lkID0gc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmdldCgwKQoKICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZCA9IHBlcnNpc3RfZXZlbnQoCiAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgICAgIHNlY3Rpb25faWQ9c2VjdGlvbl9pZCwKICAgICAgICAgICAgICAgICAgICBldmVudF91aWQ9ZXZlbnQuZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw9ZXZlbnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3BocmFzZT1ldmVudC5zZWFyY2hfcGhyYXNlX3RleHQsCiAgICAgICAgICAgICAgICAgICAgdGV4dD1ldmVudC5zZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWV2ZW50LmRvY19zdGFydF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZXZlbnQuZG9jX2VuZF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBvcmRpbmFsPW9yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcml0eT1ldmVudC5vdmVyYWxsX3NpbWlsYXJpdHksCiAgICAgICAgICAgICAgICAgICAgbmVnYXRlZD1ldmVudC5uZWdhdGVkLAogICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ldmVudC51bmNlcnRhaW4sCiAgICAgICAgICAgICAgICAgICAgaW52b2x2ZXNfY29yZWZlcmVuY2U9ZXZlbnQuaW52b2x2ZXNfY29yZWZlcmVuY2UsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgZXZlbnRfaWRfbWFwW29yZGluYWxdID0gbHNzX2V2ZW50X2lkCgogICAgICAgICAgICAgICAgZm9yIHJjIGluIHJvbGVzOgogICAgICAgICAgICAgICAgICAgIHBlcnNpc3Rfcm9sZV9jYW5kaWRhdGUobHNzX2V2ZW50X2lkPWxzc19ldmVudF9pZCwgcmM9cmMpCgogICAgICAgICAgICAgICAgc2VyaWVzX2lkX21hcCA9IHt9CiAgICAgICAgICAgICAgICBpdGVtX2lkX21hcCA9IHt9CgogICAgICAgICAgICAgICAgZm9yIHNlcmllcyBpbiBzZXJpZXNfbGlzdDoKICAgICAgICAgICAgICAgICAgICBtYXBwaW5nID0gcGVyc2lzdF9sb2NhdGlvbl9zZXJpZXMoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZD1sc3NfZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcz1zZXJpZXMsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHNlcmllc19pZF9tYXBbc2VyaWVzLnNlcmllc19pZF0gPSBsaXN0KG1hcHBpbmcudmFsdWVzKCkpWzBdCiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZF9tYXAudXBkYXRlKG1hcHBpbmcpCgogICAgICAgICAgICAgICAgZm9yIGhpbnQgaW4gaGludHM6CiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdF9jb250ZXh0X2hpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgaGludD1oaW50LAogICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXNfaWRfbWFwPXNlcmllc19pZF9tYXAsCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1faWRfbWFwPWl0ZW1faWRfbWFwLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudF9pZF9tYXA9ZXZlbnRfaWRfbWFwLAogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uX2lkX21hcD1zZWN0aW9uX2lkX2J5X29yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgY29tcGxldGVfbHNzX3J1bihsc3NfcnVuX2lkKQoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByYWlzZQoAAAAAAAAAAKQkAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApCQAAAAAAACkJAAAAAAAAAAAAAAAAPC/"
				],
				[
					118,
					1,
					"left_delete",
					null,
					"AQAAAH8SAAAAAAAAfxIAAAAAAAAFAAAAbGFiZWw",
					"AQAAAAAAAAABAAAAhBIAAAAAAAB/EgAAAAAAAAAAAAAAAPC/"
				],
				[
					119,
					1,
					"insert",
					{
						"characters": "sear"
					},
					"BAAAAH8SAAAAAAAAgBIAAAAAAAAAAAAAgBIAAAAAAACBEgAAAAAAAAAAAACBEgAAAAAAAIISAAAAAAAAAAAAAIISAAAAAAAAgxIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfxIAAAAAAAB/EgAAAAAAAAAAAAAAAPC/"
				],
				[
					120,
					1,
					"insert_completion",
					{
						"completion": "search_phrase_text",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "search_phrase_text"
					},
					"AgAAAH8SAAAAAAAAfxIAAAAAAAAEAAAAc2Vhcn8SAAAAAAAAkRIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAgxIAAAAAAACDEgAAAAAAAAAAAAAAAPC/"
				],
				[
					121,
					4,
					"left_delete",
					null,
					"BAAAAJASAAAAAAAAkBIAAAAAAAABAAAAdI8SAAAAAAAAjxIAAAAAAAABAAAAeI4SAAAAAAAAjhIAAAAAAAABAAAAZY0SAAAAAAAAjRIAAAAAAAABAAAAdA",
					"AQAAAAAAAAABAAAAkRIAAAAAAACREgAAAAAAAAAAAAAAAPC/"
				],
				[
					122,
					1,
					"insert",
					{
						"characters": "label"
					},
					"BQAAAI0SAAAAAAAAjhIAAAAAAAAAAAAAjhIAAAAAAACPEgAAAAAAAAAAAACPEgAAAAAAAJASAAAAAAAAAAAAAJASAAAAAAAAkRIAAAAAAAAAAAAAkRIAAAAAAACSEgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjRIAAAAAAACNEgAAAAAAAAAAAAAAAPC/"
				],
				[
					125,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACyJAAAIyBzcmMvc2l0cmVwYzIvbHNzL3BpcGVsaW5lLnB5Cgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZWZhdWx0ZGljdApmcm9tIHR5cGluZyBpbXBvcnQgU2VxdWVuY2UsIE9wdGlvbmFsCgppbXBvcnQgc3FsaXRlMwpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jCmZyb20gaG9sbWVzX2V4dHJhY3RvciBpbXBvcnQgTWFuYWdlcgoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKZnJvbSBzaXRyZXBjMi5sc3MuYm9vdHN0cmFwIGltcG9ydCBidWlsZF9tYW5hZ2VyCmZyb20gc2l0cmVwYzIubHNzLnBocmFzZXMgaW1wb3J0IHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzCmZyb20gc2l0cmVwYzIubHNzLnJ1bGVyIGltcG9ydCBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiCmZyb20gc2l0cmVwYzIubHNzLnNlY3Rpb25pbmcgaW1wb3J0IHNwbGl0X2ludG9fc2VjdGlvbnMKZnJvbSBzaXRyZXBjMi5sc3MuZXZlbnRzIGltcG9ydCAoCiAgICBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoLAogICAgYnVpbGRfbHNzX2V2ZW50cywKKQpmcm9tIHNpdHJlcGMyLmxzcy5wZXJzaXN0IGltcG9ydCAoCiAgICBjcmVhdGVfbHNzX3J1biwKICAgIGNvbXBsZXRlX2xzc19ydW4sCiAgICBwZXJzaXN0X3NlY3Rpb24sCiAgICBwZXJzaXN0X2V2ZW50LAogICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZSwKICAgIHBlcnNpc3RfbG9jYXRpb25fc2VyaWVzLAogICAgcGVyc2lzdF9jb250ZXh0X2hpbnQsCikKZnJvbSBzaXRyZXBjMi5sc3MudHlwZWRlZnMgaW1wb3J0IEV2ZW50TWF0Y2gKZnJvbSBzaXRyZXBjMi5sc3MuY29udGV4dHVhbGl6ZSBpbXBvcnQgY29udGV4dHVhbGl6ZQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTkxQIElOSVRJQUxJWkFUSU9OCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgYnVpbGRfaG9sbWVzX2FuZF9ubHAoKSAtPiBNYW5hZ2VyOgogICAgbWFuYWdlciA9IGJ1aWxkX21hbmFnZXIoKQogICAgbWFuYWdlci5ubHAgPSBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiKG1hbmFnZXIubmxwKQogICAgcmVnaXN0ZXJfc2VhcmNoX3BocmFzZXMobWFuYWdlcikKICAgIHJldHVybiBtYW5hZ2VyCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBMU1MgUElQRUxJTkUKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBydW5fbHNzX3BpcGVsaW5lKAogICAgaW5nZXN0X3Bvc3RzOiBTZXF1ZW5jZVtkaWN0XSwKICAgICosCiAgICBtYW5hZ2VyOiBPcHRpb25hbFtNYW5hZ2VyXSA9IE5vbmUsCiAgICBiYXRjaF9zaXplOiBpbnQgPSA4LAogICAgbWluX3NpbWlsYXJpdHk6IGZsb2F0ID0gMC4wLAogICAgcmVwcm9jZXNzOiBib29sID0gRmFsc2UsCiAgICBrZWVwX25vbnNwYXRpYWw6IGJvb2wgPSBGYWxzZSwKKSAtPiBOb25lOgogICAgaWYgbm90IGluZ2VzdF9wb3N0czoKICAgICAgICByZXR1cm4KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSW5jcmVtZW50YWwgZXhlY3V0aW9uIGd1YXJkCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBpZiBub3QgcmVwcm9jZXNzOgogICAgICAgIGluZ2VzdF9pZHMgPSBbcFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHNdCgogICAgICAgIHdpdGggc3FsaXRlMy5jb25uZWN0KHJlY29yZHNfZGJfcGF0aCgpKSBhcyBjb246CiAgICAgICAgICAgIGNvbi5leGVjdXRlKCJQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047IikKICAgICAgICAgICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgZiIiIgogICAgICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIGluZ2VzdF9wb3N0X2lkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgQU5EIGluZ2VzdF9wb3N0X2lkIElOICh7IiwiLmpvaW4oIj8iIGZvciBfIGluIGluZ2VzdF9pZHMpfSkKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIGluZ2VzdF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICBjb21wbGV0ZWRfaWRzID0ge3Jvd1swXSBmb3Igcm93IGluIHJvd3N9CiAgICAgICAgaW5nZXN0X3Bvc3RzID0gW3AgZm9yIHAgaW4gaW5nZXN0X3Bvc3RzIGlmIHBbImlkIl0gbm90IGluIGNvbXBsZXRlZF9pZHNdCgogICAgICAgIGlmIG5vdCBpbmdlc3RfcG9zdHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBOTFAgLyBIb2xtZXMgc2V0dXAKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGlmIG1hbmFnZXIgaXMgTm9uZToKICAgICAgICBtYW5hZ2VyID0gYnVpbGRfaG9sbWVzX2FuZF9ubHAoKQoKICAgIG5scCA9IG1hbmFnZXIubmxwCgogICAgZG9jczogZGljdFtpbnQsIERvY10gPSB7fQogICAgZm9yIHBpZCwgZG9jIGluIHppcCgKICAgICAgICAocFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHMpLAogICAgICAgIG5scC5waXBlKChwWyJ0ZXh0Il0gZm9yIHAgaW4gaW5nZXN0X3Bvc3RzKSwgYmF0Y2hfc2l6ZT1iYXRjaF9zaXplKSwKICAgICk6CiAgICAgICAgZG9jc1twaWRdID0gZG9jCgogICAgbWFuYWdlci5yZWdpc3Rlcl9zZXJpYWxpemVkX2RvY3VtZW50cygKICAgICAgICB7c3RyKHBpZCk6IGRvYy50b19ieXRlcygpIGZvciBwaWQsIGRvYyBpbiBkb2NzLml0ZW1zKCl9CiAgICApCgogICAgcmF3X21hdGNoZXMgPSBtYW5hZ2VyLm1hdGNoKCkKICAgIG1hdGNoZXNfYnlfcG9zdDogZGljdFtpbnQsIGxpc3RbZGljdF1dID0gZGVmYXVsdGRpY3QobGlzdCkKCiAgICBmb3IgbSBpbiByYXdfbWF0Y2hlczoKICAgICAgICBsYWJlbCA9IG0uZ2V0KCJkb2N1bWVudCIpIG9yIG0uZ2V0KCJkb2N1bWVudF9sYWJlbCIpCiAgICAgICAgaWYgbGFiZWwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1hdGNoZXNfYnlfcG9zdFtpbnQobGFiZWwpXS5hcHBlbmQobSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUGVyLXBvc3QgZXhlY3V0aW9uCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBmb3IgcG9zdCBpbiBpbmdlc3RfcG9zdHM6CiAgICAgICAgaW5nZXN0X3Bvc3RfaWQgPSBwb3N0WyJpZCJdCiAgICAgICAgZG9jID0gZG9jcy5nZXQoaW5nZXN0X3Bvc3RfaWQpCiAgICAgICAgaWYgZG9jIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxzc19ydW5faWQ6IE9wdGlvbmFsW2ludF0gPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgbHNzX3J1bl9pZCA9IGNyZWF0ZV9sc3NfcnVuKAogICAgICAgICAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgICAgICAgICBlbmdpbmU9ImhvbG1lcyIsCiAgICAgICAgICAgICAgICBtb2RlbD1ubHAubWV0YS5nZXQoIm5hbWUiKSwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgQnVpbGQgRXZlbnRNYXRjaCBvYmplY3RzCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgZXZlbnRfbWF0Y2hlczogbGlzdFtFdmVudE1hdGNoXSA9IFtdCgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgcmF3IGluIGVudW1lcmF0ZShtYXRjaGVzX2J5X3Bvc3QuZ2V0KGluZ2VzdF9wb3N0X2lkLCBbXSkpOgogICAgICAgICAgICAgICAgc2ltaWxhcml0eSA9IGZsb2F0KHJhdy5nZXQoIm92ZXJhbGxfc2ltaWxhcml0eV9tZWFzdXJlIiwgMS4wKSkKICAgICAgICAgICAgICAgIGlmIHNpbWlsYXJpdHkgPCBtaW5fc2ltaWxhcml0eToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQgPSBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoKHJhdykKICAgICAgICAgICAgICAgIHRleHQgPSByYXcuZ2V0KCJzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50Iikgb3IgZG9jW3N0YXJ0OmVuZF0udGV4dAoKICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIEV2ZW50TWF0Y2goCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2lkPWYie2luZ2VzdF9wb3N0X2lkfTp7b3JkaW5hbH0iLAogICAgICAgICAgICAgICAgICAgICAgICBwb3N0X2lkPXN0cihpbmdlc3RfcG9zdF9pZCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXJhdy5nZXQoInNlYXJjaF9waHJhc2VfbGFiZWwiLCAiIiksCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF9waHJhc2VfdGV4dD1yYXcuZ2V0KCJzZWFyY2hfcGhyYXNlX3RleHQiLCAiIiksCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlc193aXRoaW5fZG9jdW1lbnQ9dGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmFsbF9zaW1pbGFyaXR5PXNpbWlsYXJpdHksCiAgICAgICAgICAgICAgICAgICAgICAgIG5lZ2F0ZWQ9Ym9vbChyYXcuZ2V0KCJuZWdhdGVkIiwgRmFsc2UpKSwKICAgICAgICAgICAgICAgICAgICAgICAgdW5jZXJ0YWluPWJvb2wocmF3LmdldCgidW5jZXJ0YWluIiwgRmFsc2UpKSwKICAgICAgICAgICAgICAgICAgICAgICAgaW52b2x2ZXNfY29yZWZlcmVuY2U9Ym9vbChyYXcuZ2V0KCJpbnZvbHZlc19jb3JlZmVyZW5jZSIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY19zdGFydF90b2tlbl9pbmRleD1zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgZG9jX2VuZF90b2tlbl9pbmRleD1lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHJhd19tYXRjaD1yYXcsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgU3RydWN0dXJhbCBzY29waW5nICsgdmFsaWRhdGlvbgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIGxzc19ldmVudHMsIHJlamVjdGVkX25vbnNwYXRpYWwgPSBidWlsZF9sc3NfZXZlbnRzKAogICAgICAgICAgICAgICAgZG9jPWRvYywKICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXM9ZXZlbnRfbWF0Y2hlcywKICAgICAgICAgICAgICAgIGNvbGxlY3Rfbm9uc3BhdGlhbD1rZWVwX25vbnNwYXRpYWwsCiAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFNlY3Rpb25zIChwZXJzaXN0IHJlZ2FyZGxlc3Mgb2YgZXZlbnRzKQogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIHNlY3Rpb25zID0gc3BsaXRfaW50b19zZWN0aW9ucyhwb3N0WyJ0ZXh0Il0pCiAgICAgICAgICAgIHNlY3Rpb25faWRfYnlfb3JkaW5hbDogZGljdFtpbnQsIGludF0gPSB7fQoKICAgICAgICAgICAgdXNlZF9zZWN0aW9uX29yZGluYWxzID0gezB9CgogICAgICAgICAgICBmb3Igc2VjIGluIHNlY3Rpb25zOgogICAgICAgICAgICAgICAgaWYgc2VjLm9yZGluYWwgbm90IGluIHVzZWRfc2VjdGlvbl9vcmRpbmFsczoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHNlY3Rpb25faWRfYnlfb3JkaW5hbFtzZWMub3JkaW5hbF0gPSBwZXJzaXN0X3NlY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgICAgIHRleHQ9c2VjLnRleHQsCiAgICAgICAgICAgICAgICAgICAgb3JkaW5hbD1zZWMub3JkaW5hbCwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgSWYgbm8gdmFsaWQgZXZlbnRzLCBjb21wbGV0ZSBydW4gYnV0IERPIE5PVCBza2lwIHBlcnNpc3RlbmNlIGVudGlyZWx5CiAgICAgICAgICAgIGlmIG5vdCBsc3NfZXZlbnRzOgogICAgICAgICAgICAgICAgY29tcGxldGVfbHNzX3J1bihsc3NfcnVuX2lkKQogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIENvbnRleHR1YWxpemF0aW9uCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgc2VjdGlvbl9vcmRpbmFscyA9IHNvcnRlZChzZWN0aW9uX2lkX2J5X29yZGluYWwua2V5cygpKQogICAgICAgICAgICBldmVudF9vcmRpbmFsc19ieV9zZWN0aW9uID0gezA6IGxpc3QocmFuZ2UobGVuKGxzc19ldmVudHMpKSl9CgogICAgICAgICAgICBmb3IgaWR4LCAoZXZlbnQsIHJvbGVzLCBzZXJpZXNfbGlzdCwgaGludHMpIGluIGVudW1lcmF0ZShsc3NfZXZlbnRzKToKICAgICAgICAgICAgICAgIGxzc19ldmVudHNbaWR4XSA9ICgKICAgICAgICAgICAgICAgICAgICBldmVudCwKICAgICAgICAgICAgICAgICAgICByb2xlcywKICAgICAgICAgICAgICAgICAgICBzZXJpZXNfbGlzdCwKICAgICAgICAgICAgICAgICAgICBjb250ZXh0dWFsaXplKAogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzPWhpbnRzLAogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uX29yZGluYWxzPXNlY3Rpb25fb3JkaW5hbHMsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X29yZGluYWxzX2J5X3NlY3Rpb249ZXZlbnRfb3JkaW5hbHNfYnlfc2VjdGlvbiwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgUGVyc2lzdGVuY2UKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBldmVudF9pZF9tYXA6IGRpY3RbaW50LCBpbnRdID0ge30KCiAgICAgICAgICAgIGZvciBvcmRpbmFsLCAoZXZlbnQsIHJvbGVzLCBzZXJpZXNfbGlzdCwgaGludHMpIGluIGVudW1lcmF0ZShsc3NfZXZlbnRzKToKICAgICAgICAgICAgICAgIHNlY3Rpb25faWQgPSBzZWN0aW9uX2lkX2J5X29yZGluYWwuZ2V0KDApCgogICAgICAgICAgICAgICAgbHNzX2V2ZW50X2lkID0gcGVyc2lzdF9ldmVudCgKICAgICAgICAgICAgICAgICAgICBsc3NfcnVuX2lkPWxzc19ydW5faWQsCiAgICAgICAgICAgICAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbl9pZD1zZWN0aW9uX2lkLAogICAgICAgICAgICAgICAgICAgIGV2ZW50X3VpZD1ldmVudC5ldmVudF9pZCwKICAgICAgICAgICAgICAgICAgICBsYWJlbD1ldmVudC5sYWJlbCwKICAgICAgICAgICAgICAgICAgICBzZWFyY2hfcGhyYXNlPWV2ZW50LnNlYXJjaF9waHJhc2VfdGV4dCwKICAgICAgICAgICAgICAgICAgICB0ZXh0PWV2ZW50LnNlbnRlbmNlc193aXRoaW5fZG9jdW1lbnQsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49ZXZlbnQuZG9jX3N0YXJ0X3Rva2VuX2luZGV4LAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1ldmVudC5kb2NfZW5kX3Rva2VuX2luZGV4LAogICAgICAgICAgICAgICAgICAgIG9yZGluYWw9b3JkaW5hbCwKICAgICAgICAgICAgICAgICAgICBzaW1pbGFyaXR5PWV2ZW50Lm92ZXJhbGxfc2ltaWxhcml0eSwKICAgICAgICAgICAgICAgICAgICBuZWdhdGVkPWV2ZW50Lm5lZ2F0ZWQsCiAgICAgICAgICAgICAgICAgICAgdW5jZXJ0YWluPWV2ZW50LnVuY2VydGFpbiwKICAgICAgICAgICAgICAgICAgICBpbnZvbHZlc19jb3JlZmVyZW5jZT1ldmVudC5pbnZvbHZlc19jb3JlZmVyZW5jZSwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICBldmVudF9pZF9tYXBbb3JkaW5hbF0gPSBsc3NfZXZlbnRfaWQKCiAgICAgICAgICAgICAgICBmb3IgcmMgaW4gcm9sZXM6CiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZShsc3NfZXZlbnRfaWQ9bHNzX2V2ZW50X2lkLCByYz1yYykKCiAgICAgICAgICAgICAgICBzZXJpZXNfaWRfbWFwID0ge30KICAgICAgICAgICAgICAgIGl0ZW1faWRfbWFwID0ge30KCiAgICAgICAgICAgICAgICBmb3Igc2VyaWVzIGluIHNlcmllc19saXN0OgogICAgICAgICAgICAgICAgICAgIG1hcHBpbmcgPSBwZXJzaXN0X2xvY2F0aW9uX3NlcmllcygKICAgICAgICAgICAgICAgICAgICAgICAgbHNzX2V2ZW50X2lkPWxzc19ldmVudF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzPXNlcmllcywKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzX2lkX21hcFtzZXJpZXMuc2VyaWVzX2lkXSA9IGxpc3QobWFwcGluZy52YWx1ZXMoKSlbMF0KICAgICAgICAgICAgICAgICAgICBpdGVtX2lkX21hcC51cGRhdGUobWFwcGluZykKCiAgICAgICAgICAgICAgICBmb3IgaGludCBpbiBoaW50czoKICAgICAgICAgICAgICAgICAgICBwZXJzaXN0X2NvbnRleHRfaGludCgKICAgICAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgICAgICBoaW50PWhpbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllc19pZF9tYXA9c2VyaWVzX2lkX21hcCwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbV9pZF9tYXA9aXRlbV9pZF9tYXAsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2lkX21hcD1ldmVudF9pZF9tYXAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25faWRfbWFwPXNlY3Rpb25faWRfYnlfb3JkaW5hbCwKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICBjb21wbGV0ZV9sc3NfcnVuKGxzc19ydW5faWQpCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJhaXNlCgAAAAAAAAAAsiQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARBEAAAAAAABEEQAAAAAAAAAAAAAAAPC/"
				],
				[
					139,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAMCYAAAAAAACyJAAAIyBzcmMvc2l0cmVwYzIvbHNzL3BpcGVsaW5lLnB5Cgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZWZhdWx0ZGljdApmcm9tIHR5cGluZyBpbXBvcnQgU2VxdWVuY2UsIE9wdGlvbmFsCgppbXBvcnQgc3FsaXRlMwpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jCmZyb20gaG9sbWVzX2V4dHJhY3RvciBpbXBvcnQgTWFuYWdlcgoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKZnJvbSBzaXRyZXBjMi5sc3MuYm9vdHN0cmFwIGltcG9ydCBidWlsZF9tYW5hZ2VyCmZyb20gc2l0cmVwYzIubHNzLnBocmFzZXMgaW1wb3J0IHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzCmZyb20gc2l0cmVwYzIubHNzLnJ1bGVyIGltcG9ydCBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiCmZyb20gc2l0cmVwYzIubHNzLnNlY3Rpb25pbmcgaW1wb3J0IHNwbGl0X2ludG9fc2VjdGlvbnMKZnJvbSBzaXRyZXBjMi5sc3MuZXZlbnRzIGltcG9ydCAoCiAgICBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoLAogICAgYnVpbGRfbHNzX2V2ZW50cywKKQpmcm9tIHNpdHJlcGMyLmxzcy5wZXJzaXN0IGltcG9ydCAoCiAgICBjcmVhdGVfbHNzX3J1biwKICAgIGNvbXBsZXRlX2xzc19ydW4sCiAgICBwZXJzaXN0X3NlY3Rpb24sCiAgICBwZXJzaXN0X2V2ZW50LAogICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZSwKICAgIHBlcnNpc3RfbG9jYXRpb25fc2VyaWVzLAogICAgcGVyc2lzdF9jb250ZXh0X2hpbnQsCikKZnJvbSBzaXRyZXBjMi5sc3MudHlwZWRlZnMgaW1wb3J0IEV2ZW50TWF0Y2gKZnJvbSBzaXRyZXBjMi5sc3MuY29udGV4dHVhbGl6ZSBpbXBvcnQgY29udGV4dHVhbGl6ZQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTkxQIElOSVRJQUxJWkFUSU9OCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgYnVpbGRfaG9sbWVzX2FuZF9ubHAoKSAtPiBNYW5hZ2VyOgogICAgbWFuYWdlciA9IGJ1aWxkX21hbmFnZXIoKQogICAgbWFuYWdlci5ubHAgPSBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiKG1hbmFnZXIubmxwKQogICAgcmVnaXN0ZXJfc2VhcmNoX3BocmFzZXMobWFuYWdlcikKICAgIHJldHVybiBtYW5hZ2VyCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBMU1MgUElQRUxJTkUKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBydW5fbHNzX3BpcGVsaW5lKAogICAgaW5nZXN0X3Bvc3RzOiBTZXF1ZW5jZVtkaWN0XSwKICAgICosCiAgICBtYW5hZ2VyOiBPcHRpb25hbFtNYW5hZ2VyXSA9IE5vbmUsCiAgICBiYXRjaF9zaXplOiBpbnQgPSA4LAogICAgbWluX3NpbWlsYXJpdHk6IGZsb2F0ID0gMC4wLAogICAgcmVwcm9jZXNzOiBib29sID0gRmFsc2UsCiAgICBrZWVwX25vbnNwYXRpYWw6IGJvb2wgPSBGYWxzZSwKKSAtPiBOb25lOgogICAgaWYgbm90IGluZ2VzdF9wb3N0czoKICAgICAgICByZXR1cm4KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSW5jcmVtZW50YWwgZXhlY3V0aW9uIGd1YXJkCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBpZiBub3QgcmVwcm9jZXNzOgogICAgICAgIGluZ2VzdF9pZHMgPSBbcFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHNdCgogICAgICAgIHdpdGggc3FsaXRlMy5jb25uZWN0KHJlY29yZHNfZGJfcGF0aCgpKSBhcyBjb246CiAgICAgICAgICAgIGNvbi5leGVjdXRlKCJQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047IikKICAgICAgICAgICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgZiIiIgogICAgICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIGluZ2VzdF9wb3N0X2lkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgQU5EIGluZ2VzdF9wb3N0X2lkIElOICh7IiwiLmpvaW4oIj8iIGZvciBfIGluIGluZ2VzdF9pZHMpfSkKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIGluZ2VzdF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICBjb21wbGV0ZWRfaWRzID0ge3Jvd1swXSBmb3Igcm93IGluIHJvd3N9CiAgICAgICAgaW5nZXN0X3Bvc3RzID0gW3AgZm9yIHAgaW4gaW5nZXN0X3Bvc3RzIGlmIHBbImlkIl0gbm90IGluIGNvbXBsZXRlZF9pZHNdCgogICAgICAgIGlmIG5vdCBpbmdlc3RfcG9zdHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBOTFAgLyBIb2xtZXMgc2V0dXAKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGlmIG1hbmFnZXIgaXMgTm9uZToKICAgICAgICBtYW5hZ2VyID0gYnVpbGRfaG9sbWVzX2FuZF9ubHAoKQoKICAgIG5scCA9IG1hbmFnZXIubmxwCgogICAgZG9jczogZGljdFtpbnQsIERvY10gPSB7fQogICAgZm9yIHBpZCwgZG9jIGluIHppcCgKICAgICAgICAocFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHMpLAogICAgICAgIG5scC5waXBlKChwWyJ0ZXh0Il0gZm9yIHAgaW4gaW5nZXN0X3Bvc3RzKSwgYmF0Y2hfc2l6ZT1iYXRjaF9zaXplKSwKICAgICk6CiAgICAgICAgZG9jc1twaWRdID0gZG9jCgogICAgbWFuYWdlci5yZWdpc3Rlcl9zZXJpYWxpemVkX2RvY3VtZW50cygKICAgICAgICB7c3RyKHBpZCk6IGRvYy50b19ieXRlcygpIGZvciBwaWQsIGRvYyBpbiBkb2NzLml0ZW1zKCl9CiAgICApCgogICAgcmF3X21hdGNoZXMgPSBtYW5hZ2VyLm1hdGNoKCkKICAgIG1hdGNoZXNfYnlfcG9zdDogZGljdFtpbnQsIGxpc3RbZGljdF1dID0gZGVmYXVsdGRpY3QobGlzdCkKCiAgICBmb3IgbSBpbiByYXdfbWF0Y2hlczoKICAgICAgICBsYWJlbCA9IG0uZ2V0KCJkb2N1bWVudCIpIG9yIG0uZ2V0KCJkb2N1bWVudF9sYWJlbCIpCiAgICAgICAgaWYgbGFiZWwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1hdGNoZXNfYnlfcG9zdFtpbnQobGFiZWwpXS5hcHBlbmQobSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUGVyLXBvc3QgZXhlY3V0aW9uCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBmb3IgcG9zdCBpbiBpbmdlc3RfcG9zdHM6CiAgICAgICAgaW5nZXN0X3Bvc3RfaWQgPSBwb3N0WyJpZCJdCiAgICAgICAgZG9jID0gZG9jcy5nZXQoaW5nZXN0X3Bvc3RfaWQpCiAgICAgICAgaWYgZG9jIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxzc19ydW5faWQ6IE9wdGlvbmFsW2ludF0gPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgbHNzX3J1bl9pZCA9IGNyZWF0ZV9sc3NfcnVuKAogICAgICAgICAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgICAgICAgICBlbmdpbmU9ImhvbG1lcyIsCiAgICAgICAgICAgICAgICBtb2RlbD1ubHAubWV0YS5nZXQoIm5hbWUiKSwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgQnVpbGQgRXZlbnRNYXRjaCBvYmplY3RzCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgZXZlbnRfbWF0Y2hlczogbGlzdFtFdmVudE1hdGNoXSA9IFtdCgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgcmF3IGluIGVudW1lcmF0ZShtYXRjaGVzX2J5X3Bvc3QuZ2V0KGluZ2VzdF9wb3N0X2lkLCBbXSkpOgogICAgICAgICAgICAgICAgc2ltaWxhcml0eSA9IGZsb2F0KHJhdy5nZXQoIm92ZXJhbGxfc2ltaWxhcml0eV9tZWFzdXJlIiwgMS4wKSkKICAgICAgICAgICAgICAgIGlmIHNpbWlsYXJpdHkgPCBtaW5fc2ltaWxhcml0eToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQgPSBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoKHJhdykKICAgICAgICAgICAgICAgIHRleHQgPSByYXcuZ2V0KCJzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50Iikgb3IgZG9jW3N0YXJ0OmVuZF0udGV4dAoKICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIEV2ZW50TWF0Y2goCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2lkPWYie2luZ2VzdF9wb3N0X2lkfTp7b3JkaW5hbH0iLAogICAgICAgICAgICAgICAgICAgICAgICBwb3N0X2lkPXN0cihpbmdlc3RfcG9zdF9pZCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXJhdy5nZXQoInNlYXJjaF9waHJhc2VfbGFiZWwiLCAiIiksCiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF9waHJhc2VfdGV4dD1yYXcuZ2V0KCJzZWFyY2hfcGhyYXNlX3RleHQiLCAiIiksCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRlbmNlc193aXRoaW5fZG9jdW1lbnQ9dGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmFsbF9zaW1pbGFyaXR5PXNpbWlsYXJpdHksCiAgICAgICAgICAgICAgICAgICAgICAgIG5lZ2F0ZWQ9Ym9vbChyYXcuZ2V0KCJuZWdhdGVkIiwgRmFsc2UpKSwKICAgICAgICAgICAgICAgICAgICAgICAgdW5jZXJ0YWluPWJvb2wocmF3LmdldCgidW5jZXJ0YWluIiwgRmFsc2UpKSwKICAgICAgICAgICAgICAgICAgICAgICAgaW52b2x2ZXNfY29yZWZlcmVuY2U9Ym9vbChyYXcuZ2V0KCJpbnZvbHZlc19jb3JlZmVyZW5jZSIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY19zdGFydF90b2tlbl9pbmRleD1zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgZG9jX2VuZF90b2tlbl9pbmRleD1lbmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHJhd19tYXRjaD1yYXcsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgU3RydWN0dXJhbCBzY29waW5nICsgdmFsaWRhdGlvbgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIGxzc19ldmVudHMsIHJlamVjdGVkX25vbnNwYXRpYWwgPSBidWlsZF9sc3NfZXZlbnRzKAogICAgICAgICAgICAgICAgZG9jPWRvYywKICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXM9ZXZlbnRfbWF0Y2hlcywKICAgICAgICAgICAgICAgIGNvbGxlY3Rfbm9uc3BhdGlhbD1rZWVwX25vbnNwYXRpYWwsCiAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFNlY3Rpb25zIChwZXJzaXN0IHJlZ2FyZGxlc3Mgb2YgZXZlbnRzKQogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIHNlY3Rpb25zID0gc3BsaXRfaW50b19zZWN0aW9ucyhwb3N0WyJ0ZXh0Il0pCiAgICAgICAgICAgIHNlY3Rpb25faWRfYnlfb3JkaW5hbDogZGljdFtpbnQsIGludF0gPSB7fQoKICAgICAgICAgICAgdXNlZF9zZWN0aW9uX29yZGluYWxzID0gezB9CgogICAgICAgICAgICBmb3Igc2VjIGluIHNlY3Rpb25zOgogICAgICAgICAgICAgICAgaWYgc2VjLm9yZGluYWwgbm90IGluIHVzZWRfc2VjdGlvbl9vcmRpbmFsczoKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHNlY3Rpb25faWRfYnlfb3JkaW5hbFtzZWMub3JkaW5hbF0gPSBwZXJzaXN0X3NlY3Rpb24oCiAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgICAgIHRleHQ9c2VjLnRleHQsCiAgICAgICAgICAgICAgICAgICAgb3JkaW5hbD1zZWMub3JkaW5hbCwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgSWYgbm8gdmFsaWQgZXZlbnRzLCBjb21wbGV0ZSBydW4gYnV0IERPIE5PVCBza2lwIHBlcnNpc3RlbmNlIGVudGlyZWx5CiAgICAgICAgICAgIGlmIG5vdCBsc3NfZXZlbnRzOgogICAgICAgICAgICAgICAgY29tcGxldGVfbHNzX3J1bihsc3NfcnVuX2lkKQogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIENvbnRleHR1YWxpemF0aW9uCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgc2VjdGlvbl9vcmRpbmFscyA9IHNvcnRlZChzZWN0aW9uX2lkX2J5X29yZGluYWwua2V5cygpKQogICAgICAgICAgICBldmVudF9vcmRpbmFsc19ieV9zZWN0aW9uID0gezA6IGxpc3QocmFuZ2UobGVuKGxzc19ldmVudHMpKSl9CgogICAgICAgICAgICBmb3IgaWR4LCAoZXZlbnQsIHJvbGVzLCBzZXJpZXNfbGlzdCwgaGludHMpIGluIGVudW1lcmF0ZShsc3NfZXZlbnRzKToKICAgICAgICAgICAgICAgIGxzc19ldmVudHNbaWR4XSA9ICgKICAgICAgICAgICAgICAgICAgICBldmVudCwKICAgICAgICAgICAgICAgICAgICByb2xlcywKICAgICAgICAgICAgICAgICAgICBzZXJpZXNfbGlzdCwKICAgICAgICAgICAgICAgICAgICBjb250ZXh0dWFsaXplKAogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzPWhpbnRzLAogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uX29yZGluYWxzPXNlY3Rpb25fb3JkaW5hbHMsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X29yZGluYWxzX2J5X3NlY3Rpb249ZXZlbnRfb3JkaW5hbHNfYnlfc2VjdGlvbiwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgUGVyc2lzdGVuY2UKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBldmVudF9pZF9tYXA6IGRpY3RbaW50LCBpbnRdID0ge30KCiAgICAgICAgICAgIGZvciBvcmRpbmFsLCAoZXZlbnQsIHJvbGVzLCBzZXJpZXNfbGlzdCwgaGludHMpIGluIGVudW1lcmF0ZShsc3NfZXZlbnRzKToKICAgICAgICAgICAgICAgIHNlY3Rpb25faWQgPSBzZWN0aW9uX2lkX2J5X29yZGluYWwuZ2V0KDApCgogICAgICAgICAgICAgICAgbHNzX2V2ZW50X2lkID0gcGVyc2lzdF9ldmVudCgKICAgICAgICAgICAgICAgICAgICBsc3NfcnVuX2lkPWxzc19ydW5faWQsCiAgICAgICAgICAgICAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbl9pZD1zZWN0aW9uX2lkLAogICAgICAgICAgICAgICAgICAgIGV2ZW50X3VpZD1ldmVudC5ldmVudF9pZCwKICAgICAgICAgICAgICAgICAgICBsYWJlbD1ldmVudC5sYWJlbCwKICAgICAgICAgICAgICAgICAgICBzZWFyY2hfcGhyYXNlPWV2ZW50LnNlYXJjaF9waHJhc2VfdGV4dCwKICAgICAgICAgICAgICAgICAgICB0ZXh0PWV2ZW50LnNlbnRlbmNlc193aXRoaW5fZG9jdW1lbnQsCiAgICAgICAgICAgICAgICAgICAgc3RhcnRfdG9rZW49ZXZlbnQuZG9jX3N0YXJ0X3Rva2VuX2luZGV4LAogICAgICAgICAgICAgICAgICAgIGVuZF90b2tlbj1ldmVudC5kb2NfZW5kX3Rva2VuX2luZGV4LAogICAgICAgICAgICAgICAgICAgIG9yZGluYWw9b3JkaW5hbCwKICAgICAgICAgICAgICAgICAgICBzaW1pbGFyaXR5PWV2ZW50Lm92ZXJhbGxfc2ltaWxhcml0eSwKICAgICAgICAgICAgICAgICAgICBuZWdhdGVkPWV2ZW50Lm5lZ2F0ZWQsCiAgICAgICAgICAgICAgICAgICAgdW5jZXJ0YWluPWV2ZW50LnVuY2VydGFpbiwKICAgICAgICAgICAgICAgICAgICBpbnZvbHZlc19jb3JlZmVyZW5jZT1ldmVudC5pbnZvbHZlc19jb3JlZmVyZW5jZSwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICBldmVudF9pZF9tYXBbb3JkaW5hbF0gPSBsc3NfZXZlbnRfaWQKCiAgICAgICAgICAgICAgICBmb3IgcmMgaW4gcm9sZXM6CiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZShsc3NfZXZlbnRfaWQ9bHNzX2V2ZW50X2lkLCByYz1yYykKCiAgICAgICAgICAgICAgICBzZXJpZXNfaWRfbWFwID0ge30KICAgICAgICAgICAgICAgIGl0ZW1faWRfbWFwID0ge30KCiAgICAgICAgICAgICAgICBmb3Igc2VyaWVzIGluIHNlcmllc19saXN0OgogICAgICAgICAgICAgICAgICAgIG1hcHBpbmcgPSBwZXJzaXN0X2xvY2F0aW9uX3NlcmllcygKICAgICAgICAgICAgICAgICAgICAgICAgbHNzX2V2ZW50X2lkPWxzc19ldmVudF9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzPXNlcmllcywKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzX2lkX21hcFtzZXJpZXMuc2VyaWVzX2lkXSA9IGxpc3QobWFwcGluZy52YWx1ZXMoKSlbMF0KICAgICAgICAgICAgICAgICAgICBpdGVtX2lkX21hcC51cGRhdGUobWFwcGluZykKCiAgICAgICAgICAgICAgICBmb3IgaGludCBpbiBoaW50czoKICAgICAgICAgICAgICAgICAgICBwZXJzaXN0X2NvbnRleHRfaGludCgKICAgICAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgICAgICBoaW50PWhpbnQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllc19pZF9tYXA9c2VyaWVzX2lkX21hcCwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbV9pZF9tYXA9aXRlbV9pZF9tYXAsCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2lkX21hcD1ldmVudF9pZF9tYXAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25faWRfbWFwPXNlY3Rpb25faWRfYnlfb3JkaW5hbCwKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICBjb21wbGV0ZV9sc3NfcnVuKGxzc19ydW5faWQpCgogICAgICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgICAgIHJhaXNlCg",
					"AQAAAAAAAAABAAAAAAAAAAAAAACyJAAAAAAAAAAAAAAAAPC/"
				],
				[
					141,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAwJgAAIyBzcmMvc2l0cmVwYzIvbHNzL3BpcGVsaW5lLnB5Cgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZWZhdWx0ZGljdApmcm9tIHR5cGluZyBpbXBvcnQgU2VxdWVuY2UsIE9wdGlvbmFsCgppbXBvcnQgc3FsaXRlMwpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jCmZyb20gaG9sbWVzX2V4dHJhY3RvciBpbXBvcnQgTWFuYWdlcgoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKZnJvbSBzaXRyZXBjMi5sc3MuYm9vdHN0cmFwIGltcG9ydCBidWlsZF9tYW5hZ2VyCmZyb20gc2l0cmVwYzIubHNzLnBocmFzZXMgaW1wb3J0IHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzCmZyb20gc2l0cmVwYzIubHNzLnJ1bGVyIGltcG9ydCBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiCmZyb20gc2l0cmVwYzIubHNzLnNlY3Rpb25pbmcgaW1wb3J0IHNwbGl0X2ludG9fc2VjdGlvbnMKZnJvbSBzaXRyZXBjMi5sc3MuZXZlbnRzIGltcG9ydCAoCiAgICBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoLAogICAgYnVpbGRfbHNzX2V2ZW50cywKKQpmcm9tIHNpdHJlcGMyLmxzcy5wZXJzaXN0IGltcG9ydCAoCiAgICBjcmVhdGVfbHNzX3J1biwKICAgIGNvbXBsZXRlX2xzc19ydW4sCiAgICBwZXJzaXN0X3NlY3Rpb24sCiAgICBwZXJzaXN0X2V2ZW50LAogICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZSwKICAgIHBlcnNpc3RfbG9jYXRpb25fc2VyaWVzLAogICAgcGVyc2lzdF9jb250ZXh0X2hpbnQsCikKZnJvbSBzaXRyZXBjMi5sc3MudHlwZWRlZnMgaW1wb3J0IEV2ZW50TWF0Y2gKZnJvbSBzaXRyZXBjMi5sc3MuY29udGV4dHVhbGl6ZSBpbXBvcnQgY29udGV4dHVhbGl6ZQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTkxQIElOSVRJQUxJWkFUSU9OCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgYnVpbGRfaG9sbWVzX2FuZF9ubHAoKSAtPiBNYW5hZ2VyOgogICAgbWFuYWdlciA9IGJ1aWxkX21hbmFnZXIoKQogICAgbWFuYWdlci5ubHAgPSBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiKG1hbmFnZXIubmxwKQogICAgcmVnaXN0ZXJfc2VhcmNoX3BocmFzZXMobWFuYWdlcikKICAgIHJldHVybiBtYW5hZ2VyCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBMU1MgUElQRUxJTkUKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBydW5fbHNzX3BpcGVsaW5lKAogICAgaW5nZXN0X3Bvc3RzOiBTZXF1ZW5jZVtkaWN0XSwKICAgICosCiAgICBtYW5hZ2VyOiBPcHRpb25hbFtNYW5hZ2VyXSA9IE5vbmUsCiAgICBiYXRjaF9zaXplOiBpbnQgPSA4LAogICAgbWluX3NpbWlsYXJpdHk6IGZsb2F0ID0gMC4wLAogICAgcmVwcm9jZXNzOiBib29sID0gRmFsc2UsCiAgICBrZWVwX25vbnNwYXRpYWw6IGJvb2wgPSBGYWxzZSwKKSAtPiBOb25lOgogICAgaWYgbm90IGluZ2VzdF9wb3N0czoKICAgICAgICByZXR1cm4KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSW5jcmVtZW50YWwgZXhlY3V0aW9uIGd1YXJkCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBpZiBub3QgcmVwcm9jZXNzOgogICAgICAgIGluZ2VzdF9pZHMgPSBbcFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHNdCgogICAgICAgIHdpdGggc3FsaXRlMy5jb25uZWN0KHJlY29yZHNfZGJfcGF0aCgpKSBhcyBjb246CiAgICAgICAgICAgIGNvbi5leGVjdXRlKCJQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047IikKICAgICAgICAgICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgZiIiIgogICAgICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIGluZ2VzdF9wb3N0X2lkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgQU5EIGluZ2VzdF9wb3N0X2lkIElOICh7IiwiLmpvaW4oIj8iIGZvciBfIGluIGluZ2VzdF9pZHMpfSkKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIGluZ2VzdF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICBjb21wbGV0ZWRfaWRzID0ge3Jvd1swXSBmb3Igcm93IGluIHJvd3N9CiAgICAgICAgaW5nZXN0X3Bvc3RzID0gW3AgZm9yIHAgaW4gaW5nZXN0X3Bvc3RzIGlmIHBbImlkIl0gbm90IGluIGNvbXBsZXRlZF9pZHNdCgogICAgICAgIGlmIG5vdCBpbmdlc3RfcG9zdHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBOTFAgLyBIb2xtZXMgc2V0dXAKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGlmIG1hbmFnZXIgaXMgTm9uZToKICAgICAgICBtYW5hZ2VyID0gYnVpbGRfaG9sbWVzX2FuZF9ubHAoKQoKICAgIG5scCA9IG1hbmFnZXIubmxwCgogICAgZG9jczogZGljdFtpbnQsIERvY10gPSB7fQogICAgZm9yIHBpZCwgZG9jIGluIHppcCgKICAgICAgICAocFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHMpLAogICAgICAgIG5scC5waXBlKChwWyJ0ZXh0Il0gZm9yIHAgaW4gaW5nZXN0X3Bvc3RzKSwgYmF0Y2hfc2l6ZT1iYXRjaF9zaXplKSwKICAgICk6CiAgICAgICAgZG9jc1twaWRdID0gZG9jCgogICAgbWFuYWdlci5yZWdpc3Rlcl9zZXJpYWxpemVkX2RvY3VtZW50cygKICAgICAgICB7c3RyKHBpZCk6IGRvYy50b19ieXRlcygpIGZvciBwaWQsIGRvYyBpbiBkb2NzLml0ZW1zKCl9CiAgICApCgogICAgcmF3X21hdGNoZXMgPSBtYW5hZ2VyLm1hdGNoKCkKICAgIG1hdGNoZXNfYnlfcG9zdDogZGljdFtpbnQsIGxpc3RbZGljdF1dID0gZGVmYXVsdGRpY3QobGlzdCkKCiAgICBmb3IgbSBpbiByYXdfbWF0Y2hlczoKICAgICAgICBsYWJlbCA9IG0uZ2V0KCJkb2N1bWVudCIpIG9yIG0uZ2V0KCJkb2N1bWVudF9sYWJlbCIpCiAgICAgICAgaWYgbGFiZWwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1hdGNoZXNfYnlfcG9zdFtpbnQobGFiZWwpXS5hcHBlbmQobSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUGVyLXBvc3QgZXhlY3V0aW9uCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBmb3IgcG9zdCBpbiBpbmdlc3RfcG9zdHM6CiAgICAgICAgaW5nZXN0X3Bvc3RfaWQgPSBwb3N0WyJpZCJdCiAgICAgICAgZG9jID0gZG9jcy5nZXQoaW5nZXN0X3Bvc3RfaWQpCiAgICAgICAgaWYgZG9jIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxzc19ydW5faWQ6IE9wdGlvbmFsW2ludF0gPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgbHNzX3J1bl9pZCA9IGNyZWF0ZV9sc3NfcnVuKAogICAgICAgICAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgICAgICAgICBlbmdpbmU9ImhvbG1lcyIsCiAgICAgICAgICAgICAgICBtb2RlbD1ubHAubWV0YS5nZXQoIm5hbWUiKSwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgQnVpbGQgRXZlbnRNYXRjaCBvYmplY3RzCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjCiAgICAgICAgICAgICMgSU1QT1JUQU5UOgogICAgICAgICAgICAjIC0gT05MWSBFVkVOVDoqIHBocmFzZXMgYmVjb21lIEV2ZW50TWF0Y2gKICAgICAgICAgICAgIyAtIENPTlRFWFQ6KiBwaHJhc2VzIGFyZSBpZ25vcmVkIGhlcmUgYnkgZGVzaWduCiAgICAgICAgICAgICMKCiAgICAgICAgICAgIGV2ZW50X21hdGNoZXM6IGxpc3RbRXZlbnRNYXRjaF0gPSBbXQogICAgICAgICAgICBldmVudF9vcmRpbmFsID0gMAoKICAgICAgICAgICAgZm9yIHJhdyBpbiBtYXRjaGVzX2J5X3Bvc3QuZ2V0KGluZ2VzdF9wb3N0X2lkLCBbXSk6CiAgICAgICAgICAgICAgICBsYWJlbCA9IHJhdy5nZXQoInNlYXJjaF9waHJhc2VfbGFiZWwiLCAiIikKCiAgICAgICAgICAgICAgICAjIC0tLS0gRElTQU1CSUdVQVRJT04gUE9JTlQgLS0tLQogICAgICAgICAgICAgICAgaWYgbm90IGxhYmVsLnN0YXJ0c3dpdGgoIkVWRU5UOiIpOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgc2ltaWxhcml0eSA9IGZsb2F0KHJhdy5nZXQoIm92ZXJhbGxfc2ltaWxhcml0eV9tZWFzdXJlIiwgMS4wKSkKICAgICAgICAgICAgICAgIGlmIHNpbWlsYXJpdHkgPCBtaW5fc2ltaWxhcml0eToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQgPSBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoKHJhdykKICAgICAgICAgICAgICAgIHRleHQgPSByYXcuZ2V0KCJzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50Iikgb3IgZG9jW3N0YXJ0OmVuZF0udGV4dAoKICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIEV2ZW50TWF0Y2goCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2lkPWYie2luZ2VzdF9wb3N0X2lkfTp7ZXZlbnRfb3JkaW5hbH0iLAogICAgICAgICAgICAgICAgICAgICAgICBwb3N0X2lkPXN0cihpbmdlc3RfcG9zdF9pZCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPWxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfcGhyYXNlX3RleHQ9cmF3LmdldCgic2VhcmNoX3BocmFzZV90ZXh0IiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50PXRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJhbGxfc2ltaWxhcml0eT1zaW1pbGFyaXR5LAogICAgICAgICAgICAgICAgICAgICAgICBuZWdhdGVkPWJvb2wocmF3LmdldCgibmVnYXRlZCIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ib29sKHJhdy5nZXQoInVuY2VydGFpbiIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGludm9sdmVzX2NvcmVmZXJlbmNlPWJvb2wocmF3LmdldCgiaW52b2x2ZXNfY29yZWZlcmVuY2UiLCBGYWxzZSkpLAogICAgICAgICAgICAgICAgICAgICAgICBkb2Nfc3RhcnRfdG9rZW5faW5kZXg9c3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY19lbmRfdG9rZW5faW5kZXg9ZW5kLAogICAgICAgICAgICAgICAgICAgICAgICByYXdfbWF0Y2g9cmF3LAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICBldmVudF9vcmRpbmFsICs9IDEKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFN0cnVjdHVyYWwgc2NvcGluZyArIHZhbGlkYXRpb24KICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBsc3NfZXZlbnRzLCByZWplY3RlZF9ub25zcGF0aWFsID0gYnVpbGRfbHNzX2V2ZW50cygKICAgICAgICAgICAgICAgIGRvYz1kb2MsCiAgICAgICAgICAgICAgICBldmVudF9tYXRjaGVzPWV2ZW50X21hdGNoZXMsCiAgICAgICAgICAgICAgICBjb2xsZWN0X25vbnNwYXRpYWw9a2VlcF9ub25zcGF0aWFsLAogICAgICAgICAgICApCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBTZWN0aW9ucyAocGVyc2lzdCByZWdhcmRsZXNzIG9mIGV2ZW50cykKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBzZWN0aW9ucyA9IHNwbGl0X2ludG9fc2VjdGlvbnMocG9zdFsidGV4dCJdKQogICAgICAgICAgICBzZWN0aW9uX2lkX2J5X29yZGluYWw6IGRpY3RbaW50LCBpbnRdID0ge30KCiAgICAgICAgICAgIHVzZWRfc2VjdGlvbl9vcmRpbmFscyA9IHswfQoKICAgICAgICAgICAgZm9yIHNlYyBpbiBzZWN0aW9uczoKICAgICAgICAgICAgICAgIGlmIHNlYy5vcmRpbmFsIG5vdCBpbiB1c2VkX3NlY3Rpb25fb3JkaW5hbHM6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBzZWN0aW9uX2lkX2J5X29yZGluYWxbc2VjLm9yZGluYWxdID0gcGVyc2lzdF9zZWN0aW9uKAogICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICBpbmdlc3RfcG9zdF9pZD1pbmdlc3RfcG9zdF9pZCwKICAgICAgICAgICAgICAgICAgICB0ZXh0PXNlYy50ZXh0LAogICAgICAgICAgICAgICAgICAgIG9yZGluYWw9c2VjLm9yZGluYWwsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAjIElmIG5vIHZhbGlkIGV2ZW50cywgY29tcGxldGUgcnVuIGJ1dCBETyBOT1Qgc2tpcCBwZXJzaXN0ZW5jZSBlbnRpcmVseQogICAgICAgICAgICBpZiBub3QgbHNzX2V2ZW50czoKICAgICAgICAgICAgICAgIGNvbXBsZXRlX2xzc19ydW4obHNzX3J1bl9pZCkKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBDb250ZXh0dWFsaXphdGlvbgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIHNlY3Rpb25fb3JkaW5hbHMgPSBzb3J0ZWQoc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmtleXMoKSkKICAgICAgICAgICAgZXZlbnRfb3JkaW5hbHNfYnlfc2VjdGlvbiA9IHswOiBsaXN0KHJhbmdlKGxlbihsc3NfZXZlbnRzKSkpfQoKICAgICAgICAgICAgZm9yIGlkeCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIGhpbnRzKSBpbiBlbnVtZXJhdGUobHNzX2V2ZW50cyk6CiAgICAgICAgICAgICAgICBsc3NfZXZlbnRzW2lkeF0gPSAoCiAgICAgICAgICAgICAgICAgICAgZXZlbnQsCiAgICAgICAgICAgICAgICAgICAgcm9sZXMsCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzX2xpc3QsCiAgICAgICAgICAgICAgICAgICAgY29udGV4dHVhbGl6ZSgKICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dF9oaW50cz1oaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbl9vcmRpbmFscz1zZWN0aW9uX29yZGluYWxzLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudF9vcmRpbmFsc19ieV9zZWN0aW9uPWV2ZW50X29yZGluYWxzX2J5X3NlY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFBlcnNpc3RlbmNlCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgZXZlbnRfaWRfbWFwOiBkaWN0W2ludCwgaW50XSA9IHt9CgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIGhpbnRzKSBpbiBlbnVtZXJhdGUobHNzX2V2ZW50cyk6CiAgICAgICAgICAgICAgICBzZWN0aW9uX2lkID0gc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmdldCgwKQoKICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZCA9IHBlcnNpc3RfZXZlbnQoCiAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgICAgIHNlY3Rpb25faWQ9c2VjdGlvbl9pZCwKICAgICAgICAgICAgICAgICAgICBldmVudF91aWQ9ZXZlbnQuZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw9ZXZlbnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3BocmFzZT1ldmVudC5zZWFyY2hfcGhyYXNlX3RleHQsCiAgICAgICAgICAgICAgICAgICAgdGV4dD1ldmVudC5zZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWV2ZW50LmRvY19zdGFydF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZXZlbnQuZG9jX2VuZF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBvcmRpbmFsPW9yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcml0eT1ldmVudC5vdmVyYWxsX3NpbWlsYXJpdHksCiAgICAgICAgICAgICAgICAgICAgbmVnYXRlZD1ldmVudC5uZWdhdGVkLAogICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ldmVudC51bmNlcnRhaW4sCiAgICAgICAgICAgICAgICAgICAgaW52b2x2ZXNfY29yZWZlcmVuY2U9ZXZlbnQuaW52b2x2ZXNfY29yZWZlcmVuY2UsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgZXZlbnRfaWRfbWFwW29yZGluYWxdID0gbHNzX2V2ZW50X2lkCgogICAgICAgICAgICAgICAgZm9yIHJjIGluIHJvbGVzOgogICAgICAgICAgICAgICAgICAgIHBlcnNpc3Rfcm9sZV9jYW5kaWRhdGUobHNzX2V2ZW50X2lkPWxzc19ldmVudF9pZCwgcmM9cmMpCgogICAgICAgICAgICAgICAgc2VyaWVzX2lkX21hcCA9IHt9CiAgICAgICAgICAgICAgICBpdGVtX2lkX21hcCA9IHt9CgogICAgICAgICAgICAgICAgZm9yIHNlcmllcyBpbiBzZXJpZXNfbGlzdDoKICAgICAgICAgICAgICAgICAgICBtYXBwaW5nID0gcGVyc2lzdF9sb2NhdGlvbl9zZXJpZXMoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZD1sc3NfZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcz1zZXJpZXMsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHNlcmllc19pZF9tYXBbc2VyaWVzLnNlcmllc19pZF0gPSBsaXN0KG1hcHBpbmcudmFsdWVzKCkpWzBdCiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZF9tYXAudXBkYXRlKG1hcHBpbmcpCgogICAgICAgICAgICAgICAgZm9yIGhpbnQgaW4gaGludHM6CiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdF9jb250ZXh0X2hpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgaGludD1oaW50LAogICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXNfaWRfbWFwPXNlcmllc19pZF9tYXAsCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1faWRfbWFwPWl0ZW1faWRfbWFwLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudF9pZF9tYXA9ZXZlbnRfaWRfbWFwLAogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uX2lkX21hcD1zZWN0aW9uX2lkX2J5X29yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgY29tcGxldGVfbHNzX3J1bihsc3NfcnVuX2lkKQoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByYWlzZQoAAAAAAAAAADAmAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					143,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAANCYAAAAAAAAwJgAAIyBzcmMvc2l0cmVwYzIvbHNzL3BpcGVsaW5lLnB5Cgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZWZhdWx0ZGljdApmcm9tIHR5cGluZyBpbXBvcnQgU2VxdWVuY2UsIE9wdGlvbmFsCgppbXBvcnQgc3FsaXRlMwpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jCmZyb20gaG9sbWVzX2V4dHJhY3RvciBpbXBvcnQgTWFuYWdlcgoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKZnJvbSBzaXRyZXBjMi5sc3MuYm9vdHN0cmFwIGltcG9ydCBidWlsZF9tYW5hZ2VyCmZyb20gc2l0cmVwYzIubHNzLnBocmFzZXMgaW1wb3J0IHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzCmZyb20gc2l0cmVwYzIubHNzLnJ1bGVyIGltcG9ydCBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiCmZyb20gc2l0cmVwYzIubHNzLnNlY3Rpb25pbmcgaW1wb3J0IHNwbGl0X2ludG9fc2VjdGlvbnMKZnJvbSBzaXRyZXBjMi5sc3MuZXZlbnRzIGltcG9ydCAoCiAgICBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoLAogICAgYnVpbGRfbHNzX2V2ZW50cywKKQpmcm9tIHNpdHJlcGMyLmxzcy5wZXJzaXN0IGltcG9ydCAoCiAgICBjcmVhdGVfbHNzX3J1biwKICAgIGNvbXBsZXRlX2xzc19ydW4sCiAgICBwZXJzaXN0X3NlY3Rpb24sCiAgICBwZXJzaXN0X2V2ZW50LAogICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZSwKICAgIHBlcnNpc3RfbG9jYXRpb25fc2VyaWVzLAogICAgcGVyc2lzdF9jb250ZXh0X2hpbnQsCikKZnJvbSBzaXRyZXBjMi5sc3MudHlwZWRlZnMgaW1wb3J0IEV2ZW50TWF0Y2gKZnJvbSBzaXRyZXBjMi5sc3MuY29udGV4dHVhbGl6ZSBpbXBvcnQgY29udGV4dHVhbGl6ZQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTkxQIElOSVRJQUxJWkFUSU9OCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgYnVpbGRfaG9sbWVzX2FuZF9ubHAoKSAtPiBNYW5hZ2VyOgogICAgbWFuYWdlciA9IGJ1aWxkX21hbmFnZXIoKQogICAgbWFuYWdlci5ubHAgPSBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiKG1hbmFnZXIubmxwKQogICAgcmVnaXN0ZXJfc2VhcmNoX3BocmFzZXMobWFuYWdlcikKICAgIHJldHVybiBtYW5hZ2VyCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBMU1MgUElQRUxJTkUKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBydW5fbHNzX3BpcGVsaW5lKAogICAgaW5nZXN0X3Bvc3RzOiBTZXF1ZW5jZVtkaWN0XSwKICAgICosCiAgICBtYW5hZ2VyOiBPcHRpb25hbFtNYW5hZ2VyXSA9IE5vbmUsCiAgICBiYXRjaF9zaXplOiBpbnQgPSA4LAogICAgbWluX3NpbWlsYXJpdHk6IGZsb2F0ID0gMC4wLAogICAgcmVwcm9jZXNzOiBib29sID0gRmFsc2UsCiAgICBrZWVwX25vbnNwYXRpYWw6IGJvb2wgPSBGYWxzZSwKKSAtPiBOb25lOgogICAgaWYgbm90IGluZ2VzdF9wb3N0czoKICAgICAgICByZXR1cm4KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSW5jcmVtZW50YWwgZXhlY3V0aW9uIGd1YXJkCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBpZiBub3QgcmVwcm9jZXNzOgogICAgICAgIGluZ2VzdF9pZHMgPSBbcFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHNdCgogICAgICAgIHdpdGggc3FsaXRlMy5jb25uZWN0KHJlY29yZHNfZGJfcGF0aCgpKSBhcyBjb246CiAgICAgICAgICAgIGNvbi5leGVjdXRlKCJQUkFHTUEgZm9yZWlnbl9rZXlzID0gT047IikKICAgICAgICAgICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgZiIiIgogICAgICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIGluZ2VzdF9wb3N0X2lkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICAgICAgICAgICAgQU5EIGluZ2VzdF9wb3N0X2lkIElOICh7IiwiLmpvaW4oIj8iIGZvciBfIGluIGluZ2VzdF9pZHMpfSkKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIGluZ2VzdF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICBjb21wbGV0ZWRfaWRzID0ge3Jvd1swXSBmb3Igcm93IGluIHJvd3N9CiAgICAgICAgaW5nZXN0X3Bvc3RzID0gW3AgZm9yIHAgaW4gaW5nZXN0X3Bvc3RzIGlmIHBbImlkIl0gbm90IGluIGNvbXBsZXRlZF9pZHNdCgogICAgICAgIGlmIG5vdCBpbmdlc3RfcG9zdHM6CiAgICAgICAgICAgIHJldHVybgoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBOTFAgLyBIb2xtZXMgc2V0dXAKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGlmIG1hbmFnZXIgaXMgTm9uZToKICAgICAgICBtYW5hZ2VyID0gYnVpbGRfaG9sbWVzX2FuZF9ubHAoKQoKICAgIG5scCA9IG1hbmFnZXIubmxwCgogICAgZG9jczogZGljdFtpbnQsIERvY10gPSB7fQogICAgZm9yIHBpZCwgZG9jIGluIHppcCgKICAgICAgICAocFsiaWQiXSBmb3IgcCBpbiBpbmdlc3RfcG9zdHMpLAogICAgICAgIG5scC5waXBlKChwWyJ0ZXh0Il0gZm9yIHAgaW4gaW5nZXN0X3Bvc3RzKSwgYmF0Y2hfc2l6ZT1iYXRjaF9zaXplKSwKICAgICk6CiAgICAgICAgZG9jc1twaWRdID0gZG9jCgogICAgbWFuYWdlci5yZWdpc3Rlcl9zZXJpYWxpemVkX2RvY3VtZW50cygKICAgICAgICB7c3RyKHBpZCk6IGRvYy50b19ieXRlcygpIGZvciBwaWQsIGRvYyBpbiBkb2NzLml0ZW1zKCl9CiAgICApCgogICAgcmF3X21hdGNoZXMgPSBtYW5hZ2VyLm1hdGNoKCkKICAgIG1hdGNoZXNfYnlfcG9zdDogZGljdFtpbnQsIGxpc3RbZGljdF1dID0gZGVmYXVsdGRpY3QobGlzdCkKCiAgICBmb3IgbSBpbiByYXdfbWF0Y2hlczoKICAgICAgICBsYWJlbCA9IG0uZ2V0KCJkb2N1bWVudCIpIG9yIG0uZ2V0KCJkb2N1bWVudF9sYWJlbCIpCiAgICAgICAgaWYgbGFiZWwgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIG1hdGNoZXNfYnlfcG9zdFtpbnQobGFiZWwpXS5hcHBlbmQobSkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUGVyLXBvc3QgZXhlY3V0aW9uCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBmb3IgcG9zdCBpbiBpbmdlc3RfcG9zdHM6CiAgICAgICAgaW5nZXN0X3Bvc3RfaWQgPSBwb3N0WyJpZCJdCiAgICAgICAgZG9jID0gZG9jcy5nZXQoaW5nZXN0X3Bvc3RfaWQpCiAgICAgICAgaWYgZG9jIGlzIE5vbmU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGxzc19ydW5faWQ6IE9wdGlvbmFsW2ludF0gPSBOb25lCgogICAgICAgIHRyeToKICAgICAgICAgICAgbHNzX3J1bl9pZCA9IGNyZWF0ZV9sc3NfcnVuKAogICAgICAgICAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgICAgICAgICBlbmdpbmU9ImhvbG1lcyIsCiAgICAgICAgICAgICAgICBtb2RlbD1ubHAubWV0YS5nZXQoIm5hbWUiKSwKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgQnVpbGQgRXZlbnRNYXRjaCBvYmplY3RzCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjCiAgICAgICAgICAgICMgSU1QT1JUQU5UOgogICAgICAgICAgICAjIC0gT05MWSBFVkVOVDoqIHBocmFzZXMgYmVjb21lIEV2ZW50TWF0Y2gKICAgICAgICAgICAgIyAtIENPTlRFWFQ6KiBwaHJhc2VzIGFyZSBpZ25vcmVkIGhlcmUgYnkgZGVzaWduCiAgICAgICAgICAgICMKCiAgICAgICAgICAgIGV2ZW50X21hdGNoZXM6IGxpc3RbRXZlbnRNYXRjaF0gPSBbXQogICAgICAgICAgICBldmVudF9vcmRpbmFsID0gMAoKICAgICAgICAgICAgZm9yIHJhdyBpbiBtYXRjaGVzX2J5X3Bvc3QuZ2V0KGluZ2VzdF9wb3N0X2lkLCBbXSk6CiAgICAgICAgICAgICAgICBsYWJlbCA9IHJhdy5nZXQoInNlYXJjaF9waHJhc2VfbGFiZWwiLCAiIikKCiAgICAgICAgICAgICAgICAjIC0tLS0gRElTQU1CSUdVQVRJT04gUE9JTlQgLS0tLQogICAgICAgICAgICAgICAgaWYgbm90IGxhYmVsLnN0YXJ0c3dpdGgoIkVWRU5UOiIpOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgc2ltaWxhcml0eSA9IGZsb2F0KHJhdy5nZXQoIm92ZXJhbGxfc2ltaWxhcml0eV9tZWFzdXJlIiwgMS4wKSkKICAgICAgICAgICAgICAgIGlmIHNpbWlsYXJpdHkgPCBtaW5fc2ltaWxhcml0eToKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgIHN0YXJ0LCBlbmQgPSBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoKHJhdykKICAgICAgICAgICAgICAgIHRleHQgPSByYXcuZ2V0KCJzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50Iikgb3IgZG9jW3N0YXJ0OmVuZF0udGV4dAoKICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgIEV2ZW50TWF0Y2goCiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50X2lkPWYie2luZ2VzdF9wb3N0X2lkfTp7ZXZlbnRfb3JkaW5hbH0iLAogICAgICAgICAgICAgICAgICAgICAgICBwb3N0X2lkPXN0cihpbmdlc3RfcG9zdF9pZCksCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPWxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hfcGhyYXNlX3RleHQ9cmF3LmdldCgic2VhcmNoX3BocmFzZV90ZXh0IiwgIiIpLAogICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50PXRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJhbGxfc2ltaWxhcml0eT1zaW1pbGFyaXR5LAogICAgICAgICAgICAgICAgICAgICAgICBuZWdhdGVkPWJvb2wocmF3LmdldCgibmVnYXRlZCIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ib29sKHJhdy5nZXQoInVuY2VydGFpbiIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGludm9sdmVzX2NvcmVmZXJlbmNlPWJvb2wocmF3LmdldCgiaW52b2x2ZXNfY29yZWZlcmVuY2UiLCBGYWxzZSkpLAogICAgICAgICAgICAgICAgICAgICAgICBkb2Nfc3RhcnRfdG9rZW5faW5kZXg9c3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY19lbmRfdG9rZW5faW5kZXg9ZW5kLAogICAgICAgICAgICAgICAgICAgICAgICByYXdfbWF0Y2g9cmF3LAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICBldmVudF9vcmRpbmFsICs9IDEKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFN0cnVjdHVyYWwgc2NvcGluZyArIHZhbGlkYXRpb24KICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBsc3NfZXZlbnRzLCByZWplY3RlZF9ub25zcGF0aWFsID0gYnVpbGRfbHNzX2V2ZW50cygKICAgICAgICAgICAgICAgIGRvYz1kb2MsCiAgICAgICAgICAgICAgICBldmVudF9tYXRjaGVzPWV2ZW50X21hdGNoZXMsCiAgICAgICAgICAgICAgICBjb2xsZWN0X25vbnNwYXRpYWw9a2VlcF9ub25zcGF0aWFsLAogICAgICAgICAgICApCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBTZWN0aW9ucyAocGVyc2lzdCByZWdhcmRsZXNzIG9mIGV2ZW50cykKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBzZWN0aW9ucyA9IHNwbGl0X2ludG9fc2VjdGlvbnMocG9zdFsidGV4dCJdKQogICAgICAgICAgICBzZWN0aW9uX2lkX2J5X29yZGluYWw6IGRpY3RbaW50LCBpbnRdID0ge30KCiAgICAgICAgICAgIHVzZWRfc2VjdGlvbl9vcmRpbmFscyA9IHswfQoKICAgICAgICAgICAgZm9yIHNlYyBpbiBzZWN0aW9uczoKICAgICAgICAgICAgICAgIGlmIHNlYy5vcmRpbmFsIG5vdCBpbiB1c2VkX3NlY3Rpb25fb3JkaW5hbHM6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBzZWN0aW9uX2lkX2J5X29yZGluYWxbc2VjLm9yZGluYWxdID0gcGVyc2lzdF9zZWN0aW9uKAogICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICBpbmdlc3RfcG9zdF9pZD1pbmdlc3RfcG9zdF9pZCwKICAgICAgICAgICAgICAgICAgICB0ZXh0PXNlYy50ZXh0LAogICAgICAgICAgICAgICAgICAgIG9yZGluYWw9c2VjLm9yZGluYWwsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAjIElmIG5vIHZhbGlkIGV2ZW50cywgY29tcGxldGUgcnVuIGJ1dCBETyBOT1Qgc2tpcCBwZXJzaXN0ZW5jZSBlbnRpcmVseQogICAgICAgICAgICBpZiBub3QgbHNzX2V2ZW50czoKICAgICAgICAgICAgICAgIGNvbXBsZXRlX2xzc19ydW4obHNzX3J1bl9pZCkKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBDb250ZXh0dWFsaXphdGlvbgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIHNlY3Rpb25fb3JkaW5hbHMgPSBzb3J0ZWQoc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmtleXMoKSkKICAgICAgICAgICAgZXZlbnRfb3JkaW5hbHNfYnlfc2VjdGlvbiA9IHswOiBsaXN0KHJhbmdlKGxlbihsc3NfZXZlbnRzKSkpfQoKICAgICAgICAgICAgZm9yIGlkeCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIGhpbnRzKSBpbiBlbnVtZXJhdGUobHNzX2V2ZW50cyk6CiAgICAgICAgICAgICAgICBsc3NfZXZlbnRzW2lkeF0gPSAoCiAgICAgICAgICAgICAgICAgICAgZXZlbnQsCiAgICAgICAgICAgICAgICAgICAgcm9sZXMsCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzX2xpc3QsCiAgICAgICAgICAgICAgICAgICAgY29udGV4dHVhbGl6ZSgKICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dF9oaW50cz1oaW50cywKICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbl9vcmRpbmFscz1zZWN0aW9uX29yZGluYWxzLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudF9vcmRpbmFsc19ieV9zZWN0aW9uPWV2ZW50X29yZGluYWxzX2J5X3NlY3Rpb24sCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIFBlcnNpc3RlbmNlCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICAgICAgZXZlbnRfaWRfbWFwOiBkaWN0W2ludCwgaW50XSA9IHt9CgogICAgICAgICAgICBmb3Igb3JkaW5hbCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIGhpbnRzKSBpbiBlbnVtZXJhdGUobHNzX2V2ZW50cyk6CiAgICAgICAgICAgICAgICBzZWN0aW9uX2lkID0gc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmdldCgwKQoKICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZCA9IHBlcnNpc3RfZXZlbnQoCiAgICAgICAgICAgICAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgICAgIHNlY3Rpb25faWQ9c2VjdGlvbl9pZCwKICAgICAgICAgICAgICAgICAgICBldmVudF91aWQ9ZXZlbnQuZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw9ZXZlbnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoX3BocmFzZT1ldmVudC5zZWFyY2hfcGhyYXNlX3RleHQsCiAgICAgICAgICAgICAgICAgICAgdGV4dD1ldmVudC5zZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50LAogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3Rva2VuPWV2ZW50LmRvY19zdGFydF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBlbmRfdG9rZW49ZXZlbnQuZG9jX2VuZF90b2tlbl9pbmRleCwKICAgICAgICAgICAgICAgICAgICBvcmRpbmFsPW9yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgc2ltaWxhcml0eT1ldmVudC5vdmVyYWxsX3NpbWlsYXJpdHksCiAgICAgICAgICAgICAgICAgICAgbmVnYXRlZD1ldmVudC5uZWdhdGVkLAogICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ldmVudC51bmNlcnRhaW4sCiAgICAgICAgICAgICAgICAgICAgaW52b2x2ZXNfY29yZWZlcmVuY2U9ZXZlbnQuaW52b2x2ZXNfY29yZWZlcmVuY2UsCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgZXZlbnRfaWRfbWFwW29yZGluYWxdID0gbHNzX2V2ZW50X2lkCgogICAgICAgICAgICAgICAgZm9yIHJjIGluIHJvbGVzOgogICAgICAgICAgICAgICAgICAgIHBlcnNpc3Rfcm9sZV9jYW5kaWRhdGUobHNzX2V2ZW50X2lkPWxzc19ldmVudF9pZCwgcmM9cmMpCgogICAgICAgICAgICAgICAgc2VyaWVzX2lkX21hcCA9IHt9CiAgICAgICAgICAgICAgICBpdGVtX2lkX21hcCA9IHt9CgogICAgICAgICAgICAgICAgZm9yIHNlcmllcyBpbiBzZXJpZXNfbGlzdDoKICAgICAgICAgICAgICAgICAgICBtYXBwaW5nID0gcGVyc2lzdF9sb2NhdGlvbl9zZXJpZXMoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZD1sc3NfZXZlbnRfaWQsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllcz1zZXJpZXMsCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHNlcmllc19pZF9tYXBbc2VyaWVzLnNlcmllc19pZF0gPSBsaXN0KG1hcHBpbmcudmFsdWVzKCkpWzBdCiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZF9tYXAudXBkYXRlKG1hcHBpbmcpCgogICAgICAgICAgICAgICAgZm9yIGhpbnQgaW4gaGludHM6CiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdF9jb250ZXh0X2hpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICAgICAgaGludD1oaW50LAogICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXNfaWRfbWFwPXNlcmllc19pZF9tYXAsCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1faWRfbWFwPWl0ZW1faWRfbWFwLAogICAgICAgICAgICAgICAgICAgICAgICBldmVudF9pZF9tYXA9ZXZlbnRfaWRfbWFwLAogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uX2lkX21hcD1zZWN0aW9uX2lkX2J5X29yZGluYWwsCiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgY29tcGxldGVfbHNzX3J1bihsc3NfcnVuX2lkKQoKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICByYWlzZQo",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAwJgAAAAAAAAAAAAAAAPC/"
				],
				[
					144,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAA0JgAAIyBzcmMvc2l0cmVwYzIvbHNzL3BpcGVsaW5lLnB5Cgpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZWZhdWx0ZGljdApmcm9tIHR5cGluZyBpbXBvcnQgU2VxdWVuY2UsIE9wdGlvbmFsCgppbXBvcnQgc3FsaXRlMwpmcm9tIHNwYWN5LnRva2VucyBpbXBvcnQgRG9jCmZyb20gaG9sbWVzX2V4dHJhY3RvciBpbXBvcnQgTWFuYWdlcgoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKZnJvbSBzaXRyZXBjMi5sc3MuYm9vdHN0cmFwIGltcG9ydCBidWlsZF9tYW5hZ2VyCmZyb20gc2l0cmVwYzIubHNzLnBocmFzZXMgaW1wb3J0IHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzCmZyb20gc2l0cmVwYzIubHNzLnJ1bGVyIGltcG9ydCBhZGRfZW50aXR5X3J1bGVyc19mcm9tX2RiCmZyb20gc2l0cmVwYzIubHNzLnNlY3Rpb25pbmcgaW1wb3J0IHNwbGl0X2ludG9fc2VjdGlvbnMKZnJvbSBzaXRyZXBjMi5sc3MuZXZlbnRzIGltcG9ydCAoCiAgICBjb21wdXRlX2RvY19zcGFuX2Zyb21fcGhyYXNlX21hdGNoLAogICAgYnVpbGRfbHNzX2V2ZW50cywKKQpmcm9tIHNpdHJlcGMyLmxzcy5wZXJzaXN0IGltcG9ydCAoCiAgICBjcmVhdGVfbHNzX3J1biwKICAgIGNvbXBsZXRlX2xzc19ydW4sCiAgICBwZXJzaXN0X3NlY3Rpb24sCiAgICBwZXJzaXN0X2V2ZW50LAogICAgcGVyc2lzdF9yb2xlX2NhbmRpZGF0ZSwKICAgIHBlcnNpc3RfbG9jYXRpb25fc2VyaWVzLAogICAgcGVyc2lzdF9jb250ZXh0X2hpbnQsCikKZnJvbSBzaXRyZXBjMi5sc3MudHlwZWRlZnMgaW1wb3J0IEV2ZW50TWF0Y2gKZnJvbSBzaXRyZXBjMi5sc3MuY29udGV4dHVhbGl6ZSBpbXBvcnQgY29udGV4dHVhbGl6ZQpmcm9tIHNpdHJlcGMyLmxzcy5sc3Nfc2NvcGluZyBpbXBvcnQgTFNTQ29udGV4dEhpbnQKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIE5MUCBJTklUSUFMSVpBVElPTgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIGJ1aWxkX2hvbG1lc19hbmRfbmxwKCkgLT4gTWFuYWdlcjoKICAgIG1hbmFnZXIgPSBidWlsZF9tYW5hZ2VyKCkKICAgIG1hbmFnZXIubmxwID0gYWRkX2VudGl0eV9ydWxlcnNfZnJvbV9kYihtYW5hZ2VyLm5scCkKICAgIHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzKG1hbmFnZXIpCiAgICByZXR1cm4gbWFuYWdlcgoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgTFNTIFBJUEVMSU5FCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgcnVuX2xzc19waXBlbGluZSgKICAgIGluZ2VzdF9wb3N0czogU2VxdWVuY2VbZGljdF0sCiAgICAqLAogICAgbWFuYWdlcjogT3B0aW9uYWxbTWFuYWdlcl0gPSBOb25lLAogICAgYmF0Y2hfc2l6ZTogaW50ID0gOCwKICAgIG1pbl9zaW1pbGFyaXR5OiBmbG9hdCA9IDAuMCwKICAgIHJlcHJvY2VzczogYm9vbCA9IEZhbHNlLAogICAga2VlcF9ub25zcGF0aWFsOiBib29sID0gRmFsc2UsCikgLT4gTm9uZToKICAgIGlmIG5vdCBpbmdlc3RfcG9zdHM6CiAgICAgICAgcmV0dXJuCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEluY3JlbWVudGFsIGV4ZWN1dGlvbiBndWFyZAogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgaWYgbm90IHJlcHJvY2VzczoKICAgICAgICBpbmdlc3RfaWRzID0gW3BbImlkIl0gZm9yIHAgaW4gaW5nZXN0X3Bvc3RzXQoKICAgICAgICB3aXRoIHNxbGl0ZTMuY29ubmVjdChyZWNvcmRzX2RiX3BhdGgoKSkgYXMgY29uOgogICAgICAgICAgICBjb24uZXhlY3V0ZSgiUFJBR01BIGZvcmVpZ25fa2V5cyA9IE9OOyIpCiAgICAgICAgICAgIHJvd3MgPSBjb24uZXhlY3V0ZSgKICAgICAgICAgICAgICAgIGYiIiIKICAgICAgICAgICAgICAgIFNFTEVDVCBESVNUSU5DVCBpbmdlc3RfcG9zdF9pZAogICAgICAgICAgICAgICAgRlJPTSBsc3NfcnVucwogICAgICAgICAgICAgICAgV0hFUkUgY29tcGxldGVkX2F0IElTIE5PVCBOVUxMCiAgICAgICAgICAgICAgICAgIEFORCBpbmdlc3RfcG9zdF9pZCBJTiAoeyIsIi5qb2luKCI/IiBmb3IgXyBpbiBpbmdlc3RfaWRzKX0pCiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICBpbmdlc3RfaWRzLAogICAgICAgICAgICApLmZldGNoYWxsKCkKCiAgICAgICAgY29tcGxldGVkX2lkcyA9IHtyb3dbMF0gZm9yIHJvdyBpbiByb3dzfQogICAgICAgIGluZ2VzdF9wb3N0cyA9IFtwIGZvciBwIGluIGluZ2VzdF9wb3N0cyBpZiBwWyJpZCJdIG5vdCBpbiBjb21wbGV0ZWRfaWRzXQoKICAgICAgICBpZiBub3QgaW5nZXN0X3Bvc3RzOgogICAgICAgICAgICByZXR1cm4KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgTkxQIC8gSG9sbWVzIHNldHVwCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBpZiBtYW5hZ2VyIGlzIE5vbmU6CiAgICAgICAgbWFuYWdlciA9IGJ1aWxkX2hvbG1lc19hbmRfbmxwKCkKCiAgICBubHAgPSBtYW5hZ2VyLm5scAoKICAgIGRvY3M6IGRpY3RbaW50LCBEb2NdID0ge30KICAgIGZvciBwaWQsIGRvYyBpbiB6aXAoCiAgICAgICAgKHBbImlkIl0gZm9yIHAgaW4gaW5nZXN0X3Bvc3RzKSwKICAgICAgICBubHAucGlwZSgocFsidGV4dCJdIGZvciBwIGluIGluZ2VzdF9wb3N0cyksIGJhdGNoX3NpemU9YmF0Y2hfc2l6ZSksCiAgICApOgogICAgICAgIGRvY3NbcGlkXSA9IGRvYwoKICAgIG1hbmFnZXIucmVnaXN0ZXJfc2VyaWFsaXplZF9kb2N1bWVudHMoCiAgICAgICAge3N0cihwaWQpOiBkb2MudG9fYnl0ZXMoKSBmb3IgcGlkLCBkb2MgaW4gZG9jcy5pdGVtcygpfQogICAgKQoKICAgIHJhd19tYXRjaGVzID0gbWFuYWdlci5tYXRjaCgpCiAgICBtYXRjaGVzX2J5X3Bvc3Q6IGRpY3RbaW50LCBsaXN0W2RpY3RdXSA9IGRlZmF1bHRkaWN0KGxpc3QpCgogICAgZm9yIG0gaW4gcmF3X21hdGNoZXM6CiAgICAgICAgbGFiZWwgPSBtLmdldCgiZG9jdW1lbnQiKSBvciBtLmdldCgiZG9jdW1lbnRfbGFiZWwiKQogICAgICAgIGlmIGxhYmVsIGlzIG5vdCBOb25lOgogICAgICAgICAgICBtYXRjaGVzX2J5X3Bvc3RbaW50KGxhYmVsKV0uYXBwZW5kKG0pCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFBlci1wb3N0IGV4ZWN1dGlvbgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgZm9yIHBvc3QgaW4gaW5nZXN0X3Bvc3RzOgogICAgICAgIGluZ2VzdF9wb3N0X2lkID0gcG9zdFsiaWQiXQogICAgICAgIGRvYyA9IGRvY3MuZ2V0KGluZ2VzdF9wb3N0X2lkKQogICAgICAgIGlmIGRvYyBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBsc3NfcnVuX2lkOiBPcHRpb25hbFtpbnRdID0gTm9uZQoKICAgICAgICB0cnk6CiAgICAgICAgICAgIGxzc19ydW5faWQgPSBjcmVhdGVfbHNzX3J1bigKICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgZW5naW5lPSJob2xtZXMiLAogICAgICAgICAgICAgICAgbW9kZWw9bmxwLm1ldGEuZ2V0KCJuYW1lIiksCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGV2ZW50X21hdGNoZXM6IGxpc3RbRXZlbnRNYXRjaF0gPSBbXQogICAgICAgICAgICBjb250ZXh0X2hpbnRzOiBsaXN0W0xTU0NvbnRleHRIaW50XSA9IFtdCgogICAgICAgICAgICBldmVudF9vcmRpbmFsID0gMAoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgRElTQU1CSUdVQVRJT04gUE9JTlQKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBmb3IgcmF3IGluIG1hdGNoZXNfYnlfcG9zdC5nZXQoaW5nZXN0X3Bvc3RfaWQsIFtdKToKICAgICAgICAgICAgICAgIGxhYmVsID0gcmF3LmdldCgic2VhcmNoX3BocmFzZV9sYWJlbCIsICIiKQoKICAgICAgICAgICAgICAgIGlmIGxhYmVsLnN0YXJ0c3dpdGgoIkVWRU5UOiIpOgogICAgICAgICAgICAgICAgICAgIHNpbWlsYXJpdHkgPSBmbG9hdChyYXcuZ2V0KCJvdmVyYWxsX3NpbWlsYXJpdHlfbWVhc3VyZSIsIDEuMCkpCiAgICAgICAgICAgICAgICAgICAgaWYgc2ltaWxhcml0eSA8IG1pbl9zaW1pbGFyaXR5OgogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAgICAgICAgICAgICBzdGFydCwgZW5kID0gY29tcHV0ZV9kb2Nfc3Bhbl9mcm9tX3BocmFzZV9tYXRjaChyYXcpCiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHJhdy5nZXQoInNlbnRlbmNlc193aXRoaW5fZG9jdW1lbnQiKSBvciBkb2Nbc3RhcnQ6ZW5kXS50ZXh0CgogICAgICAgICAgICAgICAgICAgIGV2ZW50X21hdGNoZXMuYXBwZW5kKAogICAgICAgICAgICAgICAgICAgICAgICBFdmVudE1hdGNoKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRfaWQ9ZiJ7aW5nZXN0X3Bvc3RfaWR9OntldmVudF9vcmRpbmFsfSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0X2lkPXN0cihpbmdlc3RfcG9zdF9pZCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1sYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaF9waHJhc2VfdGV4dD1yYXcuZ2V0KCJzZWFyY2hfcGhyYXNlX3RleHQiLCAiIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW50ZW5jZXNfd2l0aGluX2RvY3VtZW50PXRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyYWxsX3NpbWlsYXJpdHk9c2ltaWxhcml0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZ2F0ZWQ9Ym9vbChyYXcuZ2V0KCJuZWdhdGVkIiwgRmFsc2UpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuY2VydGFpbj1ib29sKHJhdy5nZXQoInVuY2VydGFpbiIsIEZhbHNlKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZvbHZlc19jb3JlZmVyZW5jZT1ib29sKHJhdy5nZXQoImludm9sdmVzX2NvcmVmZXJlbmNlIiwgRmFsc2UpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY19zdGFydF90b2tlbl9pbmRleD1zdGFydCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY19lbmRfdG9rZW5faW5kZXg9ZW5kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3X21hdGNoPXJhdywKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBldmVudF9vcmRpbmFsICs9IDEKCiAgICAgICAgICAgICAgICBlbGlmIGxhYmVsLnN0YXJ0c3dpdGgoIkNPTlRFWFQ6Iik6CiAgICAgICAgICAgICAgICAgICAgY29udGV4dF9oaW50cy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgIExTU0NvbnRleHRIaW50LmZyb21faG9sbWVzX21hdGNoKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3PXJhdywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYz1kb2MsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBTdHJ1Y3R1cmFsIHNjb3BpbmcKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgICAgICBsc3NfZXZlbnRzLCByZWplY3RlZF9ub25zcGF0aWFsID0gYnVpbGRfbHNzX2V2ZW50cygKICAgICAgICAgICAgICAgIGRvYz1kb2MsCiAgICAgICAgICAgICAgICBldmVudF9tYXRjaGVzPWV2ZW50X21hdGNoZXMsCiAgICAgICAgICAgICAgICBjb2xsZWN0X25vbnNwYXRpYWw9a2VlcF9ub25zcGF0aWFsLAogICAgICAgICAgICApCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBTZWN0aW9ucwogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIHNlY3Rpb25zID0gc3BsaXRfaW50b19zZWN0aW9ucyhwb3N0WyJ0ZXh0Il0pCiAgICAgICAgICAgIHNlY3Rpb25faWRfYnlfb3JkaW5hbDogZGljdFtpbnQsIGludF0gPSB7fQoKICAgICAgICAgICAgZm9yIHNlYyBpbiBzZWN0aW9uczoKICAgICAgICAgICAgICAgIGlmIHNlYy5vcmRpbmFsID09IDA6CiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbl9pZF9ieV9vcmRpbmFsWzBdID0gcGVyc2lzdF9zZWN0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICBsc3NfcnVuX2lkPWxzc19ydW5faWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PXNlYy50ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICBvcmRpbmFsPXNlYy5vcmRpbmFsLAogICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgIGlmIG5vdCBsc3NfZXZlbnRzOgogICAgICAgICAgICAgICAgY29tcGxldGVfbHNzX3J1bihsc3NfcnVuX2lkKQogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIENvbnRleHQgbGF0dGljZQogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIHNlY3Rpb25fb3JkaW5hbHMgPSBzb3J0ZWQoc2VjdGlvbl9pZF9ieV9vcmRpbmFsLmtleXMoKSkKICAgICAgICAgICAgZXZlbnRfb3JkaW5hbHNfYnlfc2VjdGlvbiA9IHswOiBsaXN0KHJhbmdlKGxlbihsc3NfZXZlbnRzKSkpfQoKICAgICAgICAgICAgZm9yIGlkeCwgKGV2ZW50LCByb2xlcywgc2VyaWVzX2xpc3QsIF8pIGluIGVudW1lcmF0ZShsc3NfZXZlbnRzKToKICAgICAgICAgICAgICAgIGxzc19ldmVudHNbaWR4XSA9ICgKICAgICAgICAgICAgICAgICAgICBldmVudCwKICAgICAgICAgICAgICAgICAgICByb2xlcywKICAgICAgICAgICAgICAgICAgICBzZXJpZXNfbGlzdCwKICAgICAgICAgICAgICAgICAgICBjb250ZXh0dWFsaXplKAogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0X2hpbnRzPWNvbnRleHRfaGludHMsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25fb3JkaW5hbHM9c2VjdGlvbl9vcmRpbmFscywKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRfb3JkaW5hbHNfYnlfc2VjdGlvbj1ldmVudF9vcmRpbmFsc19ieV9zZWN0aW9uLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBQZXJzaXN0ZW5jZQogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgICAgIGV2ZW50X2lkX21hcDogZGljdFtpbnQsIGludF0gPSB7fQoKICAgICAgICAgICAgZm9yIG9yZGluYWwsIChldmVudCwgcm9sZXMsIHNlcmllc19saXN0LCBoaW50cykgaW4gZW51bWVyYXRlKGxzc19ldmVudHMpOgogICAgICAgICAgICAgICAgc2VjdGlvbl9pZCA9IHNlY3Rpb25faWRfYnlfb3JkaW5hbC5nZXQoMCkKCiAgICAgICAgICAgICAgICBsc3NfZXZlbnRfaWQgPSBwZXJzaXN0X2V2ZW50KAogICAgICAgICAgICAgICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICAgICAgICAgICAgICBpbmdlc3RfcG9zdF9pZD1pbmdlc3RfcG9zdF9pZCwKICAgICAgICAgICAgICAgICAgICBzZWN0aW9uX2lkPXNlY3Rpb25faWQsCiAgICAgICAgICAgICAgICAgICAgZXZlbnRfdWlkPWV2ZW50LmV2ZW50X2lkLAogICAgICAgICAgICAgICAgICAgIGxhYmVsPWV2ZW50LmxhYmVsLAogICAgICAgICAgICAgICAgICAgIHNlYXJjaF9waHJhc2U9ZXZlbnQuc2VhcmNoX3BocmFzZV90ZXh0LAogICAgICAgICAgICAgICAgICAgIHRleHQ9ZXZlbnQuc2VudGVuY2VzX3dpdGhpbl9kb2N1bWVudCwKICAgICAgICAgICAgICAgICAgICBzdGFydF90b2tlbj1ldmVudC5kb2Nfc3RhcnRfdG9rZW5faW5kZXgsCiAgICAgICAgICAgICAgICAgICAgZW5kX3Rva2VuPWV2ZW50LmRvY19lbmRfdG9rZW5faW5kZXgsCiAgICAgICAgICAgICAgICAgICAgb3JkaW5hbD1vcmRpbmFsLAogICAgICAgICAgICAgICAgICAgIHNpbWlsYXJpdHk9ZXZlbnQub3ZlcmFsbF9zaW1pbGFyaXR5LAogICAgICAgICAgICAgICAgICAgIG5lZ2F0ZWQ9ZXZlbnQubmVnYXRlZCwKICAgICAgICAgICAgICAgICAgICB1bmNlcnRhaW49ZXZlbnQudW5jZXJ0YWluLAogICAgICAgICAgICAgICAgICAgIGludm9sdmVzX2NvcmVmZXJlbmNlPWV2ZW50Lmludm9sdmVzX2NvcmVmZXJlbmNlLAogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgIGV2ZW50X2lkX21hcFtvcmRpbmFsXSA9IGxzc19ldmVudF9pZAoKICAgICAgICAgICAgICAgIGZvciByYyBpbiByb2xlczoKICAgICAgICAgICAgICAgICAgICBwZXJzaXN0X3JvbGVfY2FuZGlkYXRlKGxzc19ldmVudF9pZD1sc3NfZXZlbnRfaWQsIHJjPXJjKQoKICAgICAgICAgICAgICAgIHNlcmllc19pZF9tYXAgPSB7fQogICAgICAgICAgICAgICAgaXRlbV9pZF9tYXAgPSB7fQoKICAgICAgICAgICAgICAgIGZvciBzZXJpZXMgaW4gc2VyaWVzX2xpc3Q6CiAgICAgICAgICAgICAgICAgICAgbWFwcGluZyA9IHBlcnNpc3RfbG9jYXRpb25fc2VyaWVzKAogICAgICAgICAgICAgICAgICAgICAgICBsc3NfZXZlbnRfaWQ9bHNzX2V2ZW50X2lkLAogICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXM9c2VyaWVzLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBzZXJpZXNfaWRfbWFwW3Nlcmllcy5zZXJpZXNfaWRdID0gbGlzdChtYXBwaW5nLnZhbHVlcygpKVswXQogICAgICAgICAgICAgICAgICAgIGl0ZW1faWRfbWFwLnVwZGF0ZShtYXBwaW5nKQoKICAgICAgICAgICAgICAgIGZvciBoaW50IGluIGhpbnRzOgogICAgICAgICAgICAgICAgICAgIHBlcnNpc3RfY29udGV4dF9oaW50KAogICAgICAgICAgICAgICAgICAgICAgICBsc3NfcnVuX2lkPWxzc19ydW5faWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGhpbnQ9aGludCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzX2lkX21hcD1zZXJpZXNfaWRfbWFwLAogICAgICAgICAgICAgICAgICAgICAgICBpdGVtX2lkX21hcD1pdGVtX2lkX21hcCwKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRfaWRfbWFwPWV2ZW50X2lkX21hcCwKICAgICAgICAgICAgICAgICAgICAgICAgc2VjdGlvbl9pZF9tYXA9c2VjdGlvbl9pZF9ieV9vcmRpbmFsLAogICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgIGNvbXBsZXRlX2xzc19ydW4obHNzX3J1bl9pZCkKCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICAgICAgcmFpc2UKAAAAAAAAAAA0JgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAANCYAAAAAAAA0JgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/dom/dom_ingest.py",
			"settings":
			{
				"buffer_size": 9676,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADUJQAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUKZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIENvbnN0YW50cwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKTElGRUNZQ0xFX1NUQUdFUyA9IHsKICAgIDE6ICJDUkVBVEVEIiwKICAgIDI6ICJJTklUSUFMX1JFVklFVyIsCiAgICAzOiAiUFJPQ0VTU0VEIiwKICAgIDQ6ICJGSU5BTF9SRVZJRVciLAogICAgNTogIkFVRElUIiwKfQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgSGVscGVycwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIF9lbnN1cmVfbGlmZWN5Y2xlX3N0YWdlcyhjb25uOiBzcWxpdGUzLkNvbm5lY3Rpb24pIC0+IE5vbmU6CiAgICAiIiIKICAgIEVuc3VyZSBkb21fbGlmZWN5Y2xlX3N0YWdlIGNvbnRhaW5zIHRoZSBjYW5vbmljYWwgc3RhZ2VzLgogICAgSWRlbXBvdGVudC4KICAgICIiIgogICAgY3VyID0gY29ubi5jdXJzb3IoKQoKICAgIGZvciBzdGFnZV9pZCwgbmFtZSBpbiBMSUZFQ1lDTEVfU1RBR0VTLml0ZW1zKCk6CiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBJTlNFUlQgT1IgSUdOT1JFIElOVE8gZG9tX2xpZmVjeWNsZV9zdGFnZSAoaWQsIG5hbWUpCiAgICAgICAgICAgIFZBTFVFUyAoPywgPykKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAoc3RhZ2VfaWQsIG5hbWUpLAogICAgICAgICkKCiAgICBjb25uLmNvbW1pdCgpCgoKZGVmIF9mZXRjaG9uZV9pZChjdXI6IHNxbGl0ZTMuQ3Vyc29yKSAtPiBpbnQ6CiAgICByb3cgPSBjdXIuZmV0Y2hvbmUoKQogICAgaWYgcm93IGlzIE5vbmU6CiAgICAgICAgcmFpc2UgUnVudGltZUVycm9yKCJFeHBlY3RlZCByb3csIGdvdCBub25lIikKICAgIHJldHVybiByb3dbMF0KCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIE1haW4gZW50cnkgcG9pbnQKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBkb21faW5nZXN0KAogICAgKiwKICAgIGNvbm46IHNxbGl0ZTMuQ29ubmVjdGlvbiwKICAgIGluZ2VzdF9wb3N0X2lkOiBpbnQsCiAgICBsc3NfcnVuX2lkOiBpbnQsCiAgICBjcmVhdGVkX2F0OiBkYXRldGltZSwKKSAtPiBpbnQ6CiAgICAiIiIKICAgIE1hdGVyaWFsaXplIERPTSBzdHJ1Y3R1cmUgZm9yIChpbmdlc3RfcG9zdF9pZCwgbHNzX3J1bl9pZCkuCgogICAgUmV0dXJuczoKICAgICAgICBkb21fc25hcHNob3RfaWQgKENSRUFURUQgc3RhZ2UpCiAgICAiIiIKCiAgICBjb25uLmV4ZWN1dGUoIlBSQUdNQSBmb3JlaWduX2tleXMgPSBPTjsiKQogICAgY3VyID0gY29ubi5jdXJzb3IoKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFByZWNvbmRpdGlvbnMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUIGluZ2VzdF9wb3N0X2lkCiAgICAgICAgRlJPTSBsc3NfcnVucwogICAgICAgIFdIRVJFIGlkID0gPwogICAgICAgICIiIiwKICAgICAgICAobHNzX3J1bl9pZCwpLAogICAgKQogICAgcm93ID0gY3VyLmZldGNob25lKCkKICAgIGlmIHJvdyBpcyBOb25lOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJsc3NfcnVuX2lkIHtsc3NfcnVuX2lkfSBkb2VzIG5vdCBleGlzdCIpCgogICAgaWYgcm93WzBdICE9IGluZ2VzdF9wb3N0X2lkOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoCiAgICAgICAgICAgIGYibHNzX3J1bl9pZCB7bHNzX3J1bl9pZH0gZG9lcyBub3QgYmVsb25nIHRvIGluZ2VzdF9wb3N0X2lkIHtpbmdlc3RfcG9zdF9pZH0iCiAgICAgICAgKQoKICAgIGN1ci5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCBpZAogICAgICAgIEZST00gZG9tX3Bvc3QKICAgICAgICBXSEVSRSBpbmdlc3RfcG9zdF9pZCA9ID8gQU5EIGxzc19ydW5faWQgPSA/CiAgICAgICAgIiIiLAogICAgICAgIChpbmdlc3RfcG9zdF9pZCwgbHNzX3J1bl9pZCksCiAgICApCiAgICBpZiBjdXIuZmV0Y2hvbmUoKSBpcyBub3QgTm9uZToKICAgICAgICByYWlzZSBSdW50aW1lRXJyb3IoCiAgICAgICAgICAgICJET00gYWxyZWFkeSBpbmdlc3RlZCBmb3IgdGhpcyAoaW5nZXN0X3Bvc3RfaWQsIGxzc19ydW5faWQpIgogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBMaWZlY3ljbGUgc3RhZ2VzCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIF9lbnN1cmVfbGlmZWN5Y2xlX3N0YWdlcyhjb25uKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIGRvbV9wb3N0CiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGN1ci5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIElOU0VSVCBJTlRPIGRvbV9wb3N0IChpbmdlc3RfcG9zdF9pZCwgbHNzX3J1bl9pZCkKICAgICAgICBWQUxVRVMgKD8sID8pCiAgICAgICAgIiIiLAogICAgICAgIChpbmdlc3RfcG9zdF9pZCwgbHNzX3J1bl9pZCksCiAgICApCiAgICBkb21fcG9zdF9pZCA9IGN1ci5sYXN0cm93aWQKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBkb21fc25hcHNob3QgKENSRUFURUQpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGN1ci5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIElOU0VSVCBJTlRPIGRvbV9zbmFwc2hvdCAoCiAgICAgICAgICAgIGRvbV9wb3N0X2lkLAogICAgICAgICAgICBsaWZlY3ljbGVfc3RhZ2VfaWQsCiAgICAgICAgICAgIGNyZWF0ZWRfYXQKICAgICAgICApCiAgICAgICAgVkFMVUVTICg/LCAxLCA/KQogICAgICAgICIiIiwKICAgICAgICAoZG9tX3Bvc3RfaWQsIGNyZWF0ZWRfYXQuaXNvZm9ybWF0KCkpLAogICAgKQogICAgZG9tX3NuYXBzaG90X2lkID0gY3VyLmxhc3Ryb3dpZAoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIERPTSBQT1NUIG5vZGUKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgSU5TRVJUIElOVE8gZG9tX25vZGUgKAogICAgICAgICAgICBkb21fcG9zdF9pZCwKICAgICAgICAgICAgbm9kZV90eXBlLAogICAgICAgICAgICBwYXJlbnRfaWQsCiAgICAgICAgICAgIHNpYmxpbmdfb3JkZXIKICAgICAgICApCiAgICAgICAgVkFMVUVTICg/LCAnUE9TVCcsIE5VTEwsIDApCiAgICAgICAgIiIiLAogICAgICAgIChkb21fcG9zdF9pZCwpLAogICAgKQogICAgcG9zdF9ub2RlX2lkID0gY3VyLmxhc3Ryb3dpZAoKICAgIGN1ci5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIElOU0VSVCBJTlRPIGRvbV9ub2RlX3Byb3ZlbmFuY2UgKGRvbV9ub2RlX2lkKQogICAgICAgIFZBTFVFUyAoPykKICAgICAgICAiIiIsCiAgICAgICAgKHBvc3Rfbm9kZV9pZCwpLAogICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEhlbHBlciBtYXBzCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHNlY3Rpb25fbm9kZV9pZHM6IERpY3RbaW50LCBpbnRdID0ge30KICAgIGV2ZW50X25vZGVfaWRzOiBEaWN0W2ludCwgaW50XSA9IHt9CiAgICBzZXJpZXNfbm9kZV9pZHM6IERpY3RbaW50LCBpbnRdID0ge30KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTZWN0aW9ucyDihpIgRE9NIFNFQ1RJT04gbm9kZXMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUIGlkLCB0ZXh0LCBvcmRpbmFsCiAgICAgICAgRlJPTSBsc3Nfc2VjdGlvbnMKICAgICAgICBXSEVSRSBsc3NfcnVuX2lkID0gPwogICAgICAgIE9SREVSIEJZIG9yZGluYWwKICAgICAgICAiIiIsCiAgICAgICAgKGxzc19ydW5faWQsKSwKICAgICkKCiAgICBmb3Igc2VjdGlvbl9pZCwgc2VjdGlvbl90ZXh0LCBvcmRpbmFsIGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgSU5TRVJUIElOVE8gZG9tX25vZGUgKAogICAgICAgICAgICAgICAgZG9tX3Bvc3RfaWQsCiAgICAgICAgICAgICAgICBub2RlX3R5cGUsCiAgICAgICAgICAgICAgICBwYXJlbnRfaWQsCiAgICAgICAgICAgICAgICBzaWJsaW5nX29yZGVyCiAgICAgICAgICAgICkKICAgICAgICAgICAgVkFMVUVTICg/LCAnU0VDVElPTicsID8sID8pCiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKGRvbV9wb3N0X2lkLCBwb3N0X25vZGVfaWQsIG9yZGluYWwpLAogICAgICAgICkKICAgICAgICBkb21fc2VjdGlvbl9pZCA9IGN1ci5sYXN0cm93aWQKICAgICAgICBzZWN0aW9uX25vZGVfaWRzW3NlY3Rpb25faWRdID0gZG9tX3NlY3Rpb25faWQKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBJTlNFUlQgSU5UTyBkb21fbm9kZV9wcm92ZW5hbmNlICgKICAgICAgICAgICAgICAgIGRvbV9ub2RlX2lkLAogICAgICAgICAgICAgICAgbHNzX3NlY3Rpb25faWRzCiAgICAgICAgICAgICkKICAgICAgICAgICAgVkFMVUVTICg/LCBqc29uX2FycmF5KD8pKQogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgIChkb21fc2VjdGlvbl9pZCwgc2VjdGlvbl9pZCksCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEV2ZW50cyDihpIgRE9NIEVWRU5UIG5vZGVzCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGN1ci5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCBpZCwgc2VjdGlvbl9pZCwgdGV4dCwgb3JkaW5hbAogICAgICAgIEZST00gbHNzX2V2ZW50cwogICAgICAgIFdIRVJFIGxzc19ydW5faWQgPSA/CiAgICAgICAgT1JERVIgQlkgc2VjdGlvbl9pZCwgb3JkaW5hbAogICAgICAgICIiIiwKICAgICAgICAobHNzX3J1bl9pZCwpLAogICAgKQoKICAgIGZvciBldmVudF9pZCwgc2VjdGlvbl9pZCwgZXZlbnRfdGV4dCwgb3JkaW5hbCBpbiBjdXIuZmV0Y2hhbGwoKToKICAgICAgICBwYXJlbnRfaWQgPSAoCiAgICAgICAgICAgIHNlY3Rpb25fbm9kZV9pZHNbc2VjdGlvbl9pZF0KICAgICAgICAgICAgaWYgc2VjdGlvbl9pZCBpcyBub3QgTm9uZQogICAgICAgICAgICBlbHNlIHBvc3Rfbm9kZV9pZAogICAgICAgICkKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBJTlNFUlQgSU5UTyBkb21fbm9kZSAoCiAgICAgICAgICAgICAgICBkb21fcG9zdF9pZCwKICAgICAgICAgICAgICAgIG5vZGVfdHlwZSwKICAgICAgICAgICAgICAgIHBhcmVudF9pZCwKICAgICAgICAgICAgICAgIHNpYmxpbmdfb3JkZXIKICAgICAgICAgICAgKQogICAgICAgICAgICBWQUxVRVMgKD8sICdFVkVOVCcsID8sID8pCiAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgKGRvbV9wb3N0X2lkLCBwYXJlbnRfaWQsIG9yZGluYWwpLAogICAgICAgICkKICAgICAgICBkb21fZXZlbnRfaWQgPSBjdXIubGFzdHJvd2lkCiAgICAgICAgZXZlbnRfbm9kZV9pZHNbZXZlbnRfaWRdID0gZG9tX2V2ZW50X2lkCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgSU5TRVJUIElOVE8gZG9tX25vZGVfcHJvdmVuYW5jZSAoCiAgICAgICAgICAgICAgICBkb21fbm9kZV9pZCwKICAgICAgICAgICAgICAgIGxzc19ldmVudF9pZAogICAgICAgICAgICApCiAgICAgICAgICAgIFZBTFVFUyAoPywgPykKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAoZG9tX2V2ZW50X2lkLCBldmVudF9pZCksCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIExvY2F0aW9uIHNlcmllcyDihpIgRE9NIExPQ0FUSU9OX1NFUklFUyBub2RlcwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QgaWQsIGxzc19ldmVudF9pZAogICAgICAgIEZST00gbHNzX2xvY2F0aW9uX3NlcmllcwogICAgICAgIE9SREVSIEJZIGlkCiAgICAgICAgIiIiCiAgICApCgogICAgc2VyaWVzX29yZGVyOiBEaWN0W2ludCwgaW50XSA9IHt9CgogICAgZm9yIHNlcmllc19pZCwgbHNzX2V2ZW50X2lkIGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgIHBhcmVudF9ldmVudF9ub2RlID0gZXZlbnRfbm9kZV9pZHNbbHNzX2V2ZW50X2lkXQoKICAgICAgICBpZHggPSBzZXJpZXNfb3JkZXIuZ2V0KGxzc19ldmVudF9pZCwgMCkKICAgICAgICBzZXJpZXNfb3JkZXJbbHNzX2V2ZW50X2lkXSA9IGlkeCArIDEKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBJTlNFUlQgSU5UTyBkb21fbm9kZSAoCiAgICAgICAgICAgICAgICBkb21fcG9zdF9pZCwKICAgICAgICAgICAgICAgIG5vZGVfdHlwZSwKICAgICAgICAgICAgICAgIHBhcmVudF9pZCwKICAgICAgICAgICAgICAgIHNpYmxpbmdfb3JkZXIKICAgICAgICAgICAgKQogICAgICAgICAgICBWQUxVRVMgKD8sICdMT0NBVElPTl9TRVJJRVMnLCA/LCA/KQogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgIChkb21fcG9zdF9pZCwgcGFyZW50X2V2ZW50X25vZGUsIGlkeCksCiAgICAgICAgKQogICAgICAgIGRvbV9zZXJpZXNfaWQgPSBjdXIubGFzdHJvd2lkCiAgICAgICAgc2VyaWVzX25vZGVfaWRzW3Nlcmllc19pZF0gPSBkb21fc2VyaWVzX2lkCgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgSU5TRVJUIElOVE8gZG9tX25vZGVfcHJvdmVuYW5jZSAoZG9tX25vZGVfaWQpCiAgICAgICAgICAgIFZBTFVFUyAoPykKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAoZG9tX3Nlcmllc19pZCwpLAogICAgICAgICkKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBMb2NhdGlvbiBpdGVtcyDihpIgRE9NIExPQ0FUSU9OIG5vZGVzCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGN1ci5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCBpZCwgc2VyaWVzX2lkLCB0ZXh0LCBvcmRpbmFsCiAgICAgICAgRlJPTSBsc3NfbG9jYXRpb25faXRlbXMKICAgICAgICBPUkRFUiBCWSBzZXJpZXNfaWQsIG9yZGluYWwKICAgICAgICAiIiIKICAgICkKCiAgICBmb3IgaXRlbV9pZCwgc2VyaWVzX2lkLCBsb2NfdGV4dCwgb3JkaW5hbCBpbiBjdXIuZmV0Y2hhbGwoKToKICAgICAgICBwYXJlbnRfc2VyaWVzX25vZGUgPSBzZXJpZXNfbm9kZV9pZHNbc2VyaWVzX2lkXQoKICAgICAgICBjdXIuZXhlY3V0ZSgKICAgICAgICAgICAgIiIiCiAgICAgICAgICAgIElOU0VSVCBJTlRPIGRvbV9ub2RlICgKICAgICAgICAgICAgICAgIGRvbV9wb3N0X2lkLAogICAgICAgICAgICAgICAgbm9kZV90eXBlLAogICAgICAgICAgICAgICAgcGFyZW50X2lkLAogICAgICAgICAgICAgICAgc2libGluZ19vcmRlcgogICAgICAgICAgICApCiAgICAgICAgICAgIFZBTFVFUyAoPywgJ0xPQ0FUSU9OJywgPywgPykKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAoZG9tX3Bvc3RfaWQsIHBhcmVudF9zZXJpZXNfbm9kZSwgb3JkaW5hbCksCiAgICAgICAgKQogICAgICAgIGRvbV9sb2NhdGlvbl9pZCA9IGN1ci5sYXN0cm93aWQKCiAgICAgICAgY3VyLmV4ZWN1dGUoCiAgICAgICAgICAgICIiIgogICAgICAgICAgICBJTlNFUlQgSU5UTyBkb21fbm9kZV9wcm92ZW5hbmNlIChkb21fbm9kZV9pZCkKICAgICAgICAgICAgVkFMVUVTICg/KQogICAgICAgICAgICAiIiIsCiAgICAgICAgICAgIChkb21fbG9jYXRpb25faWQsKSwKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgSW5pdGlhbGl6ZSBkb21fbm9kZV9zdGF0ZSBmb3IgYWxsIG5vZGVzCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGN1ci5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCBpZAogICAgICAgIEZST00gZG9tX25vZGUKICAgICAgICBXSEVSRSBkb21fcG9zdF9pZCA9ID8KICAgICAgICAiIiIsCiAgICAgICAgKGRvbV9wb3N0X2lkLCksCiAgICApCgogICAgZm9yIChkb21fbm9kZV9pZCwpIGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiIiIKICAgICAgICAgICAgSU5TRVJUIElOVE8gZG9tX25vZGVfc3RhdGUgKAogICAgICAgICAgICAgICAgZG9tX3NuYXBzaG90X2lkLAogICAgICAgICAgICAgICAgZG9tX25vZGVfaWQsCiAgICAgICAgICAgICAgICBzZWxlY3RlZCwKICAgICAgICAgICAgICAgIHN1bW1hcnksCiAgICAgICAgICAgICAgICByZXNvbHZlZCwKICAgICAgICAgICAgICAgIHJlc29sdXRpb25fc291cmNlCiAgICAgICAgICAgICkKICAgICAgICAgICAgVkFMVUVTICg/LCA/LCBUUlVFLCAnJywgTlVMTCwgTlVMTCkKICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAoZG9tX3NuYXBzaG90X2lkLCBkb21fbm9kZV9pZCksCiAgICAgICAgKQoKICAgIGNvbm4uY29tbWl0KCkKICAgIHJldHVybiBkb21fc25hcHNob3RfaWQKAAAAAAAAAADMJQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/lss/phrases.py",
			"settings":
			{
				"buffer_size": 1698,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"toggle_comment",
					{
						"block": false
					},
					"CwAAAIYGAAAAAAAAiAYAAAAAAAAAAAAAYgYAAAAAAABkBgAAAAAAAAAAAABDBgAAAAAAAEUGAAAAAAAAAAAAADIGAAAAAAAANAYAAAAAAAAAAAAADwYAAAAAAAARBgAAAAAAAAAAAAAFBgAAAAAAAAcGAAAAAAAAAAAAAL4FAAAAAAAAwAUAAAAAAAAAAAAAqQUAAAAAAACrBQAAAAAAAAAAAABtBQAAAAAAAG8FAAAAAAAAAAAAAFMFAAAAAAAAVQUAAAAAAAAAAAAAFwUAAAAAAAAZBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjAYAAAAAAAAPBQAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACiBgAAIyBzcmMvc2l0cmVwYzIvbHNzL3BocmFzZXMucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCgppbXBvcnQgaG9sbWVzX2V4dHJhY3RvciBhcyBob2xtZXMKCmZyb20gc2l0cmVwYzIuY29uZmlnLnBhdGhzIGltcG9ydCBsZXhpY29uX3BhdGggYXMgbGV4aWNvbl9kYl9wYXRoCgoKZGVmIF9vcGVuX2xleGljb25fZGIoKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246CiAgICBwYXRoOiBQYXRoID0gbGV4aWNvbl9kYl9wYXRoKCkKICAgIGlmIG5vdCBwYXRoIG9yIG5vdCBwYXRoLmV4aXN0cygpOgogICAgICAgIHJhaXNlIEZpbGVOb3RGb3VuZEVycm9yKAogICAgICAgICAgICAiVW5hYmxlIHRvIGxvY2F0ZSBsZXhpY29uLmRiLiBIYXZlIHlvdSBydW4gJ3NpdHJlcGMyIGluaXQnPyIKICAgICAgICApCiAgICBjb25uID0gc3FsaXRlMy5jb25uZWN0KHBhdGgpCiAgICBjb25uLnJvd19mYWN0b3J5ID0gc3FsaXRlMy5Sb3cKICAgIHJldHVybiBjb25uCgoKZGVmIHJlZ2lzdGVyX3NlYXJjaF9waHJhc2VzKG1hbmFnZXI6IGhvbG1lcy5NYW5hZ2VyKSAtPiBOb25lOgogICAgIiIiCiAgICBSZWdpc3RlciBIb2xtZXMgc2VhcmNoIHBocmFzZXMgZnJvbSBsZXhpY29uLmRiLgoKICAgIENvbnRyYWN0OgogICAgLSBFbWl0cyBFdmVudE1hdGNoIG9ubHkKICAgIC0gTm8gbG9jYXRpb24gbG9naWMKICAgIC0gTm8gY29udGV4dCBsb2dpYwogICAgLSBObyByb2xlIGluZmVyZW5jZQogICAgLSBObyBzZW1hbnRpYyBjbGFzc2lmaWNhdGlvbgogICAgIiIiCgogICAgcmVnID0gbWFuYWdlci5yZWdpc3Rlcl9zZWFyY2hfcGhyYXNlCgogICAgd2l0aCBfb3Blbl9sZXhpY29uX2RiKCkgYXMgY29ubjoKICAgICAgICBjdXIgPSBjb25uLmN1cnNvcigpCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgRXZlbnQgcGhyYXNlcwogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGN1ci5leGVjdXRlKAogICAgICAgICAgICAiU0VMRUNUIGxhYmVsLCBwaHJhc2UgRlJPTSBldmVudF9waHJhc2VzIE9SREVSIEJZIGxhYmVsIgogICAgICAgICkKICAgICAgICBmb3Igcm93IGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgICAgICByZWcoCiAgICAgICAgICAgICAgICByb3dbInBocmFzZSJdLAogICAgICAgICAgICAgICAgbGFiZWw9cm93WyJsYWJlbCJdLAogICAgICAgICAgICApCgogICAgICAgICMgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyAjIENvbnRleHQgcGhyYXNlcwogICAgICAgICMgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBjdXIuZXhlY3V0ZSgKICAgICAgICAjICAgICAiU0VMRUNUIGxhYmVsLCBwaHJhc2UgRlJPTSBjb250ZXh0X3BocmFzZXMgT1JERVIgQlkgbGFiZWwiCiAgICAgICAgIyApCiAgICAgICAgIyBmb3Igcm93IGluIGN1ci5mZXRjaGFsbCgpOgogICAgICAgICMgICAgIHJlZygKICAgICAgICAjICAgICAgICAgcm93WyJwaHJhc2UiXSwKICAgICAgICAjICAgICAgICAgbGFiZWw9cm93WyJsYWJlbCJdLAogICAgICAgICMgICAgICkKAAAAAAAAAACiBgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAogYAAAAAAAAPBQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/dom/dom_builder.py",
			"settings":
			{
				"buffer_size": 6447,
				"encoding": "UTF-8",
				"line_ending": "Unix",
				"name": "from __future__ import annotations"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAA9RQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					28,
					1,
					"paste",
					null,
					"AQAAAJ4CAAAAAAAA9RUAAAAAAABWEgAACmRlZiBidWlsZF9kb21fc2tlbGV0b24oCiAgICBjb25uOiBzcWxpdGUzLkNvbm5lY3Rpb24sCiAgICAqLAogICAgaW5nZXN0X3Bvc3RfaWQ6IGludCwKICAgIGxzc19ydW5faWQ6IGludCwKKSAtPiBEaWN0W3N0ciwgb2JqZWN0XToKICAgICIiIgogICAgQnVpbGQgdGhlIGltbXV0YWJsZSBET00gc3RydWN0dXJlIGZyb20gTFNTIHRhYmxlcy4KCiAgICBSZXR1cm5zOgogICAgICAgIGRpY3Rbbm9kZV9pZCAtPiBEb21Ob2RlXQogICAgIiIiCgogICAgbm9kZXM6IERpY3Rbc3RyLCBvYmplY3RdID0ge30KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFBvc3QKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBwb3N0X2lkID0gX25vZGVfaWQoZiJwb3N0Ontpbmdlc3RfcG9zdF9pZH0iKQogICAgcG9zdF9ub2RlID0gUG9zdE5vZGUoCiAgICAgICAgbm9kZV9pZD1wb3N0X2lkLAogICAgICAgIGluZ2VzdF9wb3N0X2lkPWluZ2VzdF9wb3N0X2lkLAogICAgICAgIGxzc19ydW5faWQ9bHNzX3J1bl9pZCwKICAgICAgICBzdW1tYXJ5PWYiUG9zdCB7aW5nZXN0X3Bvc3RfaWR9IiwKICAgICkKICAgIG5vZGVzW3Bvc3RfaWRdID0gcG9zdF9ub2RlCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTZWN0aW9ucwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHNlY3Rpb25zID0gY29ubi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCBpZCwgb3JkaW5hbAogICAgICAgIEZST00gbHNzX3NlY3Rpb25zCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBvcmRpbmFsCiAgICAgICAgIiIiLAogICAgICAgIChsc3NfcnVuX2lkLCksCiAgICApLmZldGNoYWxsKCkKCiAgICBzZWN0aW9uX25vZGVzOiBEaWN0W2ludCwgU2VjdGlvbk5vZGVdID0ge30KCiAgICBmb3Igc2VjIGluIHNlY3Rpb25zOgogICAgICAgIHNlY19pZCA9IF9ub2RlX2lkKHBvc3RfaWQsIGYic2VjOntzZWNbJ29yZGluYWwnXX0iKQogICAgICAgIHNlY19ub2RlID0gU2VjdGlvbk5vZGUoCiAgICAgICAgICAgIG5vZGVfaWQ9c2VjX2lkLAogICAgICAgICAgICBzZWN0aW9uX2luZGV4PXNlY1sib3JkaW5hbCJdLAogICAgICAgICAgICBzdW1tYXJ5PWYiU2VjdGlvbiB7c2VjWydvcmRpbmFsJ119IiwKICAgICAgICApCiAgICAgICAgcG9zdF9ub2RlLmFkZF9jaGlsZChzZWNfbm9kZSkKICAgICAgICBub2Rlc1tzZWNfaWRdID0gc2VjX25vZGUKICAgICAgICBzZWN0aW9uX25vZGVzW3NlY1siaWQiXV0gPSBzZWNfbm9kZQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgRXZlbnRzICsgQWN0b3JzCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgcm93cyA9IGNvbm4uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgZS5pZCAgICAgICAgICAgIEFTIGV2ZW50X2lkLAogICAgICAgICAgICBlLnNlY3Rpb25faWQsCiAgICAgICAgICAgIGUub3JkaW5hbCAgICAgICBBUyBldmVudF9vcmRpbmFsLAogICAgICAgICAgICBlLmV2ZW50X3VpZCwKICAgICAgICAgICAgcmMudGV4dCAgICAgICAgIEFTIGFjdG9yX3RleHQKICAgICAgICBGUk9NIGxzc19ldmVudHMgZQogICAgICAgIExFRlQgSk9JTiBsc3Nfcm9sZV9jYW5kaWRhdGVzIHJjCiAgICAgICAgICAgIE9OIHJjLmxzc19ldmVudF9pZCA9IGUuaWQKICAgICAgICAgICBBTkQgcmMucm9sZV9raW5kID0gJ0FDVE9SJwogICAgICAgIFdIRVJFIGUubHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBlLnNlY3Rpb25faWQsIGUub3JkaW5hbAogICAgICAgICIiIiwKICAgICAgICAobHNzX3J1bl9pZCwpLAogICAgKS5mZXRjaGFsbCgpCgogICAgZXZlbnRzX2J5X2lkOiBEaWN0W2ludCwgRXZlbnROb2RlXSA9IHt9CgogICAgZm9yIHJvdyBpbiByb3dzOgogICAgICAgIHNlY19ub2RlID0gc2VjdGlvbl9ub2Rlcy5nZXQocm93WyJzZWN0aW9uX2lkIl0pCiAgICAgICAgaWYgbm90IHNlY19ub2RlOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICBldnRfaWQgPSBfbm9kZV9pZChzZWNfbm9kZS5ub2RlX2lkLCBmImV2dDp7cm93WydldmVudF9vcmRpbmFsJ119IikKCiAgICAgICAgaWYgZXZ0X2lkIG5vdCBpbiBub2RlczoKICAgICAgICAgICAgZXZ0X25vZGUgPSBFdmVudE5vZGUoCiAgICAgICAgICAgICAgICBub2RlX2lkPWV2dF9pZCwKICAgICAgICAgICAgICAgIGV2ZW50X3VpZD1yb3dbImV2ZW50X3VpZCJdLAogICAgICAgICAgICAgICAgc3VtbWFyeT1yb3dbImV2ZW50X3VpZCJdLAogICAgICAgICAgICApCiAgICAgICAgICAgIHNlY19ub2RlLmFkZF9jaGlsZChldnRfbm9kZSkKICAgICAgICAgICAgbm9kZXNbZXZ0X2lkXSA9IGV2dF9ub2RlCiAgICAgICAgICAgIGV2ZW50c19ieV9pZFtyb3dbImV2ZW50X2lkIl1dID0gZXZ0X25vZGUKICAgICAgICBlbHNlOgogICAgICAgICAgICBldnRfbm9kZSA9IG5vZGVzW2V2dF9pZF0KCiAgICAgICAgaWYgcm93WyJhY3Rvcl90ZXh0Il06CiAgICAgICAgICAgIGV2dF9ub2RlLmFjdG9ycy5hcHBlbmQoCiAgICAgICAgICAgICAgICBBY3RvcigKICAgICAgICAgICAgICAgICAgICB0ZXh0PXJvd1siYWN0b3JfdGV4dCJdLAogICAgICAgICAgICAgICAgICAgIGdhemV0dGVlcl9ncm91cF9pZD1Ob25lLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBMb2NhdGlvbiBzZXJpZXMgKyBsb2NhdGlvbnMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICByb3dzID0gY29ubi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVAogICAgICAgICAgICBlLmlkICAgICAgICBBUyBldmVudF9pZCwKICAgICAgICAgICAgcy5pZCAgICAgICAgQVMgc2VyaWVzX2lkLAogICAgICAgICAgICBsaS5vcmRpbmFsICBBUyBsb2Nfb3JkaW5hbCwKICAgICAgICAgICAgbGkudGV4dCAgICAgQVMgbG9jX3RleHQKICAgICAgICBGUk9NIGxzc19sb2NhdGlvbl9zZXJpZXMgcwogICAgICAgIEpPSU4gbHNzX2V2ZW50cyBlCiAgICAgICAgICAgIE9OIGUuaWQgPSBzLmxzc19ldmVudF9pZAogICAgICAgIEpPSU4gbHNzX2xvY2F0aW9uX2l0ZW1zIGxpCiAgICAgICAgICAgIE9OIGxpLnNlcmllc19pZCA9IHMuaWQKICAgICAgICBXSEVSRSBlLmxzc19ydW5faWQgPSA/CiAgICAgICAgT1JERVIgQlkgZS5pZCwgcy5pZCwgbGkub3JkaW5hbAogICAgICAgICIiIiwKICAgICAgICAobHNzX3J1bl9pZCwpLAogICAgKS5mZXRjaGFsbCgpCgogICAgc2VyaWVzX2luZGV4OiBEaWN0W2ludCwgaW50XSA9IGRlZmF1bHRkaWN0KGludCkKICAgIHNlcmllc19ub2RlczogRGljdFtpbnQsIExvY2F0aW9uU2VyaWVzTm9kZV0gPSB7fQoKICAgIGZvciByb3cgaW4gcm93czoKICAgICAgICBldnRfbm9kZSA9IGV2ZW50c19ieV9pZC5nZXQocm93WyJldmVudF9pZCJdKQogICAgICAgIGlmIG5vdCBldnRfbm9kZToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgaWYgcm93WyJzZXJpZXNfaWQiXSBub3QgaW4gc2VyaWVzX25vZGVzOgogICAgICAgICAgICBpZHggPSBzZXJpZXNfaW5kZXhbcm93WyJldmVudF9pZCJdXQogICAgICAgICAgICBzZXJpZXNfaW5kZXhbcm93WyJldmVudF9pZCJdXSArPSAxCgogICAgICAgICAgICBzZXJfaWQgPSBfbm9kZV9pZChldnRfbm9kZS5ub2RlX2lkLCBmInNlcjp7aWR4fSIpCiAgICAgICAgICAgIHNlcl9ub2RlID0gTG9jYXRpb25TZXJpZXNOb2RlKAogICAgICAgICAgICAgICAgbm9kZV9pZD1zZXJfaWQsCiAgICAgICAgICAgICAgICBzZXJpZXNfaW5kZXg9aWR4LAogICAgICAgICAgICAgICAgc3VtbWFyeT0iTG9jYXRpb24gc2VyaWVzIiwKICAgICAgICAgICAgKQogICAgICAgICAgICBldnRfbm9kZS5hZGRfY2hpbGQoc2VyX25vZGUpCiAgICAgICAgICAgIG5vZGVzW3Nlcl9pZF0gPSBzZXJfbm9kZQogICAgICAgICAgICBzZXJpZXNfbm9kZXNbcm93WyJzZXJpZXNfaWQiXV0gPSBzZXJfbm9kZQoKICAgICAgICBzZXJfbm9kZSA9IHNlcmllc19ub2Rlc1tyb3dbInNlcmllc19pZCJdXQoKICAgICAgICBsb2NfaWQgPSBfbm9kZV9pZChzZXJfbm9kZS5ub2RlX2lkLCBmImxvYzp7cm93Wydsb2Nfb3JkaW5hbCddfSIpCiAgICAgICAgbG9jX25vZGUgPSBMb2NhdGlvbk5vZGUoCiAgICAgICAgICAgIG5vZGVfaWQ9bG9jX2lkLAogICAgICAgICAgICBtZW50aW9uX3RleHQ9cm93WyJsb2NfdGV4dCJdLAogICAgICAgICAgICBzdW1tYXJ5PXJvd1sibG9jX3RleHQiXSwKICAgICAgICAgICAgcmVzb2x2ZWQ9RmFsc2UsCiAgICAgICAgKQogICAgICAgIHNlcl9ub2RlLmFkZF9jaGlsZChsb2Nfbm9kZSkKICAgICAgICBub2Rlc1tsb2NfaWRdID0gbG9jX25vZGUKCiAgICByZXR1cm4gbm9kZXM",
					"AQAAAAAAAAABAAAAngIAAAAAAAD0FAAAAAAAAAAAAAAAAPC/"
				],
				[
					29,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD2FQAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgZGVmYXVsdGRpY3QKZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QKCmltcG9ydCBzcWxpdGUzCgpmcm9tIHNpdHJlcGMyLmRvbS5ub2RlcyBpbXBvcnQgKAogICAgUG9zdE5vZGUsCiAgICBTZWN0aW9uTm9kZSwKICAgIEV2ZW50Tm9kZSwKICAgIExvY2F0aW9uU2VyaWVzTm9kZSwKICAgIExvY2F0aW9uTm9kZSwKICAgIExvY2F0aW9uQ2FuZGlkYXRlTm9kZSwKICAgIENvbnRleHQsCiAgICBBY3RvciwKKQoKCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgSGVscGVycwojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKZGVmIF9ub2RlX2lkKCpwYXJ0czogc3RyKSAtPiBzdHI6CiAgICByZXR1cm4gIi8iLmpvaW4ocGFydHMpCgoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBQaGFzZSBBOiBCdWlsZCBpbW11dGFibGUgRE9NIHNrZWxldG9uIGZyb20gTFNTCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CmRlZiBidWlsZF9kb21fc2tlbGV0b24oCiAgICBjb25uOiBzcWxpdGUzLkNvbm5lY3Rpb24sCiAgICAqLAogICAgaW5nZXN0X3Bvc3RfaWQ6IGludCwKICAgIGxzc19ydW5faWQ6IGludCwKKSAtPiBEaWN0W3N0ciwgb2JqZWN0XToKICAgICIiIgogICAgQnVpbGQgdGhlIGltbXV0YWJsZSBET00gc3RydWN0dXJlIGZyb20gTFNTIHRhYmxlcy4KCiAgICBDb250cmFjdDoKICAgIC0gRXZlcnkgbHNzX2V2ZW50IHJvdyBiZWNvbWVzIGV4YWN0bHkgb25lIEV2ZW50Tm9kZQogICAgLSBBY3RvcnMgYXJlIE9QVElPTkFMIG1ldGFkYXRhCiAgICAtIExvY2F0aW9uIHNlcmllcyBhcmUgc3RyaWN0bHkgZXZlbnQtc2NvcGVkCiAgICAiIiIKCiAgICBub2RlczogRGljdFtzdHIsIG9iamVjdF0gPSB7fQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUG9zdAogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHBvc3RfaWQgPSBfbm9kZV9pZChmInBvc3Q6e2luZ2VzdF9wb3N0X2lkfSIpCiAgICBwb3N0X25vZGUgPSBQb3N0Tm9kZSgKICAgICAgICBub2RlX2lkPXBvc3RfaWQsCiAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgIHN1bW1hcnk9ZiJQb3N0IHtpbmdlc3RfcG9zdF9pZH0iLAogICAgKQogICAgbm9kZXNbcG9zdF9pZF0gPSBwb3N0X25vZGUKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlY3Rpb25zCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgc2VjdGlvbl9yb3dzID0gY29ubi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCBpZCwgb3JkaW5hbAogICAgICAgIEZST00gbHNzX3NlY3Rpb25zCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBvcmRpbmFsCiAgICAgICAgIiIiLAogICAgICAgIChsc3NfcnVuX2lkLCksCiAgICApLmZldGNoYWxsKCkKCiAgICBzZWN0aW9uX25vZGVzOiBEaWN0W2ludCwgU2VjdGlvbk5vZGVdID0ge30KCiAgICBmb3Igcm93IGluIHNlY3Rpb25fcm93czoKICAgICAgICBzZWNfbm9kZV9pZCA9IF9ub2RlX2lkKHBvc3RfaWQsIGYic2VjOntyb3dbJ29yZGluYWwnXX0iKQogICAgICAgIHNlY19ub2RlID0gU2VjdGlvbk5vZGUoCiAgICAgICAgICAgIG5vZGVfaWQ9c2VjX25vZGVfaWQsCiAgICAgICAgICAgIHNlY3Rpb25faW5kZXg9cm93WyJvcmRpbmFsIl0sCiAgICAgICAgICAgIHN1bW1hcnk9ZiJTZWN0aW9uIHtyb3dbJ29yZGluYWwnXX0iLAogICAgICAgICkKICAgICAgICBwb3N0X25vZGUuYWRkX2NoaWxkKHNlY19ub2RlKQogICAgICAgIG5vZGVzW3NlY19ub2RlX2lkXSA9IHNlY19ub2RlCiAgICAgICAgc2VjdGlvbl9ub2Rlc1tyb3dbImlkIl1dID0gc2VjX25vZGUKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEV2ZW50cyAoTk8gYWN0b3Igam9pbiBoZXJlKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGV2ZW50X3Jvd3MgPSBjb25uLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUCiAgICAgICAgICAgIGlkLAogICAgICAgICAgICBzZWN0aW9uX2lkLAogICAgICAgICAgICBvcmRpbmFsLAogICAgICAgICAgICBldmVudF91aWQsCiAgICAgICAgICAgIGxhYmVsCiAgICAgICAgRlJPTSBsc3NfZXZlbnRzCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBzZWN0aW9uX2lkLCBvcmRpbmFsCiAgICAgICAgIiIiLAogICAgICAgIChsc3NfcnVuX2lkLCksCiAgICApLmZldGNoYWxsKCkKCiAgICBldmVudHNfYnlfZGJfaWQ6IERpY3RbaW50LCBFdmVudE5vZGVdID0ge30KCiAgICBmb3Igcm93IGluIGV2ZW50X3Jvd3M6CiAgICAgICAgc2VjX25vZGUgPSBzZWN0aW9uX25vZGVzLmdldChyb3dbInNlY3Rpb25faWQiXSkKICAgICAgICBpZiBub3Qgc2VjX25vZGU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGV2dF9ub2RlX2lkID0gX25vZGVfaWQoc2VjX25vZGUubm9kZV9pZCwgZiJldnQ6e3Jvd1snb3JkaW5hbCddfSIpCgogICAgICAgIGV2dF9ub2RlID0gRXZlbnROb2RlKAogICAgICAgICAgICBub2RlX2lkPWV2dF9ub2RlX2lkLAogICAgICAgICAgICBldmVudF91aWQ9cm93WyJldmVudF91aWQiXSwKICAgICAgICAgICAgc3VtbWFyeT1yb3dbImxhYmVsIl0gb3Igcm93WyJldmVudF91aWQiXSwKICAgICAgICApCgogICAgICAgIHNlY19ub2RlLmFkZF9jaGlsZChldnRfbm9kZSkKICAgICAgICBub2Rlc1tldnRfbm9kZV9pZF0gPSBldnRfbm9kZQogICAgICAgIGV2ZW50c19ieV9kYl9pZFtyb3dbImlkIl1dID0gZXZ0X25vZGUKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFjdG9ycyAoT1BUSU9OQUwgbWV0YWRhdGEpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgYWN0b3Jfcm93cyA9IGNvbm4uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgbHNzX2V2ZW50X2lkLAogICAgICAgICAgICB0ZXh0CiAgICAgICAgRlJPTSBsc3Nfcm9sZV9jYW5kaWRhdGVzCiAgICAgICAgV0hFUkUgcm9sZV9raW5kID0gJ0FDVE9SJwogICAgICAgICIiIgogICAgKS5mZXRjaGFsbCgpCgogICAgZm9yIHJvdyBpbiBhY3Rvcl9yb3dzOgogICAgICAgIGV2dF9ub2RlID0gZXZlbnRzX2J5X2RiX2lkLmdldChyb3dbImxzc19ldmVudF9pZCJdKQogICAgICAgIGlmIG5vdCBldnRfbm9kZToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgZXZ0X25vZGUuYWN0b3JzLmFwcGVuZCgKICAgICAgICAgICAgQWN0b3IoCiAgICAgICAgICAgICAgICB0ZXh0PXJvd1sidGV4dCJdLAogICAgICAgICAgICAgICAgZ2F6ZXR0ZWVyX2dyb3VwX2lkPU5vbmUsCiAgICAgICAgICAgICkKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBMb2NhdGlvbiBzZXJpZXMgKyBsb2NhdGlvbnMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBsb2Nfcm93cyA9IGNvbm4uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgcy5pZCAgICAgICAgQVMgc2VyaWVzX2lkLAogICAgICAgICAgICBzLmxzc19ldmVudF9pZCwKICAgICAgICAgICAgbGkub3JkaW5hbCAgQVMgbG9jX29yZGluYWwsCiAgICAgICAgICAgIGxpLnRleHQgICAgIEFTIGxvY190ZXh0CiAgICAgICAgRlJPTSBsc3NfbG9jYXRpb25fc2VyaWVzIHMKICAgICAgICBKT0lOIGxzc19sb2NhdGlvbl9pdGVtcyBsaQogICAgICAgICAgICBPTiBsaS5zZXJpZXNfaWQgPSBzLmlkCiAgICAgICAgT1JERVIgQlkgcy5sc3NfZXZlbnRfaWQsIHMuaWQsIGxpLm9yZGluYWwKICAgICAgICAiIiIKICAgICkuZmV0Y2hhbGwoKQoKICAgIHNlcmllc19ub2RlczogRGljdFtpbnQsIExvY2F0aW9uU2VyaWVzTm9kZV0gPSB7fQogICAgc2VyaWVzX2luZGV4X2J5X2V2ZW50OiBEaWN0W2ludCwgaW50XSA9IGRlZmF1bHRkaWN0KGludCkKCiAgICBmb3Igcm93IGluIGxvY19yb3dzOgogICAgICAgIGV2dF9ub2RlID0gZXZlbnRzX2J5X2RiX2lkLmdldChyb3dbImxzc19ldmVudF9pZCJdKQogICAgICAgIGlmIG5vdCBldnRfbm9kZToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgaWYgcm93WyJzZXJpZXNfaWQiXSBub3QgaW4gc2VyaWVzX25vZGVzOgogICAgICAgICAgICBpZHggPSBzZXJpZXNfaW5kZXhfYnlfZXZlbnRbcm93WyJsc3NfZXZlbnRfaWQiXV0KICAgICAgICAgICAgc2VyaWVzX2luZGV4X2J5X2V2ZW50W3Jvd1sibHNzX2V2ZW50X2lkIl1dICs9IDEKCiAgICAgICAgICAgIHNlcl9ub2RlX2lkID0gX25vZGVfaWQoZXZ0X25vZGUubm9kZV9pZCwgZiJzZXI6e2lkeH0iKQogICAgICAgICAgICBzZXJfbm9kZSA9IExvY2F0aW9uU2VyaWVzTm9kZSgKICAgICAgICAgICAgICAgIG5vZGVfaWQ9c2VyX25vZGVfaWQsCiAgICAgICAgICAgICAgICBzZXJpZXNfaW5kZXg9aWR4LAogICAgICAgICAgICAgICAgc3VtbWFyeT0iTG9jYXRpb24gc2VyaWVzIiwKICAgICAgICAgICAgKQogICAgICAgICAgICBldnRfbm9kZS5hZGRfY2hpbGQoc2VyX25vZGUpCiAgICAgICAgICAgIG5vZGVzW3Nlcl9ub2RlX2lkXSA9IHNlcl9ub2RlCiAgICAgICAgICAgIHNlcmllc19ub2Rlc1tyb3dbInNlcmllc19pZCJdXSA9IHNlcl9ub2RlCgogICAgICAgIHNlcl9ub2RlID0gc2VyaWVzX25vZGVzW3Jvd1sic2VyaWVzX2lkIl1dCgogICAgICAgIGxvY19ub2RlX2lkID0gX25vZGVfaWQoc2VyX25vZGUubm9kZV9pZCwgZiJsb2M6e3Jvd1snbG9jX29yZGluYWwnXX0iKQogICAgICAgIGxvY19ub2RlID0gTG9jYXRpb25Ob2RlKAogICAgICAgICAgICBub2RlX2lkPWxvY19ub2RlX2lkLAogICAgICAgICAgICBtZW50aW9uX3RleHQ9cm93WyJsb2NfdGV4dCJdLAogICAgICAgICAgICBzdW1tYXJ5PXJvd1sibG9jX3RleHQiXSwKICAgICAgICAgICAgcmVzb2x2ZWQ9RmFsc2UsCiAgICAgICAgKQogICAgICAgIHNlcl9ub2RlLmFkZF9jaGlsZChsb2Nfbm9kZSkKICAgICAgICBub2Rlc1tsb2Nfbm9kZV9pZF0gPSBsb2Nfbm9kZQoKICAgIHJldHVybiBub2RlcwoKAAAAAAAAAAD2FQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9RUAAAAAAAD1FQAAAAAAAAAAAAAAAPC/"
				],
				[
					36,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAALxkAAAAAAAD2FQAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgZGVmYXVsdGRpY3QKZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QsIExpc3QKCmltcG9ydCBzcWxpdGUzCgpmcm9tIHNpdHJlcGMyLmRvbS5ub2RlcyBpbXBvcnQgKAogICAgUG9zdE5vZGUsCiAgICBTZWN0aW9uTm9kZSwKICAgIEV2ZW50Tm9kZSwKICAgIExvY2F0aW9uU2VyaWVzTm9kZSwKICAgIExvY2F0aW9uTm9kZSwKICAgIExvY2F0aW9uQ2FuZGlkYXRlTm9kZSwKICAgIENvbnRleHQsCiAgICBBY3RvciwKKQoKCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgSGVscGVycwojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKZGVmIF9ub2RlX2lkKCpwYXJ0czogc3RyKSAtPiBzdHI6CiAgICByZXR1cm4gIi8iLmpvaW4ocGFydHMpCgoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBQaGFzZSBBOiBCdWlsZCBpbW11dGFibGUgRE9NIHNrZWxldG9uIGZyb20gTFNTCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CmRlZiBidWlsZF9kb21fc2tlbGV0b24oCiAgICBjb25uOiBzcWxpdGUzLkNvbm5lY3Rpb24sCiAgICAqLAogICAgaW5nZXN0X3Bvc3RfaWQ6IGludCwKICAgIGxzc19ydW5faWQ6IGludCwKKSAtPiBEaWN0W3N0ciwgb2JqZWN0XToKICAgICIiIgogICAgQnVpbGQgdGhlIGltbXV0YWJsZSBET00gc3RydWN0dXJlIGZyb20gTFNTIHRhYmxlcy4KCiAgICBDb250cmFjdDoKICAgIC0gRXZlcnkgbHNzX2V2ZW50IHJvdyBiZWNvbWVzIGV4YWN0bHkgb25lIEV2ZW50Tm9kZQogICAgLSBBY3RvcnMgYXJlIE9QVElPTkFMIG1ldGFkYXRhCiAgICAtIExvY2F0aW9uIHNlcmllcyBhcmUgc3RyaWN0bHkgZXZlbnQtc2NvcGVkCiAgICAiIiIKCiAgICBub2RlczogRGljdFtzdHIsIG9iamVjdF0gPSB7fQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgUG9zdAogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHBvc3RfaWQgPSBfbm9kZV9pZChmInBvc3Q6e2luZ2VzdF9wb3N0X2lkfSIpCiAgICBwb3N0X25vZGUgPSBQb3N0Tm9kZSgKICAgICAgICBub2RlX2lkPXBvc3RfaWQsCiAgICAgICAgaW5nZXN0X3Bvc3RfaWQ9aW5nZXN0X3Bvc3RfaWQsCiAgICAgICAgbHNzX3J1bl9pZD1sc3NfcnVuX2lkLAogICAgICAgIHN1bW1hcnk9ZiJQb3N0IHtpbmdlc3RfcG9zdF9pZH0iLAogICAgKQogICAgbm9kZXNbcG9zdF9pZF0gPSBwb3N0X25vZGUKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFNlY3Rpb25zCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgc2VjdGlvbl9yb3dzID0gY29ubi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCBpZCwgb3JkaW5hbAogICAgICAgIEZST00gbHNzX3NlY3Rpb25zCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBvcmRpbmFsCiAgICAgICAgIiIiLAogICAgICAgIChsc3NfcnVuX2lkLCksCiAgICApLmZldGNoYWxsKCkKCiAgICBzZWN0aW9uX25vZGVzOiBEaWN0W2ludCwgU2VjdGlvbk5vZGVdID0ge30KCiAgICBmb3Igcm93IGluIHNlY3Rpb25fcm93czoKICAgICAgICBzZWNfbm9kZV9pZCA9IF9ub2RlX2lkKHBvc3RfaWQsIGYic2VjOntyb3dbJ29yZGluYWwnXX0iKQogICAgICAgIHNlY19ub2RlID0gU2VjdGlvbk5vZGUoCiAgICAgICAgICAgIG5vZGVfaWQ9c2VjX25vZGVfaWQsCiAgICAgICAgICAgIHNlY3Rpb25faW5kZXg9cm93WyJvcmRpbmFsIl0sCiAgICAgICAgICAgIHN1bW1hcnk9ZiJTZWN0aW9uIHtyb3dbJ29yZGluYWwnXX0iLAogICAgICAgICkKICAgICAgICBwb3N0X25vZGUuYWRkX2NoaWxkKHNlY19ub2RlKQogICAgICAgIG5vZGVzW3NlY19ub2RlX2lkXSA9IHNlY19ub2RlCiAgICAgICAgc2VjdGlvbl9ub2Rlc1tyb3dbImlkIl1dID0gc2VjX25vZGUKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEV2ZW50cyAoTk8gYWN0b3Igam9pbiBoZXJlKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGV2ZW50X3Jvd3MgPSBjb25uLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUCiAgICAgICAgICAgIGlkLAogICAgICAgICAgICBzZWN0aW9uX2lkLAogICAgICAgICAgICBvcmRpbmFsLAogICAgICAgICAgICBldmVudF91aWQsCiAgICAgICAgICAgIGxhYmVsCiAgICAgICAgRlJPTSBsc3NfZXZlbnRzCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBzZWN0aW9uX2lkLCBvcmRpbmFsCiAgICAgICAgIiIiLAogICAgICAgIChsc3NfcnVuX2lkLCksCiAgICApLmZldGNoYWxsKCkKCiAgICBldmVudHNfYnlfZGJfaWQ6IERpY3RbaW50LCBFdmVudE5vZGVdID0ge30KCiAgICBmb3Igcm93IGluIGV2ZW50X3Jvd3M6CiAgICAgICAgc2VjX25vZGUgPSBzZWN0aW9uX25vZGVzLmdldChyb3dbInNlY3Rpb25faWQiXSkKICAgICAgICBpZiBub3Qgc2VjX25vZGU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGV2dF9ub2RlX2lkID0gX25vZGVfaWQoc2VjX25vZGUubm9kZV9pZCwgZiJldnQ6e3Jvd1snb3JkaW5hbCddfSIpCgogICAgICAgIGV2dF9ub2RlID0gRXZlbnROb2RlKAogICAgICAgICAgICBub2RlX2lkPWV2dF9ub2RlX2lkLAogICAgICAgICAgICBldmVudF91aWQ9cm93WyJldmVudF91aWQiXSwKICAgICAgICAgICAgc3VtbWFyeT1yb3dbImxhYmVsIl0gb3Igcm93WyJldmVudF91aWQiXSwKICAgICAgICApCgogICAgICAgIHNlY19ub2RlLmFkZF9jaGlsZChldnRfbm9kZSkKICAgICAgICBub2Rlc1tldnRfbm9kZV9pZF0gPSBldnRfbm9kZQogICAgICAgIGV2ZW50c19ieV9kYl9pZFtyb3dbImlkIl1dID0gZXZ0X25vZGUKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEFjdG9ycyAoT1BUSU9OQUwgbWV0YWRhdGEpCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgYWN0b3Jfcm93cyA9IGNvbm4uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgbHNzX2V2ZW50X2lkLAogICAgICAgICAgICB0ZXh0CiAgICAgICAgRlJPTSBsc3Nfcm9sZV9jYW5kaWRhdGVzCiAgICAgICAgV0hFUkUgcm9sZV9raW5kID0gJ0FDVE9SJwogICAgICAgICIiIgogICAgKS5mZXRjaGFsbCgpCgogICAgZm9yIHJvdyBpbiBhY3Rvcl9yb3dzOgogICAgICAgIGV2dF9ub2RlID0gZXZlbnRzX2J5X2RiX2lkLmdldChyb3dbImxzc19ldmVudF9pZCJdKQogICAgICAgIGlmIG5vdCBldnRfbm9kZToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgZXZ0X25vZGUuYWN0b3JzLmFwcGVuZCgKICAgICAgICAgICAgQWN0b3IoCiAgICAgICAgICAgICAgICB0ZXh0PXJvd1sidGV4dCJdLAogICAgICAgICAgICAgICAgZ2F6ZXR0ZWVyX2dyb3VwX2lkPU5vbmUsCiAgICAgICAgICAgICkKICAgICAgICApCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBMb2NhdGlvbiBzZXJpZXMgKyBsb2NhdGlvbnMKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBsb2Nfcm93cyA9IGNvbm4uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgcy5pZCAgICAgICAgQVMgc2VyaWVzX2lkLAogICAgICAgICAgICBzLmxzc19ldmVudF9pZCwKICAgICAgICAgICAgbGkub3JkaW5hbCAgQVMgbG9jX29yZGluYWwsCiAgICAgICAgICAgIGxpLnRleHQgICAgIEFTIGxvY190ZXh0CiAgICAgICAgRlJPTSBsc3NfbG9jYXRpb25fc2VyaWVzIHMKICAgICAgICBKT0lOIGxzc19sb2NhdGlvbl9pdGVtcyBsaQogICAgICAgICAgICBPTiBsaS5zZXJpZXNfaWQgPSBzLmlkCiAgICAgICAgT1JERVIgQlkgcy5sc3NfZXZlbnRfaWQsIHMuaWQsIGxpLm9yZGluYWwKICAgICAgICAiIiIKICAgICkuZmV0Y2hhbGwoKQoKICAgIHNlcmllc19ub2RlczogRGljdFtpbnQsIExvY2F0aW9uU2VyaWVzTm9kZV0gPSB7fQogICAgc2VyaWVzX2luZGV4X2J5X2V2ZW50OiBEaWN0W2ludCwgaW50XSA9IGRlZmF1bHRkaWN0KGludCkKCiAgICBmb3Igcm93IGluIGxvY19yb3dzOgogICAgICAgIGV2dF9ub2RlID0gZXZlbnRzX2J5X2RiX2lkLmdldChyb3dbImxzc19ldmVudF9pZCJdKQogICAgICAgIGlmIG5vdCBldnRfbm9kZToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgaWYgcm93WyJzZXJpZXNfaWQiXSBub3QgaW4gc2VyaWVzX25vZGVzOgogICAgICAgICAgICBpZHggPSBzZXJpZXNfaW5kZXhfYnlfZXZlbnRbcm93WyJsc3NfZXZlbnRfaWQiXV0KICAgICAgICAgICAgc2VyaWVzX2luZGV4X2J5X2V2ZW50W3Jvd1sibHNzX2V2ZW50X2lkIl1dICs9IDEKCiAgICAgICAgICAgIHNlcl9ub2RlX2lkID0gX25vZGVfaWQoZXZ0X25vZGUubm9kZV9pZCwgZiJzZXI6e2lkeH0iKQogICAgICAgICAgICBzZXJfbm9kZSA9IExvY2F0aW9uU2VyaWVzTm9kZSgKICAgICAgICAgICAgICAgIG5vZGVfaWQ9c2VyX25vZGVfaWQsCiAgICAgICAgICAgICAgICBzZXJpZXNfaW5kZXg9aWR4LAogICAgICAgICAgICAgICAgc3VtbWFyeT0iTG9jYXRpb24gc2VyaWVzIiwKICAgICAgICAgICAgKQogICAgICAgICAgICBldnRfbm9kZS5hZGRfY2hpbGQoc2VyX25vZGUpCiAgICAgICAgICAgIG5vZGVzW3Nlcl9ub2RlX2lkXSA9IHNlcl9ub2RlCiAgICAgICAgICAgIHNlcmllc19ub2Rlc1tyb3dbInNlcmllc19pZCJdXSA9IHNlcl9ub2RlCgogICAgICAgIHNlcl9ub2RlID0gc2VyaWVzX25vZGVzW3Jvd1sic2VyaWVzX2lkIl1dCgogICAgICAgIGxvY19ub2RlX2lkID0gX25vZGVfaWQoc2VyX25vZGUubm9kZV9pZCwgZiJsb2M6e3Jvd1snbG9jX29yZGluYWwnXX0iKQogICAgICAgIGxvY19ub2RlID0gTG9jYXRpb25Ob2RlKAogICAgICAgICAgICBub2RlX2lkPWxvY19ub2RlX2lkLAogICAgICAgICAgICBtZW50aW9uX3RleHQ9cm93WyJsb2NfdGV4dCJdLAogICAgICAgICAgICBzdW1tYXJ5PXJvd1sibG9jX3RleHQiXSwKICAgICAgICAgICAgcmVzb2x2ZWQ9RmFsc2UsCiAgICAgICAgKQogICAgICAgIHNlcl9ub2RlLmFkZF9jaGlsZChsb2Nfbm9kZSkKICAgICAgICBub2Rlc1tsb2Nfbm9kZV9pZF0gPSBsb2Nfbm9kZQoKICAgIHJldHVybiBub2RlcwoK",
					"AQAAAAAAAAABAAAAAAAAAAAAAAD2FQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAzGQAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgZGVmYXVsdGRpY3QKZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QKCmltcG9ydCBzcWxpdGUzCgpmcm9tIHNpdHJlcGMyLmRvbS5ub2RlcyBpbXBvcnQgKAogICAgUG9zdE5vZGUsCiAgICBTZWN0aW9uTm9kZSwKICAgIEV2ZW50Tm9kZSwKICAgIExvY2F0aW9uU2VyaWVzTm9kZSwKICAgIExvY2F0aW9uTm9kZSwKICAgIEFjdG9yLAopCgoKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyBIZWxwZXJzCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgpkZWYgX25vZGVfaWQoKnBhcnRzOiBzdHIpIC0+IHN0cjoKICAgIHJldHVybiAiLyIuam9pbihwYXJ0cykKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIFBoYXNlIEE6IEJ1aWxkIGltbXV0YWJsZSBET00gc2tlbGV0b24gZnJvbSBMU1MKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmRlZiBidWlsZF9kb21fc2tlbGV0b24oCiAgICBjb25uOiBzcWxpdGUzLkNvbm5lY3Rpb24sCiAgICAqLAogICAgaW5nZXN0X3Bvc3RfaWQ6IGludCwKICAgIGxzc19ydW5faWQ6IGludCwKKSAtPiBEaWN0W3N0ciwgb2JqZWN0XToKICAgICIiIgogICAgQnVpbGQgdGhlIGltbXV0YWJsZSBET00gc3RydWN0dXJlIGZyb20gTFNTIHRhYmxlcy4KCiAgICBERURVUEUgUlVMRSAoQ0FOT05JQ0FMKToKICAgIC0gRXZlbnRzIGFyZSBkZWR1cGVkIGJ5IChzZWN0aW9uX2lkLCBzdGFydF90b2tlbiwgZW5kX3Rva2VuLCB0ZXh0KQogICAgLSBMYWJlbHMgYXJlIE5PVCBwYXJ0IG9mIGlkZW50aXR5CiAgICAtIEFjdG9ycyBhcmUgT1BUSU9OQUwgbWV0YWRhdGEKICAgIC0gTG9jYXRpb24gc2VyaWVzIGF0dGFjaCB0byB0aGUgZGVkdXBlZCBldmVudAogICAgIiIiCgogICAgbm9kZXM6IERpY3Rbc3RyLCBvYmplY3RdID0ge30KCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIFBvc3QKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBwb3N0X25vZGVfaWQgPSBfbm9kZV9pZChmInBvc3Q6e2luZ2VzdF9wb3N0X2lkfSIpCiAgICBwb3N0X25vZGUgPSBQb3N0Tm9kZSgKICAgICAgICBub2RlX2lkPXBvc3Rfbm9kZV9pZCwKICAgICAgICBpbmdlc3RfcG9zdF9pZD1pbmdlc3RfcG9zdF9pZCwKICAgICAgICBsc3NfcnVuX2lkPWxzc19ydW5faWQsCiAgICAgICAgc3VtbWFyeT1mIlBvc3Qge2luZ2VzdF9wb3N0X2lkfSIsCiAgICApCiAgICBub2Rlc1twb3N0X25vZGVfaWRdID0gcG9zdF9ub2RlCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBTZWN0aW9ucwogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHNlY3Rpb25fcm93cyA9IGNvbm4uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QgaWQsIG9yZGluYWwKICAgICAgICBGUk9NIGxzc19zZWN0aW9ucwogICAgICAgIFdIRVJFIGxzc19ydW5faWQgPSA/CiAgICAgICAgT1JERVIgQlkgb3JkaW5hbAogICAgICAgICIiIiwKICAgICAgICAobHNzX3J1bl9pZCwpLAogICAgKS5mZXRjaGFsbCgpCgogICAgc2VjdGlvbl9ub2RlczogRGljdFtpbnQsIFNlY3Rpb25Ob2RlXSA9IHt9CgogICAgZm9yIHJvdyBpbiBzZWN0aW9uX3Jvd3M6CiAgICAgICAgc2VjX25vZGVfaWQgPSBfbm9kZV9pZChwb3N0X25vZGVfaWQsIGYic2VjOntyb3dbJ29yZGluYWwnXX0iKQogICAgICAgIHNlY19ub2RlID0gU2VjdGlvbk5vZGUoCiAgICAgICAgICAgIG5vZGVfaWQ9c2VjX25vZGVfaWQsCiAgICAgICAgICAgIHNlY3Rpb25faW5kZXg9cm93WyJvcmRpbmFsIl0sCiAgICAgICAgICAgIHN1bW1hcnk9ZiJTZWN0aW9uIHtyb3dbJ29yZGluYWwnXX0iLAogICAgICAgICkKICAgICAgICBwb3N0X25vZGUuYWRkX2NoaWxkKHNlY19ub2RlKQogICAgICAgIG5vZGVzW3NlY19ub2RlX2lkXSA9IHNlY19ub2RlCiAgICAgICAgc2VjdGlvbl9ub2Rlc1tyb3dbImlkIl1dID0gc2VjX25vZGUKCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAjIEV2ZW50cyDigJQgRkVUQ0ggKyBERURVUEUKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICBldmVudF9yb3dzID0gY29ubi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVAogICAgICAgICAgICBpZCwKICAgICAgICAgICAgc2VjdGlvbl9pZCwKICAgICAgICAgICAgb3JkaW5hbCwKICAgICAgICAgICAgZXZlbnRfdWlkLAogICAgICAgICAgICBsYWJlbCwKICAgICAgICAgICAgc3RhcnRfdG9rZW4sCiAgICAgICAgICAgIGVuZF90b2tlbiwKICAgICAgICAgICAgdGV4dAogICAgICAgIEZST00gbHNzX2V2ZW50cwogICAgICAgIFdIRVJFIGxzc19ydW5faWQgPSA/CiAgICAgICAgT1JERVIgQlkgc2VjdGlvbl9pZCwgc3RhcnRfdG9rZW4sIGVuZF90b2tlbiwgb3JkaW5hbAogICAgICAgICIiIiwKICAgICAgICAobHNzX3J1bl9pZCwpLAogICAgKS5mZXRjaGFsbCgpCgogICAgIyBHcm91cCBieSBjYW5vbmljYWwgZXF1aXZhbGVuY2Uga2V5CiAgICBldmVudF9ncm91cHMgPSBkZWZhdWx0ZGljdChsaXN0KQoKICAgIGZvciByb3cgaW4gZXZlbnRfcm93czoKICAgICAgICBrZXkgPSAoCiAgICAgICAgICAgIHJvd1sic2VjdGlvbl9pZCJdLAogICAgICAgICAgICByb3dbInN0YXJ0X3Rva2VuIl0sCiAgICAgICAgICAgIHJvd1siZW5kX3Rva2VuIl0sCiAgICAgICAgICAgIHJvd1sidGV4dCJdLAogICAgICAgICkKICAgICAgICBldmVudF9ncm91cHNba2V5XS5hcHBlbmQocm93KQoKICAgICMgTWFwcyBBTlkgbHNzX2V2ZW50LmlkIOKGkiBkZWR1cGVkIEV2ZW50Tm9kZQogICAgZXZlbnRzX2J5X2RiX2lkOiBEaWN0W2ludCwgRXZlbnROb2RlXSA9IHt9CgogICAgZm9yIChzZWN0aW9uX2lkLCBfc3RhcnQsIF9lbmQsIF90ZXh0KSwgcm93cyBpbiBldmVudF9ncm91cHMuaXRlbXMoKToKICAgICAgICBzZWNfbm9kZSA9IHNlY3Rpb25fbm9kZXMuZ2V0KHNlY3Rpb25faWQpCiAgICAgICAgaWYgbm90IHNlY19ub2RlOgogICAgICAgICAgICBjb250aW51ZQoKICAgICAgICAjIENhbm9uaWNhbCByZXByZXNlbnRhdGl2ZSA9IGZpcnN0IHJvdwogICAgICAgIHJlcCA9IHJvd3NbMF0KCiAgICAgICAgZXZ0X25vZGVfaWQgPSBfbm9kZV9pZCgKICAgICAgICAgICAgc2VjX25vZGUubm9kZV9pZCwKICAgICAgICAgICAgZiJldnQ6e3JlcFsnb3JkaW5hbCddfSIsCiAgICAgICAgKQoKICAgICAgICAjIEFnZ3JlZ2F0ZSBsYWJlbHMgZm9yIGRpc3BsYXkKICAgICAgICBsYWJlbHMgPSBzb3J0ZWQoe3JbImxhYmVsIl0gZm9yIHIgaW4gcm93cyBpZiByWyJsYWJlbCJdfSkKICAgICAgICBzdW1tYXJ5ID0gIiwgIi5qb2luKGxhYmVscykgaWYgbGFiZWxzIGVsc2UgcmVwWyJldmVudF91aWQiXQoKICAgICAgICBldnRfbm9kZSA9IEV2ZW50Tm9kZSgKICAgICAgICAgICAgbm9kZV9pZD1ldnRfbm9kZV9pZCwKICAgICAgICAgICAgZXZlbnRfdWlkPXJlcFsiZXZlbnRfdWlkIl0sCiAgICAgICAgICAgIHN1bW1hcnk9c3VtbWFyeSwKICAgICAgICApCgogICAgICAgIHNlY19ub2RlLmFkZF9jaGlsZChldnRfbm9kZSkKICAgICAgICBub2Rlc1tldnRfbm9kZV9pZF0gPSBldnRfbm9kZQoKICAgICAgICAjIE1hcCBBTEwgc291cmNlIExTUyBldmVudHMgdG8gdGhpcyBET00gbm9kZQogICAgICAgIGZvciByIGluIHJvd3M6CiAgICAgICAgICAgIGV2ZW50c19ieV9kYl9pZFtyWyJpZCJdXSA9IGV2dF9ub2RlCgogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgIyBBY3RvcnMgKE9QVElPTkFMIG1ldGFkYXRhKQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIGFjdG9yX3Jvd3MgPSBjb25uLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUCiAgICAgICAgICAgIGxzc19ldmVudF9pZCwKICAgICAgICAgICAgdGV4dAogICAgICAgIEZST00gbHNzX3JvbGVfY2FuZGlkYXRlcwogICAgICAgIFdIRVJFIHJvbGVfa2luZCA9ICdBQ1RPUicKICAgICAgICAiIiIKICAgICkuZmV0Y2hhbGwoKQoKICAgIGZvciByb3cgaW4gYWN0b3Jfcm93czoKICAgICAgICBldnRfbm9kZSA9IGV2ZW50c19ieV9kYl9pZC5nZXQocm93WyJsc3NfZXZlbnRfaWQiXSkKICAgICAgICBpZiBub3QgZXZ0X25vZGU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGV2dF9ub2RlLmFjdG9ycy5hcHBlbmQoCiAgICAgICAgICAgIEFjdG9yKAogICAgICAgICAgICAgICAgdGV4dD1yb3dbInRleHQiXSwKICAgICAgICAgICAgICAgIGdhemV0dGVlcl9ncm91cF9pZD1Ob25lLAogICAgICAgICAgICApCiAgICAgICAgKQoKICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICMgTG9jYXRpb24gc2VyaWVzICsgbG9jYXRpb25zCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgbG9jX3Jvd3MgPSBjb25uLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUCiAgICAgICAgICAgIHMuaWQgICAgICAgIEFTIHNlcmllc19pZCwKICAgICAgICAgICAgcy5sc3NfZXZlbnRfaWQsCiAgICAgICAgICAgIGxpLm9yZGluYWwgIEFTIGxvY19vcmRpbmFsLAogICAgICAgICAgICBsaS50ZXh0ICAgICBBUyBsb2NfdGV4dAogICAgICAgIEZST00gbHNzX2xvY2F0aW9uX3NlcmllcyBzCiAgICAgICAgSk9JTiBsc3NfbG9jYXRpb25faXRlbXMgbGkKICAgICAgICAgICAgT04gbGkuc2VyaWVzX2lkID0gcy5pZAogICAgICAgIE9SREVSIEJZIHMubHNzX2V2ZW50X2lkLCBzLmlkLCBsaS5vcmRpbmFsCiAgICAgICAgIiIiCiAgICApLmZldGNoYWxsKCkKCiAgICBzZXJpZXNfbm9kZXM6IERpY3RbaW50LCBMb2NhdGlvblNlcmllc05vZGVdID0ge30KICAgIHNlcmllc19pbmRleF9ieV9ldmVudDogRGljdFtpbnQsIGludF0gPSBkZWZhdWx0ZGljdChpbnQpCgogICAgZm9yIHJvdyBpbiBsb2Nfcm93czoKICAgICAgICBldnRfbm9kZSA9IGV2ZW50c19ieV9kYl9pZC5nZXQocm93WyJsc3NfZXZlbnRfaWQiXSkKICAgICAgICBpZiBub3QgZXZ0X25vZGU6CiAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgIGlmIHJvd1sic2VyaWVzX2lkIl0gbm90IGluIHNlcmllc19ub2RlczoKICAgICAgICAgICAgaWR4ID0gc2VyaWVzX2luZGV4X2J5X2V2ZW50W2lkKGV2dF9ub2RlKV0KICAgICAgICAgICAgc2VyaWVzX2luZGV4X2J5X2V2ZW50W2lkKGV2dF9ub2RlKV0gKz0gMQoKICAgICAgICAgICAgc2VyX25vZGVfaWQgPSBfbm9kZV9pZChldnRfbm9kZS5ub2RlX2lkLCBmInNlcjp7aWR4fSIpCiAgICAgICAgICAgIHNlcl9ub2RlID0gTG9jYXRpb25TZXJpZXNOb2RlKAogICAgICAgICAgICAgICAgbm9kZV9pZD1zZXJfbm9kZV9pZCwKICAgICAgICAgICAgICAgIHNlcmllc19pbmRleD1pZHgsCiAgICAgICAgICAgICAgICBzdW1tYXJ5PSJMb2NhdGlvbiBzZXJpZXMiLAogICAgICAgICAgICApCiAgICAgICAgICAgIGV2dF9ub2RlLmFkZF9jaGlsZChzZXJfbm9kZSkKICAgICAgICAgICAgbm9kZXNbc2VyX25vZGVfaWRdID0gc2VyX25vZGUKICAgICAgICAgICAgc2VyaWVzX25vZGVzW3Jvd1sic2VyaWVzX2lkIl1dID0gc2VyX25vZGUKCiAgICAgICAgc2VyX25vZGUgPSBzZXJpZXNfbm9kZXNbcm93WyJzZXJpZXNfaWQiXV0KCiAgICAgICAgbG9jX25vZGVfaWQgPSBfbm9kZV9pZChzZXJfbm9kZS5ub2RlX2lkLCBmImxvYzp7cm93Wydsb2Nfb3JkaW5hbCddfSIpCiAgICAgICAgbG9jX25vZGUgPSBMb2NhdGlvbk5vZGUoCiAgICAgICAgICAgIG5vZGVfaWQ9bG9jX25vZGVfaWQsCiAgICAgICAgICAgIG1lbnRpb25fdGV4dD1yb3dbImxvY190ZXh0Il0sCiAgICAgICAgICAgIHN1bW1hcnk9cm93WyJsb2NfdGV4dCJdLAogICAgICAgICAgICByZXNvbHZlZD1GYWxzZSwKICAgICAgICApCiAgICAgICAgc2VyX25vZGUuYWRkX2NoaWxkKGxvY19ub2RlKQogICAgICAgIG5vZGVzW2xvY19ub2RlX2lkXSA9IGxvY19ub2RlCgogICAgcmV0dXJuIG5vZGVzCgAAAAAAAAAALxkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALxkAAAAAAAAvGQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/gazetteer/alias_service.py",
			"settings":
			{
				"buffer_size": 4242,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
			]
		},
		{
			"file": "src/sitrepc2/dom/dom_enrichment.py",
			"settings":
			{
				"buffer_size": 6106,
				"encoding": "UTF-8",
				"line_ending": "Unix",
				"name": "# src/sitrepc2/dom/dom_enrichment.py"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAA2hcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/dom/dom_context_attach.py",
			"settings":
			{
				"buffer_size": 4633,
				"line_ending": "Unix",
				"name": "# src/sitrepc2/dom/dom_context_attach.py"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAGRIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAZEgAAIyBzcmMvc2l0cmVwYzIvZG9tL2RvbV9jb250ZXh0X2F0dGFjaC5weQpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgpmcm9tIGNvbGxlY3Rpb25zIGltcG9ydCBkZWZhdWx0ZGljdApmcm9tIHR5cGluZyBpbXBvcnQgRGljdAoKaW1wb3J0IHNxbGl0ZTMKCmZyb20gc2l0cmVwYzIuZG9tLm5vZGVzIGltcG9ydCAoCiAgICBEb21Ob2RlLAogICAgUG9zdE5vZGUsCiAgICBTZWN0aW9uTm9kZSwKICAgIEV2ZW50Tm9kZSwKICAgIExvY2F0aW9uU2VyaWVzTm9kZSwKICAgIExvY2F0aW9uTm9kZSwKICAgIENvbnRleHQsCikKCgojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIEhlbHBlcnMKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmRlZiBfaW5kZXhfbm9kZXNfYnlfdHlwZShub2RlczogRGljdFtzdHIsIERvbU5vZGVdKToKICAgIHBvc3RzID0gW10KICAgIHNlY3Rpb25zID0ge30KICAgIGV2ZW50cyA9IHt9CiAgICBzZXJpZXMgPSB7fQogICAgbG9jYXRpb25zID0ge30KCiAgICBmb3Igbm9kZSBpbiBub2Rlcy52YWx1ZXMoKToKICAgICAgICBpZiBpc2luc3RhbmNlKG5vZGUsIFBvc3ROb2RlKToKICAgICAgICAgICAgcG9zdHMuYXBwZW5kKG5vZGUpCgogICAgICAgIGVsaWYgaXNpbnN0YW5jZShub2RlLCBTZWN0aW9uTm9kZSk6CiAgICAgICAgICAgIHNlY3Rpb25zW25vZGUuc2VjdGlvbl9pbmRleF0gPSBub2RlCgogICAgICAgIGVsaWYgaXNpbnN0YW5jZShub2RlLCBFdmVudE5vZGUpOgogICAgICAgICAgICAjIGV2ZW50IG9yZGluYWwgaXMgZW5jb2RlZCBpbiBub2RlX2lkIHN1ZmZpeAogICAgICAgICAgICAjIHBvc3Qvc2VjL2V2dDp7b3JkaW5hbH0KICAgICAgICAgICAgb3JkaW5hbCA9IGludChub2RlLm5vZGVfaWQuc3BsaXQoImV2dDoiKVstMV0pCiAgICAgICAgICAgIGV2ZW50c1tvcmRpbmFsXSA9IG5vZGUKCiAgICAgICAgZWxpZiBpc2luc3RhbmNlKG5vZGUsIExvY2F0aW9uU2VyaWVzTm9kZSk6CiAgICAgICAgICAgICMgcG9zdC9zZWMvZXZ0L3Nlcjp7aWR4fQogICAgICAgICAgICBpZHggPSBpbnQobm9kZS5ub2RlX2lkLnNwbGl0KCJzZXI6IilbLTFdKQogICAgICAgICAgICBzZXJpZXNbKG5vZGUucGFyZW50Lm5vZGVfaWQsIGlkeCldID0gbm9kZQoKICAgICAgICBlbGlmIGlzaW5zdGFuY2Uobm9kZSwgTG9jYXRpb25Ob2RlKToKICAgICAgICAgICAgIyBwb3N0L3NlYy9ldnQvc2VyL2xvYzp7b3JkaW5hbH0KICAgICAgICAgICAgb3JkaW5hbCA9IGludChub2RlLm5vZGVfaWQuc3BsaXQoImxvYzoiKVstMV0pCiAgICAgICAgICAgIGxvY2F0aW9uc1sobm9kZS5wYXJlbnQubm9kZV9pZCwgb3JkaW5hbCldID0gbm9kZQoKICAgIHJldHVybiBwb3N0cywgc2VjdGlvbnMsIGV2ZW50cywgc2VyaWVzLCBsb2NhdGlvbnMKCgpkZWYgX2F0dGFjaF9jb250ZXh0KG5vZGU6IERvbU5vZGUsIGN0eF9raW5kOiBzdHIsIHZhbHVlOiBzdHIpOgogICAgIiIiCiAgICBBdHRhY2ggY29udGV4dCBpZiB0aGlzIG5vZGUgZG9lcyBub3QgYWxyZWFkeSBoYXZlIHRoaXMga2luZC4KICAgIExvd2VyIGxheWVycyBhcmUgZXhwZWN0ZWQgdG8gb3ZlcnJpZGUgdmlhIG9yZGVyaW5nLgogICAgIiIiCiAgICBpZiBhbnkoYy5jdHhfa2luZCA9PSBjdHhfa2luZCBmb3IgYyBpbiBub2RlLmNvbnRleHRzKToKICAgICAgICByZXR1cm4KCiAgICBub2RlLmNvbnRleHRzLmFwcGVuZCgKICAgICAgICBDb250ZXh0KAogICAgICAgICAgICBjdHhfa2luZD1jdHhfa2luZCwKICAgICAgICAgICAgdmFsdWU9dmFsdWUsCiAgICAgICAgICAgIHNlbGVjdGVkPVRydWUsCiAgICAgICAgKQogICAgKQoKCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgUHVibGljIEFQSQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKZGVmIGF0dGFjaF9jb250ZXh0cygKICAgICosCiAgICBjb25uOiBzcWxpdGUzLkNvbm5lY3Rpb24sCiAgICBub2RlczogRGljdFtzdHIsIERvbU5vZGVdLAogICAgbHNzX3J1bl9pZDogaW50LAopIC0+IE5vbmU6CiAgICAiIiIKICAgIEF0dGFjaCBMU1MgY29udGV4dCBoaW50cyB0byBET00gbm9kZXMuCgogICAgQ29udHJhY3Q6CiAgICAtIE5vIGluZmVyZW5jZQogICAgLSBObyBmaWx0ZXJpbmcKICAgIC0gTm8gY2FuZGlkYXRlIGNyZWF0aW9uCiAgICAtIE9uZSBjb250ZXh0IHBlciBraW5kIHBlciBub2RlCiAgICAtIExvd2VyLWxldmVsIGNvbnRleHQgb3ZlcnJpZGVzIGJ5IGxhdGVyIGF0dGFjaG1lbnQKICAgICIiIgoKICAgIHBvc3RzLCBzZWN0aW9ucywgZXZlbnRzLCBzZXJpZXNfbm9kZXMsIGxvY2F0aW9uX25vZGVzID0gX2luZGV4X25vZGVzX2J5X3R5cGUobm9kZXMpCgogICAgcm93cyA9IGNvbm4uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QKICAgICAgICAgICAgY3R4X2tpbmQsCiAgICAgICAgICAgIHRleHQsCiAgICAgICAgICAgIHNjb3BlLAogICAgICAgICAgICB0YXJnZXRfaWQKICAgICAgICBGUk9NIGxzc19jb250ZXh0X2hpbnRzCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICAgIEFORCBzb3VyY2UgSU4gKCdHQVpFVFRFRVInLCAnU1lOVEhFVElDJykKICAgICAgICBPUkRFUiBCWQogICAgICAgICAgICBDQVNFIHNjb3BlCiAgICAgICAgICAgICAgICBXSEVOICdQT1NUJyBUSEVOIDAKICAgICAgICAgICAgICAgIFdIRU4gJ1NFQ1RJT04nIFRIRU4gMQogICAgICAgICAgICAgICAgV0hFTiAnRVZFTlQnIFRIRU4gMgogICAgICAgICAgICAgICAgV0hFTiAnU0VSSUVTJyBUSEVOIDMKICAgICAgICAgICAgICAgIFdIRU4gJ0xPQ0FUSU9OJyBUSEVOIDQKICAgICAgICAgICAgRU5ECiAgICAgICAgIiIiLAogICAgICAgIChsc3NfcnVuX2lkLCksCiAgICApLmZldGNoYWxsKCkKCiAgICBmb3Igcm93IGluIHJvd3M6CiAgICAgICAgY3R4X2tpbmQgPSByb3dbImN0eF9raW5kIl0KICAgICAgICB2YWx1ZSA9IHJvd1sidGV4dCJdCiAgICAgICAgc2NvcGUgPSByb3dbInNjb3BlIl0KICAgICAgICB0YXJnZXQgPSByb3dbInRhcmdldF9pZCJdCgogICAgICAgIGlmIG5vdCB2YWx1ZToKICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIFBPU1QKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGlmIHNjb3BlID09ICJQT1NUIjoKICAgICAgICAgICAgZm9yIHBvc3QgaW4gcG9zdHM6CiAgICAgICAgICAgICAgICBfYXR0YWNoX2NvbnRleHQocG9zdCwgY3R4X2tpbmQsIHZhbHVlKQoKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICMgU0VDVElPTgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgZWxpZiBzY29wZSA9PSAiU0VDVElPTiI6CiAgICAgICAgICAgIHNlYyA9IHNlY3Rpb25zLmdldCh0YXJnZXQpCiAgICAgICAgICAgIGlmIHNlYzoKICAgICAgICAgICAgICAgIF9hdHRhY2hfY29udGV4dChzZWMsIGN0eF9raW5kLCB2YWx1ZSkKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIEVWRU5UCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBlbGlmIHNjb3BlID09ICJFVkVOVCI6CiAgICAgICAgICAgIGV2dCA9IGV2ZW50cy5nZXQodGFyZ2V0KQogICAgICAgICAgICBpZiBldnQ6CiAgICAgICAgICAgICAgICBfYXR0YWNoX2NvbnRleHQoZXZ0LCBjdHhfa2luZCwgdmFsdWUpCgogICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgIyBTRVJJRVMKICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgIGVsaWYgc2NvcGUgPT0gIlNFUklFUyI6CiAgICAgICAgICAgIGZvciAoZXZ0X2lkLCBpZHgpLCBzZXIgaW4gc2VyaWVzX25vZGVzLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBpZiBpZHggPT0gdGFyZ2V0OgogICAgICAgICAgICAgICAgICAgIF9hdHRhY2hfY29udGV4dChzZXIsIGN0eF9raW5kLCB2YWx1ZSkKCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAjIExPQ0FUSU9OCiAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICBlbGlmIHNjb3BlID09ICJMT0NBVElPTiI6CiAgICAgICAgICAgIGZvciAoc2VyX2lkLCBvcmRpbmFsKSwgbG9jIGluIGxvY2F0aW9uX25vZGVzLml0ZW1zKCk6CiAgICAgICAgICAgICAgICBpZiBvcmRpbmFsID09IHRhcmdldDoKICAgICAgICAgICAgICAgICAgICBfYXR0YWNoX2NvbnRleHQobG9jLCBjdHhfa2luZCwgdmFsdWUpCgAAAAAAAAAAGRIAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAcw0AAAAAAABzDQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/dom/dom_location_enrich.py",
			"settings":
			{
				"buffer_size": 3928,
				"encoding": "UTF-8",
				"line_ending": "Unix",
				"name": "# src/sitrepc2/dom/dom_location_enrich.py"
			},
			"undo_stack":
			[
				[
					1,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAWA8AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/cli/lss_cmd.py",
			"settings":
			{
				"buffer_size": 13754,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					16,
					1,
					"paste",
					null,
					"AQAAAIYgAAAAAAAAKioAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhiAAAAAAAACGIAAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACXNQAAIyBzcmMvc2l0cmVwYzIvY2xpL2xzc19jbWQucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZQpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIExpc3QsIERpY3QsIFNldAoKaW1wb3J0IHR5cGVyCmZyb20gcmljaCBpbXBvcnQgcHJpbnQKZnJvbSByaWNoLnRhYmxlIGltcG9ydCBUYWJsZQoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKCmFwcCA9IHR5cGVyLlR5cGVyKGhlbHA9IlF1ZXJ5IExTUy1sYXllciBvdXRwdXRzIChyZWFkLW9ubHkpLiIpCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIZWxwZXJzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX2Nvbm4oKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246CiAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3QocmVjb3Jkc19kYl9wYXRoKCkpCiAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgY29uLmV4ZWN1dGUoIlBSQUdNQSBmb3JlaWduX2tleXMgPSBPTjsiKQogICAgcmV0dXJuIGNvbgoKCmRlZiBfcGFyc2VfZGF0ZV9pc28odmFsdWU6IHN0cikgLT4gdHVwbGVbc3RyLCBzdHJdOgogICAgdHJ5OgogICAgICAgIGQgPSBkYXRlLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoIkRhdGUgbXVzdCBiZSBZWVlZLU1NLUREIikKCiAgICBzdGFydCA9IGYie2QuaXNvZm9ybWF0KCl9VDAwOjAwOjAwWiIKICAgIGVuZCA9IGYie2QuaXNvZm9ybWF0KCl9VDIzOjU5OjU5WiIKICAgIHJldHVybiBzdGFydCwgZW5kCgoKZGVmIF92YWxpZGF0ZV9zZWxlY3RvcnMoCiAgICAqLAogICAgcG9zdF9pZDogT3B0aW9uYWxbaW50XSwKICAgIGFsaWFzOiBPcHRpb25hbFtzdHJdLAogICAgcHVibGlzaGVyOiBPcHRpb25hbFtzdHJdLAogICAgcHViX2RhdGU6IE9wdGlvbmFsW3N0cl0sCiAgICBzb3VyY2U6IE9wdGlvbmFsW3N0cl0sCik6CiAgICBpZiBwb3N0X2lkIGlzIG5vdCBOb25lOgogICAgICAgIGlmIGFueShbYWxpYXMsIHB1Ymxpc2hlciwgcHViX2RhdGUsIHNvdXJjZV0pOgogICAgICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoCiAgICAgICAgICAgICAgICAiLS1wb3N0LWlkIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIG90aGVyIGZpbHRlcnMuIgogICAgICAgICAgICApCiAgICBlbHNlOgogICAgICAgIGlmIG5vdCBhbnkoW2FsaWFzLCBwdWJsaXNoZXIsIHB1Yl9kYXRlLCBzb3VyY2VdKToKICAgICAgICAgICAgcmFpc2UgdHlwZXIuQmFkUGFyYW1ldGVyKAogICAgICAgICAgICAgICAgIkF0IGxlYXN0IG9uZSBvZiAtLXB1Yi1kYXRlLCAtLWFsaWFzLCAtLXB1Ymxpc2hlciwgb3IgLS1zb3VyY2UgbXVzdCBiZSBwcm92aWRlZC4iCiAgICAgICAgICAgICkKCgpkZWYgX3NlbGVjdF9pbmdlc3RfcG9zdHMoCiAgICAqLAogICAgY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sCiAgICBwb3N0X2lkOiBPcHRpb25hbFtpbnRdLAogICAgYWxpYXM6IE9wdGlvbmFsW3N0cl0sCiAgICBwdWJsaXNoZXI6IE9wdGlvbmFsW3N0cl0sCiAgICBwdWJfZGF0ZTogT3B0aW9uYWxbc3RyXSwKICAgIHNvdXJjZTogT3B0aW9uYWxbc3RyXSwKICAgIGxpbWl0OiBPcHRpb25hbFtpbnRdLAopIC0+IExpc3Rbc3FsaXRlMy5Sb3ddOgoKICAgIGNsYXVzZXM6IExpc3Rbc3RyXSA9IFtdCiAgICBwYXJhbXM6IExpc3Rbb2JqZWN0XSA9IFtdCgogICAgaWYgcG9zdF9pZCBpcyBub3QgTm9uZToKICAgICAgICBjbGF1c2VzLmFwcGVuZCgiaWQgPSA/IikKICAgICAgICBwYXJhbXMuYXBwZW5kKHBvc3RfaWQpCgogICAgaWYgYWxpYXMgaXMgbm90IE5vbmU6CiAgICAgICAgY2xhdXNlcy5hcHBlbmQoImFsaWFzID0gPyIpCiAgICAgICAgcGFyYW1zLmFwcGVuZChhbGlhcykKCiAgICBpZiBwdWJsaXNoZXIgaXMgbm90IE5vbmU6CiAgICAgICAgY2xhdXNlcy5hcHBlbmQoInB1Ymxpc2hlciA9ID8iKQogICAgICAgIHBhcmFtcy5hcHBlbmQocHVibGlzaGVyKQoKICAgIGlmIHNvdXJjZSBpcyBub3QgTm9uZToKICAgICAgICBjbGF1c2VzLmFwcGVuZCgic291cmNlID0gPyIpCiAgICAgICAgcGFyYW1zLmFwcGVuZChzb3VyY2UpCgogICAgaWYgcHViX2RhdGUgaXMgbm90IE5vbmU6CiAgICAgICAgc3RhcnQsIGVuZCA9IF9wYXJzZV9kYXRlX2lzbyhwdWJfZGF0ZSkKICAgICAgICBjbGF1c2VzLmFwcGVuZCgicHVibGlzaGVkX2F0IEJFVFdFRU4gPyBBTkQgPyIpCiAgICAgICAgcGFyYW1zLmV4dGVuZChbc3RhcnQsIGVuZF0pCgogICAgd2hlcmVfc3FsID0gIiBBTkQgIi5qb2luKGNsYXVzZXMpCgogICAgc3FsID0gZiIiIgogICAgICAgIFNFTEVDVCBpZCwgcHVibGlzaGVkX2F0LCBhbGlhcywgcHVibGlzaGVyLCBzb3VyY2UKICAgICAgICBGUk9NIGluZ2VzdF9wb3N0cwogICAgICAgIFdIRVJFIHt3aGVyZV9zcWx9CiAgICAgICAgT1JERVIgQlkgcHVibGlzaGVkX2F0IEFTQwogICAgIiIiCgogICAgaWYgbGltaXQgaXMgbm90IE5vbmU6CiAgICAgICAgc3FsICs9ICIgTElNSVQgPyIKICAgICAgICBwYXJhbXMuYXBwZW5kKGxpbWl0KQoKICAgIHJldHVybiBjb24uZXhlY3V0ZShzcWwsIHBhcmFtcykuZmV0Y2hhbGwoKQoKCmRlZiBfbGF0ZXN0X3J1bihjb246IHNxbGl0ZTMuQ29ubmVjdGlvbiwgaW5nZXN0X3Bvc3RfaWQ6IGludCkgLT4gT3B0aW9uYWxbc3FsaXRlMy5Sb3ddOgogICAgcmV0dXJuIGNvbi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCAqCiAgICAgICAgRlJPTSBsc3NfcnVucwogICAgICAgIFdIRVJFIGluZ2VzdF9wb3N0X2lkID0gPwogICAgICAgICAgQU5EIGNvbXBsZXRlZF9hdCBJUyBOT1QgTlVMTAogICAgICAgIE9SREVSIEJZIGNvbXBsZXRlZF9hdCBERVNDCiAgICAgICAgTElNSVQgMQogICAgICAgICIiIiwKICAgICAgICAoaW5nZXN0X3Bvc3RfaWQsKSwKICAgICkuZmV0Y2hvbmUoKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgRVZFTlRTIENPTU1BTkQgKHVuY2hhbmdlZCBiZWhhdmlvcikKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCkBhcHAuY29tbWFuZCgiZXZlbnRzIikKZGVmIGxzc19ldmVudHMoCiAgICAqLAogICAgcG9zdF9pZDogT3B0aW9uYWxbaW50XSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIGFsaWFzOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgcHVibGlzaGVyOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgcHViX2RhdGU6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBzb3VyY2U6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBsaW1pdDogT3B0aW9uYWxbaW50XSA9IHR5cGVyLk9wdGlvbihOb25lKSwKKToKICAgICIiIkluc3BlY3QgcmF3IExTUyBzdHJ1Y3R1cmFsIG91dHB1dHMgKGV2ZW50cywgcm9sZXMsIGNvbnRleHRzKS4iIiIKCiAgICBfdmFsaWRhdGVfc2VsZWN0b3JzKAogICAgICAgIHBvc3RfaWQ9cG9zdF9pZCwKICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICBwdWJsaXNoZXI9cHVibGlzaGVyLAogICAgICAgIHB1Yl9kYXRlPXB1Yl9kYXRlLAogICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICApCgogICAgd2l0aCBfY29ubigpIGFzIGNvbjoKICAgICAgICBwb3N0cyA9IF9zZWxlY3RfaW5nZXN0X3Bvc3RzKAogICAgICAgICAgICBjb249Y29uLAogICAgICAgICAgICBwb3N0X2lkPXBvc3RfaWQsCiAgICAgICAgICAgIGFsaWFzPWFsaWFzLAogICAgICAgICAgICBwdWJsaXNoZXI9cHVibGlzaGVyLAogICAgICAgICAgICBwdWJfZGF0ZT1wdWJfZGF0ZSwKICAgICAgICAgICAgc291cmNlPXNvdXJjZSwKICAgICAgICAgICAgbGltaXQ9bGltaXQsCiAgICAgICAgKQoKICAgICAgICBpZiBub3QgcG9zdHM6CiAgICAgICAgICAgIHByaW50KCJbeWVsbG93XU5vIG1hdGNoaW5nIGluZ2VzdCBwb3N0cyBmb3VuZC5bL3llbGxvd10iKQogICAgICAgICAgICByYWlzZSB0eXBlci5FeGl0KCkKCiAgICAgICAgcHJpbnQoZiJbZ3JlZW5dRm91bmQge2xlbihwb3N0cyl9IGluZ2VzdCBwb3N0KHMpWy9ncmVlbl0iKQoKICAgICAgICBmb3IgcG9zdCBpbiBwb3N0czoKICAgICAgICAgICAgX3JlbmRlcl9wb3N0KGNvbiwgcG9zdCkKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFNVTU1BUklaRSBDT01NQU5EIChuZXcpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpAYXBwLmNvbW1hbmQoInN1bW1hcml6ZSIpCmRlZiBsc3Nfc3VtbWFyaXplKAogICAgKiwKICAgIHBvc3RfaWQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBhbGlhczogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Ymxpc2hlcjogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Yl9kYXRlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgc291cmNlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgbGltaXQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCik6CiAgICAiIiIKICAgIFN1bW1hcml6ZSBIb2xtZXMgKyBlbnRpdHktcnVsZXIgc2lnbmFsczoKICAgIGFjdG9ycywgYWN0aW9ucywgbG9jYXRpb25zLCBhbmQgY29udGV4dHVhbCBzcGFucy4KICAgICIiIgoKICAgIF92YWxpZGF0ZV9zZWxlY3RvcnMoCiAgICAgICAgcG9zdF9pZD1wb3N0X2lkLAogICAgICAgIGFsaWFzPWFsaWFzLAogICAgICAgIHB1Ymxpc2hlcj1wdWJsaXNoZXIsCiAgICAgICAgcHViX2RhdGU9cHViX2RhdGUsCiAgICAgICAgc291cmNlPXNvdXJjZSwKICAgICkKCiAgICB3aXRoIF9jb25uKCkgYXMgY29uOgogICAgICAgIHBvc3RzID0gX3NlbGVjdF9pbmdlc3RfcG9zdHMoCiAgICAgICAgICAgIGNvbj1jb24sCiAgICAgICAgICAgIHBvc3RfaWQ9cG9zdF9pZCwKICAgICAgICAgICAgYWxpYXM9YWxpYXMsCiAgICAgICAgICAgIHB1Ymxpc2hlcj1wdWJsaXNoZXIsCiAgICAgICAgICAgIHB1Yl9kYXRlPXB1Yl9kYXRlLAogICAgICAgICAgICBzb3VyY2U9c291cmNlLAogICAgICAgICAgICBsaW1pdD1saW1pdCwKICAgICAgICApCgogICAgICAgIGlmIG5vdCBwb3N0czoKICAgICAgICAgICAgcHJpbnQoIlt5ZWxsb3ddTm8gbWF0Y2hpbmcgaW5nZXN0IHBvc3RzIGZvdW5kLlsveWVsbG93XSIpCiAgICAgICAgICAgIHJhaXNlIHR5cGVyLkV4aXQoKQoKICAgICAgICBmb3IgcG9zdCBpbiBwb3N0czoKICAgICAgICAgICAgcnVuID0gX2xhdGVzdF9ydW4oY29uLCBwb3N0WyJpZCJdKQogICAgICAgICAgICBpZiBub3QgcnVuOgogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIEV2ZW50cwogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgZXZlbnRzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiU0VMRUNUIGlkIEZST00gbHNzX2V2ZW50cyBXSEVSRSBsc3NfcnVuX2lkID0gPyIsCiAgICAgICAgICAgICAgICAocnVuWyJpZCJdLCksCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICAgICAgZXZlbnRfaWRzID0gW2VbImlkIl0gZm9yIGUgaW4gZXZlbnRzXQogICAgICAgICAgICBpZiBub3QgZXZlbnRfaWRzOgogICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIEhvbG1lcyByb2xlcyAoY29sbGFwc2VkKQogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgcm9sZXMgPSBjb24uZXhlY3V0ZSgKICAgICAgICAgICAgICAgIGYiIiIKICAgICAgICAgICAgICAgIFNFTEVDVCByb2xlX2tpbmQsIGRvY3VtZW50X3dvcmQKICAgICAgICAgICAgICAgIEZST00gbHNzX3JvbGVfY2FuZGlkYXRlcwogICAgICAgICAgICAgICAgV0hFUkUgbHNzX2V2ZW50X2lkIElOICh7IiwiLmpvaW4oIj8iICogbGVuKGV2ZW50X2lkcykpfSkKICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIGV2ZW50X2lkcywKICAgICAgICAgICAgKS5mZXRjaGFsbCgpCgogICAgICAgICAgICBhY3RvcnMgPSBzZXQoKQogICAgICAgICAgICBhY3Rpb25zID0gc2V0KCkKICAgICAgICAgICAgbG9jYXRpb25zID0gc2V0KCkKCiAgICAgICAgICAgIGZvciByIGluIHJvbGVzOgogICAgICAgICAgICAgICAga2luZCA9IChyWyJyb2xlX2tpbmQiXSBvciAiIikubG93ZXIoKQogICAgICAgICAgICAgICAgd29yZCA9IHJbImRvY3VtZW50X3dvcmQiXQoKICAgICAgICAgICAgICAgIGlmIGtpbmQgaW4geyJzdWJqZWN0IiwgIm9iamVjdCIsICJwb3NzZXNzb3IifToKICAgICAgICAgICAgICAgICAgICBhY3RvcnMuYWRkKHdvcmQpCgogICAgICAgICAgICAgICAgZWxpZiBraW5kIGluIHsidmVyYiJ9OgogICAgICAgICAgICAgICAgICAgIGFjdGlvbnMuYWRkKHdvcmQpCgogICAgICAgICAgICAgICAgZWxpZiBraW5kIGluIHsicHJlcF9vYmplY3QifToKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbnMuYWRkKHdvcmQpCgoKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgICMgQ29udGV4dCBzcGFucyAocnVsZXIgb3V0cHV0KQogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgY29udGV4dHMgPSBjb24uZXhlY3V0ZSgKICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgU0VMRUNUIGN0eF9raW5kLCB0ZXh0CiAgICAgICAgICAgICAgICBGUk9NIGxzc19jb250ZXh0X3NwYW5zCiAgICAgICAgICAgICAgICBXSEVSRSBsc3NfcnVuX2lkID0gPwogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKHJ1blsiaWQiXSwpLAogICAgICAgICAgICApLmZldGNoYWxsKCkKCiAgICAgICAgICAgIGN0eF9tYXA6IERpY3Rbc3RyLCBTZXRbc3RyXV0gPSB7fQogICAgICAgICAgICBmb3IgYyBpbiBjb250ZXh0czoKICAgICAgICAgICAgICAgIGN0eF9tYXAuc2V0ZGVmYXVsdChjWyJjdHhfa2luZCJdLCBzZXQoKSkuYWRkKGNbInRleHQiXSkKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIE91dHB1dAogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgcHJpbnQoKQogICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgIGYiW2JvbGQgY3lhbl1Qb3N0IHtwb3N0WydpZCddfVsvYm9sZCBjeWFuXSAiCiAgICAgICAgICAgICAgICBmIntwb3N0WydwdWJsaXNoZWRfYXQnXX0gfCB7cG9zdFsnYWxpYXMnXX0gfCB7cG9zdFsncHVibGlzaGVyJ119IgogICAgICAgICAgICApCiAgICAgICAgICAgIHByaW50KGYiICBFdmVudHM6IHtsZW4oZXZlbnRzKX0iKQoKICAgICAgICAgICAgaWYgYWN0b3JzOgogICAgICAgICAgICAgICAgcHJpbnQoZiIgIEFjdG9yczogeycsICcuam9pbihzb3J0ZWQoYWN0b3JzKSl9IikKICAgICAgICAgICAgaWYgYWN0aW9uczoKICAgICAgICAgICAgICAgIHByaW50KGYiICBBY3Rpb25zOiB7JywgJy5qb2luKHNvcnRlZChhY3Rpb25zKSl9IikKICAgICAgICAgICAgaWYgbG9jYXRpb25zOgogICAgICAgICAgICAgICAgcHJpbnQoZiIgIExvY2F0aW9uczogeycsICcuam9pbihzb3J0ZWQobG9jYXRpb25zKSl9IikKCiAgICAgICAgICAgIGZvciBraW5kIGluICgiR1JPVVAiLCAiRElSRUNUSU9OIiwgIlJFR0lPTiIsICJMT0NBVElPTiIpOgogICAgICAgICAgICAgICAgdmFsdWVzID0gY3R4X21hcC5nZXQoa2luZCkKICAgICAgICAgICAgICAgIGlmIHZhbHVlczoKICAgICAgICAgICAgICAgICAgICBwcmludChmIiAge2tpbmR9OiB7JywgJy5qb2luKHNvcnRlZCh2YWx1ZXMpKX0iKQoKCkBhcHAuY29tbWFuZCgic3RhdHVzIikKZGVmIGxzc19zdGF0dXMoCiAgICAqLAogICAgcG9zdF9pZDogT3B0aW9uYWxbaW50XSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIGFsaWFzOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgcHVibGlzaGVyOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgcHViX2RhdGU6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBzb3VyY2U6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBsaW1pdDogT3B0aW9uYWxbaW50XSA9IHR5cGVyLk9wdGlvbihOb25lKSwKKToKICAgICIiIgogICAgU2hvdyBMU1MgZXh0cmFjdGlvbiBzdGF0dXMgZm9yIGluZ2VzdCBwb3N0czoKICAgIEZFVENIRUQgLyBQRU5ESU5HIC8gRVhUUkFDVEVECgogICAgV2l0aCBubyBmaWx0ZXJzLCBzaG93cyBBTEwgaW5nZXN0IHBvc3RzLgogICAgIiIiCgogICAgd2l0aCBfY29ubigpIGFzIGNvbjoKICAgICAgICAjIE5PVEU6IHVubGlrZSBvdGhlciBjb21tYW5kcywgc3RhdHVzIGFsbG93cyBOTyBzZWxlY3RvcnMKICAgICAgICBwb3N0cyA9IF9zZWxlY3RfaW5nZXN0X3Bvc3RzKAogICAgICAgICAgICBjb249Y29uLAogICAgICAgICAgICBwb3N0X2lkPXBvc3RfaWQsCiAgICAgICAgICAgIGFsaWFzPWFsaWFzLAogICAgICAgICAgICBwdWJsaXNoZXI9cHVibGlzaGVyLAogICAgICAgICAgICBwdWJfZGF0ZT1wdWJfZGF0ZSwKICAgICAgICAgICAgc291cmNlPXNvdXJjZSwKICAgICAgICAgICAgbGltaXQ9bGltaXQsCiAgICAgICAgKQoKICAgICAgICBpZiBub3QgcG9zdHM6CiAgICAgICAgICAgIHByaW50KCJbeWVsbG93XU5vIGluZ2VzdCBwb3N0cyBmb3VuZC5bL3llbGxvd10iKQogICAgICAgICAgICByYWlzZSB0eXBlci5FeGl0KCkKCiAgICAgICAgdGFibGUgPSBUYWJsZSh0aXRsZT0iTFNTIEV4dHJhY3Rpb24gU3RhdHVzIiwgc2hvd19saW5lcz1UcnVlKQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIlBvc3QgSUQiLCBzdHlsZT0iY3lhbiIsIHdpZHRoPTgpCiAgICAgICAgdGFibGUuYWRkX2NvbHVtbigiUHVibGlzaGVkIiwgc3R5bGU9ImRpbSIpCiAgICAgICAgdGFibGUuYWRkX2NvbHVtbigiQWxpYXMiLCBzdHlsZT0iZ3JlZW4iKQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIlB1Ymxpc2hlciIpCiAgICAgICAgdGFibGUuYWRkX2NvbHVtbigiU291cmNlIikKICAgICAgICB0YWJsZS5hZGRfY29sdW1uKCJTdGF0dXMiLCBzdHlsZT0iYm9sZCIpCgogICAgICAgIGZvciBwb3N0IGluIHBvc3RzOgogICAgICAgICAgICBwaWQgPSBwb3N0WyJpZCJdCgogICAgICAgICAgICBjb21wbGV0ZWQgPSBjb24uZXhlY3V0ZSgKICAgICAgICAgICAgICAgICIiIgogICAgICAgICAgICAgICAgU0VMRUNUIDEKICAgICAgICAgICAgICAgIEZST00gbHNzX3J1bnMKICAgICAgICAgICAgICAgIFdIRVJFIGluZ2VzdF9wb3N0X2lkID0gPwogICAgICAgICAgICAgICAgICBBTkQgY29tcGxldGVkX2F0IElTIE5PVCBOVUxMCiAgICAgICAgICAgICAgICBMSU1JVCAxCiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICAocGlkLCksCiAgICAgICAgICAgICkuZmV0Y2hvbmUoKQoKICAgICAgICAgICAgaWYgY29tcGxldGVkOgogICAgICAgICAgICAgICAgc3RhdHVzID0gIltncmVlbl1FWFRSQUNURURbL2dyZWVuXSIKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHBlbmRpbmcgPSBjb24uZXhlY3V0ZSgKICAgICAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgICAgICBTRUxFQ1QgMQogICAgICAgICAgICAgICAgICAgIEZST00gbHNzX3J1bnMKICAgICAgICAgICAgICAgICAgICBXSEVSRSBpbmdlc3RfcG9zdF9pZCA9ID8KICAgICAgICAgICAgICAgICAgICAgIEFORCBjb21wbGV0ZWRfYXQgSVMgTlVMTAogICAgICAgICAgICAgICAgICAgIExJTUlUIDEKICAgICAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICAgICAgKHBpZCwpLAogICAgICAgICAgICAgICAgKS5mZXRjaG9uZSgpCgogICAgICAgICAgICAgICAgaWYgcGVuZGluZzoKICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAiW3llbGxvd11QRU5ESU5HWy95ZWxsb3ddIgogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAiW2RpbV1GRVRDSEVEWy9kaW1dIgoKICAgICAgICAgICAgdGFibGUuYWRkX3JvdygKICAgICAgICAgICAgICAgIHN0cihwaWQpLAogICAgICAgICAgICAgICAgcG9zdFsicHVibGlzaGVkX2F0Il0sCiAgICAgICAgICAgICAgICBwb3N0WyJhbGlhcyJdLAogICAgICAgICAgICAgICAgcG9zdFsicHVibGlzaGVyIl0sCiAgICAgICAgICAgICAgICBwb3N0WyJzb3VyY2UiXSwKICAgICAgICAgICAgICAgIHN0YXR1cywKICAgICAgICAgICAgKQoKICAgICAgICBwcmludCh0YWJsZSkKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgUmVuZGVyaW5nIGhlbHBlcnMgKGV2ZW50cykKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBfcmVuZGVyX3Bvc3QoY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sIHBvc3Q6IHNxbGl0ZTMuUm93KSAtPiBOb25lOgogICAgcHJpbnQoKQogICAgcHJpbnQoCiAgICAgICAgZiJbYm9sZCBjeWFuXVBvc3Qge3Bvc3RbJ2lkJ119Wy9ib2xkIGN5YW5dICIKICAgICAgICBmIntwb3N0WydwdWJsaXNoZWRfYXQnXX0gfCB7cG9zdFsnYWxpYXMnXX0gfCB7cG9zdFsncHVibGlzaGVyJ119IgogICAgKQoKICAgIHJ1biA9IF9sYXRlc3RfcnVuKGNvbiwgcG9zdFsiaWQiXSkKICAgIGlmIG5vdCBydW46CiAgICAgICAgcHJpbnQoIlt5ZWxsb3ddICBObyBjb21wbGV0ZWQgTFNTIHJ1bi5bL3llbGxvd10iKQogICAgICAgIHJldHVybgoKICAgIHByaW50KAogICAgICAgIGYiICBbZ3JlZW5dTFNTIHJ1biB7cnVuWydpZCddfVsvZ3JlZW5dICIKICAgICAgICBmIih7cnVuWydlbmdpbmUnXX0ge3J1blsnZW5naW5lX3ZlcnNpb24nXX0pIgogICAgKQoKICAgIF9yZW5kZXJfZXZlbnRzKGNvbiwgcnVuWyJpZCJdKQogICAgX3JlbmRlcl9jb250ZXh0cyhjb24sIHJ1blsiaWQiXSkKCgpkZWYgX3JlbmRlcl9ldmVudHMoY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sIHJ1bl9pZDogaW50KSAtPiBOb25lOgogICAgZXZlbnRzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUICoKICAgICAgICBGUk9NIGxzc19ldmVudHMKICAgICAgICBXSEVSRSBsc3NfcnVuX2lkID0gPwogICAgICAgIE9SREVSIEJZIG9yZGluYWwgQVNDCiAgICAgICAgIiIiLAogICAgICAgIChydW5faWQsKSwKICAgICkuZmV0Y2hhbGwoKQoKICAgIGlmIG5vdCBldmVudHM6CiAgICAgICAgcHJpbnQoIiAgW3llbGxvd11ObyBldmVudHMgZXh0cmFjdGVkLlsveWVsbG93XSIpCiAgICAgICAgcmV0dXJuCgogICAgdGFibGUgPSBUYWJsZSh0aXRsZT0iRXZlbnRzIiwgc2hvd19saW5lcz1UcnVlKQogICAgdGFibGUuYWRkX2NvbHVtbigiSUQiLCBzdHlsZT0iY3lhbiIsIHdpZHRoPTYpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJMYWJlbCIsIHN0eWxlPSJncmVlbiIpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJOZWciLCB3aWR0aD0zKQogICAgdGFibGUuYWRkX2NvbHVtbigiVW5jIiwgd2lkdGg9MykKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlRleHQiKQoKICAgIGZvciBldiBpbiBldmVudHM6CiAgICAgICAgdGFibGUuYWRkX3JvdygKICAgICAgICAgICAgc3RyKGV2WyJpZCJdKSwKICAgICAgICAgICAgZXZbImxhYmVsIl0sCiAgICAgICAgICAgICJZIiBpZiBldlsibmVnYXRlZCJdIGVsc2UgIiIsCiAgICAgICAgICAgICJZIiBpZiBldlsidW5jZXJ0YWluIl0gZWxzZSAiIiwKICAgICAgICAgICAgZXZbInRleHQiXVs6MTIwXSArICgi4oCmIiBpZiBsZW4oZXZbInRleHQiXSkgPiAxMjAgZWxzZSAiIiksCiAgICAgICAgKQoKICAgIHByaW50KHRhYmxlKQoKICAgIGZvciBldiBpbiBldmVudHM6CiAgICAgICAgX3JlbmRlcl9yb2xlcyhjb24sIGV2WyJpZCJdKQoKCmRlZiBfcmVuZGVyX3JvbGVzKGNvbjogc3FsaXRlMy5Db25uZWN0aW9uLCBldmVudF9pZDogaW50KSAtPiBOb25lOgogICAgcm9sZXMgPSBjb24uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QgKgogICAgICAgIEZST00gbHNzX3JvbGVfY2FuZGlkYXRlcwogICAgICAgIFdIRVJFIGxzc19ldmVudF9pZCA9ID8KICAgICAgICBPUkRFUiBCWSByb2xlX2tpbmQgQVNDCiAgICAgICAgIiIiLAogICAgICAgIChldmVudF9pZCwpLAogICAgKS5mZXRjaGFsbCgpCgogICAgaWYgbm90IHJvbGVzOgogICAgICAgIHJldHVybgoKICAgIHRhYmxlID0gVGFibGUodGl0bGU9ZiJSb2xlcyBmb3IgZXZlbnQge2V2ZW50X2lkfSIsIHNob3dfbGluZXM9RmFsc2UpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJLaW5kIiwgc3R5bGU9ImN5YW4iKQogICAgdGFibGUuYWRkX2NvbHVtbigiV29yZCIsIHN0eWxlPSJncmVlbiIpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJOZWciKQogICAgdGFibGUuYWRkX2NvbHVtbigiVW5jIikKCiAgICBmb3IgciBpbiByb2xlczoKICAgICAgICB0YWJsZS5hZGRfcm93KAogICAgICAgICAgICByWyJyb2xlX2tpbmQiXSwKICAgICAgICAgICAgclsiZG9jdW1lbnRfd29yZCJdLAogICAgICAgICAgICAiWSIgaWYgclsibmVnYXRlZCJdIGVsc2UgIiIsCiAgICAgICAgICAgICJZIiBpZiByWyJ1bmNlcnRhaW4iXSBlbHNlICIiLAogICAgICAgICkKCiAgICBwcmludCh0YWJsZSkKCgpkZWYgX3JlbmRlcl9jb250ZXh0cyhjb246IHNxbGl0ZTMuQ29ubmVjdGlvbiwgcnVuX2lkOiBpbnQpIC0+IE5vbmU6CiAgICByb3dzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUICoKICAgICAgICBGUk9NIGxzc19jb250ZXh0X3NwYW5zCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBjdHhfa2luZCBBU0MKICAgICAgICAiIiIsCiAgICAgICAgKHJ1bl9pZCwpLAogICAgKS5mZXRjaGFsbCgpCgogICAgaWYgbm90IHJvd3M6CiAgICAgICAgcmV0dXJuCgogICAgdGFibGUgPSBUYWJsZSh0aXRsZT0iQ29udGV4dCBzcGFucyIsIHNob3dfbGluZXM9RmFsc2UpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJLaW5kIiwgc3R5bGU9ImN5YW4iKQogICAgdGFibGUuYWRkX2NvbHVtbigiVGV4dCIpCgogICAgZm9yIHIgaW4gcm93czoKICAgICAgICB0YWJsZS5hZGRfcm93KHJbImN0eF9raW5kIl0sIHJbInRleHQiXSkKCiAgICBwcmludCh0YWJsZSkKAAAAAAAAAACVNQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASykAAAAAAABLKQAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"paste",
					null,
					"AQAAALAJAAAAAAAAggoAAAAAAACmAAAAICAgIHNxbCA9IGYiIiIKICAgICAgICBTRUxFQ1QgaWQsIHB1Ymxpc2hlZF9hdCwgYWxpYXMsIHB1Ymxpc2hlciwgc291cmNlCiAgICAgICAgRlJPTSBpbmdlc3RfcG9zdHMKICAgICAgICBXSEVSRSB7d2hlcmVfc3FsfQogICAgICAgIE9SREVSIEJZIHB1Ymxpc2hlZF9hdCBBU0MKICAgICIiIg",
					"AQAAAAAAAAABAAAAVgoAAAAAAACwCQAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					2,
					"indent",
					null,
					"EAAAALAJAAAAAAAAtAkAAAAAAAAAAAAA1wkAAAAAAADbCQAAAAAAAAAAAADlCQAAAAAAAOkJAAAAAAAAAAAAAB8KAAAAAAAAIwoAAAAAAAAAAAAAOQoAAAAAAAA9CgAAAAAAAAAAAABCCgAAAAAAAEYKAAAAAAAAAAAAAFQKAAAAAAAAWAoAAAAAAAAAAAAAegoAAAAAAAB+CgAAAAAAAAAAAACwCQAAAAAAALQJAAAAAAAAAAAAANsJAAAAAAAA3wkAAAAAAAAAAAAA7QkAAAAAAADxCQAAAAAAAAAAAAArCgAAAAAAAC8KAAAAAAAAAAAAAEkKAAAAAAAATQoAAAAAAAAAAAAAVgoAAAAAAABaCgAAAAAAAAAAAABsCgAAAAAAAHAKAAAAAAAAAAAAAJYKAAAAAAAAmgoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAggoAAAAAAACwCQAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"unindent",
					null,
					"CAAAALAJAAAAAAAAsAkAAAAAAAAEAAAAICAgINcJAAAAAAAA1wkAAAAAAAAEAAAAICAgIOUJAAAAAAAA5QkAAAAAAAAEAAAAICAgIB8KAAAAAAAAHwoAAAAAAAAEAAAAICAgIDkKAAAAAAAAOQoAAAAAAAAEAAAAICAgIEIKAAAAAAAAQgoAAAAAAAAEAAAAICAgIFQKAAAAAAAAVAoAAAAAAAAEAAAAICAgIHoKAAAAAAAAegoAAAAAAAAEAAAAICAgIA",
					"AQAAAAAAAAABAAAAwgoAAAAAAACwCQAAAAAAAAAAAAAAAPC/"
				],
				[
					46,
					3,
					"left_delete",
					null,
					"AwAAAIkJAAAAAAAAiQkAAAAAAAAlAAAAICAgIHdoZXJlX3NxbCA9ICIgQU5EICIuam9pbihjbGF1c2VzKYgJAAAAAAAAiAkAAAAAAAABAAAACocJAAAAAAAAhwkAAAAAAAABAAAACg",
					"AQAAAAAAAAABAAAArgkAAAAAAACJCQAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC8NQAAIyBzcmMvc2l0cmVwYzIvY2xpL2xzc19jbWQucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZQpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIExpc3QsIERpY3QsIFNldAoKaW1wb3J0IHR5cGVyCmZyb20gcmljaCBpbXBvcnQgcHJpbnQKZnJvbSByaWNoLnRhYmxlIGltcG9ydCBUYWJsZQoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKCmFwcCA9IHR5cGVyLlR5cGVyKGhlbHA9IlF1ZXJ5IExTUy1sYXllciBvdXRwdXRzIChyZWFkLW9ubHkpLiIpCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIZWxwZXJzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX2Nvbm4oKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246CiAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3QocmVjb3Jkc19kYl9wYXRoKCkpCiAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgY29uLmV4ZWN1dGUoIlBSQUdNQSBmb3JlaWduX2tleXMgPSBPTjsiKQogICAgcmV0dXJuIGNvbgoKCmRlZiBfcGFyc2VfZGF0ZV9pc28odmFsdWU6IHN0cikgLT4gdHVwbGVbc3RyLCBzdHJdOgogICAgdHJ5OgogICAgICAgIGQgPSBkYXRlLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoIkRhdGUgbXVzdCBiZSBZWVlZLU1NLUREIikKCiAgICBzdGFydCA9IGYie2QuaXNvZm9ybWF0KCl9VDAwOjAwOjAwWiIKICAgIGVuZCA9IGYie2QuaXNvZm9ybWF0KCl9VDIzOjU5OjU5WiIKICAgIHJldHVybiBzdGFydCwgZW5kCgoKZGVmIF92YWxpZGF0ZV9zZWxlY3RvcnMoCiAgICAqLAogICAgcG9zdF9pZDogT3B0aW9uYWxbaW50XSwKICAgIGFsaWFzOiBPcHRpb25hbFtzdHJdLAogICAgcHVibGlzaGVyOiBPcHRpb25hbFtzdHJdLAogICAgcHViX2RhdGU6IE9wdGlvbmFsW3N0cl0sCiAgICBzb3VyY2U6IE9wdGlvbmFsW3N0cl0sCik6CiAgICBpZiBwb3N0X2lkIGlzIG5vdCBOb25lOgogICAgICAgIGlmIGFueShbYWxpYXMsIHB1Ymxpc2hlciwgcHViX2RhdGUsIHNvdXJjZV0pOgogICAgICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoCiAgICAgICAgICAgICAgICAiLS1wb3N0LWlkIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIG90aGVyIGZpbHRlcnMuIgogICAgICAgICAgICApCiAgICBlbHNlOgogICAgICAgIGlmIG5vdCBhbnkoW2FsaWFzLCBwdWJsaXNoZXIsIHB1Yl9kYXRlLCBzb3VyY2VdKToKICAgICAgICAgICAgcmFpc2UgdHlwZXIuQmFkUGFyYW1ldGVyKAogICAgICAgICAgICAgICAgIkF0IGxlYXN0IG9uZSBvZiAtLXB1Yi1kYXRlLCAtLWFsaWFzLCAtLXB1Ymxpc2hlciwgb3IgLS1zb3VyY2UgbXVzdCBiZSBwcm92aWRlZC4iCiAgICAgICAgICAgICkKCgpkZWYgX3NlbGVjdF9pbmdlc3RfcG9zdHMoCiAgICAqLAogICAgY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sCiAgICBwb3N0X2lkOiBPcHRpb25hbFtpbnRdLAogICAgYWxpYXM6IE9wdGlvbmFsW3N0cl0sCiAgICBwdWJsaXNoZXI6IE9wdGlvbmFsW3N0cl0sCiAgICBwdWJfZGF0ZTogT3B0aW9uYWxbc3RyXSwKICAgIHNvdXJjZTogT3B0aW9uYWxbc3RyXSwKICAgIGxpbWl0OiBPcHRpb25hbFtpbnRdLAopIC0+IExpc3Rbc3FsaXRlMy5Sb3ddOgoKICAgIGNsYXVzZXM6IExpc3Rbc3RyXSA9IFtdCiAgICBwYXJhbXM6IExpc3Rbb2JqZWN0XSA9IFtdCgogICAgaWYgcG9zdF9pZCBpcyBub3QgTm9uZToKICAgICAgICBjbGF1c2VzLmFwcGVuZCgiaWQgPSA/IikKICAgICAgICBwYXJhbXMuYXBwZW5kKHBvc3RfaWQpCgogICAgaWYgYWxpYXMgaXMgbm90IE5vbmU6CiAgICAgICAgY2xhdXNlcy5hcHBlbmQoImFsaWFzID0gPyIpCiAgICAgICAgcGFyYW1zLmFwcGVuZChhbGlhcykKCiAgICBpZiBwdWJsaXNoZXIgaXMgbm90IE5vbmU6CiAgICAgICAgY2xhdXNlcy5hcHBlbmQoInB1Ymxpc2hlciA9ID8iKQogICAgICAgIHBhcmFtcy5hcHBlbmQocHVibGlzaGVyKQoKICAgIGlmIHNvdXJjZSBpcyBub3QgTm9uZToKICAgICAgICBjbGF1c2VzLmFwcGVuZCgic291cmNlID0gPyIpCiAgICAgICAgcGFyYW1zLmFwcGVuZChzb3VyY2UpCgogICAgaWYgcHViX2RhdGUgaXMgbm90IE5vbmU6CiAgICAgICAgc3RhcnQsIGVuZCA9IF9wYXJzZV9kYXRlX2lzbyhwdWJfZGF0ZSkKICAgICAgICBjbGF1c2VzLmFwcGVuZCgicHVibGlzaGVkX2F0IEJFVFdFRU4gPyBBTkQgPyIpCiAgICAgICAgcGFyYW1zLmV4dGVuZChbc3RhcnQsIGVuZF0pCgogICAgd2hlcmVfc3FsID0gIiBBTkQgIi5qb2luKGNsYXVzZXMpCgogICAgc3FsID0gIiIiCiAgICAgICAgU0VMRUNUIGlkLCBwdWJsaXNoZWRfYXQsIGFsaWFzLCBwdWJsaXNoZXIsIHNvdXJjZQogICAgICAgIEZST00gaW5nZXN0X3Bvc3RzCiAgICAiIiIKCiAgICBpZiB3aGVyZV9zcWw6CiAgICAgICAgc3FsICs9IGYiIFdIRVJFIHt3aGVyZV9zcWx9IgoKICAgIHNxbCArPSAiIE9SREVSIEJZIHB1Ymxpc2hlZF9hdCBBU0MiCgoKICAgIGlmIGxpbWl0IGlzIG5vdCBOb25lOgogICAgICAgIHNxbCArPSAiIExJTUlUID8iCiAgICAgICAgcGFyYW1zLmFwcGVuZChsaW1pdCkKCiAgICByZXR1cm4gY29uLmV4ZWN1dGUoc3FsLCBwYXJhbXMpLmZldGNoYWxsKCkKCgpkZWYgX2xhdGVzdF9ydW4oY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sIGluZ2VzdF9wb3N0X2lkOiBpbnQpIC0+IE9wdGlvbmFsW3NxbGl0ZTMuUm93XToKICAgIHJldHVybiBjb24uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QgKgogICAgICAgIEZST00gbHNzX3J1bnMKICAgICAgICBXSEVSRSBpbmdlc3RfcG9zdF9pZCA9ID8KICAgICAgICAgIEFORCBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICBPUkRFUiBCWSBjb21wbGV0ZWRfYXQgREVTQwogICAgICAgIExJTUlUIDEKICAgICAgICAiIiIsCiAgICAgICAgKGluZ2VzdF9wb3N0X2lkLCksCiAgICApLmZldGNob25lKCkKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEVWRU5UUyBDT01NQU5EICh1bmNoYW5nZWQgYmVoYXZpb3IpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpAYXBwLmNvbW1hbmQoImV2ZW50cyIpCmRlZiBsc3NfZXZlbnRzKAogICAgKiwKICAgIHBvc3RfaWQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBhbGlhczogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Ymxpc2hlcjogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Yl9kYXRlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgc291cmNlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgbGltaXQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCik6CiAgICAiIiJJbnNwZWN0IHJhdyBMU1Mgc3RydWN0dXJhbCBvdXRwdXRzIChldmVudHMsIHJvbGVzLCBjb250ZXh0cykuIiIiCgogICAgX3ZhbGlkYXRlX3NlbGVjdG9ycygKICAgICAgICBwb3N0X2lkPXBvc3RfaWQsCiAgICAgICAgYWxpYXM9YWxpYXMsCiAgICAgICAgcHVibGlzaGVyPXB1Ymxpc2hlciwKICAgICAgICBwdWJfZGF0ZT1wdWJfZGF0ZSwKICAgICAgICBzb3VyY2U9c291cmNlLAogICAgKQoKICAgIHdpdGggX2Nvbm4oKSBhcyBjb246CiAgICAgICAgcG9zdHMgPSBfc2VsZWN0X2luZ2VzdF9wb3N0cygKICAgICAgICAgICAgY29uPWNvbiwKICAgICAgICAgICAgcG9zdF9pZD1wb3N0X2lkLAogICAgICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICAgICAgcHVibGlzaGVyPXB1Ymxpc2hlciwKICAgICAgICAgICAgcHViX2RhdGU9cHViX2RhdGUsCiAgICAgICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICAgICAgICAgIGxpbWl0PWxpbWl0LAogICAgICAgICkKCiAgICAgICAgaWYgbm90IHBvc3RzOgogICAgICAgICAgICBwcmludCgiW3llbGxvd11ObyBtYXRjaGluZyBpbmdlc3QgcG9zdHMgZm91bmQuWy95ZWxsb3ddIikKICAgICAgICAgICAgcmFpc2UgdHlwZXIuRXhpdCgpCgogICAgICAgIHByaW50KGYiW2dyZWVuXUZvdW5kIHtsZW4ocG9zdHMpfSBpbmdlc3QgcG9zdChzKVsvZ3JlZW5dIikKCiAgICAgICAgZm9yIHBvc3QgaW4gcG9zdHM6CiAgICAgICAgICAgIF9yZW5kZXJfcG9zdChjb24sIHBvc3QpCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBTVU1NQVJJWkUgQ09NTUFORCAobmV3KQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKQGFwcC5jb21tYW5kKCJzdW1tYXJpemUiKQpkZWYgbHNzX3N1bW1hcml6ZSgKICAgICosCiAgICBwb3N0X2lkOiBPcHRpb25hbFtpbnRdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgYWxpYXM6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBwdWJsaXNoZXI6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBwdWJfZGF0ZTogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHNvdXJjZTogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIGxpbWl0OiBPcHRpb25hbFtpbnRdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAopOgogICAgIiIiCiAgICBTdW1tYXJpemUgSG9sbWVzICsgZW50aXR5LXJ1bGVyIHNpZ25hbHM6CiAgICBhY3RvcnMsIGFjdGlvbnMsIGxvY2F0aW9ucywgYW5kIGNvbnRleHR1YWwgc3BhbnMuCiAgICAiIiIKCiAgICBfdmFsaWRhdGVfc2VsZWN0b3JzKAogICAgICAgIHBvc3RfaWQ9cG9zdF9pZCwKICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICBwdWJsaXNoZXI9cHVibGlzaGVyLAogICAgICAgIHB1Yl9kYXRlPXB1Yl9kYXRlLAogICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICApCgogICAgd2l0aCBfY29ubigpIGFzIGNvbjoKICAgICAgICBwb3N0cyA9IF9zZWxlY3RfaW5nZXN0X3Bvc3RzKAogICAgICAgICAgICBjb249Y29uLAogICAgICAgICAgICBwb3N0X2lkPXBvc3RfaWQsCiAgICAgICAgICAgIGFsaWFzPWFsaWFzLAogICAgICAgICAgICBwdWJsaXNoZXI9cHVibGlzaGVyLAogICAgICAgICAgICBwdWJfZGF0ZT1wdWJfZGF0ZSwKICAgICAgICAgICAgc291cmNlPXNvdXJjZSwKICAgICAgICAgICAgbGltaXQ9bGltaXQsCiAgICAgICAgKQoKICAgICAgICBpZiBub3QgcG9zdHM6CiAgICAgICAgICAgIHByaW50KCJbeWVsbG93XU5vIG1hdGNoaW5nIGluZ2VzdCBwb3N0cyBmb3VuZC5bL3llbGxvd10iKQogICAgICAgICAgICByYWlzZSB0eXBlci5FeGl0KCkKCiAgICAgICAgZm9yIHBvc3QgaW4gcG9zdHM6CiAgICAgICAgICAgIHJ1biA9IF9sYXRlc3RfcnVuKGNvbiwgcG9zdFsiaWQiXSkKICAgICAgICAgICAgaWYgbm90IHJ1bjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBFdmVudHMKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIGV2ZW50cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgIlNFTEVDVCBpZCBGUk9NIGxzc19ldmVudHMgV0hFUkUgbHNzX3J1bl9pZCA9ID8iLAogICAgICAgICAgICAgICAgKHJ1blsiaWQiXSwpLAogICAgICAgICAgICApLmZldGNoYWxsKCkKCiAgICAgICAgICAgIGV2ZW50X2lkcyA9IFtlWyJpZCJdIGZvciBlIGluIGV2ZW50c10KICAgICAgICAgICAgaWYgbm90IGV2ZW50X2lkczoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBIb2xtZXMgcm9sZXMgKGNvbGxhcHNlZCkKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIHJvbGVzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICBmIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1Qgcm9sZV9raW5kLCBkb2N1bWVudF93b3JkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19yb2xlX2NhbmRpZGF0ZXMKICAgICAgICAgICAgICAgIFdIRVJFIGxzc19ldmVudF9pZCBJTiAoeyIsIi5qb2luKCI/IiAqIGxlbihldmVudF9pZHMpKX0pCiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICBldmVudF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICAgICAgYWN0b3JzID0gc2V0KCkKICAgICAgICAgICAgYWN0aW9ucyA9IHNldCgpCiAgICAgICAgICAgIGxvY2F0aW9ucyA9IHNldCgpCgogICAgICAgICAgICBmb3IgciBpbiByb2xlczoKICAgICAgICAgICAgICAgIGtpbmQgPSAoclsicm9sZV9raW5kIl0gb3IgIiIpLmxvd2VyKCkKICAgICAgICAgICAgICAgIHdvcmQgPSByWyJkb2N1bWVudF93b3JkIl0KCiAgICAgICAgICAgICAgICBpZiBraW5kIGluIHsic3ViamVjdCIsICJvYmplY3QiLCAicG9zc2Vzc29yIn06CiAgICAgICAgICAgICAgICAgICAgYWN0b3JzLmFkZCh3b3JkKQoKICAgICAgICAgICAgICAgIGVsaWYga2luZCBpbiB7InZlcmIifToKICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLmFkZCh3b3JkKQoKICAgICAgICAgICAgICAgIGVsaWYga2luZCBpbiB7InByZXBfb2JqZWN0In06CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zLmFkZCh3b3JkKQoKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIENvbnRleHQgc3BhbnMgKHJ1bGVyIG91dHB1dCkKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIGNvbnRleHRzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIFNFTEVDVCBjdHhfa2luZCwgdGV4dAogICAgICAgICAgICAgICAgRlJPTSBsc3NfY29udGV4dF9zcGFucwogICAgICAgICAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIChydW5bImlkIl0sKSwKICAgICAgICAgICAgKS5mZXRjaGFsbCgpCgogICAgICAgICAgICBjdHhfbWFwOiBEaWN0W3N0ciwgU2V0W3N0cl1dID0ge30KICAgICAgICAgICAgZm9yIGMgaW4gY29udGV4dHM6CiAgICAgICAgICAgICAgICBjdHhfbWFwLnNldGRlZmF1bHQoY1siY3R4X2tpbmQiXSwgc2V0KCkpLmFkZChjWyJ0ZXh0Il0pCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBPdXRwdXQKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICBmIltib2xkIGN5YW5dUG9zdCB7cG9zdFsnaWQnXX1bL2JvbGQgY3lhbl0gIgogICAgICAgICAgICAgICAgZiJ7cG9zdFsncHVibGlzaGVkX2F0J119IHwge3Bvc3RbJ2FsaWFzJ119IHwge3Bvc3RbJ3B1Ymxpc2hlciddfSIKICAgICAgICAgICAgKQogICAgICAgICAgICBwcmludChmIiAgRXZlbnRzOiB7bGVuKGV2ZW50cyl9IikKCiAgICAgICAgICAgIGlmIGFjdG9yczoKICAgICAgICAgICAgICAgIHByaW50KGYiICBBY3RvcnM6IHsnLCAnLmpvaW4oc29ydGVkKGFjdG9ycykpfSIpCiAgICAgICAgICAgIGlmIGFjdGlvbnM6CiAgICAgICAgICAgICAgICBwcmludChmIiAgQWN0aW9uczogeycsICcuam9pbihzb3J0ZWQoYWN0aW9ucykpfSIpCiAgICAgICAgICAgIGlmIGxvY2F0aW9uczoKICAgICAgICAgICAgICAgIHByaW50KGYiICBMb2NhdGlvbnM6IHsnLCAnLmpvaW4oc29ydGVkKGxvY2F0aW9ucykpfSIpCgogICAgICAgICAgICBmb3Iga2luZCBpbiAoIkdST1VQIiwgIkRJUkVDVElPTiIsICJSRUdJT04iLCAiTE9DQVRJT04iKToKICAgICAgICAgICAgICAgIHZhbHVlcyA9IGN0eF9tYXAuZ2V0KGtpbmQpCiAgICAgICAgICAgICAgICBpZiB2YWx1ZXM6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiIgIHtraW5kfTogeycsICcuam9pbihzb3J0ZWQodmFsdWVzKSl9IikKCgpAYXBwLmNvbW1hbmQoInN0YXR1cyIpCmRlZiBsc3Nfc3RhdHVzKAogICAgKiwKICAgIHBvc3RfaWQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBhbGlhczogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Ymxpc2hlcjogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Yl9kYXRlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgc291cmNlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgbGltaXQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCik6CiAgICAiIiIKICAgIFNob3cgTFNTIGV4dHJhY3Rpb24gc3RhdHVzIGZvciBpbmdlc3QgcG9zdHM6CiAgICBGRVRDSEVEIC8gUEVORElORyAvIEVYVFJBQ1RFRAoKICAgIFdpdGggbm8gZmlsdGVycywgc2hvd3MgQUxMIGluZ2VzdCBwb3N0cy4KICAgICIiIgoKICAgIHdpdGggX2Nvbm4oKSBhcyBjb246CiAgICAgICAgIyBOT1RFOiB1bmxpa2Ugb3RoZXIgY29tbWFuZHMsIHN0YXR1cyBhbGxvd3MgTk8gc2VsZWN0b3JzCiAgICAgICAgcG9zdHMgPSBfc2VsZWN0X2luZ2VzdF9wb3N0cygKICAgICAgICAgICAgY29uPWNvbiwKICAgICAgICAgICAgcG9zdF9pZD1wb3N0X2lkLAogICAgICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICAgICAgcHVibGlzaGVyPXB1Ymxpc2hlciwKICAgICAgICAgICAgcHViX2RhdGU9cHViX2RhdGUsCiAgICAgICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICAgICAgICAgIGxpbWl0PWxpbWl0LAogICAgICAgICkKCiAgICAgICAgaWYgbm90IHBvc3RzOgogICAgICAgICAgICBwcmludCgiW3llbGxvd11ObyBpbmdlc3QgcG9zdHMgZm91bmQuWy95ZWxsb3ddIikKICAgICAgICAgICAgcmFpc2UgdHlwZXIuRXhpdCgpCgogICAgICAgIHRhYmxlID0gVGFibGUodGl0bGU9IkxTUyBFeHRyYWN0aW9uIFN0YXR1cyIsIHNob3dfbGluZXM9VHJ1ZSkKICAgICAgICB0YWJsZS5hZGRfY29sdW1uKCJQb3N0IElEIiwgc3R5bGU9ImN5YW4iLCB3aWR0aD04KQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIlB1Ymxpc2hlZCIsIHN0eWxlPSJkaW0iKQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIkFsaWFzIiwgc3R5bGU9ImdyZWVuIikKICAgICAgICB0YWJsZS5hZGRfY29sdW1uKCJQdWJsaXNoZXIiKQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIlNvdXJjZSIpCiAgICAgICAgdGFibGUuYWRkX2NvbHVtbigiU3RhdHVzIiwgc3R5bGU9ImJvbGQiKQoKICAgICAgICBmb3IgcG9zdCBpbiBwb3N0czoKICAgICAgICAgICAgcGlkID0gcG9zdFsiaWQiXQoKICAgICAgICAgICAgY29tcGxldGVkID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIFNFTEVDVCAxCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBpbmdlc3RfcG9zdF9pZCA9ID8KICAgICAgICAgICAgICAgICAgQU5EIGNvbXBsZXRlZF9hdCBJUyBOT1QgTlVMTAogICAgICAgICAgICAgICAgTElNSVQgMQogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKHBpZCwpLAogICAgICAgICAgICApLmZldGNob25lKCkKCiAgICAgICAgICAgIGlmIGNvbXBsZXRlZDoKICAgICAgICAgICAgICAgIHN0YXR1cyA9ICJbZ3JlZW5dRVhUUkFDVEVEWy9ncmVlbl0iCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwZW5kaW5nID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICAgICAgU0VMRUNUIDEKICAgICAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgaW5nZXN0X3Bvc3RfaWQgPSA/CiAgICAgICAgICAgICAgICAgICAgICBBTkQgY29tcGxldGVkX2F0IElTIE5VTEwKICAgICAgICAgICAgICAgICAgICBMSU1JVCAxCiAgICAgICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgICAgIChwaWQsKSwKICAgICAgICAgICAgICAgICkuZmV0Y2hvbmUoKQoKICAgICAgICAgICAgICAgIGlmIHBlbmRpbmc6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gIlt5ZWxsb3ddUEVORElOR1sveWVsbG93XSIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gIltkaW1dRkVUQ0hFRFsvZGltXSIKCiAgICAgICAgICAgIHRhYmxlLmFkZF9yb3coCiAgICAgICAgICAgICAgICBzdHIocGlkKSwKICAgICAgICAgICAgICAgIHBvc3RbInB1Ymxpc2hlZF9hdCJdLAogICAgICAgICAgICAgICAgcG9zdFsiYWxpYXMiXSwKICAgICAgICAgICAgICAgIHBvc3RbInB1Ymxpc2hlciJdLAogICAgICAgICAgICAgICAgcG9zdFsic291cmNlIl0sCiAgICAgICAgICAgICAgICBzdGF0dXMsCiAgICAgICAgICAgICkKCiAgICAgICAgcHJpbnQodGFibGUpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJlbmRlcmluZyBoZWxwZXJzIChldmVudHMpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX3JlbmRlcl9wb3N0KGNvbjogc3FsaXRlMy5Db25uZWN0aW9uLCBwb3N0OiBzcWxpdGUzLlJvdykgLT4gTm9uZToKICAgIHByaW50KCkKICAgIHByaW50KAogICAgICAgIGYiW2JvbGQgY3lhbl1Qb3N0IHtwb3N0WydpZCddfVsvYm9sZCBjeWFuXSAiCiAgICAgICAgZiJ7cG9zdFsncHVibGlzaGVkX2F0J119IHwge3Bvc3RbJ2FsaWFzJ119IHwge3Bvc3RbJ3B1Ymxpc2hlciddfSIKICAgICkKCiAgICBydW4gPSBfbGF0ZXN0X3J1bihjb24sIHBvc3RbImlkIl0pCiAgICBpZiBub3QgcnVuOgogICAgICAgIHByaW50KCJbeWVsbG93XSAgTm8gY29tcGxldGVkIExTUyBydW4uWy95ZWxsb3ddIikKICAgICAgICByZXR1cm4KCiAgICBwcmludCgKICAgICAgICBmIiAgW2dyZWVuXUxTUyBydW4ge3J1blsnaWQnXX1bL2dyZWVuXSAiCiAgICAgICAgZiIoe3J1blsnZW5naW5lJ119IHtydW5bJ2VuZ2luZV92ZXJzaW9uJ119KSIKICAgICkKCiAgICBfcmVuZGVyX2V2ZW50cyhjb24sIHJ1blsiaWQiXSkKICAgIF9yZW5kZXJfY29udGV4dHMoY29uLCBydW5bImlkIl0pCgoKZGVmIF9yZW5kZXJfZXZlbnRzKGNvbjogc3FsaXRlMy5Db25uZWN0aW9uLCBydW5faWQ6IGludCkgLT4gTm9uZToKICAgIGV2ZW50cyA9IGNvbi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCAqCiAgICAgICAgRlJPTSBsc3NfZXZlbnRzCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBvcmRpbmFsIEFTQwogICAgICAgICIiIiwKICAgICAgICAocnVuX2lkLCksCiAgICApLmZldGNoYWxsKCkKCiAgICBpZiBub3QgZXZlbnRzOgogICAgICAgIHByaW50KCIgIFt5ZWxsb3ddTm8gZXZlbnRzIGV4dHJhY3RlZC5bL3llbGxvd10iKQogICAgICAgIHJldHVybgoKICAgIHRhYmxlID0gVGFibGUodGl0bGU9IkV2ZW50cyIsIHNob3dfbGluZXM9VHJ1ZSkKICAgIHRhYmxlLmFkZF9jb2x1bW4oIklEIiwgc3R5bGU9ImN5YW4iLCB3aWR0aD02KQogICAgdGFibGUuYWRkX2NvbHVtbigiTGFiZWwiLCBzdHlsZT0iZ3JlZW4iKQogICAgdGFibGUuYWRkX2NvbHVtbigiTmVnIiwgd2lkdGg9MykKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlVuYyIsIHdpZHRoPTMpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJUZXh0IikKCiAgICBmb3IgZXYgaW4gZXZlbnRzOgogICAgICAgIHRhYmxlLmFkZF9yb3coCiAgICAgICAgICAgIHN0cihldlsiaWQiXSksCiAgICAgICAgICAgIGV2WyJsYWJlbCJdLAogICAgICAgICAgICAiWSIgaWYgZXZbIm5lZ2F0ZWQiXSBlbHNlICIiLAogICAgICAgICAgICAiWSIgaWYgZXZbInVuY2VydGFpbiJdIGVsc2UgIiIsCiAgICAgICAgICAgIGV2WyJ0ZXh0Il1bOjEyMF0gKyAoIuKApiIgaWYgbGVuKGV2WyJ0ZXh0Il0pID4gMTIwIGVsc2UgIiIpLAogICAgICAgICkKCiAgICBwcmludCh0YWJsZSkKCiAgICBmb3IgZXYgaW4gZXZlbnRzOgogICAgICAgIF9yZW5kZXJfcm9sZXMoY29uLCBldlsiaWQiXSkKCgpkZWYgX3JlbmRlcl9yb2xlcyhjb246IHNxbGl0ZTMuQ29ubmVjdGlvbiwgZXZlbnRfaWQ6IGludCkgLT4gTm9uZToKICAgIHJvbGVzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUICoKICAgICAgICBGUk9NIGxzc19yb2xlX2NhbmRpZGF0ZXMKICAgICAgICBXSEVSRSBsc3NfZXZlbnRfaWQgPSA/CiAgICAgICAgT1JERVIgQlkgcm9sZV9raW5kIEFTQwogICAgICAgICIiIiwKICAgICAgICAoZXZlbnRfaWQsKSwKICAgICkuZmV0Y2hhbGwoKQoKICAgIGlmIG5vdCByb2xlczoKICAgICAgICByZXR1cm4KCiAgICB0YWJsZSA9IFRhYmxlKHRpdGxlPWYiUm9sZXMgZm9yIGV2ZW50IHtldmVudF9pZH0iLCBzaG93X2xpbmVzPUZhbHNlKQogICAgdGFibGUuYWRkX2NvbHVtbigiS2luZCIsIHN0eWxlPSJjeWFuIikKICAgIHRhYmxlLmFkZF9jb2x1bW4oIldvcmQiLCBzdHlsZT0iZ3JlZW4iKQogICAgdGFibGUuYWRkX2NvbHVtbigiTmVnIikKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlVuYyIpCgogICAgZm9yIHIgaW4gcm9sZXM6CiAgICAgICAgdGFibGUuYWRkX3JvdygKICAgICAgICAgICAgclsicm9sZV9raW5kIl0sCiAgICAgICAgICAgIHJbImRvY3VtZW50X3dvcmQiXSwKICAgICAgICAgICAgIlkiIGlmIHJbIm5lZ2F0ZWQiXSBlbHNlICIiLAogICAgICAgICAgICAiWSIgaWYgclsidW5jZXJ0YWluIl0gZWxzZSAiIiwKICAgICAgICApCgogICAgcHJpbnQodGFibGUpCgoKZGVmIF9yZW5kZXJfY29udGV4dHMoY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sIHJ1bl9pZDogaW50KSAtPiBOb25lOgogICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCAqCiAgICAgICAgRlJPTSBsc3NfY29udGV4dF9zcGFucwogICAgICAgIFdIRVJFIGxzc19ydW5faWQgPSA/CiAgICAgICAgT1JERVIgQlkgY3R4X2tpbmQgQVNDCiAgICAgICAgIiIiLAogICAgICAgIChydW5faWQsKSwKICAgICkuZmV0Y2hhbGwoKQoKICAgIGlmIG5vdCByb3dzOgogICAgICAgIHJldHVybgoKICAgIHRhYmxlID0gVGFibGUodGl0bGU9IkNvbnRleHQgc3BhbnMiLCBzaG93X2xpbmVzPUZhbHNlKQogICAgdGFibGUuYWRkX2NvbHVtbigiS2luZCIsIHN0eWxlPSJjeWFuIikKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlRleHQiKQoKICAgIGZvciByIGluIHJvd3M6CiAgICAgICAgdGFibGUuYWRkX3JvdyhyWyJjdHhfa2luZCJdLCByWyJ0ZXh0Il0pCgogICAgcHJpbnQodGFibGUpCgAAAAAAAAAAujUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAALAoAAAAAAAAsCgAAAAAAAAAAAAAAAPC/"
				],
				[
					52,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC8NQAAIyBzcmMvc2l0cmVwYzIvY2xpL2xzc19jbWQucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZQpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIExpc3QsIERpY3QsIFNldAoKaW1wb3J0IHR5cGVyCmZyb20gcmljaCBpbXBvcnQgcHJpbnQKZnJvbSByaWNoLnRhYmxlIGltcG9ydCBUYWJsZQoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKCmFwcCA9IHR5cGVyLlR5cGVyKGhlbHA9IlF1ZXJ5IExTUy1sYXllciBvdXRwdXRzIChyZWFkLW9ubHkpLiIpCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIZWxwZXJzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX2Nvbm4oKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246CiAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3QocmVjb3Jkc19kYl9wYXRoKCkpCiAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgY29uLmV4ZWN1dGUoIlBSQUdNQSBmb3JlaWduX2tleXMgPSBPTjsiKQogICAgcmV0dXJuIGNvbgoKCmRlZiBfcGFyc2VfZGF0ZV9pc28odmFsdWU6IHN0cikgLT4gdHVwbGVbc3RyLCBzdHJdOgogICAgdHJ5OgogICAgICAgIGQgPSBkYXRlLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoIkRhdGUgbXVzdCBiZSBZWVlZLU1NLUREIikKCiAgICBzdGFydCA9IGYie2QuaXNvZm9ybWF0KCl9VDAwOjAwOjAwWiIKICAgIGVuZCA9IGYie2QuaXNvZm9ybWF0KCl9VDIzOjU5OjU5WiIKICAgIHJldHVybiBzdGFydCwgZW5kCgoKZGVmIF92YWxpZGF0ZV9zZWxlY3RvcnMoCiAgICAqLAogICAgcG9zdF9pZDogT3B0aW9uYWxbaW50XSwKICAgIGFsaWFzOiBPcHRpb25hbFtzdHJdLAogICAgcHVibGlzaGVyOiBPcHRpb25hbFtzdHJdLAogICAgcHViX2RhdGU6IE9wdGlvbmFsW3N0cl0sCiAgICBzb3VyY2U6IE9wdGlvbmFsW3N0cl0sCik6CiAgICBpZiBwb3N0X2lkIGlzIG5vdCBOb25lOgogICAgICAgIGlmIGFueShbYWxpYXMsIHB1Ymxpc2hlciwgcHViX2RhdGUsIHNvdXJjZV0pOgogICAgICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoCiAgICAgICAgICAgICAgICAiLS1wb3N0LWlkIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIG90aGVyIGZpbHRlcnMuIgogICAgICAgICAgICApCiAgICBlbHNlOgogICAgICAgIGlmIG5vdCBhbnkoW2FsaWFzLCBwdWJsaXNoZXIsIHB1Yl9kYXRlLCBzb3VyY2VdKToKICAgICAgICAgICAgcmFpc2UgdHlwZXIuQmFkUGFyYW1ldGVyKAogICAgICAgICAgICAgICAgIkF0IGxlYXN0IG9uZSBvZiAtLXB1Yi1kYXRlLCAtLWFsaWFzLCAtLXB1Ymxpc2hlciwgb3IgLS1zb3VyY2UgbXVzdCBiZSBwcm92aWRlZC4iCiAgICAgICAgICAgICkKCgpkZWYgX3NlbGVjdF9pbmdlc3RfcG9zdHMoCiAgICAqLAogICAgY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sCiAgICBwb3N0X2lkOiBPcHRpb25hbFtpbnRdLAogICAgYWxpYXM6IE9wdGlvbmFsW3N0cl0sCiAgICBwdWJsaXNoZXI6IE9wdGlvbmFsW3N0cl0sCiAgICBwdWJfZGF0ZTogT3B0aW9uYWxbc3RyXSwKICAgIHNvdXJjZTogT3B0aW9uYWxbc3RyXSwKICAgIGxpbWl0OiBPcHRpb25hbFtpbnRdLAopIC0+IExpc3Rbc3FsaXRlMy5Sb3ddOgoKICAgIGNsYXVzZXM6IExpc3Rbc3RyXSA9IFtdCiAgICBwYXJhbXM6IExpc3Rbb2JqZWN0XSA9IFtdCgogICAgaWYgcG9zdF9pZCBpcyBub3QgTm9uZToKICAgICAgICBjbGF1c2VzLmFwcGVuZCgiaWQgPSA/IikKICAgICAgICBwYXJhbXMuYXBwZW5kKHBvc3RfaWQpCgogICAgaWYgYWxpYXMgaXMgbm90IE5vbmU6CiAgICAgICAgY2xhdXNlcy5hcHBlbmQoImFsaWFzID0gPyIpCiAgICAgICAgcGFyYW1zLmFwcGVuZChhbGlhcykKCiAgICBpZiBwdWJsaXNoZXIgaXMgbm90IE5vbmU6CiAgICAgICAgY2xhdXNlcy5hcHBlbmQoInB1Ymxpc2hlciA9ID8iKQogICAgICAgIHBhcmFtcy5hcHBlbmQocHVibGlzaGVyKQoKICAgIGlmIHNvdXJjZSBpcyBub3QgTm9uZToKICAgICAgICBjbGF1c2VzLmFwcGVuZCgic291cmNlID0gPyIpCiAgICAgICAgcGFyYW1zLmFwcGVuZChzb3VyY2UpCgogICAgaWYgcHViX2RhdGUgaXMgbm90IE5vbmU6CiAgICAgICAgc3RhcnQsIGVuZCA9IF9wYXJzZV9kYXRlX2lzbyhwdWJfZGF0ZSkKICAgICAgICBjbGF1c2VzLmFwcGVuZCgicHVibGlzaGVkX2F0IEJFVFdFRU4gPyBBTkQgPyIpCiAgICAgICAgcGFyYW1zLmV4dGVuZChbc3RhcnQsIGVuZF0pCgogICAgd2hlcmVfc3FsID0gIiBBTkQgIi5qb2luKGNsYXVzZXMpCgogICAgc3FsID0gIiIiCiAgICAgICAgU0VMRUNUIGlkLCBwdWJsaXNoZWRfYXQsIGFsaWFzLCBwdWJsaXNoZXIsIHNvdXJjZQogICAgICAgIEZST00gaW5nZXN0X3Bvc3RzCiAgICAiIiIKCiAgICBpZiB3aGVyZV9zcWw6CiAgICAgICAgc3FsICs9IGYiIFdIRVJFIHt3aGVyZV9zcWx9IgoKICAgIHNxbCArPSAiIE9SREVSIEJZIHB1Ymxpc2hlZF9hdCBBU0MiCgoKICAgIGlmIGxpbWl0IGlzIG5vdCBOb25lOgogICAgICAgIHNxbCArPSAiIExJTUlUID8iCiAgICAgICAgcGFyYW1zLmFwcGVuZChsaW1pdCkKCiAgICByZXR1cm4gY29uLmV4ZWN1dGUoc3FsLCBwYXJhbXMpLmZldGNoYWxsKCkKCgpkZWYgX2xhdGVzdF9ydW4oY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sIGluZ2VzdF9wb3N0X2lkOiBpbnQpIC0+IE9wdGlvbmFsW3NxbGl0ZTMuUm93XToKICAgIHJldHVybiBjb24uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QgKgogICAgICAgIEZST00gbHNzX3J1bnMKICAgICAgICBXSEVSRSBpbmdlc3RfcG9zdF9pZCA9ID8KICAgICAgICAgIEFORCBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICBPUkRFUiBCWSBjb21wbGV0ZWRfYXQgREVTQwogICAgICAgIExJTUlUIDEKICAgICAgICAiIiIsCiAgICAgICAgKGluZ2VzdF9wb3N0X2lkLCksCiAgICApLmZldGNob25lKCkKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEVWRU5UUyBDT01NQU5EICh1bmNoYW5nZWQgYmVoYXZpb3IpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpAYXBwLmNvbW1hbmQoImV2ZW50cyIpCmRlZiBsc3NfZXZlbnRzKAogICAgKiwKICAgIHBvc3RfaWQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBhbGlhczogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Ymxpc2hlcjogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Yl9kYXRlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgc291cmNlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgbGltaXQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCik6CiAgICAiIiJJbnNwZWN0IHJhdyBMU1Mgc3RydWN0dXJhbCBvdXRwdXRzIChldmVudHMsIHJvbGVzLCBjb250ZXh0cykuIiIiCgogICAgX3ZhbGlkYXRlX3NlbGVjdG9ycygKICAgICAgICBwb3N0X2lkPXBvc3RfaWQsCiAgICAgICAgYWxpYXM9YWxpYXMsCiAgICAgICAgcHVibGlzaGVyPXB1Ymxpc2hlciwKICAgICAgICBwdWJfZGF0ZT1wdWJfZGF0ZSwKICAgICAgICBzb3VyY2U9c291cmNlLAogICAgKQoKICAgIHdpdGggX2Nvbm4oKSBhcyBjb246CiAgICAgICAgcG9zdHMgPSBfc2VsZWN0X2luZ2VzdF9wb3N0cygKICAgICAgICAgICAgY29uPWNvbiwKICAgICAgICAgICAgcG9zdF9pZD1wb3N0X2lkLAogICAgICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICAgICAgcHVibGlzaGVyPXB1Ymxpc2hlciwKICAgICAgICAgICAgcHViX2RhdGU9cHViX2RhdGUsCiAgICAgICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICAgICAgICAgIGxpbWl0PWxpbWl0LAogICAgICAgICkKCiAgICAgICAgaWYgbm90IHBvc3RzOgogICAgICAgICAgICBwcmludCgiW3llbGxvd11ObyBtYXRjaGluZyBpbmdlc3QgcG9zdHMgZm91bmQuWy95ZWxsb3ddIikKICAgICAgICAgICAgcmFpc2UgdHlwZXIuRXhpdCgpCgogICAgICAgIHByaW50KGYiW2dyZWVuXUZvdW5kIHtsZW4ocG9zdHMpfSBpbmdlc3QgcG9zdChzKVsvZ3JlZW5dIikKCiAgICAgICAgZm9yIHBvc3QgaW4gcG9zdHM6CiAgICAgICAgICAgIF9yZW5kZXJfcG9zdChjb24sIHBvc3QpCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBTVU1NQVJJWkUgQ09NTUFORCAobmV3KQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKQGFwcC5jb21tYW5kKCJzdW1tYXJpemUiKQpkZWYgbHNzX3N1bW1hcml6ZSgKICAgICosCiAgICBwb3N0X2lkOiBPcHRpb25hbFtpbnRdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgYWxpYXM6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBwdWJsaXNoZXI6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBwdWJfZGF0ZTogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHNvdXJjZTogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIGxpbWl0OiBPcHRpb25hbFtpbnRdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAopOgogICAgIiIiCiAgICBTdW1tYXJpemUgSG9sbWVzICsgZW50aXR5LXJ1bGVyIHNpZ25hbHM6CiAgICBhY3RvcnMsIGFjdGlvbnMsIGxvY2F0aW9ucywgYW5kIGNvbnRleHR1YWwgc3BhbnMuCiAgICAiIiIKCiAgICBfdmFsaWRhdGVfc2VsZWN0b3JzKAogICAgICAgIHBvc3RfaWQ9cG9zdF9pZCwKICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICBwdWJsaXNoZXI9cHVibGlzaGVyLAogICAgICAgIHB1Yl9kYXRlPXB1Yl9kYXRlLAogICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICApCgogICAgd2l0aCBfY29ubigpIGFzIGNvbjoKICAgICAgICBwb3N0cyA9IF9zZWxlY3RfaW5nZXN0X3Bvc3RzKAogICAgICAgICAgICBjb249Y29uLAogICAgICAgICAgICBwb3N0X2lkPXBvc3RfaWQsCiAgICAgICAgICAgIGFsaWFzPWFsaWFzLAogICAgICAgICAgICBwdWJsaXNoZXI9cHVibGlzaGVyLAogICAgICAgICAgICBwdWJfZGF0ZT1wdWJfZGF0ZSwKICAgICAgICAgICAgc291cmNlPXNvdXJjZSwKICAgICAgICAgICAgbGltaXQ9bGltaXQsCiAgICAgICAgKQoKICAgICAgICBpZiBub3QgcG9zdHM6CiAgICAgICAgICAgIHByaW50KCJbeWVsbG93XU5vIG1hdGNoaW5nIGluZ2VzdCBwb3N0cyBmb3VuZC5bL3llbGxvd10iKQogICAgICAgICAgICByYWlzZSB0eXBlci5FeGl0KCkKCiAgICAgICAgZm9yIHBvc3QgaW4gcG9zdHM6CiAgICAgICAgICAgIHJ1biA9IF9sYXRlc3RfcnVuKGNvbiwgcG9zdFsiaWQiXSkKICAgICAgICAgICAgaWYgbm90IHJ1bjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBFdmVudHMKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIGV2ZW50cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgIlNFTEVDVCBpZCBGUk9NIGxzc19ldmVudHMgV0hFUkUgbHNzX3J1bl9pZCA9ID8iLAogICAgICAgICAgICAgICAgKHJ1blsiaWQiXSwpLAogICAgICAgICAgICApLmZldGNoYWxsKCkKCiAgICAgICAgICAgIGV2ZW50X2lkcyA9IFtlWyJpZCJdIGZvciBlIGluIGV2ZW50c10KICAgICAgICAgICAgaWYgbm90IGV2ZW50X2lkczoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBIb2xtZXMgcm9sZXMgKGNvbGxhcHNlZCkKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIHJvbGVzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICBmIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1Qgcm9sZV9raW5kLCBkb2N1bWVudF93b3JkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19yb2xlX2NhbmRpZGF0ZXMKICAgICAgICAgICAgICAgIFdIRVJFIGxzc19ldmVudF9pZCBJTiAoeyIsIi5qb2luKCI/IiAqIGxlbihldmVudF9pZHMpKX0pCiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICBldmVudF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICAgICAgYWN0b3JzID0gc2V0KCkKICAgICAgICAgICAgYWN0aW9ucyA9IHNldCgpCiAgICAgICAgICAgIGxvY2F0aW9ucyA9IHNldCgpCgogICAgICAgICAgICBmb3IgciBpbiByb2xlczoKICAgICAgICAgICAgICAgIGtpbmQgPSAoclsicm9sZV9raW5kIl0gb3IgIiIpLmxvd2VyKCkKICAgICAgICAgICAgICAgIHdvcmQgPSByWyJkb2N1bWVudF93b3JkIl0KCiAgICAgICAgICAgICAgICBpZiBraW5kIGluIHsic3ViamVjdCIsICJvYmplY3QiLCAicG9zc2Vzc29yIn06CiAgICAgICAgICAgICAgICAgICAgYWN0b3JzLmFkZCh3b3JkKQoKICAgICAgICAgICAgICAgIGVsaWYga2luZCBpbiB7InZlcmIifToKICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLmFkZCh3b3JkKQoKICAgICAgICAgICAgICAgIGVsaWYga2luZCBpbiB7InByZXBfb2JqZWN0In06CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zLmFkZCh3b3JkKQoKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIENvbnRleHQgc3BhbnMgKHJ1bGVyIG91dHB1dCkKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIGNvbnRleHRzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIFNFTEVDVCBjdHhfa2luZCwgdGV4dAogICAgICAgICAgICAgICAgRlJPTSBsc3NfY29udGV4dF9zcGFucwogICAgICAgICAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIChydW5bImlkIl0sKSwKICAgICAgICAgICAgKS5mZXRjaGFsbCgpCgogICAgICAgICAgICBjdHhfbWFwOiBEaWN0W3N0ciwgU2V0W3N0cl1dID0ge30KICAgICAgICAgICAgZm9yIGMgaW4gY29udGV4dHM6CiAgICAgICAgICAgICAgICBjdHhfbWFwLnNldGRlZmF1bHQoY1siY3R4X2tpbmQiXSwgc2V0KCkpLmFkZChjWyJ0ZXh0Il0pCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBPdXRwdXQKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICBmIltib2xkIGN5YW5dUG9zdCB7cG9zdFsnaWQnXX1bL2JvbGQgY3lhbl0gIgogICAgICAgICAgICAgICAgZiJ7cG9zdFsncHVibGlzaGVkX2F0J119IHwge3Bvc3RbJ2FsaWFzJ119IHwge3Bvc3RbJ3B1Ymxpc2hlciddfSIKICAgICAgICAgICAgKQogICAgICAgICAgICBwcmludChmIiAgRXZlbnRzOiB7bGVuKGV2ZW50cyl9IikKCiAgICAgICAgICAgIGlmIGFjdG9yczoKICAgICAgICAgICAgICAgIHByaW50KGYiICBBY3RvcnM6IHsnLCAnLmpvaW4oc29ydGVkKGFjdG9ycykpfSIpCiAgICAgICAgICAgIGlmIGFjdGlvbnM6CiAgICAgICAgICAgICAgICBwcmludChmIiAgQWN0aW9uczogeycsICcuam9pbihzb3J0ZWQoYWN0aW9ucykpfSIpCiAgICAgICAgICAgIGlmIGxvY2F0aW9uczoKICAgICAgICAgICAgICAgIHByaW50KGYiICBMb2NhdGlvbnM6IHsnLCAnLmpvaW4oc29ydGVkKGxvY2F0aW9ucykpfSIpCgogICAgICAgICAgICBmb3Iga2luZCBpbiAoIkdST1VQIiwgIkRJUkVDVElPTiIsICJSRUdJT04iLCAiTE9DQVRJT04iKToKICAgICAgICAgICAgICAgIHZhbHVlcyA9IGN0eF9tYXAuZ2V0KGtpbmQpCiAgICAgICAgICAgICAgICBpZiB2YWx1ZXM6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiIgIHtraW5kfTogeycsICcuam9pbihzb3J0ZWQodmFsdWVzKSl9IikKCgpAYXBwLmNvbW1hbmQoInN0YXR1cyIpCmRlZiBsc3Nfc3RhdHVzKAogICAgKiwKICAgIHBvc3RfaWQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBhbGlhczogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Ymxpc2hlcjogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Yl9kYXRlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgc291cmNlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgbGltaXQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCik6CiAgICAiIiIKICAgIFNob3cgTFNTIGV4dHJhY3Rpb24gc3RhdHVzIGZvciBpbmdlc3QgcG9zdHM6CiAgICBGRVRDSEVEIC8gUEVORElORyAvIEVYVFJBQ1RFRAoKICAgIFdpdGggbm8gZmlsdGVycywgc2hvd3MgQUxMIGluZ2VzdCBwb3N0cy4KICAgICIiIgoKICAgIHdpdGggX2Nvbm4oKSBhcyBjb246CiAgICAgICAgIyBOT1RFOiB1bmxpa2Ugb3RoZXIgY29tbWFuZHMsIHN0YXR1cyBhbGxvd3MgTk8gc2VsZWN0b3JzCiAgICAgICAgcG9zdHMgPSBfc2VsZWN0X2luZ2VzdF9wb3N0cygKICAgICAgICAgICAgY29uPWNvbiwKICAgICAgICAgICAgcG9zdF9pZD1wb3N0X2lkLAogICAgICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICAgICAgcHVibGlzaGVyPXB1Ymxpc2hlciwKICAgICAgICAgICAgcHViX2RhdGU9cHViX2RhdGUsCiAgICAgICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICAgICAgICAgIGxpbWl0PWxpbWl0LAogICAgICAgICkKCiAgICAgICAgaWYgbm90IHBvc3RzOgogICAgICAgICAgICBwcmludCgiW3llbGxvd11ObyBpbmdlc3QgcG9zdHMgZm91bmQuWy95ZWxsb3ddIikKICAgICAgICAgICAgcmFpc2UgdHlwZXIuRXhpdCgpCgogICAgICAgIHRhYmxlID0gVGFibGUodGl0bGU9IkxTUyBFeHRyYWN0aW9uIFN0YXR1cyIsIHNob3dfbGluZXM9VHJ1ZSkKICAgICAgICB0YWJsZS5hZGRfY29sdW1uKCJQb3N0IElEIiwgc3R5bGU9ImN5YW4iLCB3aWR0aD04KQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIlB1Ymxpc2hlZCIsIHN0eWxlPSJkaW0iKQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIkFsaWFzIiwgc3R5bGU9ImdyZWVuIikKICAgICAgICB0YWJsZS5hZGRfY29sdW1uKCJQdWJsaXNoZXIiKQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIlNvdXJjZSIpCiAgICAgICAgdGFibGUuYWRkX2NvbHVtbigiU3RhdHVzIiwgc3R5bGU9ImJvbGQiKQoKICAgICAgICBmb3IgcG9zdCBpbiBwb3N0czoKICAgICAgICAgICAgcGlkID0gcG9zdFsiaWQiXQoKICAgICAgICAgICAgY29tcGxldGVkID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIFNFTEVDVCAxCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBpbmdlc3RfcG9zdF9pZCA9ID8KICAgICAgICAgICAgICAgICAgQU5EIGNvbXBsZXRlZF9hdCBJUyBOT1QgTlVMTAogICAgICAgICAgICAgICAgTElNSVQgMQogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKHBpZCwpLAogICAgICAgICAgICApLmZldGNob25lKCkKCiAgICAgICAgICAgIGlmIGNvbXBsZXRlZDoKICAgICAgICAgICAgICAgIHN0YXR1cyA9ICJbZ3JlZW5dRVhUUkFDVEVEWy9ncmVlbl0iCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwZW5kaW5nID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICAgICAgU0VMRUNUIDEKICAgICAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgaW5nZXN0X3Bvc3RfaWQgPSA/CiAgICAgICAgICAgICAgICAgICAgICBBTkQgY29tcGxldGVkX2F0IElTIE5VTEwKICAgICAgICAgICAgICAgICAgICBMSU1JVCAxCiAgICAgICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgICAgIChwaWQsKSwKICAgICAgICAgICAgICAgICkuZmV0Y2hvbmUoKQoKICAgICAgICAgICAgICAgIGlmIHBlbmRpbmc6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gIlt5ZWxsb3ddUEVORElOR1sveWVsbG93XSIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gIltkaW1dRkVUQ0hFRFsvZGltXSIKCiAgICAgICAgICAgIHRhYmxlLmFkZF9yb3coCiAgICAgICAgICAgICAgICBzdHIocGlkKSwKICAgICAgICAgICAgICAgIHBvc3RbInB1Ymxpc2hlZF9hdCJdLAogICAgICAgICAgICAgICAgcG9zdFsiYWxpYXMiXSwKICAgICAgICAgICAgICAgIHBvc3RbInB1Ymxpc2hlciJdLAogICAgICAgICAgICAgICAgcG9zdFsic291cmNlIl0sCiAgICAgICAgICAgICAgICBzdGF0dXMsCiAgICAgICAgICAgICkKCiAgICAgICAgcHJpbnQodGFibGUpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJlbmRlcmluZyBoZWxwZXJzIChldmVudHMpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX3JlbmRlcl9wb3N0KGNvbjogc3FsaXRlMy5Db25uZWN0aW9uLCBwb3N0OiBzcWxpdGUzLlJvdykgLT4gTm9uZToKICAgIHByaW50KCkKICAgIHByaW50KAogICAgICAgIGYiW2JvbGQgY3lhbl1Qb3N0IHtwb3N0WydpZCddfVsvYm9sZCBjeWFuXSAiCiAgICAgICAgZiJ7cG9zdFsncHVibGlzaGVkX2F0J119IHwge3Bvc3RbJ2FsaWFzJ119IHwge3Bvc3RbJ3B1Ymxpc2hlciddfSIKICAgICkKCiAgICBydW4gPSBfbGF0ZXN0X3J1bihjb24sIHBvc3RbImlkIl0pCiAgICBpZiBub3QgcnVuOgogICAgICAgIHByaW50KCJbeWVsbG93XSAgTm8gY29tcGxldGVkIExTUyBydW4uWy95ZWxsb3ddIikKICAgICAgICByZXR1cm4KCiAgICBwcmludCgKICAgICAgICBmIiAgW2dyZWVuXUxTUyBydW4ge3J1blsnaWQnXX1bL2dyZWVuXSAiCiAgICAgICAgZiIoe3J1blsnZW5naW5lJ119IHtydW5bJ2VuZ2luZV92ZXJzaW9uJ119KSIKICAgICkKCiAgICBfcmVuZGVyX2V2ZW50cyhjb24sIHJ1blsiaWQiXSkKICAgIF9yZW5kZXJfY29udGV4dHMoY29uLCBydW5bImlkIl0pCgoKZGVmIF9yZW5kZXJfZXZlbnRzKGNvbjogc3FsaXRlMy5Db25uZWN0aW9uLCBydW5faWQ6IGludCkgLT4gTm9uZToKICAgIGV2ZW50cyA9IGNvbi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCAqCiAgICAgICAgRlJPTSBsc3NfZXZlbnRzCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBvcmRpbmFsIEFTQwogICAgICAgICIiIiwKICAgICAgICAocnVuX2lkLCksCiAgICApLmZldGNoYWxsKCkKCiAgICBpZiBub3QgZXZlbnRzOgogICAgICAgIHByaW50KCIgIFt5ZWxsb3ddTm8gZXZlbnRzIGV4dHJhY3RlZC5bL3llbGxvd10iKQogICAgICAgIHJldHVybgoKICAgIHRhYmxlID0gVGFibGUodGl0bGU9IkV2ZW50cyIsIHNob3dfbGluZXM9VHJ1ZSkKICAgIHRhYmxlLmFkZF9jb2x1bW4oIklEIiwgc3R5bGU9ImN5YW4iLCB3aWR0aD02KQogICAgdGFibGUuYWRkX2NvbHVtbigiTGFiZWwiLCBzdHlsZT0iZ3JlZW4iKQogICAgdGFibGUuYWRkX2NvbHVtbigiTmVnIiwgd2lkdGg9MykKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlVuYyIsIHdpZHRoPTMpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJUZXh0IikKCiAgICBmb3IgZXYgaW4gZXZlbnRzOgogICAgICAgIHRhYmxlLmFkZF9yb3coCiAgICAgICAgICAgIHN0cihldlsiaWQiXSksCiAgICAgICAgICAgIGV2WyJsYWJlbCJdLAogICAgICAgICAgICAiWSIgaWYgZXZbIm5lZ2F0ZWQiXSBlbHNlICIiLAogICAgICAgICAgICAiWSIgaWYgZXZbInVuY2VydGFpbiJdIGVsc2UgIiIsCiAgICAgICAgICAgIGV2WyJ0ZXh0Il1bOjEyMF0gKyAoIuKApiIgaWYgbGVuKGV2WyJ0ZXh0Il0pID4gMTIwIGVsc2UgIiIpLAogICAgICAgICkKCiAgICBwcmludCh0YWJsZSkKCiAgICBmb3IgZXYgaW4gZXZlbnRzOgogICAgICAgIF9yZW5kZXJfcm9sZXMoY29uLCBldlsiaWQiXSkKCgpkZWYgX3JlbmRlcl9yb2xlcyhjb246IHNxbGl0ZTMuQ29ubmVjdGlvbiwgZXZlbnRfaWQ6IGludCkgLT4gTm9uZToKICAgIHJvbGVzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUICoKICAgICAgICBGUk9NIGxzc19yb2xlX2NhbmRpZGF0ZXMKICAgICAgICBXSEVSRSBsc3NfZXZlbnRfaWQgPSA/CiAgICAgICAgT1JERVIgQlkgcm9sZV9raW5kIEFTQwogICAgICAgICIiIiwKICAgICAgICAoZXZlbnRfaWQsKSwKICAgICkuZmV0Y2hhbGwoKQoKICAgIGlmIG5vdCByb2xlczoKICAgICAgICByZXR1cm4KCiAgICB0YWJsZSA9IFRhYmxlKHRpdGxlPWYiUm9sZXMgZm9yIGV2ZW50IHtldmVudF9pZH0iLCBzaG93X2xpbmVzPUZhbHNlKQogICAgdGFibGUuYWRkX2NvbHVtbigiS2luZCIsIHN0eWxlPSJjeWFuIikKICAgIHRhYmxlLmFkZF9jb2x1bW4oIldvcmQiLCBzdHlsZT0iZ3JlZW4iKQogICAgdGFibGUuYWRkX2NvbHVtbigiTmVnIikKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlVuYyIpCgogICAgZm9yIHIgaW4gcm9sZXM6CiAgICAgICAgdGFibGUuYWRkX3JvdygKICAgICAgICAgICAgclsicm9sZV9raW5kIl0sCiAgICAgICAgICAgIHJbImRvY3VtZW50X3dvcmQiXSwKICAgICAgICAgICAgIlkiIGlmIHJbIm5lZ2F0ZWQiXSBlbHNlICIiLAogICAgICAgICAgICAiWSIgaWYgclsidW5jZXJ0YWluIl0gZWxzZSAiIiwKICAgICAgICApCgogICAgcHJpbnQodGFibGUpCgoKZGVmIF9yZW5kZXJfY29udGV4dHMoY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sIHJ1bl9pZDogaW50KSAtPiBOb25lOgogICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCAqCiAgICAgICAgRlJPTSBsc3NfY29udGV4dF9zcGFucwogICAgICAgIFdIRVJFIGxzc19ydW5faWQgPSA/CiAgICAgICAgT1JERVIgQlkgY3R4X2tpbmQgQVNDCiAgICAgICAgIiIiLAogICAgICAgIChydW5faWQsKSwKICAgICkuZmV0Y2hhbGwoKQoKICAgIGlmIG5vdCByb3dzOgogICAgICAgIHJldHVybgoKICAgIHRhYmxlID0gVGFibGUodGl0bGU9IkNvbnRleHQgc3BhbnMiLCBzaG93X2xpbmVzPUZhbHNlKQogICAgdGFibGUuYWRkX2NvbHVtbigiS2luZCIsIHN0eWxlPSJjeWFuIikKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlRleHQiKQoKICAgIGZvciByIGluIHJvd3M6CiAgICAgICAgdGFibGUuYWRkX3JvdyhyWyJjdHhfa2luZCJdLCByWyJ0ZXh0Il0pCgogICAgcHJpbnQodGFibGUpCgAAAAAAAAAAujUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzQoAAAAAAADNCgAAAAAAAAAAAAAAAPC/"
				],
				[
					55,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAC8NQAAIyBzcmMvc2l0cmVwYzIvY2xpL2xzc19jbWQucHkKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHNxbGl0ZTMKZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZQpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwsIExpc3QsIERpY3QsIFNldAoKaW1wb3J0IHR5cGVyCmZyb20gcmljaCBpbXBvcnQgcHJpbnQKZnJvbSByaWNoLnRhYmxlIGltcG9ydCBUYWJsZQoKZnJvbSBzaXRyZXBjMi5jb25maWcucGF0aHMgaW1wb3J0IHJlY29yZHNfcGF0aCBhcyByZWNvcmRzX2RiX3BhdGgKCmFwcCA9IHR5cGVyLlR5cGVyKGhlbHA9IlF1ZXJ5IExTUy1sYXllciBvdXRwdXRzIChyZWFkLW9ubHkpLiIpCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBIZWxwZXJzCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX2Nvbm4oKSAtPiBzcWxpdGUzLkNvbm5lY3Rpb246CiAgICBjb24gPSBzcWxpdGUzLmNvbm5lY3QocmVjb3Jkc19kYl9wYXRoKCkpCiAgICBjb24ucm93X2ZhY3RvcnkgPSBzcWxpdGUzLlJvdwogICAgY29uLmV4ZWN1dGUoIlBSQUdNQSBmb3JlaWduX2tleXMgPSBPTjsiKQogICAgcmV0dXJuIGNvbgoKCmRlZiBfcGFyc2VfZGF0ZV9pc28odmFsdWU6IHN0cikgLT4gdHVwbGVbc3RyLCBzdHJdOgogICAgdHJ5OgogICAgICAgIGQgPSBkYXRlLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoIkRhdGUgbXVzdCBiZSBZWVlZLU1NLUREIikKCiAgICBzdGFydCA9IGYie2QuaXNvZm9ybWF0KCl9VDAwOjAwOjAwWiIKICAgIGVuZCA9IGYie2QuaXNvZm9ybWF0KCl9VDIzOjU5OjU5WiIKICAgIHJldHVybiBzdGFydCwgZW5kCgoKZGVmIF92YWxpZGF0ZV9zZWxlY3RvcnMoCiAgICAqLAogICAgcG9zdF9pZDogT3B0aW9uYWxbaW50XSwKICAgIGFsaWFzOiBPcHRpb25hbFtzdHJdLAogICAgcHVibGlzaGVyOiBPcHRpb25hbFtzdHJdLAogICAgcHViX2RhdGU6IE9wdGlvbmFsW3N0cl0sCiAgICBzb3VyY2U6IE9wdGlvbmFsW3N0cl0sCik6CiAgICBpZiBwb3N0X2lkIGlzIG5vdCBOb25lOgogICAgICAgIGlmIGFueShbYWxpYXMsIHB1Ymxpc2hlciwgcHViX2RhdGUsIHNvdXJjZV0pOgogICAgICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoCiAgICAgICAgICAgICAgICAiLS1wb3N0LWlkIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIG90aGVyIGZpbHRlcnMuIgogICAgICAgICAgICApCiAgICBlbHNlOgogICAgICAgIGlmIG5vdCBhbnkoW2FsaWFzLCBwdWJsaXNoZXIsIHB1Yl9kYXRlLCBzb3VyY2VdKToKICAgICAgICAgICAgcmFpc2UgdHlwZXIuQmFkUGFyYW1ldGVyKAogICAgICAgICAgICAgICAgIkF0IGxlYXN0IG9uZSBvZiAtLXB1Yi1kYXRlLCAtLWFsaWFzLCAtLXB1Ymxpc2hlciwgb3IgLS1zb3VyY2UgbXVzdCBiZSBwcm92aWRlZC4iCiAgICAgICAgICAgICkKCgpkZWYgX3NlbGVjdF9pbmdlc3RfcG9zdHMoCiAgICAqLAogICAgY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sCiAgICBwb3N0X2lkOiBPcHRpb25hbFtpbnRdLAogICAgYWxpYXM6IE9wdGlvbmFsW3N0cl0sCiAgICBwdWJsaXNoZXI6IE9wdGlvbmFsW3N0cl0sCiAgICBwdWJfZGF0ZTogT3B0aW9uYWxbc3RyXSwKICAgIHNvdXJjZTogT3B0aW9uYWxbc3RyXSwKICAgIGxpbWl0OiBPcHRpb25hbFtpbnRdLAopIC0+IExpc3Rbc3FsaXRlMy5Sb3ddOgoKICAgIGNsYXVzZXM6IExpc3Rbc3RyXSA9IFtdCiAgICBwYXJhbXM6IExpc3Rbb2JqZWN0XSA9IFtdCgogICAgaWYgcG9zdF9pZCBpcyBub3QgTm9uZToKICAgICAgICBjbGF1c2VzLmFwcGVuZCgiaWQgPSA/IikKICAgICAgICBwYXJhbXMuYXBwZW5kKHBvc3RfaWQpCgogICAgaWYgYWxpYXMgaXMgbm90IE5vbmU6CiAgICAgICAgY2xhdXNlcy5hcHBlbmQoImFsaWFzID0gPyIpCiAgICAgICAgcGFyYW1zLmFwcGVuZChhbGlhcykKCiAgICBpZiBwdWJsaXNoZXIgaXMgbm90IE5vbmU6CiAgICAgICAgY2xhdXNlcy5hcHBlbmQoInB1Ymxpc2hlciA9ID8iKQogICAgICAgIHBhcmFtcy5hcHBlbmQocHVibGlzaGVyKQoKICAgIGlmIHNvdXJjZSBpcyBub3QgTm9uZToKICAgICAgICBjbGF1c2VzLmFwcGVuZCgic291cmNlID0gPyIpCiAgICAgICAgcGFyYW1zLmFwcGVuZChzb3VyY2UpCgogICAgaWYgcHViX2RhdGUgaXMgbm90IE5vbmU6CiAgICAgICAgc3RhcnQsIGVuZCA9IF9wYXJzZV9kYXRlX2lzbyhwdWJfZGF0ZSkKICAgICAgICBjbGF1c2VzLmFwcGVuZCgicHVibGlzaGVkX2F0IEJFVFdFRU4gPyBBTkQgPyIpCiAgICAgICAgcGFyYW1zLmV4dGVuZChbc3RhcnQsIGVuZF0pCgogICAgd2hlcmVfc3FsID0gIiBBTkQgIi5qb2luKGNsYXVzZXMpCgogICAgc3FsID0gIiIiCiAgICAgICAgU0VMRUNUIGlkLCBwdWJsaXNoZWRfYXQsIGFsaWFzLCBwdWJsaXNoZXIsIHNvdXJjZQogICAgICAgIEZST00gaW5nZXN0X3Bvc3RzCiAgICAiIiIKCiAgICBpZiB3aGVyZV9zcWw6CiAgICAgICAgc3FsICs9IGYiIFdIRVJFIHt3aGVyZV9zcWx9IgoKICAgIHNxbCArPSAiIE9SREVSIEJZIHB1Ymxpc2hlZF9hdCBBU0MiCgoKICAgIGlmIGxpbWl0IGlzIG5vdCBOb25lOgogICAgICAgIHNxbCArPSAiIExJTUlUID8iCiAgICAgICAgcGFyYW1zLmFwcGVuZChsaW1pdCkKCiAgICByZXR1cm4gY29uLmV4ZWN1dGUoc3FsLCBwYXJhbXMpLmZldGNoYWxsKCkKCgpkZWYgX2xhdGVzdF9ydW4oY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sIGluZ2VzdF9wb3N0X2lkOiBpbnQpIC0+IE9wdGlvbmFsW3NxbGl0ZTMuUm93XToKICAgIHJldHVybiBjb24uZXhlY3V0ZSgKICAgICAgICAiIiIKICAgICAgICBTRUxFQ1QgKgogICAgICAgIEZST00gbHNzX3J1bnMKICAgICAgICBXSEVSRSBpbmdlc3RfcG9zdF9pZCA9ID8KICAgICAgICAgIEFORCBjb21wbGV0ZWRfYXQgSVMgTk9UIE5VTEwKICAgICAgICBPUkRFUiBCWSBjb21wbGV0ZWRfYXQgREVTQwogICAgICAgIExJTUlUIDEKICAgICAgICAiIiIsCiAgICAgICAgKGluZ2VzdF9wb3N0X2lkLCksCiAgICApLmZldGNob25lKCkKCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEVWRU5UUyBDT01NQU5EICh1bmNoYW5nZWQgYmVoYXZpb3IpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpAYXBwLmNvbW1hbmQoImV2ZW50cyIpCmRlZiBsc3NfZXZlbnRzKAogICAgKiwKICAgIHBvc3RfaWQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBhbGlhczogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Ymxpc2hlcjogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Yl9kYXRlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgc291cmNlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgbGltaXQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCik6CiAgICAiIiJJbnNwZWN0IHJhdyBMU1Mgc3RydWN0dXJhbCBvdXRwdXRzIChldmVudHMsIHJvbGVzLCBjb250ZXh0cykuIiIiCgogICAgX3ZhbGlkYXRlX3NlbGVjdG9ycygKICAgICAgICBwb3N0X2lkPXBvc3RfaWQsCiAgICAgICAgYWxpYXM9YWxpYXMsCiAgICAgICAgcHVibGlzaGVyPXB1Ymxpc2hlciwKICAgICAgICBwdWJfZGF0ZT1wdWJfZGF0ZSwKICAgICAgICBzb3VyY2U9c291cmNlLAogICAgKQoKICAgIHdpdGggX2Nvbm4oKSBhcyBjb246CiAgICAgICAgcG9zdHMgPSBfc2VsZWN0X2luZ2VzdF9wb3N0cygKICAgICAgICAgICAgY29uPWNvbiwKICAgICAgICAgICAgcG9zdF9pZD1wb3N0X2lkLAogICAgICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICAgICAgcHVibGlzaGVyPXB1Ymxpc2hlciwKICAgICAgICAgICAgcHViX2RhdGU9cHViX2RhdGUsCiAgICAgICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICAgICAgICAgIGxpbWl0PWxpbWl0LAogICAgICAgICkKCiAgICAgICAgaWYgbm90IHBvc3RzOgogICAgICAgICAgICBwcmludCgiW3llbGxvd11ObyBtYXRjaGluZyBpbmdlc3QgcG9zdHMgZm91bmQuWy95ZWxsb3ddIikKICAgICAgICAgICAgcmFpc2UgdHlwZXIuRXhpdCgpCgogICAgICAgIHByaW50KGYiW2dyZWVuXUZvdW5kIHtsZW4ocG9zdHMpfSBpbmdlc3QgcG9zdChzKVsvZ3JlZW5dIikKCiAgICAgICAgZm9yIHBvc3QgaW4gcG9zdHM6CiAgICAgICAgICAgIF9yZW5kZXJfcG9zdChjb24sIHBvc3QpCgoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBTVU1NQVJJWkUgQ09NTUFORCAobmV3KQojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKQGFwcC5jb21tYW5kKCJzdW1tYXJpemUiKQpkZWYgbHNzX3N1bW1hcml6ZSgKICAgICosCiAgICBwb3N0X2lkOiBPcHRpb25hbFtpbnRdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgYWxpYXM6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBwdWJsaXNoZXI6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBwdWJfZGF0ZTogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHNvdXJjZTogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIGxpbWl0OiBPcHRpb25hbFtpbnRdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAopOgogICAgIiIiCiAgICBTdW1tYXJpemUgSG9sbWVzICsgZW50aXR5LXJ1bGVyIHNpZ25hbHM6CiAgICBhY3RvcnMsIGFjdGlvbnMsIGxvY2F0aW9ucywgYW5kIGNvbnRleHR1YWwgc3BhbnMuCiAgICAiIiIKCiAgICBfdmFsaWRhdGVfc2VsZWN0b3JzKAogICAgICAgIHBvc3RfaWQ9cG9zdF9pZCwKICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICBwdWJsaXNoZXI9cHVibGlzaGVyLAogICAgICAgIHB1Yl9kYXRlPXB1Yl9kYXRlLAogICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICApCgogICAgd2l0aCBfY29ubigpIGFzIGNvbjoKICAgICAgICBwb3N0cyA9IF9zZWxlY3RfaW5nZXN0X3Bvc3RzKAogICAgICAgICAgICBjb249Y29uLAogICAgICAgICAgICBwb3N0X2lkPXBvc3RfaWQsCiAgICAgICAgICAgIGFsaWFzPWFsaWFzLAogICAgICAgICAgICBwdWJsaXNoZXI9cHVibGlzaGVyLAogICAgICAgICAgICBwdWJfZGF0ZT1wdWJfZGF0ZSwKICAgICAgICAgICAgc291cmNlPXNvdXJjZSwKICAgICAgICAgICAgbGltaXQ9bGltaXQsCiAgICAgICAgKQoKICAgICAgICBpZiBub3QgcG9zdHM6CiAgICAgICAgICAgIHByaW50KCJbeWVsbG93XU5vIG1hdGNoaW5nIGluZ2VzdCBwb3N0cyBmb3VuZC5bL3llbGxvd10iKQogICAgICAgICAgICByYWlzZSB0eXBlci5FeGl0KCkKCiAgICAgICAgZm9yIHBvc3QgaW4gcG9zdHM6CiAgICAgICAgICAgIHJ1biA9IF9sYXRlc3RfcnVuKGNvbiwgcG9zdFsiaWQiXSkKICAgICAgICAgICAgaWYgbm90IHJ1bjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBFdmVudHMKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIGV2ZW50cyA9IGNvbi5leGVjdXRlKAogICAgICAgICAgICAgICAgIlNFTEVDVCBpZCBGUk9NIGxzc19ldmVudHMgV0hFUkUgbHNzX3J1bl9pZCA9ID8iLAogICAgICAgICAgICAgICAgKHJ1blsiaWQiXSwpLAogICAgICAgICAgICApLmZldGNoYWxsKCkKCiAgICAgICAgICAgIGV2ZW50X2lkcyA9IFtlWyJpZCJdIGZvciBlIGluIGV2ZW50c10KICAgICAgICAgICAgaWYgbm90IGV2ZW50X2lkczoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBIb2xtZXMgcm9sZXMgKGNvbGxhcHNlZCkKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIHJvbGVzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICBmIiIiCiAgICAgICAgICAgICAgICBTRUxFQ1Qgcm9sZV9raW5kLCBkb2N1bWVudF93b3JkCiAgICAgICAgICAgICAgICBGUk9NIGxzc19yb2xlX2NhbmRpZGF0ZXMKICAgICAgICAgICAgICAgIFdIRVJFIGxzc19ldmVudF9pZCBJTiAoeyIsIi5qb2luKCI/IiAqIGxlbihldmVudF9pZHMpKX0pCiAgICAgICAgICAgICAgICAiIiIsCiAgICAgICAgICAgICAgICBldmVudF9pZHMsCiAgICAgICAgICAgICkuZmV0Y2hhbGwoKQoKICAgICAgICAgICAgYWN0b3JzID0gc2V0KCkKICAgICAgICAgICAgYWN0aW9ucyA9IHNldCgpCiAgICAgICAgICAgIGxvY2F0aW9ucyA9IHNldCgpCgogICAgICAgICAgICBmb3IgciBpbiByb2xlczoKICAgICAgICAgICAgICAgIGtpbmQgPSAoclsicm9sZV9raW5kIl0gb3IgIiIpLmxvd2VyKCkKICAgICAgICAgICAgICAgIHdvcmQgPSByWyJkb2N1bWVudF93b3JkIl0KCiAgICAgICAgICAgICAgICBpZiBraW5kIGluIHsic3ViamVjdCIsICJvYmplY3QiLCAicG9zc2Vzc29yIn06CiAgICAgICAgICAgICAgICAgICAgYWN0b3JzLmFkZCh3b3JkKQoKICAgICAgICAgICAgICAgIGVsaWYga2luZCBpbiB7InZlcmIifToKICAgICAgICAgICAgICAgICAgICBhY3Rpb25zLmFkZCh3b3JkKQoKICAgICAgICAgICAgICAgIGVsaWYga2luZCBpbiB7InByZXBfb2JqZWN0In06CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25zLmFkZCh3b3JkKQoKCiAgICAgICAgICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICAjIENvbnRleHQgc3BhbnMgKHJ1bGVyIG91dHB1dCkKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIGNvbnRleHRzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIFNFTEVDVCBjdHhfa2luZCwgdGV4dAogICAgICAgICAgICAgICAgRlJPTSBsc3NfY29udGV4dF9zcGFucwogICAgICAgICAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICAgICAgICAgICIiIiwKICAgICAgICAgICAgICAgIChydW5bImlkIl0sKSwKICAgICAgICAgICAgKS5mZXRjaGFsbCgpCgogICAgICAgICAgICBjdHhfbWFwOiBEaWN0W3N0ciwgU2V0W3N0cl1dID0ge30KICAgICAgICAgICAgZm9yIGMgaW4gY29udGV4dHM6CiAgICAgICAgICAgICAgICBjdHhfbWFwLnNldGRlZmF1bHQoY1siY3R4X2tpbmQiXSwgc2V0KCkpLmFkZChjWyJ0ZXh0Il0pCgogICAgICAgICAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgIyBPdXRwdXQKICAgICAgICAgICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICBmIltib2xkIGN5YW5dUG9zdCB7cG9zdFsnaWQnXX1bL2JvbGQgY3lhbl0gIgogICAgICAgICAgICAgICAgZiJ7cG9zdFsncHVibGlzaGVkX2F0J119IHwge3Bvc3RbJ2FsaWFzJ119IHwge3Bvc3RbJ3B1Ymxpc2hlciddfSIKICAgICAgICAgICAgKQogICAgICAgICAgICBwcmludChmIiAgRXZlbnRzOiB7bGVuKGV2ZW50cyl9IikKCiAgICAgICAgICAgIGlmIGFjdG9yczoKICAgICAgICAgICAgICAgIHByaW50KGYiICBBY3RvcnM6IHsnLCAnLmpvaW4oc29ydGVkKGFjdG9ycykpfSIpCiAgICAgICAgICAgIGlmIGFjdGlvbnM6CiAgICAgICAgICAgICAgICBwcmludChmIiAgQWN0aW9uczogeycsICcuam9pbihzb3J0ZWQoYWN0aW9ucykpfSIpCiAgICAgICAgICAgIGlmIGxvY2F0aW9uczoKICAgICAgICAgICAgICAgIHByaW50KGYiICBMb2NhdGlvbnM6IHsnLCAnLmpvaW4oc29ydGVkKGxvY2F0aW9ucykpfSIpCgogICAgICAgICAgICBmb3Iga2luZCBpbiAoIkdST1VQIiwgIkRJUkVDVElPTiIsICJSRUdJT04iLCAiTE9DQVRJT04iKToKICAgICAgICAgICAgICAgIHZhbHVlcyA9IGN0eF9tYXAuZ2V0KGtpbmQpCiAgICAgICAgICAgICAgICBpZiB2YWx1ZXM6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiIgIHtraW5kfTogeycsICcuam9pbihzb3J0ZWQodmFsdWVzKSl9IikKCgpAYXBwLmNvbW1hbmQoInN0YXR1cyIpCmRlZiBsc3Nfc3RhdHVzKAogICAgKiwKICAgIHBvc3RfaWQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCiAgICBhbGlhczogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Ymxpc2hlcjogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbihOb25lKSwKICAgIHB1Yl9kYXRlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgc291cmNlOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKE5vbmUpLAogICAgbGltaXQ6IE9wdGlvbmFsW2ludF0gPSB0eXBlci5PcHRpb24oTm9uZSksCik6CiAgICAiIiIKICAgIFNob3cgTFNTIGV4dHJhY3Rpb24gc3RhdHVzIGZvciBpbmdlc3QgcG9zdHM6CiAgICBGRVRDSEVEIC8gUEVORElORyAvIEVYVFJBQ1RFRAoKICAgIFdpdGggbm8gZmlsdGVycywgc2hvd3MgQUxMIGluZ2VzdCBwb3N0cy4KICAgICIiIgoKICAgIHdpdGggX2Nvbm4oKSBhcyBjb246CiAgICAgICAgIyBOT1RFOiB1bmxpa2Ugb3RoZXIgY29tbWFuZHMsIHN0YXR1cyBhbGxvd3MgTk8gc2VsZWN0b3JzCiAgICAgICAgcG9zdHMgPSBfc2VsZWN0X2luZ2VzdF9wb3N0cygKICAgICAgICAgICAgY29uPWNvbiwKICAgICAgICAgICAgcG9zdF9pZD1wb3N0X2lkLAogICAgICAgICAgICBhbGlhcz1hbGlhcywKICAgICAgICAgICAgcHVibGlzaGVyPXB1Ymxpc2hlciwKICAgICAgICAgICAgcHViX2RhdGU9cHViX2RhdGUsCiAgICAgICAgICAgIHNvdXJjZT1zb3VyY2UsCiAgICAgICAgICAgIGxpbWl0PWxpbWl0LAogICAgICAgICkKCiAgICAgICAgaWYgbm90IHBvc3RzOgogICAgICAgICAgICBwcmludCgiW3llbGxvd11ObyBpbmdlc3QgcG9zdHMgZm91bmQuWy95ZWxsb3ddIikKICAgICAgICAgICAgcmFpc2UgdHlwZXIuRXhpdCgpCgogICAgICAgIHRhYmxlID0gVGFibGUodGl0bGU9IkxTUyBFeHRyYWN0aW9uIFN0YXR1cyIsIHNob3dfbGluZXM9VHJ1ZSkKICAgICAgICB0YWJsZS5hZGRfY29sdW1uKCJQb3N0IElEIiwgc3R5bGU9ImN5YW4iLCB3aWR0aD04KQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIlB1Ymxpc2hlZCIsIHN0eWxlPSJkaW0iKQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIkFsaWFzIiwgc3R5bGU9ImdyZWVuIikKICAgICAgICB0YWJsZS5hZGRfY29sdW1uKCJQdWJsaXNoZXIiKQogICAgICAgIHRhYmxlLmFkZF9jb2x1bW4oIlNvdXJjZSIpCiAgICAgICAgdGFibGUuYWRkX2NvbHVtbigiU3RhdHVzIiwgc3R5bGU9ImJvbGQiKQoKICAgICAgICBmb3IgcG9zdCBpbiBwb3N0czoKICAgICAgICAgICAgcGlkID0gcG9zdFsiaWQiXQoKICAgICAgICAgICAgY29tcGxldGVkID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAiIiIKICAgICAgICAgICAgICAgIFNFTEVDVCAxCiAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICBXSEVSRSBpbmdlc3RfcG9zdF9pZCA9ID8KICAgICAgICAgICAgICAgICAgQU5EIGNvbXBsZXRlZF9hdCBJUyBOT1QgTlVMTAogICAgICAgICAgICAgICAgTElNSVQgMQogICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgKHBpZCwpLAogICAgICAgICAgICApLmZldGNob25lKCkKCiAgICAgICAgICAgIGlmIGNvbXBsZXRlZDoKICAgICAgICAgICAgICAgIHN0YXR1cyA9ICJbZ3JlZW5dRVhUUkFDVEVEWy9ncmVlbl0iCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwZW5kaW5nID0gY29uLmV4ZWN1dGUoCiAgICAgICAgICAgICAgICAgICAgIiIiCiAgICAgICAgICAgICAgICAgICAgU0VMRUNUIDEKICAgICAgICAgICAgICAgICAgICBGUk9NIGxzc19ydW5zCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgaW5nZXN0X3Bvc3RfaWQgPSA/CiAgICAgICAgICAgICAgICAgICAgICBBTkQgY29tcGxldGVkX2F0IElTIE5VTEwKICAgICAgICAgICAgICAgICAgICBMSU1JVCAxCiAgICAgICAgICAgICAgICAgICAgIiIiLAogICAgICAgICAgICAgICAgICAgIChwaWQsKSwKICAgICAgICAgICAgICAgICkuZmV0Y2hvbmUoKQoKICAgICAgICAgICAgICAgIGlmIHBlbmRpbmc6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gIlt5ZWxsb3ddUEVORElOR1sveWVsbG93XSIKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gIltkaW1dRkVUQ0hFRFsvZGltXSIKCiAgICAgICAgICAgIHRhYmxlLmFkZF9yb3coCiAgICAgICAgICAgICAgICBzdHIocGlkKSwKICAgICAgICAgICAgICAgIHBvc3RbInB1Ymxpc2hlZF9hdCJdLAogICAgICAgICAgICAgICAgcG9zdFsiYWxpYXMiXSwKICAgICAgICAgICAgICAgIHBvc3RbInB1Ymxpc2hlciJdLAogICAgICAgICAgICAgICAgcG9zdFsic291cmNlIl0sCiAgICAgICAgICAgICAgICBzdGF0dXMsCiAgICAgICAgICAgICkKCiAgICAgICAgcHJpbnQodGFibGUpCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJlbmRlcmluZyBoZWxwZXJzIChldmVudHMpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX3JlbmRlcl9wb3N0KGNvbjogc3FsaXRlMy5Db25uZWN0aW9uLCBwb3N0OiBzcWxpdGUzLlJvdykgLT4gTm9uZToKICAgIHByaW50KCkKICAgIHByaW50KAogICAgICAgIGYiW2JvbGQgY3lhbl1Qb3N0IHtwb3N0WydpZCddfVsvYm9sZCBjeWFuXSAiCiAgICAgICAgZiJ7cG9zdFsncHVibGlzaGVkX2F0J119IHwge3Bvc3RbJ2FsaWFzJ119IHwge3Bvc3RbJ3B1Ymxpc2hlciddfSIKICAgICkKCiAgICBydW4gPSBfbGF0ZXN0X3J1bihjb24sIHBvc3RbImlkIl0pCiAgICBpZiBub3QgcnVuOgogICAgICAgIHByaW50KCJbeWVsbG93XSAgTm8gY29tcGxldGVkIExTUyBydW4uWy95ZWxsb3ddIikKICAgICAgICByZXR1cm4KCiAgICBwcmludCgKICAgICAgICBmIiAgW2dyZWVuXUxTUyBydW4ge3J1blsnaWQnXX1bL2dyZWVuXSAiCiAgICAgICAgZiIoe3J1blsnZW5naW5lJ119IHtydW5bJ2VuZ2luZV92ZXJzaW9uJ119KSIKICAgICkKCiAgICBfcmVuZGVyX2V2ZW50cyhjb24sIHJ1blsiaWQiXSkKICAgIF9yZW5kZXJfY29udGV4dHMoY29uLCBydW5bImlkIl0pCgoKZGVmIF9yZW5kZXJfZXZlbnRzKGNvbjogc3FsaXRlMy5Db25uZWN0aW9uLCBydW5faWQ6IGludCkgLT4gTm9uZToKICAgIGV2ZW50cyA9IGNvbi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCAqCiAgICAgICAgRlJPTSBsc3NfZXZlbnRzCiAgICAgICAgV0hFUkUgbHNzX3J1bl9pZCA9ID8KICAgICAgICBPUkRFUiBCWSBvcmRpbmFsIEFTQwogICAgICAgICIiIiwKICAgICAgICAocnVuX2lkLCksCiAgICApLmZldGNoYWxsKCkKCiAgICBpZiBub3QgZXZlbnRzOgogICAgICAgIHByaW50KCIgIFt5ZWxsb3ddTm8gZXZlbnRzIGV4dHJhY3RlZC5bL3llbGxvd10iKQogICAgICAgIHJldHVybgoKICAgIHRhYmxlID0gVGFibGUodGl0bGU9IkV2ZW50cyIsIHNob3dfbGluZXM9VHJ1ZSkKICAgIHRhYmxlLmFkZF9jb2x1bW4oIklEIiwgc3R5bGU9ImN5YW4iLCB3aWR0aD02KQogICAgdGFibGUuYWRkX2NvbHVtbigiTGFiZWwiLCBzdHlsZT0iZ3JlZW4iKQogICAgdGFibGUuYWRkX2NvbHVtbigiTmVnIiwgd2lkdGg9MykKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlVuYyIsIHdpZHRoPTMpCiAgICB0YWJsZS5hZGRfY29sdW1uKCJUZXh0IikKCiAgICBmb3IgZXYgaW4gZXZlbnRzOgogICAgICAgIHRhYmxlLmFkZF9yb3coCiAgICAgICAgICAgIHN0cihldlsiaWQiXSksCiAgICAgICAgICAgIGV2WyJsYWJlbCJdLAogICAgICAgICAgICAiWSIgaWYgZXZbIm5lZ2F0ZWQiXSBlbHNlICIiLAogICAgICAgICAgICAiWSIgaWYgZXZbInVuY2VydGFpbiJdIGVsc2UgIiIsCiAgICAgICAgICAgIGV2WyJ0ZXh0Il1bOjEyMF0gKyAoIuKApiIgaWYgbGVuKGV2WyJ0ZXh0Il0pID4gMTIwIGVsc2UgIiIpLAogICAgICAgICkKCiAgICBwcmludCh0YWJsZSkKCiAgICBmb3IgZXYgaW4gZXZlbnRzOgogICAgICAgIF9yZW5kZXJfcm9sZXMoY29uLCBldlsiaWQiXSkKCgpkZWYgX3JlbmRlcl9yb2xlcyhjb246IHNxbGl0ZTMuQ29ubmVjdGlvbiwgZXZlbnRfaWQ6IGludCkgLT4gTm9uZToKICAgIHJvbGVzID0gY29uLmV4ZWN1dGUoCiAgICAgICAgIiIiCiAgICAgICAgU0VMRUNUICoKICAgICAgICBGUk9NIGxzc19yb2xlX2NhbmRpZGF0ZXMKICAgICAgICBXSEVSRSBsc3NfZXZlbnRfaWQgPSA/CiAgICAgICAgT1JERVIgQlkgcm9sZV9raW5kIEFTQwogICAgICAgICIiIiwKICAgICAgICAoZXZlbnRfaWQsKSwKICAgICkuZmV0Y2hhbGwoKQoKICAgIGlmIG5vdCByb2xlczoKICAgICAgICByZXR1cm4KCiAgICB0YWJsZSA9IFRhYmxlKHRpdGxlPWYiUm9sZXMgZm9yIGV2ZW50IHtldmVudF9pZH0iLCBzaG93X2xpbmVzPUZhbHNlKQogICAgdGFibGUuYWRkX2NvbHVtbigiS2luZCIsIHN0eWxlPSJjeWFuIikKICAgIHRhYmxlLmFkZF9jb2x1bW4oIldvcmQiLCBzdHlsZT0iZ3JlZW4iKQogICAgdGFibGUuYWRkX2NvbHVtbigiTmVnIikKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlVuYyIpCgogICAgZm9yIHIgaW4gcm9sZXM6CiAgICAgICAgdGFibGUuYWRkX3JvdygKICAgICAgICAgICAgclsicm9sZV9raW5kIl0sCiAgICAgICAgICAgIHJbImRvY3VtZW50X3dvcmQiXSwKICAgICAgICAgICAgIlkiIGlmIHJbIm5lZ2F0ZWQiXSBlbHNlICIiLAogICAgICAgICAgICAiWSIgaWYgclsidW5jZXJ0YWluIl0gZWxzZSAiIiwKICAgICAgICApCgogICAgcHJpbnQodGFibGUpCgoKZGVmIF9yZW5kZXJfY29udGV4dHMoY29uOiBzcWxpdGUzLkNvbm5lY3Rpb24sIHJ1bl9pZDogaW50KSAtPiBOb25lOgogICAgcm93cyA9IGNvbi5leGVjdXRlKAogICAgICAgICIiIgogICAgICAgIFNFTEVDVCAqCiAgICAgICAgRlJPTSBsc3NfY29udGV4dF9zcGFucwogICAgICAgIFdIRVJFIGxzc19ydW5faWQgPSA/CiAgICAgICAgT1JERVIgQlkgY3R4X2tpbmQgQVNDCiAgICAgICAgIiIiLAogICAgICAgIChydW5faWQsKSwKICAgICkuZmV0Y2hhbGwoKQoKICAgIGlmIG5vdCByb3dzOgogICAgICAgIHJldHVybgoKICAgIHRhYmxlID0gVGFibGUodGl0bGU9IkNvbnRleHQgc3BhbnMiLCBzaG93X2xpbmVzPUZhbHNlKQogICAgdGFibGUuYWRkX2NvbHVtbigiS2luZCIsIHN0eWxlPSJjeWFuIikKICAgIHRhYmxlLmFkZF9jb2x1bW4oIlRleHQiKQoKICAgIGZvciByIGluIHJvd3M6CiAgICAgICAgdGFibGUuYWRkX3JvdyhyWyJjdHhfa2luZCJdLCByWyJ0ZXh0Il0pCgogICAgcHJpbnQodGFibGUpCgAAAAAAAAAAujUAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAsAoAAAAAAACwCgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "src/sitrepc2/cli/fetch_cmd.py",
			"settings":
			{
				"buffer_size": 2118,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					4,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAAAAwAAAAAAADpBQAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IHR5cGVyCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgTGlzdApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRlCgpmcm9tIHJpY2ggaW1wb3J0IHByaW50CmZyb20gc2l0cmVwYzIuaW5nZXN0LnRlbGVncmFtIGltcG9ydCBmZXRjaF9wb3N0cwoKYXBwID0gdHlwZXIuVHlwZXIoaGVscD0iRmV0Y2ggVGVsZWdyYW0gcG9zdHMgaW50byB0aGUgaW5nZXN0IGRhdGFiYXNlLiIpCgoKZGVmIF92YWxpZGF0ZV9pc29fZGF0ZShuYW1lOiBzdHIsIHZhbHVlOiBzdHIpIC0+IHN0cjoKICAgIHRyeToKICAgICAgICBkYXRlLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoZiJ7bmFtZX0gbXVzdCBiZSBZWVlZLU1NLURELCBnb3Qge3ZhbHVlIXJ9IikKICAgIHJldHVybiB2YWx1ZQoKCkBhcHAuY2FsbGJhY2soKQpkZWYgZmV0Y2hfY2FsbGJhY2soCiAgICBzb3VyY2U6IHN0ciA9IHR5cGVyLkFyZ3VtZW50KAogICAgICAgIC4uLiwKICAgICAgICBoZWxwPSInYWxsJyBmb3IgYWxsIGFjdGl2ZSBzb3VyY2VzIG9yIGEgc2luZ2xlIGFsaWFzLiIsCiAgICApLAogICAgc3RhcnQ6IHN0ciA9IHR5cGVyLk9wdGlvbigKICAgICAgICAuLi4sCiAgICAgICAgIi0tc3RhcnQiLAogICAgICAgICItcyIsCiAgICAgICAgaGVscD0iU3RhcnQgZGF0ZSAoWVlZWS1NTS1ERCkuIiwKICAgICAgICBjYWxsYmFjaz1sYW1iZGEgeDogX3ZhbGlkYXRlX2lzb19kYXRlKCJzdGFydCIsIHgpLAogICAgKSwKICAgIGVuZDogT3B0aW9uYWxbc3RyXSA9IHR5cGVyLk9wdGlvbigKICAgICAgICBOb25lLAogICAgICAgICItLWVuZCIsCiAgICAgICAgIi1lIiwKICAgICAgICBoZWxwPSJFbmQgZGF0ZSAoWVlZWS1NTS1ERCkuIERlZmF1bHRzIHRvIHN0YXJ0LiIsCiAgICAgICAgY2FsbGJhY2s9bGFtYmRhIHg6IF92YWxpZGF0ZV9pc29fZGF0ZSgiZW5kIiwgeCkgaWYgeCBlbHNlIE5vbmUsCiAgICApLAogICAgZm9yY2U6IGJvb2wgPSB0eXBlci5PcHRpb24oCiAgICAgICAgRmFsc2UsCiAgICAgICAgIi0tZm9yY2UiLAogICAgICAgIGhlbHA9IlJlLWZldGNoIHBvc3RzIGV2ZW4gaWYgdGhleSBhbHJlYWR5IGV4aXN0IGluIGluZ2VzdF9wb3N0cy4iLAogICAgKSwKKToKICAgIGFsaWFzZXM6IE9wdGlvbmFsW0xpc3Rbc3RyXV0KICAgIGlmIHNvdXJjZS5sb3dlcigpID09ICJhbGwiOgogICAgICAgIGFsaWFzZXMgPSBOb25lCiAgICBlbHNlOgogICAgICAgIGFsaWFzZXMgPSBbc291cmNlXQoKICAgIGNvdW50ID0gZmV0Y2hfcG9zdHMoCiAgICAgICAgc3RhcnRfZGF0ZT1zdGFydCwKICAgICAgICBlbmRfZGF0ZT1lbmQsCiAgICAgICAgYWxpYXNlcz1hbGlhc2VzLAogICAgICAgIGZvcmNlPWZvcmNlLAogICAgKQoKICAgIHByaW50KGYiW2dyZWVuXUluc2VydGVkIHtjb3VudH0gVGVsZWdyYW0gcG9zdHMgaW50byBpbmdlc3QgREJbL2dyZWVuXSIpCg",
					"AQAAAAAAAAABAAAAAAAAAAAAAADpBQAAAAAAAAAAAAAAAPC/"
				],
				[
					7,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAADAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IGpzb24KZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgTGlzdApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRlCgppbXBvcnQgdHlwZXIKZnJvbSByaWNoIGltcG9ydCBwcmludAoKZnJvbSBzaXRyZXBjMi5pbmdlc3QudGVsZWdyYW0gaW1wb3J0IGZldGNoX3Bvc3RzCmZyb20gc2l0cmVwYzIuY29uZmlnLnBhdGhzIGltcG9ydCBzb3VyY2VzX3BhdGgKCmFwcCA9IHR5cGVyLlR5cGVyKGhlbHA9IkZldGNoIFRlbGVncmFtIHBvc3RzIGludG8gdGhlIGluZ2VzdCBkYXRhYmFzZS4iKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgSGVscGVycwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIF92YWxpZGF0ZV9pc29fZGF0ZShuYW1lOiBzdHIsIHZhbHVlOiBzdHIpIC0+IHN0cjoKICAgIHRyeToKICAgICAgICBkYXRlLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoZiJ7bmFtZX0gbXVzdCBiZSBZWVlZLU1NLURELCBnb3Qge3ZhbHVlIXJ9IikKICAgIHJldHVybiB2YWx1ZQoKCmRlZiBfbG9hZF9zb3VyY2VzKCkgLT4gTGlzdFtkaWN0XToKICAgIHBhdGggPSBQYXRoKHNvdXJjZXNfcGF0aCgpKQogICAgc291cmNlcyA9IFtdCiAgICB3aXRoIHBhdGgub3BlbigiciIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6CiAgICAgICAgZm9yIGxpbmUgaW4gZjoKICAgICAgICAgICAgaWYgbGluZS5zdHJpcCgpOgogICAgICAgICAgICAgICAgc291cmNlcy5hcHBlbmQoanNvbi5sb2FkcyhsaW5lKSkKICAgIHJldHVybiBzb3VyY2VzCgoKZGVmIF9yZXNvbHZlX3NvdXJjZV9zZWxlY3Rvcihzb3VyY2U6IHN0cikgLT4gT3B0aW9uYWxbTGlzdFtzdHJdXToKICAgICIiIgogICAgUmVzb2x2ZSB1c2VyIGlucHV0IGludG8gYSBsaXN0IG9mIGNhbm9uaWNhbCBhbGlhc2VzLgoKICAgIEFjY2VwdHM6CiAgICAgIC0gJ2FsbCcKICAgICAgLSBhbGlhcyAoZS5nLiAnUnVzc2lhJykKICAgICAgLSBzb3VyY2VfbmFtZSAoZS5nLiAnbW9kX3J1c3NpYV9lbicpCiAgICAiIiIKCiAgICBpZiBzb3VyY2UubG93ZXIoKSA9PSAiYWxsIjoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHNvdXJjZXMgPSBfbG9hZF9zb3VyY2VzKCkKCiAgICBtYXRjaGVzID0gWwogICAgICAgIHMgZm9yIHMgaW4gc291cmNlcwogICAgICAgIGlmIHMuZ2V0KCJhY3RpdmUiKQogICAgICAgIGFuZCBzLmdldCgic291cmNlX2tpbmQiKSA9PSAiVEVMRUdSQU0iCiAgICAgICAgYW5kICgKICAgICAgICAgICAgcy5nZXQoImFsaWFzIikgPT0gc291cmNlCiAgICAgICAgICAgIG9yIHMuZ2V0KCJzb3VyY2VfbmFtZSIpID09IHNvdXJjZQogICAgICAgICkKICAgIF0KCiAgICBpZiBub3QgbWF0Y2hlczoKICAgICAgICBrbm93biA9IHNvcnRlZCgKICAgICAgICAgICAge3NbImFsaWFzIl0gZm9yIHMgaW4gc291cmNlcyBpZiBzLmdldCgiYWN0aXZlIil9CiAgICAgICAgICAgIHwge3NbInNvdXJjZV9uYW1lIl0gZm9yIHMgaW4gc291cmNlcyBpZiBzLmdldCgiYWN0aXZlIil9CiAgICAgICAgKQogICAgICAgIHJhaXNlIHR5cGVyLkJhZFBhcmFtZXRlcigKICAgICAgICAgICAgZiJObyBhY3RpdmUgVGVsZWdyYW0gc291cmNlIG1hdGNoZXMge3NvdXJjZSFyfS5cbiIKICAgICAgICAgICAgZiJLbm93biBzb3VyY2VzOiB7JywgJy5qb2luKGtub3duKX0iCiAgICAgICAgKQoKICAgICMgZmV0Y2hfcG9zdHMoKSBleHBlY3RzIGFsaWFzZXMKICAgIHJldHVybiBbc1siYWxpYXMiXSBmb3IgcyBpbiBtYXRjaGVzXQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ0xJCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpAYXBwLmNhbGxiYWNrKCkKZGVmIGZldGNoX2NhbGxiYWNrKAogICAgc291cmNlOiBzdHIgPSB0eXBlci5Bcmd1bWVudCgKICAgICAgICAuLi4sCiAgICAgICAgaGVscD0iJ2FsbCcgZm9yIGFsbCBhY3RpdmUgc291cmNlcywgb3IgYSBzaW5nbGUgYWxpYXMgb3Igc291cmNlIG5hbWUuIiwKICAgICksCiAgICBzdGFydDogc3RyID0gdHlwZXIuT3B0aW9uKAogICAgICAgIC4uLiwKICAgICAgICAiLS1zdGFydCIsCiAgICAgICAgIi1zIiwKICAgICAgICBoZWxwPSJTdGFydCBkYXRlIChZWVlZLU1NLUREKS4iLAogICAgICAgIGNhbGxiYWNrPWxhbWJkYSB4OiBfdmFsaWRhdGVfaXNvX2RhdGUoInN0YXJ0IiwgeCksCiAgICApLAogICAgZW5kOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKAogICAgICAgIE5vbmUsCiAgICAgICAgIi0tZW5kIiwKICAgICAgICAiLWUiLAogICAgICAgIGhlbHA9IkVuZCBkYXRlIChZWVlZLU1NLUREKS4gRGVmYXVsdHMgdG8gc3RhcnQuIiwKICAgICAgICBjYWxsYmFjaz1sYW1iZGEgeDogX3ZhbGlkYXRlX2lzb19kYXRlKCJlbmQiLCB4KSBpZiB4IGVsc2UgTm9uZSwKICAgICksCiAgICBmb3JjZTogYm9vbCA9IHR5cGVyLk9wdGlvbigKICAgICAgICBGYWxzZSwKICAgICAgICAiLS1mb3JjZSIsCiAgICAgICAgaGVscD0iUmUtZmV0Y2ggcG9zdHMgZXZlbiBpZiB0aGV5IGFscmVhZHkgZXhpc3QgaW4gaW5nZXN0X3Bvc3RzLiIsCiAgICApLAopOgogICAgYWxpYXNlcyA9IF9yZXNvbHZlX3NvdXJjZV9zZWxlY3Rvcihzb3VyY2UpCgogICAgY291bnQgPSBmZXRjaF9wb3N0cygKICAgICAgICBzdGFydF9kYXRlPXN0YXJ0LAogICAgICAgIGVuZF9kYXRlPWVuZCwKICAgICAgICBhbGlhc2VzPWFsaWFzZXMsCiAgICAgICAgZm9yY2U9Zm9yY2UsCiAgICApCgogICAgcHJpbnQoZiJbZ3JlZW5dSW5zZXJ0ZWQge2NvdW50fSBUZWxlZ3JhbSBwb3N0cyBpbnRvIGluZ2VzdCBEQlsvZ3JlZW5dIikKAAAAAAAAAAAADAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAdQgAAAAAAAB1CAAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"paste",
					null,
					"AQAAAAAAAAAAAAAARggAAAAAAAAADAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKaW1wb3J0IGpzb24KZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmZyb20gdHlwaW5nIGltcG9ydCBPcHRpb25hbCwgTGlzdApmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRlCgppbXBvcnQgdHlwZXIKZnJvbSByaWNoIGltcG9ydCBwcmludAoKZnJvbSBzaXRyZXBjMi5pbmdlc3QudGVsZWdyYW0gaW1wb3J0IGZldGNoX3Bvc3RzCmZyb20gc2l0cmVwYzIuY29uZmlnLnBhdGhzIGltcG9ydCBzb3VyY2VzX3BhdGgKCmFwcCA9IHR5cGVyLlR5cGVyKGhlbHA9IkZldGNoIFRlbGVncmFtIHBvc3RzIGludG8gdGhlIGluZ2VzdCBkYXRhYmFzZS4iKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgSGVscGVycwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIF92YWxpZGF0ZV9pc29fZGF0ZShuYW1lOiBzdHIsIHZhbHVlOiBzdHIpIC0+IHN0cjoKICAgIHRyeToKICAgICAgICBkYXRlLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoZiJ7bmFtZX0gbXVzdCBiZSBZWVlZLU1NLURELCBnb3Qge3ZhbHVlIXJ9IikKICAgIHJldHVybiB2YWx1ZQoKCmRlZiBfbG9hZF9zb3VyY2VzKCkgLT4gTGlzdFtkaWN0XToKICAgIHBhdGggPSBQYXRoKHNvdXJjZXNfcGF0aCgpKQogICAgc291cmNlcyA9IFtdCiAgICB3aXRoIHBhdGgub3BlbigiciIsIGVuY29kaW5nPSJ1dGYtOCIpIGFzIGY6CiAgICAgICAgZm9yIGxpbmUgaW4gZjoKICAgICAgICAgICAgaWYgbGluZS5zdHJpcCgpOgogICAgICAgICAgICAgICAgc291cmNlcy5hcHBlbmQoanNvbi5sb2FkcyhsaW5lKSkKICAgIHJldHVybiBzb3VyY2VzCgoKZGVmIF9yZXNvbHZlX3NvdXJjZV9zZWxlY3Rvcihzb3VyY2U6IHN0cikgLT4gT3B0aW9uYWxbTGlzdFtzdHJdXToKICAgICIiIgogICAgUmVzb2x2ZSB1c2VyIGlucHV0IGludG8gYSBsaXN0IG9mIGNhbm9uaWNhbCBhbGlhc2VzLgoKICAgIEFjY2VwdHM6CiAgICAgIC0gJ2FsbCcKICAgICAgLSBhbGlhcyAoZS5nLiAnUnVzc2lhJykKICAgICAgLSBzb3VyY2VfbmFtZSAoZS5nLiAnbW9kX3J1c3NpYV9lbicpCiAgICAiIiIKCiAgICBpZiBzb3VyY2UubG93ZXIoKSA9PSAiYWxsIjoKICAgICAgICByZXR1cm4gTm9uZQoKICAgIHNvdXJjZXMgPSBfbG9hZF9zb3VyY2VzKCkKCiAgICBtYXRjaGVzID0gWwogICAgICAgIHMgZm9yIHMgaW4gc291cmNlcwogICAgICAgIGlmIHMuZ2V0KCJhY3RpdmUiKQogICAgICAgIGFuZCBzLmdldCgic291cmNlX2tpbmQiKSA9PSAiVEVMRUdSQU0iCiAgICAgICAgYW5kICgKICAgICAgICAgICAgcy5nZXQoImFsaWFzIikgPT0gc291cmNlCiAgICAgICAgICAgIG9yIHMuZ2V0KCJzb3VyY2VfbmFtZSIpID09IHNvdXJjZQogICAgICAgICkKICAgIF0KCiAgICBpZiBub3QgbWF0Y2hlczoKICAgICAgICBrbm93biA9IHNvcnRlZCgKICAgICAgICAgICAge3NbImFsaWFzIl0gZm9yIHMgaW4gc291cmNlcyBpZiBzLmdldCgiYWN0aXZlIil9CiAgICAgICAgICAgIHwge3NbInNvdXJjZV9uYW1lIl0gZm9yIHMgaW4gc291cmNlcyBpZiBzLmdldCgiYWN0aXZlIil9CiAgICAgICAgKQogICAgICAgIHJhaXNlIHR5cGVyLkJhZFBhcmFtZXRlcigKICAgICAgICAgICAgZiJObyBhY3RpdmUgVGVsZWdyYW0gc291cmNlIG1hdGNoZXMge3NvdXJjZSFyfS5cbiIKICAgICAgICAgICAgZiJLbm93biBzb3VyY2VzOiB7JywgJy5qb2luKGtub3duKX0iCiAgICAgICAgKQoKICAgICMgZmV0Y2hfcG9zdHMoKSBleHBlY3RzIGFsaWFzZXMKICAgIHJldHVybiBbc1siYWxpYXMiXSBmb3IgcyBpbiBtYXRjaGVzXQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ0xJCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpAYXBwLmNhbGxiYWNrKCkKZGVmIGZldGNoX2NhbGxiYWNrKAogICAgc291cmNlOiBzdHIgPSB0eXBlci5Bcmd1bWVudCgKICAgICAgICAuLi4sCiAgICAgICAgaGVscD0iJ2FsbCcgZm9yIGFsbCBhY3RpdmUgc291cmNlcywgb3IgYSBzaW5nbGUgYWxpYXMgb3Igc291cmNlIG5hbWUuIiwKICAgICksCiAgICBzdGFydDogc3RyID0gdHlwZXIuT3B0aW9uKAogICAgICAgIC4uLiwKICAgICAgICAiLS1zdGFydCIsCiAgICAgICAgIi1zIiwKICAgICAgICBoZWxwPSJTdGFydCBkYXRlIChZWVlZLU1NLUREKS4iLAogICAgICAgIGNhbGxiYWNrPWxhbWJkYSB4OiBfdmFsaWRhdGVfaXNvX2RhdGUoInN0YXJ0IiwgeCksCiAgICApLAogICAgZW5kOiBPcHRpb25hbFtzdHJdID0gdHlwZXIuT3B0aW9uKAogICAgICAgIE5vbmUsCiAgICAgICAgIi0tZW5kIiwKICAgICAgICAiLWUiLAogICAgICAgIGhlbHA9IkVuZCBkYXRlIChZWVlZLU1NLUREKS4gRGVmYXVsdHMgdG8gc3RhcnQuIiwKICAgICAgICBjYWxsYmFjaz1sYW1iZGEgeDogX3ZhbGlkYXRlX2lzb19kYXRlKCJlbmQiLCB4KSBpZiB4IGVsc2UgTm9uZSwKICAgICksCiAgICBmb3JjZTogYm9vbCA9IHR5cGVyLk9wdGlvbigKICAgICAgICBGYWxzZSwKICAgICAgICAiLS1mb3JjZSIsCiAgICAgICAgaGVscD0iUmUtZmV0Y2ggcG9zdHMgZXZlbiBpZiB0aGV5IGFscmVhZHkgZXhpc3QgaW4gaW5nZXN0X3Bvc3RzLiIsCiAgICApLAopOgogICAgYWxpYXNlcyA9IF9yZXNvbHZlX3NvdXJjZV9zZWxlY3Rvcihzb3VyY2UpCgogICAgY291bnQgPSBmZXRjaF9wb3N0cygKICAgICAgICBzdGFydF9kYXRlPXN0YXJ0LAogICAgICAgIGVuZF9kYXRlPWVuZCwKICAgICAgICBhbGlhc2VzPWFsaWFzZXMsCiAgICAgICAgZm9yY2U9Zm9yY2UsCiAgICApCgogICAgcHJpbnQoZiJbZ3JlZW5dSW5zZXJ0ZWQge2NvdW50fSBUZWxlZ3JhbSBwb3N0cyBpbnRvIGluZ2VzdCBEQlsvZ3JlZW5dIikK",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABGCAAAZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSB0eXBpbmcgaW1wb3J0IE9wdGlvbmFsLCBMaXN0CmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUKCmltcG9ydCB0eXBlcgpmcm9tIHJpY2ggaW1wb3J0IHByaW50Cgpmcm9tIHNpdHJlcGMyLmluZ2VzdC50ZWxlZ3JhbSBpbXBvcnQgZmV0Y2hfcG9zdHMKCmFwcCA9IHR5cGVyLlR5cGVyKGhlbHA9IkZldGNoIFRlbGVncmFtIHBvc3RzIGludG8gdGhlIGluZ2VzdCBkYXRhYmFzZS4iKQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgSGVscGVycwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIF92YWxpZGF0ZV9pc29fZGF0ZShuYW1lOiBzdHIsIHZhbHVlOiBzdHIpIC0+IHN0cjoKICAgIHRyeToKICAgICAgICBkYXRlLmZyb21pc29mb3JtYXQodmFsdWUpCiAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICByYWlzZSB0eXBlci5CYWRQYXJhbWV0ZXIoZiJ7bmFtZX0gbXVzdCBiZSBZWVlZLU1NLURELCBnb3Qge3ZhbHVlIXJ9IikKICAgIHJldHVybiB2YWx1ZQoKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgQ0xJCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpAYXBwLmNhbGxiYWNrKCkKZGVmIGZldGNoX2NhbGxiYWNrKAogICAgKiwKICAgIHN0YXJ0OiBzdHIgPSB0eXBlci5PcHRpb24oCiAgICAgICAgLi4uLAogICAgICAgICItLXN0YXJ0IiwKICAgICAgICAiLXMiLAogICAgICAgIGhlbHA9IlN0YXJ0IGRhdGUgKFlZWVktTU0tREQpLiIsCiAgICAgICAgY2FsbGJhY2s9bGFtYmRhIHg6IF92YWxpZGF0ZV9pc29fZGF0ZSgic3RhcnQiLCB4KSwKICAgICksCiAgICBlbmQ6IE9wdGlvbmFsW3N0cl0gPSB0eXBlci5PcHRpb24oCiAgICAgICAgTm9uZSwKICAgICAgICAiLS1lbmQiLAogICAgICAgICItZSIsCiAgICAgICAgaGVscD0iRW5kIGRhdGUgKFlZWVktTU0tREQpLiBEZWZhdWx0cyB0byBzdGFydC4iLAogICAgICAgIGNhbGxiYWNrPWxhbWJkYSB4OiBfdmFsaWRhdGVfaXNvX2RhdGUoImVuZCIsIHgpIGlmIHggZWxzZSBOb25lLAogICAgKSwKICAgIGFsaWFzZXM6IE9wdGlvbmFsW0xpc3Rbc3RyXV0gPSB0eXBlci5PcHRpb24oCiAgICAgICAgTm9uZSwKICAgICAgICAiLS1hbGlhc2VzIiwKICAgICAgICAiLWwiLAogICAgICAgIGhlbHA9Ik9uZSBvciBtb3JlIHNvdXJjZSBhbGlhc2VzIChlLmcuIFJ1c3NpYSwgVWtyYWluZSwgUnliYXIpLiIsCiAgICApLAogICAgc291cmNlczogT3B0aW9uYWxbTGlzdFtzdHJdXSA9IHR5cGVyLk9wdGlvbigKICAgICAgICBOb25lLAogICAgICAgICItLXNvdXJjZXMiLAogICAgICAgICItYyIsCiAgICAgICAgaGVscD0iT25lIG9yIG1vcmUgc291cmNlIG5hbWVzIChlLmcuIG1vZF9ydXNzaWFfZW4sIHJ5YmFyX2luX2VuZ2xpc2gpLiIsCiAgICApLAogICAgZm9yY2U6IGJvb2wgPSB0eXBlci5PcHRpb24oCiAgICAgICAgRmFsc2UsCiAgICAgICAgIi0tZm9yY2UiLAogICAgICAgIGhlbHA9IlJlLWZldGNoIHBvc3RzIGV2ZW4gaWYgdGhleSBhbHJlYWR5IGV4aXN0IGluIGluZ2VzdF9wb3N0cy4iLAogICAgKSwKKToKICAgICIiIgogICAgRmV0Y2ggVGVsZWdyYW0gcG9zdHMuCgogICAgSWYgbmVpdGhlciAtLWFsaWFzZXMgbm9yIC0tc291cmNlcyBpcyBwcm92aWRlZCwgYWxsIGFjdGl2ZSBUZWxlZ3JhbSBzb3VyY2VzCiAgICBhcmUgZmV0Y2hlZC4KICAgICIiIgoKICAgIGNvdW50ID0gZmV0Y2hfcG9zdHMoCiAgICAgICAgc3RhcnRfZGF0ZT1zdGFydCwKICAgICAgICBlbmRfZGF0ZT1lbmQsCiAgICAgICAgYWxpYXNlcz1hbGlhc2VzLAogICAgICAgIHNvdXJjZV9uYW1lPXNvdXJjZXMsCiAgICAgICAgZm9yY2U9Zm9yY2UsCiAgICApCgogICAgcHJpbnQoZiJbZ3JlZW5dSW5zZXJ0ZWQge2NvdW50fSBUZWxlZ3JhbSBwb3N0cyBpbnRvIGluZ2VzdCBEQlsvZ3JlZW5dIikKAAAAAAAAAABGCAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAARggAAAAAAABGCAAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"console":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/Volumes/bladerunner/Projects/sitrepc2",
		"/Volumes/bladerunner/Projects/sitrepc2/.sitrepc2",
		"/Volumes/bladerunner/Projects/sitrepc2/src",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/gazetteer",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/records"
	],
	"file_history":
	[
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/events.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/records/dom.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/telegram.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/records/lss.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/lss_scoping.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/typedefs.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/extract_lss.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/main_window.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/gazetteer/gazetteer.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/loc_form.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/location_ws.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/loc_search_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/gazetteer_ws.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/spatial/frontline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/dom_filtering.py",
		"/Users/bladerunner/Projects/telex/test_ingest.norm.txt",
		"/Volumes/bladerunner/Projects/sitrepc2/pyproject.toml",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/dom_loader.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/nodes.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/dom_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/app.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/dom_cmd",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/dom_ingest.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/candidate_confidence.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/dom_persistence.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/config/paths.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/init_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/loc_polylines.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/services/gazetteer_read.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/services/gazetteer_search.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/search_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/controller/editor_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/navigation_tree.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/services/gazetteer_alias_browser.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/app.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/lexicon_ws.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/main_window.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/gazetteer_alias_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/details/empty_state_view.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/models.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/enums.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/app_toolbar.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/services/lexicon_read.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/details/gazetteer_details_view.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/details/lexicon_phrase_builder_view.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/models/entity_ruler.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/entry_list_view.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/entry_details_stack.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/dbeditc2/widgets/main_window.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/extract_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/persist.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/lexicon/lexicon.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/phrases.py",
		"/Users/bladerunner/Projects/telex/telex.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/viewer/document_html_viewer.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/highlight_toolbar.py",
		"/Users/bladerunner/Projects/telex/seed_sources.jsonl",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/ingest_record_picker_dialog.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/document_summary_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/alias_service.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/attribute_inspector.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/source_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/translate.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/fetch_cmd.py",
		"/Users/bladerunner/Projects/mod-mymap/data/spatial/op_groups.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/facebook.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/twitter.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/ingest/http.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/nlp/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/controller/document_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/aliasedit.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/main_window.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ui/model_validator_dialog.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/entity_ruler_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/seed_lexicon.json",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/app.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/controller/document_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/io/ruler_io.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/highlight_toolbar.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/document_summary_panel.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/attribute_inspector.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ui/menus.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/viewer/document_viewer.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/io/csv_loader.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/io/json_loader.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/io/text_loader.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/ruler_io.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/entity_ruler.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/document_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/docruleredit/pipeline.py",
		"/Users/bladerunner/Projects/sitrepc2.bak/src/sitrepc2/frontline/loc_amk.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/osm_ingest.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ingest/loaders.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ingest/ingest_controller.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/schema/records/ingest.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/main.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/dom/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gui/ingest/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/README.md",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/db/schema.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/add_admin4.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/enrich_admin4.py",
		"/Volumes/bladerunner/Projects/sitrepc2/data/spatial/regions.geojson",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_serialization.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/db/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/review/pd_nodes.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/io.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/index.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/aliases.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/lss/ruler.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/group_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/locale_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_direction_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/init_db.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/cli/db_cmd.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/gazetteer/typedefs.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_group_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_locale_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/import_region_lookup.py",
		"/Volumes/bladerunner/Projects/sitrepc2/scripts/schema.sql",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/reference/direction_lookup.csv",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/dom/pipeline.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/config/__init__.py",
		"/Volumes/bladerunner/Projects/sitrepc2/src/sitrepc2/db/core.py",
		"/Volumes/bladerunner/Projects/sitrepc2/data/schema.sql"
	],
	"find":
	{
		"height": 38.0
	},
	"find_in_files":
	{
		"height": 119.0,
		"where_history":
		[
			"/Volumes/bladerunner/Projects/sitrepc2",
			"<open folders>"
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"CONTEXT",
			"attached = ",
			"\")\"",
			"persist_role",
			"persist",
			"role",
			"PhraseMatch",
			"extracted_word",
			"role_kind",
			"iter_content_words",
			"word_matches(",
			"WordMatch",
			"osm",
			"btn",
			"width",
			"min_width",
			"self.setEnable",
			"selected",
			"select",
			"(?, ?, ?, ?, ?, ?)",
			"osm",
			"osm_id",
			"get(\"",
			"select",
			"int(",
			"in",
			"int(",
			"set_view_mode",
			"_gazetteer_ws",
			"def _load_groups",
			"iter_content_words",
			"iter_words",
			"summary",
			"text",
			"LOCATION",
			"nearest_loc",
			"dist_from_loc",
			"distance_from_loc",
			"collect",
			"keep_non",
			"if keep_",
			"json",
			"lexicon.json",
			"lexicon.db",
			"osm_id",
			"def _alias_input",
			"def alias_input",
			"alias_input",
			"set_entity",
			"build_lss_events",
			"def build",
			"extract_callback",
			"role_candidate",
			"role_",
			"overlap",
			"word matches",
			"word_matches",
			"compute",
			"build_",
			"phrases",
			"from phrases",
			"like = ",
			"strip",
			"strip()",
			"text =",
			"root",
			"current_root",
			"copied",
			"war_lexicon.json",
			"war_lexicon.jsonl",
			"menu",
			"meta",
			"osmium.",
			"on_open_dom",
			"def load_posts",
			"def _load_sources",
			"on_extract_clicked",
			"extract_button",
			"print",
			"if not _matches",
			"#if not _matches_phrase_filter(text_orig):\n    #continue",
			"if not _matches_phrase_filter(text_orig):\n    continue",
			"if not _pass",
			"if not",
			"load_dotenv",
			"direction",
			"id ",
			"direction",
			"region_osm",
			", ",
			"region",
			"from sitrepc2.nlp.",
			"search",
			"decode",
			"Chervona Sloboda",
			"Sloboda",
			"Q33345",
			"27212295",
			"Q33345",
			"Severodonetsk",
			"Q33349",
			"orikhiv",
			"orikhov",
			"590847913708267500",
			"myrne",
			"petrovskoye",
			"makiyivka",
			"",
			"lusychansk",
			"lusichansk",
			"lusychansk",
			"makiivka",
			"makiyivka",
			"Opytne",
			"Q4391252",
			"Q4391253",
			"Q4391252",
			"q4325070",
			"Q4325070",
			"novoprokopovka",
			"Q4125689",
			"vornivka",
			"voroni",
			"voroneve",
			"",
			"stativka",
			"Q4183525",
			"Q4183527"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
			"phrase_matches(",
			"PhraseMatch",
			"_location_ws",
			"dist_from_front",
			"distance_from_front",
			",",
			"from sitrepc2.lss",
			"region",
			"register_search_phrases",
			"events",
			"Event",
			"Location",
			"EventMatch",
			"WordMatch",
			"GAZ_GROUPS",
			"",
			"Location",
			"EventMatch",
			"LocaleCandidate",
			"List"
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": false,
		"use_gitignore": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"file": "src/sitrepc2/lss/lss_scoping.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 13371,
						"regions":
						{
						},
						"selection":
						[
							[
								12763,
								12763
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 5558.0,
						"zoom_level": 1.0
					},
					"stack_index": 7,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "src/sitrepc2/lss/pipeline.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9780,
						"regions":
						{
						},
						"selection":
						[
							[
								3216,
								3216
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1306.0,
						"zoom_level": 1.0
					},
					"stack_index": 6,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 2,
					"file": "src/sitrepc2/dom/dom_ingest.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 9676,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 5,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "src/sitrepc2/lss/phrases.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 1698,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								1698
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 281.0,
						"zoom_level": 1.0
					},
					"stack_index": 8,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "src/sitrepc2/dom/dom_builder.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6447,
						"regions":
						{
						},
						"selection":
						[
							[
								0,
								0
							]
						],
						"settings":
						{
							"auto_name": "from __future__ import annotations",
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2675.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "src/sitrepc2/gazetteer/alias_service.py",
					"semi_transient": true,
					"settings":
					{
						"buffer_size": 4242,
						"regions":
						{
						},
						"selection":
						[
							[
								854,
								854
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 346.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 6,
					"file": "src/sitrepc2/dom/dom_enrichment.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 6106,
						"regions":
						{
						},
						"selection":
						[
							[
								5310,
								5310
							]
						],
						"settings":
						{
							"auto_name": "# src/sitrepc2/dom/dom_enrichment.py",
							"incomplete_sync": null,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2758.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 7,
					"file": "src/sitrepc2/dom/dom_context_attach.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4633,
						"regions":
						{
						},
						"selection":
						[
							[
								3665,
								3665
							]
						],
						"settings":
						{
							"auto_name": "# src/sitrepc2/dom/dom_context_attach.py",
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1722.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 8,
					"file": "src/sitrepc2/dom/dom_location_enrich.py",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3928,
						"regions":
						{
						},
						"selection":
						[
							[
								2914,
								2914
							]
						],
						"settings":
						{
							"auto_name": "# src/sitrepc2/dom/dom_location_enrich.py",
							"incomplete_sync": null,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1639.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 9,
					"file": "src/sitrepc2/cli/lss_cmd.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 13754,
						"regions":
						{
						},
						"selection":
						[
							[
								2236,
								2236
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1064.0,
						"zoom_level": 1.0
					},
					"stack_index": 9,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 10,
					"file": "src/sitrepc2/cli/fetch_cmd.py",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2118,
						"regions":
						{
						},
						"selection":
						[
							[
								1061,
								1061
							]
						],
						"settings":
						{
							"incomplete_sync": null,
							"remote_loading": false,
							"synced": false,
							"syntax": "Packages/Python/Python.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 533.0,
						"zoom_level": 1.0
					},
					"stack_index": 10,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 23.0
	},
	"input":
	{
		"height": 44.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.SFTP":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"output.find_results":
	{
		"height": 160.0,
		"history":
		[
		]
	},
	"pinned_build_system": "",
	"project": "sitrepc2.sublime-project",
	"replace":
	{
		"height": 68.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"",
				"utils/units/unit_str.py"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 255.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 592.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": false,
	"show_open_files": true,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 205.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
